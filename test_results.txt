========================================
Test Results - 2025-12-21 21:27:59
========================================
Environment Configuration:
  EMBEDDING_MODEL_NAME: Xenova/all-MiniLM-L6-v2
  EMBEDDING_MODEL_PATH: models/embeddings
  LM_STUDIO_BASE_URL: http://192.168.56.1:1234/v1
  LM_STUDIO_MODEL: phi-4-mini-instruct

Command: pytest tests/integration/gui/test_end_to_end_workflow.py tests/integration/gui/test_gui_launch.py
========================================

============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.1, pluggy-1.6.0 -- /mnt/MCPProyects/ragTools/venv/bin/python3
cachedir: .pytest_cache
rootdir: /mnt/MCPProyects/ragTools
configfile: pytest.ini (WARNING: ignoring pytest config in pyproject.toml!)
plugins: anyio-4.12.0, cov-7.0.0, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 16 items

tests/integration/gui/test_end_to_end_workflow.py::TestGUILaunch::test_gui_launches_successfully PASSED [  6%]
tests/integration/gui/test_end_to_end_workflow.py::TestGUILaunch::test_gui_initializes_components PASSED [ 12%]
tests/integration/gui/test_end_to_end_workflow.py::TestStrategyLoading::test_strategy_loading_workflow FAILED [ 18%]
tests/integration/gui/test_end_to_end_workflow.py::TestEndToEndWorkflow::test_indexing_workflow PASSED [ 25%]
tests/integration/gui/test_end_to_end_workflow.py::TestEndToEndWorkflow::test_retrieval_workflow PASSED [ 31%]
tests/integration/gui/test_end_to_end_workflow.py::TestThreadingSafety::test_concurrent_operations PASSED [ 37%]
tests/integration/gui/test_end_to_end_workflow.py::TestUtilityOperations::test_clear_data_workflow PASSED [ 43%]
tests/integration/gui/test_end_to_end_workflow.py::TestUtilityOperations::test_log_viewing_workflow PASSED [ 50%]
tests/integration/gui/test_gui_launch.py::TestGUILaunch::test_gui_launches_without_error PASSED [ 56%]
tests/integration/gui/test_gui_launch.py::TestGUILaunch::test_gui_window_properties FAILED [ 62%]
tests/integration/gui/test_gui_launch.py::TestGUILaunch::test_gui_loads_strategies PASSED [ 68%]
tests/integration/gui/test_gui_launch.py::TestGUILaunch::test_gui_handles_missing_strategies_dir PASSED [ 75%]
tests/integration/gui/test_gui_launch.py::TestGUIShutdown::test_gui_closes_cleanly ERROR [ 81%]
tests/integration/gui/test_gui_launch.py::TestGUIShutdown::test_gui_on_close_handler ERROR [ 87%]
tests/integration/gui/test_gui_launch.py::TestGUICLIIntegration::test_gui_command_initializes_services FAILED [ 93%]
tests/integration/gui/test_gui_launch.py::TestGUIStateManagement::test_gui_maintains_state_during_operations ERROR [100%]/mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/coverage/report_core.py:107: CoverageWarning: Couldn't parse Python file '/mnt/MCPProyects/ragTools/rag_factory/gui/main_window_additions.py' (couldnt-parse); see https://coverage.readthedocs.io/en/7.12.0/messages.html#warning-couldnt-parse
  coverage._warn(msg, slug="couldnt-parse")


==================================== ERRORS ====================================
__________ ERROR at setup of TestGUIShutdown.test_gui_closes_cleanly ___________
file /mnt/MCPProyects/ragTools/tests/integration/gui/test_gui_launch.py, line 158
      def test_gui_closes_cleanly(self, mock_strategy_manager, tmp_path):
E       fixture 'mock_strategy_manager' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, clean_database, cloud_llm_service, cov, db_config, db_connection, db_engine, db_service, db_session, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, llm_service_from_env, mock_database_service, mock_embedding_service, mock_embedding_service_768, mock_llm_service, mock_migration_validator, mock_neo4j_service, mock_onnx_env, mock_registry_with_graph_services, mock_registry_with_llm_services, mock_registry_with_reranker_services, mock_registry_with_services, monkeypatch, no_cover, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, temp_config_files, test_db_config, test_db_url, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/mnt/MCPProyects/ragTools/tests/integration/gui/test_gui_launch.py:158
_________ ERROR at setup of TestGUIShutdown.test_gui_on_close_handler __________
file /mnt/MCPProyects/ragTools/tests/integration/gui/test_gui_launch.py, line 182
      def test_gui_on_close_handler(self, mock_strategy_manager, tmp_path):
E       fixture 'mock_strategy_manager' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, clean_database, cloud_llm_service, cov, db_config, db_connection, db_engine, db_service, db_session, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, llm_service_from_env, mock_database_service, mock_embedding_service, mock_embedding_service_768, mock_llm_service, mock_migration_validator, mock_neo4j_service, mock_onnx_env, mock_registry_with_graph_services, mock_registry_with_llm_services, mock_registry_with_reranker_services, mock_registry_with_services, monkeypatch, no_cover, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, temp_config_files, test_db_config, test_db_url, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/mnt/MCPProyects/ragTools/tests/integration/gui/test_gui_launch.py:182
_ ERROR at setup of TestGUIStateManagement.test_gui_maintains_state_during_operations _
file /mnt/MCPProyects/ragTools/tests/integration/gui/test_gui_launch.py, line 237
      def test_gui_maintains_state_during_operations(self, mock_strategy_manager, tmp_path):
E       fixture 'mock_strategy_manager' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, clean_database, cloud_llm_service, cov, db_config, db_connection, db_engine, db_service, db_session, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, llm_service_from_env, mock_database_service, mock_embedding_service, mock_embedding_service_768, mock_llm_service, mock_migration_validator, mock_neo4j_service, mock_onnx_env, mock_registry_with_graph_services, mock_registry_with_llm_services, mock_registry_with_reranker_services, mock_registry_with_services, monkeypatch, no_cover, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, temp_config_files, test_db_config, test_db_url, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/mnt/MCPProyects/ragTools/tests/integration/gui/test_gui_launch.py:237
=================================== FAILURES ===================================
______________ TestStrategyLoading.test_strategy_loading_workflow ______________

self = <tests.integration.gui.test_end_to_end_workflow.TestStrategyLoading object at 0x7f57f8007e90>
temp_config_files = {'alembic_config': '/tmp/pytest-of-admindevmac/pytest-40/test_strategy_loading_workflow0/alembic.ini', 'config_path': ...ig/services.yaml', 'strategies_dir': '/tmp/pytest-of-admindevmac/pytest-40/test_strategy_loading_workflow0/strategies'}

    def test_strategy_loading_workflow(self, temp_config_files):
        """Test complete strategy loading workflow."""
        with patch('rag_factory.gui.main_window.ServiceRegistry') as mock_registry_class, \
             patch('rag_factory.gui.main_window.StrategyPairManager') as mock_manager_class:
    
            mock_registry = Mock()
            mock_registry.list_services.return_value = ["db_main"]
            mock_registry.get.return_value = Mock()
            mock_registry_class.return_value = mock_registry
    
            mock_manager = Mock()
            mock_manager.list_available_pairs.return_value = ["test-strategy"]
    
            # Mock load_pair to return mock strategies
            mock_indexing = Mock()
            mock_retrieval = Mock()
            mock_manager.load_pair.return_value = (mock_indexing, mock_retrieval)
    
            mock_manager_class.return_value = mock_manager
    
            app = RAGFactoryGUI(**temp_config_files)
    
            # Simulate strategy selection
>           app._load_strategy("test-strategy")
            ^^^^^^^^^^^^^^^^^^
E           AttributeError: 'RAGFactoryGUI' object has no attribute '_load_strategy'. Did you mean: '_load_strategy_list'?

tests/integration/gui/test_end_to_end_workflow.py:119: AttributeError
----------------------------- Captured stderr call -----------------------------
INFO:rag_factory.gui.main_window:GUI log capture initialized
INFO:rag_factory.gui.main_window:Initializing ServiceRegistry from /tmp/pytest-of-admindevmac/pytest-40/test_strategy_loading_workflow0/config/services.yaml
INFO:rag_factory.gui.main_window:All required services available: ['db_main']
INFO:rag_factory.gui.main_window:Initializing StrategyPairManager
INFO:rag_factory.gui.main_window:Backend initialization complete
------------------------------ Captured log call -------------------------------
INFO     rag_factory.gui.main_window:main_window.py:339 GUI log capture initialized
INFO     rag_factory.gui.main_window:main_window.py:363 Initializing ServiceRegistry from /tmp/pytest-of-admindevmac/pytest-40/test_strategy_loading_workflow0/config/services.yaml
INFO     rag_factory.gui.main_window:main_window.py:439 All required services available: ['db_main']
INFO     rag_factory.gui.main_window:main_window.py:383 Initializing StrategyPairManager
INFO     rag_factory.gui.main_window:main_window.py:402 Backend initialization complete
___________________ TestGUILaunch.test_gui_window_properties ___________________

self = <tests.integration.gui.test_gui_launch.TestGUILaunch object at 0x7f57f8045dc0>
mock_registry_class = <MagicMock name='ServiceRegistry' id='140015775481728'>
mock_manager_class = <MagicMock name='StrategyPairManager' id='140015775475008'>
temp_config_files = {'alembic_config': '/tmp/pytest-of-admindevmac/pytest-40/test_gui_window_properties0/alembic.ini', 'config_path': '/tm...config/services.yaml', 'strategies_dir': '/tmp/pytest-of-admindevmac/pytest-40/test_gui_window_properties0/strategies'}

    @patch('rag_factory.gui.main_window.StrategyPairManager')
    @patch('rag_factory.gui.main_window.ServiceRegistry')
    def test_gui_window_properties(self, mock_registry_class, mock_manager_class, temp_config_files):
        """Test GUI window has correct properties after launch."""
        # Setup mocks
        mock_registry = Mock()
        mock_registry.list_services.return_value = ["db_main"]
        mock_registry_class.return_value = mock_registry
    
        mock_manager = Mock()
        mock_manager_class.return_value = mock_manager
    
        # Launch GUI
        app = RAGFactoryGUI(**temp_config_files)
    
        # Force update to get actual dimensions
        app.root.update()
    
        # Verify properties
        assert app.root.title() == "RAG Factory - Strategy Pair Tester"
>       assert app.root.minsize() == (800, 600)
E       AssertionError: assert (900, 600) == (800, 600)
E         
E         At index 0 diff: 900 != 800
E         
E         Full diff:
E           (
E         -     800,
E         ?     ^...
E         
E         ...Full output truncated (4 lines hidden), use '-vv' to show

tests/integration/gui/test_gui_launch.py:94: AssertionError
----------------------------- Captured stderr call -----------------------------
INFO:rag_factory.gui.main_window:GUI log capture initialized
INFO:rag_factory.gui.main_window:Initializing ServiceRegistry from /tmp/pytest-of-admindevmac/pytest-40/test_gui_window_properties0/config/services.yaml
INFO:rag_factory.gui.main_window:All required services available: ['db_main']
INFO:rag_factory.gui.main_window:Initializing StrategyPairManager
INFO:rag_factory.gui.main_window:Backend initialization complete
invalid command name "140015799702400update"
    while executing
"140015799702400update"
    ("after" script)
invalid command name "140015775148544update"
    while executing
"140015775148544update"
    ("after" script)
------------------------------ Captured log call -------------------------------
INFO     rag_factory.gui.main_window:main_window.py:339 GUI log capture initialized
INFO     rag_factory.gui.main_window:main_window.py:363 Initializing ServiceRegistry from /tmp/pytest-of-admindevmac/pytest-40/test_gui_window_properties0/config/services.yaml
INFO     rag_factory.gui.main_window:main_window.py:439 All required services available: ['db_main']
INFO     rag_factory.gui.main_window:main_window.py:383 Initializing StrategyPairManager
INFO     rag_factory.gui.main_window:main_window.py:402 Backend initialization complete
_________ TestGUICLIIntegration.test_gui_command_initializes_services __________

args = (<tests.integration.gui.test_gui_launch.TestGUICLIIntegration object at 0x7f57f80469f0>,)
keywargs = {'tmp_path': PosixPath('/tmp/pytest-of-admindevmac/pytest-40/test_gui_command_initializes_s0')}

    @wraps(func)
    def patched(*args, **keywargs):
>       with self.decoration_helper(patched,
                                    args,
                                    keywargs) as (newargs, newkeywargs):

/usr/lib/python3.12/unittest/mock.py:1387: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/usr/lib/python3.12/contextlib.py:137: in __enter__
    return next(self.gen)
           ^^^^^^^^^^^^^^
/usr/lib/python3.12/unittest/mock.py:1369: in decoration_helper
    arg = exit_stack.enter_context(patching)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.12/contextlib.py:526: in enter_context
    result = _enter(cm)
             ^^^^^^^^^^
/usr/lib/python3.12/unittest/mock.py:1458: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <unittest.mock._patch object at 0x7f57f8045490>

    def get_original(self):
        target = self.getter()
        name = self.attribute
    
        original = DEFAULT
        local = False
    
        try:
            original = target.__dict__[name]
        except (AttributeError, KeyError):
            original = getattr(target, name, DEFAULT)
        else:
            local = True
    
        if name in _builtins and isinstance(target, ModuleType):
            self.create = True
    
        if not self.create and original is DEFAULT:
>           raise AttributeError(
                "%s does not have the attribute %r" % (target, name)
            )
E           AttributeError: <module 'rag_factory.cli.commands.gui' from '/mnt/MCPProyects/ragTools/rag_factory/cli/commands/gui.py'> does not have the attribute 'StrategyPairManager'

/usr/lib/python3.12/unittest/mock.py:1431: AttributeError
=============================== warnings summary ===============================
rag_factory/services/llm/config.py:8
  /mnt/MCPProyects/ragTools/rag_factory/services/llm/config.py:8: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class LLMServiceConfig(BaseModel):

rag_factory/database/config.py:12
  /mnt/MCPProyects/ragTools/rag_factory/database/config.py:12: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DatabaseConfig(BaseSettings):

rag_factory/strategies/agentic/config.py:9
  /mnt/MCPProyects/ragTools/rag_factory/strategies/agentic/config.py:9: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class AgenticStrategyConfig(BaseModel):

rag_factory/strategies/late_chunking/models.py:21
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:21: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class TokenEmbedding(BaseModel):

rag_factory/strategies/late_chunking/models.py:34
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:34: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DocumentEmbedding(BaseModel):

rag_factory/strategies/late_chunking/models.py:49
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:49: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class EmbeddingChunk(BaseModel):

rag_factory/strategies/contextual/config.py:31
  /mnt/MCPProyects/ragTools/rag_factory/strategies/contextual/config.py:31: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ContextualRetrievalConfig(BaseModel):

rag_factory/strategies/fine_tuned/config.py:6
  /mnt/MCPProyects/ragTools/rag_factory/strategies/fine_tuned/config.py:6: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class FineTunedConfig(BaseSettings):

tests/integration/gui/test_end_to_end_workflow.py::TestStrategyLoading::test_strategy_loading_workflow
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-2 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 774, in load_strategy
      indexing, retrieval = self.strategy_manager.load_pair(strategy_name)
      ^^^^^^^^^^^^^^^^^^^
  TypeError: cannot unpack non-iterable Mock object
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 798, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/integration/gui/test_end_to_end_workflow.py::TestStrategyLoading::test_strategy_loading_workflow
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-1 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 774, in load_strategy
      indexing, retrieval = self.strategy_manager.load_pair(strategy_name)
      ^^^^^^^^^^^^^^^^^^^
  TypeError: cannot unpack non-iterable Mock object
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 798, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/integration/gui/test_end_to_end_workflow.py::TestEndToEndWorkflow::test_indexing_workflow
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-4 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 774, in load_strategy
      indexing, retrieval = self.strategy_manager.load_pair(strategy_name)
      ^^^^^^^^^^^^^^^^^^^
  TypeError: cannot unpack non-iterable Mock object
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 798, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/integration/gui/test_end_to_end_workflow.py::TestEndToEndWorkflow::test_indexing_workflow
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-3 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 782, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 798, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/integration/gui/test_end_to_end_workflow.py::TestEndToEndWorkflow::test_retrieval_workflow
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-5 (index_operation)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 970, in index_operation
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 980, in index_operation
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/integration/gui/test_end_to_end_workflow.py::TestThreadingSafety::test_concurrent_operations
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-7 (retrieve_operation)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 1164, in retrieve_operation
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 1174, in retrieve_operation
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/integration/gui/test_end_to_end_workflow.py::TestThreadingSafety::test_concurrent_operations
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-6 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 774, in load_strategy
      indexing, retrieval = self.strategy_manager.load_pair(strategy_name)
      ^^^^^^^^^^^^^^^^^^^
  TypeError: cannot unpack non-iterable Mock object
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 798, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/integration/gui/test_end_to_end_workflow.py::TestUtilityOperations::test_clear_data_workflow
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-9 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 774, in load_strategy
      indexing, retrieval = self.strategy_manager.load_pair(strategy_name)
      ^^^^^^^^^^^^^^^^^^^
  TypeError: cannot unpack non-iterable Mock object
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 798, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/integration/gui/test_end_to_end_workflow.py::TestUtilityOperations::test_clear_data_workflow
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-8 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 774, in load_strategy
      indexing, retrieval = self.strategy_manager.load_pair(strategy_name)
      ^^^^^^^^^^^^^^^^^^^
  TypeError: cannot unpack non-iterable Mock object
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 798, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/integration/gui/test_gui_launch.py::TestGUILaunch::test_gui_window_properties
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-10 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 774, in load_strategy
      indexing, retrieval = self.strategy_manager.load_pair(strategy_name)
      ^^^^^^^^^^^^^^^^^^^
  TypeError: cannot unpack non-iterable Mock object
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 798, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/integration/gui/test_gui_launch.py::TestGUILaunch::test_gui_loads_strategies
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-11 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 774, in load_strategy
      indexing, retrieval = self.strategy_manager.load_pair(strategy_name)
      ^^^^^^^^^^^^^^^^^^^
  TypeError: cannot unpack non-iterable Mock object
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 798, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/integration/gui/test_gui_launch.py::TestGUILaunch::test_gui_handles_missing_strategies_dir
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-13 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 774, in load_strategy
      indexing, retrieval = self.strategy_manager.load_pair(strategy_name)
      ^^^^^^^^^^^^^^^^^^^
  TypeError: cannot unpack non-iterable Mock object
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 798, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/integration/gui/test_gui_launch.py::TestGUILaunch::test_gui_handles_missing_strategies_dir
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-12 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 774, in load_strategy
      indexing, retrieval = self.strategy_manager.load_pair(strategy_name)
      ^^^^^^^^^^^^^^^^^^^
  TypeError: cannot unpack non-iterable Mock object
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 798, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.3-final-0 ________________

Name                                                               Stmts   Miss  Cover   Missing
------------------------------------------------------------------------------------------------
rag_factory/__init__.py                                                7      2    71%   18-19
rag_factory/__version__.py                                             1      0   100%
rag_factory/cli/__init__.py                                            2      0   100%
rag_factory/cli/commands/__init__.py                                   1      0   100%
rag_factory/cli/commands/benchmark.py                                 96     81    16%   40-53, 64-84, 148-263
rag_factory/cli/commands/check_consistency.py                         43     33    23%   64-120
rag_factory/cli/commands/config.py                                    78     68    13%   26-64, 102-188
rag_factory/cli/commands/gui.py                                       25     17    32%   61-91
rag_factory/cli/commands/index.py                                     65     52    20%   29-39, 93-185
rag_factory/cli/commands/query.py                                     47     36    23%   73-149
rag_factory/cli/commands/repl.py                                     152    130    14%   29-56, 63-108, 112-120, 124-133, 137-155, 159-172, 176-186, 190-207, 211-220, 253-260
rag_factory/cli/commands/strategies.py                                45     36    20%   48-120
rag_factory/cli/commands/validate_e2e.py                              91     69    24%   37-38, 42-142, 145-156
rag_factory/cli/commands/validate_pipeline.py                         70     57    19%   57-156
rag_factory/cli/formatters/__init__.py                                 4      0   100%
rag_factory/cli/formatters/consistency.py                             61     55    10%   21-69, 79-103, 108-138
rag_factory/cli/formatters/output.py                                  20      9    55%   23-24, 43-44, 63-64, 74, 79, 84
rag_factory/cli/formatters/results.py                                 71     62    13%   28-55, 72-99, 116-144, 157-181
rag_factory/cli/formatters/validation.py                              63     53    16%   25-43, 48-56, 65-77, 86-98, 103-129, 134-137
rag_factory/cli/main.py                                               32     10    69%   25-28, 48-49, 79-81, 85
rag_factory/cli/utils/__init__.py                                      3      0   100%
rag_factory/cli/utils/progress.py                                     14      8    43%   34-47, 73-76
rag_factory/cli/utils/validation.py                                   53     42    21%   30-41, 57-77, 93-118, 135
rag_factory/config/__init__.py                                         4      0   100%
rag_factory/config/env_resolver.py                                    52     37    29%   47-54, 70-90, 110, 129-147
rag_factory/config/schemas/__init__.py                                 2      0   100%
rag_factory/config/schemas/version.py                                 10      6    40%   29-38
rag_factory/config/strategy_loader.py                                 54     36    33%   32-41, 45-60, 75-89, 101-104
rag_factory/config/strategy_pair_manager.py                          105     83    21%   40-72, 92-132, 148-198, 210-215, 229, 259-282
rag_factory/config/validator.py                                       93     76    18%   27-30, 34-39, 53-58, 62-74, 111-132, 177-198, 215-235, 247-249, 271-295, 333-354
rag_factory/core/__init__.py                                           4      4     0%   7-23
rag_factory/core/capabilities.py                                      61     16    74%   129, 155, 173-174, 239-253
rag_factory/core/indexing_interface.py                                54     32    41%   118-123, 144, 164, 208, 260, 272, 292-313, 341-364
rag_factory/core/pipeline.py                                          49     35    29%   22-24, 33-40, 55-77, 95-96, 105-108, 117-120, 137-146
rag_factory/core/retrieval_interface.py                               38     17    55%   112-117, 138, 158, 196, 247, 259, 285-309
rag_factory/database/__init__.py                                       4      0   100%
rag_factory/database/config.py                                        17      0   100%
rag_factory/database/connection.py                                    80     54    32%   40-48, 61-86, 96, 107, 126-137, 150-157, 165-170, 178-183, 196-197, 209-214, 218, 222
rag_factory/database/env_validator.py                                 38     38     0%   7-139
rag_factory/database/models.py                                        85     32    62%   31-34, 37-45, 48-54, 66-69, 72-77, 80-85, 181, 323-325
rag_factory/database/vector_indexing.py                               38     38     0%   7-114
rag_factory/evaluation/__init__.py                                     4      4     0%   29-41
rag_factory/evaluation/analysis/__init__.py                            3      3     0%   8-11
rag_factory/evaluation/analysis/comparison.py                        135    135     0%   8-323
rag_factory/evaluation/analysis/statistics.py                         81     81     0%   8-320
rag_factory/evaluation/benchmarks/__init__.py                          3      3     0%   8-14
rag_factory/evaluation/benchmarks/config.py                           25     25     0%   7-64
rag_factory/evaluation/benchmarks/runner.py                          155    155     0%   8-423
rag_factory/evaluation/datasets/__init__.py                            3      3     0%   8-14
rag_factory/evaluation/datasets/loader.py                             88     88     0%   8-281
rag_factory/evaluation/datasets/schema.py                             52     52     0%   8-160
rag_factory/evaluation/datasets/statistics.py                         65     65     0%   8-226
rag_factory/evaluation/exporters/__init__.py                           4      4     0%   8-12
rag_factory/evaluation/exporters/csv_exporter.py                      52     52     0%   3-124
rag_factory/evaluation/exporters/html_exporter.py                     47     47     0%   3-293
rag_factory/evaluation/exporters/json_exporter.py                     19     19     0%   3-68
rag_factory/evaluation/metrics/__init__.py                             3      3     0%   12-25
rag_factory/evaluation/metrics/base.py                                31     31     0%   8-115
rag_factory/evaluation/metrics/cost.py                                65     65     0%   8-313
rag_factory/evaluation/metrics/performance.py                         42     42     0%   8-202
rag_factory/evaluation/metrics/quality.py                             84     84     0%   8-377
rag_factory/evaluation/metrics/retrieval.py                           77     77     0%   9-401
rag_factory/exceptions.py                                             13      0   100%
rag_factory/factory.py                                               187    137    27%   109-116, 144, 165-170, 202-230, 256-270, 300-324, 347-348, 365, 384, 401, 418, 435, 451-460, 480-502, 528-545, 568-611, 644-699, 703-715
rag_factory/gui/__init__.py                                            2      0   100%
rag_factory/gui/components/__init__.py                                 3      0   100%
rag_factory/gui/components/scrolled_text.py                           64     14    78%   89, 151-164, 190-192, 195-196
rag_factory/gui/components/status_bar.py                              62      5    92%   125, 161, 177-180
rag_factory/gui/main_window.py                                       712    299    58%   76-77, 137-164, 205-263, 314-316, 351-359, 367-375, 379, 391-399, 404-408, 417, 429-437, 713-714, 732-739, 749-750, 754-756, 766, 792, 824-835, 844-876, 903-913, 919, 943, 992-1080, 1090-1092, 1100-1102, 1108, 1113-1114, 1129, 1150, 1154, 1196, 1215-1220, 1225-1230, 1236-1239, 1243, 1262-1264, 1272-1276, 1281-1282, 1333-1337, 1361-1363, 1393-1412, 1416, 1429-1505, 1509-1567, 1572-1589, 1593-1600, 1605-1618, 1623-1632, 1636
rag_factory/gui/utils/__init__.py                                      3      0   100%
rag_factory/gui/utils/formatters.py                                   57     49    14%   27-30, 50-90, 110-118, 134-137, 155-165
rag_factory/gui/utils/threading.py                                    32     23    28%   44-73, 97, 124-129
rag_factory/legacy_config.py                                         155    155     0%   22-542
rag_factory/models/__init__.py                                         6      6     0%   3-14
rag_factory/models/embedding/__init__.py                               4      4     0%   3-12
rag_factory/models/embedding/loader.py                               179    179     0%   3-367
rag_factory/models/embedding/models.py                                47     47     0%   3-106
rag_factory/models/embedding/registry.py                             128    128     0%   3-282
rag_factory/models/evaluation/__init__.py                              3      3     0%   3-6
rag_factory/models/evaluation/ab_testing.py                           98     98     0%   3-281
rag_factory/models/evaluation/models.py                               29     29     0%   3-74
rag_factory/observability/__init__.py                                  3      3     0%   3-10
rag_factory/observability/integrations/__init__.py                     1      1     0%   3
rag_factory/observability/integrations/prometheus.py                  47     47     0%   3-229
rag_factory/observability/logging/__init__.py                          2      2     0%   3-5
rag_factory/observability/logging/config.py                           16     16     0%   3-37
rag_factory/observability/logging/filters.py                          41     41     0%   3-103
rag_factory/observability/logging/logger.py                           86     86     0%   3-396
rag_factory/observability/metrics/__init__.py                          2      2     0%   3-9
rag_factory/observability/metrics/collector.py                       143    143     0%   3-459
rag_factory/observability/metrics/cost.py                             39     39     0%   3-221
rag_factory/observability/metrics/performance.py                      64     64     0%   3-196
rag_factory/observability/monitoring/__init__.py                       1      1     0%   3
rag_factory/observability/monitoring/api.py                          101    101     0%   3-328
rag_factory/pipeline.py                                              156    156     0%   34-507
rag_factory/registry/__init__.py                                       4      0   100%
rag_factory/registry/exceptions.py                                     6      0   100%
rag_factory/registry/service_factory.py                               84     69    18%   45-54, 62-65, 70-73, 78-80, 84-86, 95-127, 136-165, 176-215, 229-255
rag_factory/registry/service_registry.py                              91     71    22%   43-51, 55-85, 103-156, 164, 178-203, 210-223, 227, 231-232
rag_factory/repositories/__init__.py                                   5      0   100%
rag_factory/repositories/base.py                                      42     21    50%   38, 53, 70, 87, 103, 114-118, 125, 136-139, 159-164
rag_factory/repositories/chunk.py                                    206    180    13%   40-45, 68-76, 90-95, 120-133, 155-171, 187-202, 221-231, 250-261, 287-328, 355-396, 422-474, 489-499, 513-521, 537-543, 557-563, 577-587, 604-626, 639-670
rag_factory/repositories/document.py                                  93     74    20%   41-46, 63-68, 98-118, 140-156, 172-187, 206, 223-233, 247-255, 272-279, 290-293, 307-312
rag_factory/repositories/exceptions.py                                18      7    61%   34-36, 56-59
rag_factory/services/__init__.py                                       4      0   100%
rag_factory/services/api/__init__.py                                   4      4     0%   7-11
rag_factory/services/api/anthropic.py                                 27     27     0%   7-141
rag_factory/services/api/cohere.py                                    30     30     0%   7-113
rag_factory/services/api/openai.py                                    46     46     0%   7-235
rag_factory/services/consistency.py                                   32     24    25%   80-113, 144-170
rag_factory/services/database/__init__.py                              5      0   100%
rag_factory/services/database/database_context.py                    181    159    12%   58-64, 88-106, 123, 140-150, 179-200, 223-240, 256-266, 305-330, 338-339, 343-406, 414-415, 430-510, 516-517, 521-546
rag_factory/services/database/migration_validator.py                  96     74    23%   29-30, 61-69, 81-88, 109-131, 148-152, 163-192, 204-219, 230-237, 249, 261-271, 283-286
rag_factory/services/database/neo4j.py                                54     38    30%   15-17, 60-71, 79-84, 103-114, 134-150, 172-181, 188-191, 195, 199
rag_factory/services/database/postgres.py                            195    163    16%   17-18, 26-27, 84-121, 131-145, 149-201, 214-269, 292-346, 360-375, 390-414, 425-440, 472-490, 504-527, 532, 543, 580-598, 607-619, 623, 627
rag_factory/services/dependencies.py                                  41     21    49%   96-109, 134-140, 176-180
rag_factory/services/embedding/__init__.py                             4      0   100%
rag_factory/services/embedding/base.py                                31      6    81%   44, 59, 68, 77, 86, 98
rag_factory/services/embedding/cache.py                               43     33    23%   26-32, 43-58, 67-76, 80-82, 90-94
rag_factory/services/embedding/config.py                              29     13    55%   37-43, 50-68, 80
rag_factory/services/embedding/providers/__init__.py                   5      0   100%
rag_factory/services/embedding/providers/cohere.py                    53     36    32%   10-20, 55-75, 90-117, 125, 133, 141, 152-153
rag_factory/services/embedding/providers/local.py                     43     27    37%   8-9, 46-67, 83-109, 117, 125, 133, 146
rag_factory/services/embedding/providers/onnx_local.py               114     93    18%   18-19, 87-177, 193-250, 261-308, 319, 327, 335, 348
rag_factory/services/embedding/providers/openai.py                    51     34    33%   10-20, 53-72, 87-108, 116, 124, 132, 143-144
rag_factory/services/embedding/rate_limiter.py                        20     14    30%   27-37, 45-53
rag_factory/services/embedding/service.py                            100     83    17%   50-62, 79-93, 117-198, 220-222, 233-239, 248-266, 273-275
rag_factory/services/interfaces.py                                    35      0   100%
rag_factory/services/llm/__init__.py                                   5      0   100%
rag_factory/services/llm/base.py                                      43      0   100%
rag_factory/services/llm/config.py                                    23     11    52%   42-57
rag_factory/services/llm/prompt_template.py                           43     24    44%   47-82, 97-100, 111-115
rag_factory/services/llm/providers/__init__.py                        12     12     0%   5-22
rag_factory/services/llm/providers/anthropic.py                       57     57     0%   3-205
rag_factory/services/llm/providers/ollama.py                          55     55     0%   3-196
rag_factory/services/llm/providers/openai.py                          57     57     0%   3-210
rag_factory/services/llm/service.py                                   79     61    23%   33-40, 57-71, 94-130, 155-176, 187, 195-199, 216-217, 232-246, 259-272
rag_factory/services/llm/token_counter.py                             27     27     0%   3-72
rag_factory/services/local/__init__.py                                 2      2     0%   7-9
rag_factory/services/local/reranker.py                                32     32     0%   7-116
rag_factory/services/onnx/__init__.py                                  2      2     0%   7-9
rag_factory/services/onnx/embedding.py                                29     29     0%   7-129
rag_factory/services/utils/__init__.py                                 2      0   100%
rag_factory/services/utils/model_converter.py                        104    104     0%   8-291
rag_factory/services/utils/onnx_utils.py                             133    114    14%   22-23, 36-37, 67-123, 142-146, 172-218, 240-274, 291-312, 332-347, 360-378, 392-404
rag_factory/services/utils/reranker_selector.py                       68     68     0%   8-249
rag_factory/strategies/__init__.py                                     2      0   100%
rag_factory/strategies/agentic/__init__.py                             7      0   100%
rag_factory/strategies/agentic/agent.py                              151    130    14%   31-36, 45, 57, 66-90, 109-111, 123-161, 190-214, 230-265, 276-293, 310-331, 339-346, 357-368, 381-420
rag_factory/strategies/agentic/config.py                              12      0   100%
rag_factory/strategies/agentic/frameworks/__init__.py                  1      1     0%   9
rag_factory/strategies/agentic/query_analyzer.py                      89     65    27%   50-55, 67, 79-90, 109-125, 137-147, 159-178, 196-214, 225-260, 278
rag_factory/strategies/agentic/strategy.py                            87     60    31%   50-63, 76, 84, 94-132, 144, 156, 169, 182-222, 234-258, 267, 276, 284
rag_factory/strategies/agentic/tool_implementations.py               135     91    33%   36-37, 41, 45, 52, 86-129, 148-149, 153, 157, 164, 182-247, 266-267, 271, 275, 282, 329-373, 392-393, 397, 401, 407, 446-511
rag_factory/strategies/agentic/tools.py                               40      9    78%   66, 79, 89, 101, 112, 139-142
rag_factory/strategies/auto_register.py                               66     20    70%   13-14, 18-19, 23-24, 28-29, 33-34, 39-40, 46-47, 52-53, 58-59, 79-80
rag_factory/strategies/base.py                                        55     13    76%   80-85, 169-178
rag_factory/strategies/chunking/__init__.py                           15     15     0%   28-67
rag_factory/strategies/chunking/base.py                               91     91     0%   3-256
rag_factory/strategies/chunking/docling_chunker.py                    45     45     0%   13-188
rag_factory/strategies/chunking/fixed_size_chunker.py                 74     74     0%   3-204
rag_factory/strategies/chunking/hybrid_chunker.py                     70     70     0%   3-192
rag_factory/strategies/chunking/semantic_chunker.py                  195    195     0%   3-534
rag_factory/strategies/chunking/structural_chunker.py                147    147     0%   3-425
rag_factory/strategies/chunking/utils.py                              89     89     0%   3-264
rag_factory/strategies/contextual/__init__.py                          7      0   100%
rag_factory/strategies/contextual/batch_processor.py                  91     76    16%   41-43, 60-72, 84-90, 108-128, 145-161, 178-201, 218-266
rag_factory/strategies/contextual/config.py                           46      0   100%
rag_factory/strategies/contextual/context_generator.py                84     70    17%   35-36, 59-99, 112-135, 152-194, 209, 224-234
rag_factory/strategies/contextual/cost_tracker.py                     32     21    34%   31-35, 48-51, 69-82, 94-99, 111-114, 126
rag_factory/strategies/contextual/prompts.py                          25     17    32%   85-106, 119
rag_factory/strategies/contextual/storage.py                          44     35    20%   32-33, 42-45, 54-81, 98-118
rag_factory/strategies/contextual/strategy.py                         78     49    37%   54-67, 75, 83, 107-156, 173, 186, 207-215, 231-262, 278, 284, 289, 298
rag_factory/strategies/fine_tuned/__init__.py                          4      0   100%
rag_factory/strategies/fine_tuned/ab_testing.py                       78     78     0%   1-134
rag_factory/strategies/fine_tuned/config.py                           11      0   100%
rag_factory/strategies/fine_tuned/custom_loader.py                    40     28    30%   17-19, 36-73, 77, 84-88
rag_factory/strategies/fine_tuned/model_registry.py                  126     96    24%   39-50, 80-112, 132-149, 166-178, 182-196, 200-223, 227-240, 249-270, 274-287, 291-303
rag_factory/strategies/hierarchical/__init__.py                        5      5     0%   8-21
rag_factory/strategies/hierarchical/hierarchy_builder.py              79     79     0%   8-335
rag_factory/strategies/hierarchical/models.py                         58     58     0%   8-137
rag_factory/strategies/hierarchical/parent_retriever.py               89     89     0%   8-278
rag_factory/strategies/hierarchical/strategy.py                       76     76     0%   9-301
rag_factory/strategies/indexing/__init__.py                            6      0   100%
rag_factory/strategies/indexing/context_aware.py                     108     88    19%   31, 43, 63-134, 155-156, 160-170, 182-188, 192-198, 208-237, 241-242
rag_factory/strategies/indexing/hierarchical.py                       90     73    19%   50, 63, 88-134, 156-185, 201-236, 253-278, 292-293
rag_factory/strategies/indexing/in_memory.py                          41     25    39%   54, 65, 93-121, 143, 160, 173, 194-200
rag_factory/strategies/indexing/keyword_indexing.py                   42     31    26%   42, 53, 77-157
rag_factory/strategies/indexing/knowledge_graph_indexing.py           46     33    28%   18, 27, 48-89, 108-129
rag_factory/strategies/indexing/vector_embedding.py                   98     85    13%   25, 35, 55-116, 137-221
rag_factory/strategies/knowledge_graph/__init__.py                     4      4     0%   8-19
rag_factory/strategies/knowledge_graph/config.py                      21     21     0%   8-129
rag_factory/strategies/knowledge_graph/entity_extractor.py            70     70     0%   7-205
rag_factory/strategies/knowledge_graph/graph_store.py                 31     31     0%   8-124
rag_factory/strategies/knowledge_graph/hybrid_retriever.py            56     56     0%   8-164
rag_factory/strategies/knowledge_graph/memory_graph_store.py          97     97     0%   8-196
rag_factory/strategies/knowledge_graph/models.py                      53     53     0%   8-122
rag_factory/strategies/knowledge_graph/relationship_extractor.py      62     62     0%   8-189
rag_factory/strategies/knowledge_graph/strategy.py                    80     80     0%   8-256
rag_factory/strategies/late_chunking/__init__.py                       6      0   100%
rag_factory/strategies/late_chunking/coherence_analyzer.py            27     17    37%   20-21, 36-45, 57-65, 82-96
rag_factory/strategies/late_chunking/document_embedder.py            104     89    14%   29-74, 94-184, 202-215, 227-235, 256-279, 296-303, 318
rag_factory/strategies/late_chunking/embedding_chunker.py            117    102    13%   26, 41-61, 68-98, 105-155, 162-182, 191-192, 199-254, 265-289, 293-300
rag_factory/strategies/late_chunking/models.py                        62      0   100%
rag_factory/strategies/late_chunking/strategy.py                      70     46    34%   48-69, 77, 88, 107-122, 140-177, 196-205, 210, 215
rag_factory/strategies/multi_query/__init__.py                         7      7     0%   8-19
rag_factory/strategies/multi_query/config.py                          36     36     0%   3-138
rag_factory/strategies/multi_query/deduplicator.py                    87     87     0%   3-197
rag_factory/strategies/multi_query/parallel_executor.py               52     52     0%   3-163
rag_factory/strategies/multi_query/prompts.py                         10     10     0%   3-84
rag_factory/strategies/multi_query/ranker.py                          80     80     0%   3-201
rag_factory/strategies/multi_query/strategy.py                        68     68     0%   3-184
rag_factory/strategies/multi_query/variant_generator.py               62     62     0%   3-187
rag_factory/strategies/query_expansion/__init__.py                     8      0   100%
rag_factory/strategies/query_expansion/base.py                        66     10    85%   90, 103, 114-118, 130-133
rag_factory/strategies/query_expansion/cache.py                       52     40    23%   20-22, 38-55, 64-66, 70-73, 81-97, 105-112
rag_factory/strategies/query_expansion/expander_service.py            92     71    23%   36-40, 55-58, 75-148, 159-180, 204-215, 233-234, 242-246, 254, 265-273, 283-284
rag_factory/strategies/query_expansion/hyde_expander.py               19     12    37%   25-27, 41-65
rag_factory/strategies/query_expansion/llm_expander.py                25     16    36%   23-25, 39-71, 99
rag_factory/strategies/query_expansion/metrics.py                     66     30    55%   44-45, 53-57, 76-109, 130, 134, 146-152, 160
rag_factory/strategies/query_expansion/prompts.py                     13      7    46%   16, 28-56, 68-107
rag_factory/strategies/reranking/__init__.py                           7      0   100%
rag_factory/strategies/reranking/base.py                              68     16    76%   81, 101, 106, 110-119, 123-130
rag_factory/strategies/reranking/bge_reranker.py                      51     37    27%   14, 53-81, 103-147, 151
rag_factory/strategies/reranking/cache.py                             48     34    29%   32-34, 51-66, 76-77, 81, 90-101, 110-113, 121, 136-138
rag_factory/strategies/reranking/cohere_reranker.py                   34     20    41%   15-16, 55-71, 94-115, 119
rag_factory/strategies/reranking/cosine_reranker.py                   62     47    24%   54-72, 97-139, 158-171, 188, 209-215, 227-230, 242-245, 249
rag_factory/strategies/reranking/cross_encoder_reranker.py            40     27    32%   13-14, 53-76, 98-120, 124
rag_factory/strategies/reranking/metrics.py                           67     67     0%   8-264
rag_factory/strategies/reranking/reranker_service.py                 115     88    23%   56-67, 71-96, 113-225, 235-255, 269, 282-283, 287-292, 296-300, 308-310
rag_factory/strategies/retrieval/__init__.py                           6      0   100%
rag_factory/strategies/retrieval/hybrid_retriever.py                  51     37    27%   32, 39, 51-102, 110-144
rag_factory/strategies/retrieval/keyword_retriever.py                 56     41    27%   41, 52, 71-113, 126-133, 153-172
rag_factory/strategies/retrieval/knowledge_graph_retriever.py         22      9    59%   19, 27, 48-70
rag_factory/strategies/retrieval/multi_query_retriever.py             22      9    59%   19, 26, 44-66
rag_factory/strategies/retrieval/query_expansion_retriever.py         24      9    62%   20, 27, 45-67
rag_factory/strategies/retrieval/semantic_retriever.py                23     12    48%   23, 32, 61-94
rag_factory/strategies/self_reflective/__init__.py                     6      0   100%
rag_factory/strategies/self_reflective/config.py                      20      8    60%   29-42
rag_factory/strategies/self_reflective/grader.py                      80     65    19%   29-35, 51-67, 83-109, 135-171, 187-258, 266
rag_factory/strategies/self_reflective/models.py                      48      0   100%
rag_factory/strategies/self_reflective/refiner.py                     69     56    19%   28-30, 53-96, 113-143, 161-193, 208-228
rag_factory/strategies/self_reflective/strategy.py                    92     74    20%   38-53, 71-181, 192-206, 229-259, 264, 269
rag_factory/utils/__init__.py                                          3      0   100%
rag_factory/utils/token_counter.py                                    45     30    33%   36-40, 52-62, 74-82, 86, 90, 105-106, 124-135, 153-158
rag_factory/utils/tokenization.py                                     95     73    23%   36-40, 53-64, 87-114, 126-129, 141-144, 156, 175-190, 209-228, 241-243, 251-252, 270-271, 292-293, 314-315
------------------------------------------------------------------------------------------------
TOTAL                                                              13453  10544    22%
=========================== short test summary info ============================
FAILED tests/integration/gui/test_end_to_end_workflow.py::TestStrategyLoading::test_strategy_loading_workflow
FAILED tests/integration/gui/test_gui_launch.py::TestGUILaunch::test_gui_window_properties
FAILED tests/integration/gui/test_gui_launch.py::TestGUICLIIntegration::test_gui_command_initializes_services
ERROR tests/integration/gui/test_gui_launch.py::TestGUIShutdown::test_gui_closes_cleanly
ERROR tests/integration/gui/test_gui_launch.py::TestGUIShutdown::test_gui_on_close_handler
ERROR tests/integration/gui/test_gui_launch.py::TestGUIStateManagement::test_gui_maintains_state_during_operations
============= 3 failed, 10 passed, 21 warnings, 3 errors in 43.01s =============

========================================
Test run completed at 2025-12-21 21:29:11
========================================
