========================================
Test Results - 2025-12-18 12:42:03
========================================
Environment Configuration:
  EMBEDDING_MODEL_NAME: Xenova/all-MiniLM-L6-v2
  EMBEDDING_MODEL_PATH: models/embeddings
  LM_STUDIO_BASE_URL: http://192.168.56.1:1234/v1
  LM_STUDIO_MODEL: phi-4-mini-instruct

Command: pytest tests/unit/ -v
========================================

============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.1, pluggy-1.6.0 -- /mnt/MCPProyects/ragTools/venv/bin/python3
cachedir: .pytest_cache
rootdir: /mnt/MCPProyects/ragTools
configfile: pytest.ini (WARNING: ignoring pytest config in pyproject.toml!)
plugins: anyio-4.12.0, cov-7.0.0, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 1704 items

tests/unit/cli/test_benchmark_command.py::TestBenchmarkCommand::test_benchmark_default_strategies PASSED [  0%]
tests/unit/cli/test_benchmark_command.py::TestBenchmarkCommand::test_benchmark_specific_strategies PASSED [  0%]
tests/unit/cli/test_benchmark_command.py::TestBenchmarkCommand::test_benchmark_export_results PASSED [  0%]
tests/unit/cli/test_benchmark_command.py::TestBenchmarkCommand::test_benchmark_missing_dataset PASSED [  0%]
tests/unit/cli/test_benchmark_command.py::TestBenchmarkCommand::test_benchmark_missing_index PASSED [  0%]
tests/unit/cli/test_check_consistency_command.py::TestCheckConsistencyCommand::test_command_help PASSED [  0%]
tests/unit/cli/test_check_consistency_command.py::TestCheckConsistencyCommand::test_all_strategies_consistent PASSED [  0%]
tests/unit/cli/test_check_consistency_command.py::TestCheckConsistencyCommand::test_strategies_with_warnings PASSED [  0%]
tests/unit/cli/test_check_consistency_command.py::TestCheckConsistencyCommand::test_type_filter_indexing PASSED [  0%]
tests/unit/cli/test_check_consistency_command.py::TestCheckConsistencyCommand::test_type_filter_retrieval PASSED [  0%]
tests/unit/cli/test_check_consistency_command.py::TestCheckConsistencyCommand::test_invalid_type_filter PASSED [  0%]
tests/unit/cli/test_check_consistency_command.py::TestCheckConsistencyCommand::test_strategy_filter PASSED [  0%]
tests/unit/cli/test_check_consistency_command.py::TestCheckConsistencyCommand::test_verbose_mode PASSED [  0%]
tests/unit/cli/test_check_consistency_command.py::TestCheckConsistencyCommand::test_config_file_loading PASSED [  0%]
tests/unit/cli/test_check_consistency_command.py::TestCheckConsistencyCommand::test_system_error_returns_exit_code_1 PASSED [  0%]
tests/unit/cli/test_check_consistency_command.py::TestCheckConsistencyCommand::test_strategies_with_errors PASSED [  0%]
tests/unit/cli/test_config_validation_command.py::TestConfigValidationCommand::test_validate_valid_config PASSED [  0%]
tests/unit/cli/test_config_validation_command.py::TestConfigValidationCommand::test_validate_invalid_config_missing_field PASSED [  1%]
tests/unit/cli/test_config_validation_command.py::TestConfigValidationCommand::test_validate_invalid_config_values PASSED [  1%]
tests/unit/cli/test_config_validation_command.py::TestConfigValidationCommand::test_validate_config_warnings PASSED [  1%]
tests/unit/cli/test_config_validation_command.py::TestConfigValidationCommand::test_validate_config_strict_mode PASSED [  1%]
tests/unit/cli/test_config_validation_command.py::TestConfigValidationCommand::test_validate_show_config PASSED [  1%]
tests/unit/cli/test_consistency_formatter.py::TestConsistencyFormatter::test_format_empty_results PASSED [  1%]
tests/unit/cli/test_consistency_formatter.py::TestConsistencyFormatter::test_format_consistent_strategies PASSED [  1%]
tests/unit/cli/test_consistency_formatter.py::TestConsistencyFormatter::test_format_strategies_with_warnings PASSED [  1%]
tests/unit/cli/test_consistency_formatter.py::TestConsistencyFormatter::test_format_strategies_with_errors PASSED [  1%]
tests/unit/cli/test_consistency_formatter.py::TestConsistencyFormatter::test_grouping_by_type PASSED [  1%]
tests/unit/cli/test_consistency_formatter.py::TestConsistencyFormatter::test_verbose_mode PASSED [  1%]
tests/unit/cli/test_consistency_formatter.py::TestConsistencyFormatter::test_display_strategy_group PASSED [  1%]
tests/unit/cli/test_consistency_formatter.py::TestConsistencyFormatter::test_display_summary PASSED [  1%]
tests/unit/cli/test_consistency_formatter.py::TestConsistencyFormatter::test_warning_note_displayed PASSED [  1%]
tests/unit/cli/test_consistency_formatter.py::TestConsistencyFormatter::test_multiple_warnings_per_strategy PASSED [  1%]
tests/unit/cli/test_formatters.py::TestOutputFormatters::test_format_success PASSED [  1%]
tests/unit/cli/test_formatters.py::TestOutputFormatters::test_format_success_with_title PASSED [  1%]
tests/unit/cli/test_formatters.py::TestOutputFormatters::test_format_error PASSED [  2%]
tests/unit/cli/test_formatters.py::TestOutputFormatters::test_format_warning PASSED [  2%]
tests/unit/cli/test_formatters.py::TestQueryResultsFormatter::test_format_query_results_basic PASSED [  2%]
tests/unit/cli/test_formatters.py::TestQueryResultsFormatter::test_format_query_results_with_strategy PASSED [  2%]
tests/unit/cli/test_formatters.py::TestQueryResultsFormatter::test_format_empty_results PASSED [  2%]
tests/unit/cli/test_formatters.py::TestQueryResultsFormatter::test_format_results_with_long_text PASSED [  2%]
tests/unit/cli/test_formatters.py::TestStrategyListFormatter::test_format_strategy_list_basic PASSED [  2%]
tests/unit/cli/test_formatters.py::TestStrategyListFormatter::test_format_strategy_list_with_filter PASSED [  2%]
tests/unit/cli/test_formatters.py::TestStrategyListFormatter::test_format_empty_strategy_list PASSED [  2%]
tests/unit/cli/test_formatters.py::TestStrategyListFormatter::test_format_strategy_list_grouped_by_type PASSED [  2%]
tests/unit/cli/test_formatters.py::TestBenchmarkResultsFormatter::test_format_benchmark_results_basic PASSED [  2%]
tests/unit/cli/test_formatters.py::TestBenchmarkResultsFormatter::test_format_single_strategy_benchmark PASSED [  2%]
tests/unit/cli/test_formatters.py::TestBenchmarkResultsFormatter::test_format_empty_benchmark_results PASSED [  2%]
tests/unit/cli/test_formatters.py::TestStatisticsFormatter::test_format_statistics_basic PASSED [  2%]
tests/unit/cli/test_formatters.py::TestStatisticsFormatter::test_format_statistics_with_floats PASSED [  2%]
tests/unit/cli/test_formatters.py::TestStatisticsFormatter::test_format_empty_statistics PASSED [  2%]
tests/unit/cli/test_formatters.py::TestStatisticsFormatter::test_format_statistics_key_transformation PASSED [  2%]
tests/unit/cli/test_index_command.py::TestIndexCommand::test_index_success PASSED [  3%]
tests/unit/cli/test_index_command.py::TestIndexCommand::test_index_with_invalid_path PASSED [  3%]
tests/unit/cli/test_index_command.py::TestIndexCommand::test_index_no_documents_found PASSED [  3%]
tests/unit/cli/test_index_command.py::TestIndexCommand::test_index_with_config PASSED [  3%]
tests/unit/cli/test_index_command.py::TestIndexCommand::test_index_output_directory PASSED [  3%]
tests/unit/cli/test_list_strategies_command.py::TestListStrategiesCommand::test_list_all_strategies PASSED [  3%]
tests/unit/cli/test_list_strategies_command.py::TestListStrategiesCommand::test_list_strategies_empty PASSED [  3%]
tests/unit/cli/test_list_strategies_command.py::TestListStrategiesCommand::test_filter_strategies_by_type PASSED [  3%]
tests/unit/cli/test_list_strategies_command.py::TestListStrategiesCommand::test_filter_strategies_no_match PASSED [  3%]
tests/unit/cli/test_list_strategies_command.py::TestListStrategiesCommand::test_list_strategies_verbose PASSED [  3%]
tests/unit/cli/test_query_command.py::TestQueryCommand::test_query_success PASSED [  3%]
tests/unit/cli/test_query_command.py::TestQueryCommand::test_query_index_not_found PASSED [  3%]
tests/unit/cli/test_query_command.py::TestQueryCommand::test_query_with_config PASSED [  3%]
tests/unit/cli/test_query_command.py::TestQueryCommand::test_query_multiple_strategies PASSED [  3%]
tests/unit/cli/test_query_command.py::TestQueryCommand::test_query_no_results PASSED [  3%]
tests/unit/cli/test_repl_command.py::TestREPLCommand::test_repl_start PASSED [  3%]
tests/unit/cli/test_repl_command.py::TestREPLCommand::test_repl_with_config PASSED [  3%]
tests/unit/cli/test_repl_command.py::TestREPLSession::test_repl_session_init PASSED [  4%]
tests/unit/cli/test_repl_command.py::TestREPLSession::test_repl_set_command PASSED [  4%]
tests/unit/cli/test_validate_pipeline_command.py::TestValidatePipelineCommand::test_command_help PASSED [  4%]
tests/unit/cli/test_validate_pipeline_command.py::TestValidatePipelineCommand::test_missing_indexing_argument PASSED [  4%]
tests/unit/cli/test_validate_pipeline_command.py::TestValidatePipelineCommand::test_missing_retrieval_argument PASSED [  4%]
tests/unit/cli/test_validate_pipeline_command.py::TestValidatePipelineCommand::test_valid_pipeline_returns_zero PASSED [  4%]
tests/unit/cli/test_validate_pipeline_command.py::TestValidatePipelineCommand::test_invalid_pipeline_returns_nonzero PASSED [  4%]
tests/unit/cli/test_validate_pipeline_command.py::TestValidatePipelineCommand::test_invalid_strategy_name_error PASSED [  4%]
tests/unit/cli/test_validate_pipeline_command.py::TestValidatePipelineCommand::test_parse_multiple_strategies PASSED [  4%]
tests/unit/cli/test_validate_pipeline_command.py::TestValidatePipelineCommand::test_config_file_loading PASSED [  4%]
tests/unit/cli/test_validation.py::TestValidatePathExists::test_validate_existing_file PASSED [  4%]
tests/unit/cli/test_validation.py::TestValidatePathExists::test_validate_existing_directory PASSED [  4%]
tests/unit/cli/test_validation.py::TestValidatePathExists::test_validate_nonexistent_path PASSED [  4%]
tests/unit/cli/test_validation.py::TestValidatePathExists::test_validate_file_when_directory PASSED [  4%]
tests/unit/cli/test_validation.py::TestValidatePathExists::test_validate_directory_when_file PASSED [  4%]
tests/unit/cli/test_validation.py::TestValidateConfigFile::test_validate_yaml_config PASSED [  4%]
tests/unit/cli/test_validation.py::TestValidateConfigFile::test_validate_json_config PASSED [  4%]
tests/unit/cli/test_validation.py::TestValidateConfigFile::test_validate_invalid_yaml PASSED [  5%]
tests/unit/cli/test_validation.py::TestValidateConfigFile::test_validate_invalid_json PASSED [  5%]
tests/unit/cli/test_validation.py::TestValidateConfigFile::test_validate_unsupported_format PASSED [  5%]
tests/unit/cli/test_validation.py::TestValidateConfigFile::test_validate_nonexistent_file PASSED [  5%]
tests/unit/cli/test_validation.py::TestValidateConfigFile::test_validate_non_dict_config PASSED [  5%]
tests/unit/cli/test_validation.py::TestParseStrategyList::test_parse_single_strategy PASSED [  5%]
tests/unit/cli/test_validation.py::TestParseStrategyList::test_parse_multiple_strategies PASSED [  5%]
tests/unit/cli/test_validation.py::TestParseStrategyList::test_parse_strategies_with_spaces PASSED [  5%]
tests/unit/cli/test_validation.py::TestParseStrategyList::test_parse_empty_string PASSED [  5%]
tests/unit/cli/test_validation.py::TestParseStrategyList::test_parse_only_commas PASSED [  5%]
tests/unit/cli/test_validation_formatter.py::TestDisplayCapabilities::test_display_capabilities_with_capabilities PASSED [  5%]
tests/unit/cli/test_validation_formatter.py::TestDisplayCapabilities::test_display_capabilities_empty PASSED [  5%]
tests/unit/cli/test_validation_formatter.py::TestDisplayRequirements::test_display_requirements_all_met PASSED [  5%]
tests/unit/cli/test_validation_formatter.py::TestDisplayRequirements::test_display_requirements_unmet PASSED [  5%]
tests/unit/cli/test_validation_formatter.py::TestDisplayRequirements::test_display_requirements_empty PASSED [  5%]
tests/unit/cli/test_validation_formatter.py::TestDisplayServiceRequirements::test_display_service_requirements_all_available PASSED [  5%]
tests/unit/cli/test_validation_formatter.py::TestDisplayServiceRequirements::test_display_service_requirements_missing PASSED [  5%]
tests/unit/cli/test_validation_formatter.py::TestDisplayServiceRequirements::test_display_service_requirements_empty PASSED [  6%]
tests/unit/cli/test_validation_formatter.py::TestDisplayValidationStatus::test_display_valid_status PASSED [  6%]
tests/unit/cli/test_validation_formatter.py::TestDisplayValidationStatus::test_display_invalid_status_missing_capabilities PASSED [  6%]
tests/unit/cli/test_validation_formatter.py::TestDisplayValidationStatus::test_display_invalid_status_missing_services PASSED [  6%]
tests/unit/cli/test_validation_formatter.py::TestDisplaySuggestions::test_display_suggestions PASSED [  6%]
tests/unit/cli/test_validation_formatter.py::TestFormatValidationResults::test_format_valid_pipeline PASSED [  6%]
tests/unit/cli/test_validation_formatter.py::TestFormatValidationResults::test_format_invalid_pipeline_with_suggestions PASSED [  6%]
tests/unit/config/test_env_resolver.py::TestEnvResolverBasic::test_resolve_simple_variable PASSED [  6%]
tests/unit/config/test_env_resolver.py::TestEnvResolverBasic::test_resolve_with_default PASSED [  6%]
tests/unit/config/test_env_resolver.py::TestEnvResolverBasic::test_resolve_with_default_when_exists PASSED [  6%]
tests/unit/config/test_env_resolver.py::TestEnvResolverBasic::test_resolve_required_missing PASSED [  6%]
tests/unit/config/test_env_resolver.py::TestEnvResolverBasic::test_resolve_with_custom_error PASSED [  6%]
tests/unit/config/test_env_resolver.py::TestEnvResolverRecursive::test_resolve_in_dict PASSED [  6%]
tests/unit/config/test_env_resolver.py::TestEnvResolverRecursive::test_resolve_in_list PASSED [  6%]
tests/unit/config/test_env_resolver.py::TestEnvResolverRecursive::test_resolve_deeply_nested PASSED [  6%]
tests/unit/config/test_env_resolver.py::TestEnvResolverPartialReplacement::test_partial_string_replacement PASSED [  6%]
tests/unit/config/test_env_resolver.py::TestEnvResolverPartialReplacement::test_multiple_variables_in_string PASSED [  6%]
tests/unit/config/test_env_resolver.py::TestEnvResolverPartialReplacement::test_mixed_variables_and_defaults PASSED [  7%]
tests/unit/config/test_env_resolver.py::TestEnvResolverValidation::test_validate_no_injection_valid PASSED [  7%]
tests/unit/config/test_env_resolver.py::TestEnvResolverValidation::test_validate_no_injection_invalid PASSED [  7%]
tests/unit/config/test_env_resolver.py::TestEnvResolverExtraction::test_extract_variable_names_simple PASSED [  7%]
tests/unit/config/test_env_resolver.py::TestEnvResolverExtraction::test_extract_variable_names_dict PASSED [  7%]
tests/unit/config/test_env_resolver.py::TestEnvResolverExtraction::test_extract_variable_names_with_defaults PASSED [  7%]
tests/unit/config/test_env_resolver.py::TestEnvResolverExtraction::test_extract_variable_names_duplicates PASSED [  7%]
tests/unit/config/test_env_resolver.py::TestEnvResolverExtraction::test_extract_variable_names_nested PASSED [  7%]
tests/unit/config/test_env_resolver.py::TestEnvResolverEdgeCases::test_resolve_non_string_values PASSED [  7%]
tests/unit/config/test_env_resolver.py::TestEnvResolverEdgeCases::test_resolve_empty_string PASSED [  7%]
tests/unit/config/test_env_resolver.py::TestEnvResolverEdgeCases::test_resolve_string_without_variables PASSED [  7%]
tests/unit/config/test_env_resolver.py::TestEnvResolverEdgeCases::test_resolve_empty_dict PASSED [  7%]
tests/unit/config/test_env_resolver.py::TestEnvResolverEdgeCases::test_resolve_empty_list PASSED [  7%]
tests/unit/config/test_env_resolver.py::TestEnvResolverEdgeCases::test_resolve_mixed_types_in_list PASSED [  7%]
tests/unit/config/test_env_validator.py::TestEnvironmentValidator::test_validate_production_success PASSED [  7%]
tests/unit/config/test_env_validator.py::TestEnvironmentValidator::test_validate_development_success PASSED [  7%]
tests/unit/config/test_env_validator.py::TestEnvironmentValidator::test_validate_test_success PASSED [  7%]
tests/unit/config/test_env_validator.py::TestEnvironmentValidator::test_validate_production_missing PASSED [  8%]
tests/unit/config/test_env_validator.py::TestEnvironmentValidator::test_validate_test_missing PASSED [  8%]
tests/unit/config/test_env_validator.py::TestEnvironmentValidator::test_validate_test_with_deprecated_var PASSED [  8%]
tests/unit/config/test_env_validator.py::TestEnvironmentValidator::test_deprecated_warning PASSED [  8%]
tests/unit/config/test_env_validator.py::TestEnvironmentValidator::test_no_deprecated_warning_when_not_set PASSED [  8%]
tests/unit/config/test_env_validator.py::TestEnvironmentValidator::test_get_database_url_main PASSED [  8%]
tests/unit/config/test_env_validator.py::TestEnvironmentValidator::test_get_database_url_test_new_name PASSED [  8%]
tests/unit/config/test_env_validator.py::TestEnvironmentValidator::test_get_database_url_backward_compatible PASSED [  8%]
tests/unit/config/test_env_validator.py::TestEnvironmentValidator::test_get_database_url_prefers_new_name PASSED [  8%]
tests/unit/config/test_env_validator.py::TestEnvironmentValidator::test_get_database_url_returns_none_when_not_set PASSED [  8%]
tests/unit/config/test_env_validator.py::TestEnvironmentValidator::test_get_database_url_test_returns_none_when_not_set PASSED [  8%]
tests/unit/config/test_env_validator.py::TestEnvironmentValidator::test_get_all_database_vars PASSED [  8%]
tests/unit/config/test_env_validator.py::TestEnvironmentValidator::test_check_required_returns_empty_for_valid_config PASSED [  8%]
tests/unit/config/test_env_validator.py::TestEnvironmentValidator::test_check_required_returns_missing_vars PASSED [  8%]
tests/unit/config/test_env_validator.py::TestEnvironmentValidator::test_error_message_includes_documentation_reference PASSED [  8%]
tests/unit/config/test_env_validator.py::TestEnvironmentValidator::test_deprecation_warning_includes_migration_instructions PASSED [  8%]
tests/unit/config/test_schemas.py::TestServiceRegistrySchema::test_schema_is_valid_json_schema PASSED [  8%]
tests/unit/config/test_schemas.py::TestServiceRegistrySchema::test_minimal_valid_config PASSED [  9%]
tests/unit/config/test_schemas.py::TestServiceRegistrySchema::test_llm_service_valid PASSED [  9%]
tests/unit/config/test_schemas.py::TestServiceRegistrySchema::test_embedding_service_valid PASSED [  9%]
tests/unit/config/test_schemas.py::TestServiceRegistrySchema::test_database_service_valid PASSED [  9%]
tests/unit/config/test_schemas.py::TestServiceRegistrySchema::test_missing_services_invalid PASSED [  9%]
tests/unit/config/test_schemas.py::TestServiceRegistrySchema::test_invalid_service_name PASSED [  9%]
tests/unit/config/test_schemas.py::TestServiceRegistrySchema::test_version_format PASSED [  9%]
tests/unit/config/test_schemas.py::TestStrategyPairSchema::test_schema_is_valid_json_schema PASSED [  9%]
tests/unit/config/test_schemas.py::TestStrategyPairSchema::test_minimal_valid_config PASSED [  9%]
tests/unit/config/test_schemas.py::TestStrategyPairSchema::test_service_reference_format PASSED [  9%]
tests/unit/config/test_schemas.py::TestStrategyPairSchema::test_inline_service_config PASSED [  9%]
tests/unit/config/test_schemas.py::TestStrategyPairSchema::test_db_config PASSED [  9%]
tests/unit/config/test_schemas.py::TestStrategyPairSchema::test_migrations_config PASSED [  9%]
tests/unit/config/test_schemas.py::TestStrategyPairSchema::test_expected_schema_config PASSED [  9%]
tests/unit/config/test_schemas.py::TestStrategyPairSchema::test_tags PASSED [  9%]
tests/unit/config/test_schemas.py::TestStrategyPairSchema::test_invalid_strategy_name_format PASSED [  9%]
tests/unit/config/test_schemas.py::TestStrategyPairSchema::test_missing_required_fields PASSED [  9%]
tests/unit/config/test_strategy_loader.py::test_load_valid_config PASSED [ 10%]
tests/unit/config/test_strategy_loader.py::test_load_invalid_yaml PASSED [ 10%]
tests/unit/config/test_strategy_loader.py::test_load_missing_file PASSED [ 10%]
tests/unit/config/test_strategy_loader.py::test_schema_validation_error PASSED [ 10%]
tests/unit/config/test_strategy_loader.py::test_schema_validation_types PASSED [ 10%]
tests/unit/config/test_strategy_loader.py::test_schema_pattern_validation PASSED [ 10%]
tests/unit/config/test_strategy_pair_manager.py::test_load_pair_success PASSED [ 10%]
tests/unit/config/test_strategy_pair_manager.py::test_load_pair_compatibility_error PASSED [ 10%]
tests/unit/config/test_strategy_pair_manager.py::test_migration_error PASSED [ 10%]
tests/unit/config/test_strategy_pair_manager.py::test_db_context_creation PASSED [ 10%]
tests/unit/config/test_validator.py::TestServiceRegistryValidation::test_valid_service_registry PASSED [ 10%]
tests/unit/config/test_validator.py::TestServiceRegistryValidation::test_valid_embedding_service PASSED [ 10%]
tests/unit/config/test_validator.py::TestServiceRegistryValidation::test_valid_database_service PASSED [ 10%]
tests/unit/config/test_validator.py::TestServiceRegistryValidation::test_invalid_service_registry_missing_required PASSED [ 10%]
tests/unit/config/test_validator.py::TestServiceRegistryValidation::test_invalid_service_type PASSED [ 10%]
tests/unit/config/test_validator.py::TestServiceRegistryValidation::test_invalid_embedding_provider PASSED [ 10%]
tests/unit/config/test_validator.py::TestServiceRegistryValidation::test_plaintext_secret_warning PASSED [ 10%]
tests/unit/config/test_validator.py::TestServiceRegistryValidation::test_no_warning_for_env_var_secrets PASSED [ 11%]
tests/unit/config/test_validator.py::TestStrategyPairValidation::test_valid_strategy_pair PASSED [ 11%]
tests/unit/config/test_validator.py::TestStrategyPairValidation::test_strategy_pair_with_db_config PASSED [ 11%]
tests/unit/config/test_validator.py::TestStrategyPairValidation::test_strategy_pair_with_migrations PASSED [ 11%]
tests/unit/config/test_validator.py::TestStrategyPairValidation::test_invalid_strategy_name_format PASSED [ 11%]
tests/unit/config/test_validator.py::TestStrategyPairValidation::test_invalid_version_format PASSED [ 11%]
tests/unit/config/test_validator.py::TestStrategyPairValidation::test_missing_required_sections PASSED [ 11%]
tests/unit/config/test_validator.py::TestServiceReferenceValidation::test_invalid_service_reference PASSED [ 11%]
tests/unit/config/test_validator.py::TestServiceReferenceValidation::test_inline_service_config PASSED [ 11%]
tests/unit/config/test_validator.py::TestServiceReferenceValidation::test_validation_without_service_registry PASSED [ 11%]
tests/unit/config/test_validator.py::TestConfigValidationError::test_error_with_all_fields PASSED [ 11%]
tests/unit/config/test_validator.py::TestConfigValidationError::test_error_with_message_only PASSED [ 11%]
tests/unit/config/test_validator.py::TestLoadYamlWithValidation::test_load_valid_services_yaml PASSED [ 11%]
tests/unit/config/test_validator.py::TestLoadYamlWithValidation::test_load_valid_strategy_pair_yaml PASSED [ 11%]
tests/unit/config/test_validator.py::TestLoadYamlWithValidation::test_load_invalid_config_type PASSED [ 11%]
tests/unit/config/test_validator.py::TestLoadYamlWithValidation::test_load_nonexistent_file PASSED [ 11%]
tests/unit/core/test_capabilities.py::TestIndexCapability::test_all_capabilities_defined PASSED [ 11%]
tests/unit/core/test_capabilities.py::TestIndexCapability::test_enum_values_unique PASSED [ 12%]
tests/unit/core/test_capabilities.py::TestIndexCapability::test_enum_members_accessible PASSED [ 12%]
tests/unit/core/test_capabilities.py::TestIndexCapability::test_enum_string_representation PASSED [ 12%]
tests/unit/core/test_capabilities.py::TestIndexCapability::test_enum_comparison PASSED [ 12%]
tests/unit/core/test_capabilities.py::TestIndexCapability::test_enum_in_set PASSED [ 12%]
tests/unit/core/test_capabilities.py::TestIndexingResult::test_has_capability_present PASSED [ 12%]
tests/unit/core/test_capabilities.py::TestIndexingResult::test_has_capability_absent PASSED [ 12%]
tests/unit/core/test_capabilities.py::TestIndexingResult::test_is_compatible_with_satisfied PASSED [ 12%]
tests/unit/core/test_capabilities.py::TestIndexingResult::test_is_compatible_with_unsatisfied PASSED [ 12%]
tests/unit/core/test_capabilities.py::TestIndexingResult::test_is_compatible_with_empty_requirements PASSED [ 12%]
tests/unit/core/test_capabilities.py::TestIndexingResult::test_repr_format PASSED [ 12%]
tests/unit/core/test_capabilities.py::TestIndexingResult::test_repr_sorted_capabilities PASSED [ 12%]
tests/unit/core/test_capabilities.py::TestValidationResult::test_repr_valid PASSED [ 12%]
tests/unit/core/test_capabilities.py::TestValidationResult::test_repr_missing_capabilities_only PASSED [ 12%]
tests/unit/core/test_capabilities.py::TestValidationResult::test_repr_missing_services_only PASSED [ 12%]
tests/unit/core/test_capabilities.py::TestValidationResult::test_repr_missing_both PASSED [ 12%]
tests/unit/core/test_capabilities.py::TestValidationResult::test_repr_empty_missing PASSED [ 12%]
tests/unit/core/test_capabilities.py::TestValidationResult::test_repr_sorted_items PASSED [ 13%]
tests/unit/core/test_factory_validation.py::test_validate_compatibility_success PASSED [ 13%]
tests/unit/core/test_factory_validation.py::test_validate_compatibility_failure PASSED [ 13%]
tests/unit/core/test_factory_validation.py::test_validate_pipeline_success PASSED [ 13%]
tests/unit/core/test_factory_validation.py::test_validate_pipeline_missing_service PASSED [ 13%]
tests/unit/core/test_factory_validation.py::test_auto_select_retrieval PASSED [ 13%]
tests/unit/core/test_factory_validation.py::test_auto_select_retrieval_preference PASSED [ 13%]
tests/unit/core/test_factory_validation.py::test_consistency_checking_called PASSED [ 13%]
tests/unit/core/test_indexing_interface.py::TestIndexingContext::test_initialization_with_database_service PASSED [ 13%]
tests/unit/core/test_indexing_interface.py::TestIndexingContext::test_initialization_with_config PASSED [ 13%]
tests/unit/core/test_indexing_interface.py::TestIndexingContext::test_metrics_tracking PASSED [ 13%]
tests/unit/core/test_indexing_interface.py::TestIndexingContext::test_config_defaults_to_empty_dict PASSED [ 13%]
tests/unit/core/test_indexing_interface.py::TestIIndexingStrategy::test_cannot_instantiate_abstract_class PASSED [ 13%]
tests/unit/core/test_indexing_interface.py::TestIIndexingStrategy::test_requires_produces_implementation PASSED [ 13%]
tests/unit/core/test_indexing_interface.py::TestIIndexingStrategy::test_requires_requires_services_implementation PASSED [ 13%]
tests/unit/core/test_indexing_interface.py::TestIIndexingStrategy::test_requires_process_implementation PASSED [ 13%]
tests/unit/core/test_indexing_interface.py::TestIIndexingStrategy::test_complete_implementation_succeeds PASSED [ 13%]
tests/unit/core/test_indexing_interface.py::TestIIndexingStrategy::test_dependency_validation_on_init PASSED [ 14%]
tests/unit/core/test_indexing_interface.py::TestVectorEmbeddingIndexing::test_produces_correct_capabilities PASSED [ 14%]
tests/unit/core/test_indexing_interface.py::TestVectorEmbeddingIndexing::test_requires_correct_services PASSED [ 14%]
tests/unit/core/test_indexing_interface.py::TestVectorEmbeddingIndexing::test_initialization_fails_without_embedding_service PASSED [ 14%]
tests/unit/core/test_indexing_interface.py::TestVectorEmbeddingIndexing::test_initialization_fails_without_database_service PASSED [ 14%]
tests/unit/core/test_indexing_interface.py::TestVectorEmbeddingIndexing::test_initialization_succeeds_with_all_services PASSED [ 14%]
tests/unit/core/test_indexing_interface.py::TestVectorEmbeddingIndexing::test_process_chunks_documents PASSED [ 14%]
tests/unit/core/test_indexing_interface.py::TestVectorEmbeddingIndexing::test_process_generates_embeddings PASSED [ 14%]
tests/unit/core/test_indexing_interface.py::TestVectorEmbeddingIndexing::test_process_stores_chunks_in_database PASSED [ 14%]
tests/unit/core/test_indexing_interface.py::TestVectorEmbeddingIndexing::test_process_updates_context_metrics PASSED [ 14%]
tests/unit/core/test_indexing_interface.py::TestVectorEmbeddingIndexing::test_process_returns_correct_result PASSED [ 14%]
tests/unit/core/test_indexing_interface.py::TestVectorEmbeddingIndexing::test_chunk_documents_with_default_config PASSED [ 14%]
tests/unit/core/test_indexing_interface.py::TestVectorEmbeddingIndexing::test_chunk_documents_preserves_metadata PASSED [ 14%]
tests/unit/core/test_indexing_interface.py::TestValidateDependencies::test_validation_passes_with_all_services PASSED [ 14%]
tests/unit/core/test_indexing_interface.py::TestValidateDependencies::test_validation_fails_with_missing_service PASSED [ 14%]
tests/unit/core/test_indexing_interface.py::TestValidateDependencies::test_validation_fails_with_multiple_missing_services PASSED [ 14%]
tests/unit/core/test_indexing_interface.py::TestValidateDependencies::test_validation_passes_with_empty_requirements PASSED [ 14%]
tests/unit/core/test_indexing_interface.py::TestValidateDependencies::test_validation_passes_with_extra_services PASSED [ 15%]
tests/unit/core/test_pipeline.py::test_initialization PASSED             [ 15%]
tests/unit/core/test_pipeline.py::test_get_capabilities_before_execution PASSED [ 15%]
tests/unit/core/test_pipeline.py::test_index_sequential_execution PASSED [ 15%]
tests/unit/core/test_pipeline.py::test_get_capabilities_after_execution PASSED [ 15%]
tests/unit/core/test_pipeline.py::test_error_handling PASSED             [ 15%]
tests/unit/core/test_pipeline.py::test_retrieval_initialization PASSED   [ 15%]
tests/unit/core/test_pipeline.py::test_retrieval_requirements PASSED     [ 15%]
tests/unit/core/test_pipeline.py::test_retrieval_sequential_execution PASSED [ 15%]
tests/unit/core/test_pipeline.py::test_retrieval_error_handling PASSED   [ 15%]
tests/unit/core/test_retrieval_interface.py::TestRetrievalContext::test_initialization_with_database_service PASSED [ 15%]
tests/unit/core/test_retrieval_interface.py::TestRetrievalContext::test_initialization_with_config PASSED [ 15%]
tests/unit/core/test_retrieval_interface.py::TestRetrievalContext::test_metrics_tracking PASSED [ 15%]
tests/unit/core/test_retrieval_interface.py::TestIRetrievalStrategy::test_cannot_instantiate_abstract_class PASSED [ 15%]
tests/unit/core/test_retrieval_interface.py::TestIRetrievalStrategy::test_dependency_validation_on_init PASSED [ 15%]
tests/unit/core/test_retrieval_interface.py::TestIRetrievalStrategy::test_successful_initialization_with_all_dependencies PASSED [ 15%]
tests/unit/core/test_retrieval_interface.py::TestIRetrievalStrategy::test_abstract_methods_must_be_implemented PASSED [ 15%]
tests/unit/core/test_retrieval_interface.py::TestRerankingRetrieval::test_requires_capabilities PASSED [ 16%]
tests/unit/core/test_retrieval_interface.py::TestRerankingRetrieval::test_requires_services PASSED [ 16%]
tests/unit/core/test_retrieval_interface.py::TestRerankingRetrieval::test_initialization_validates_dependencies PASSED [ 16%]
tests/unit/core/test_retrieval_interface.py::TestRerankingRetrieval::test_retrieve_with_results PASSED [ 16%]
tests/unit/core/test_retrieval_interface.py::TestRerankingRetrieval::test_retrieve_with_no_candidates PASSED [ 16%]
tests/unit/core/test_retrieval_interface.py::TestRerankingRetrieval::test_retrieve_uses_default_initial_k PASSED [ 16%]
tests/unit/core/test_retrieval_interface.py::TestRerankingRetrieval::test_retrieve_uses_configured_initial_k PASSED [ 16%]
tests/unit/database/test_batch_operations.py::TestBatchOperations::test_batch_vector_insertion PASSED [ 16%]
tests/unit/database/test_batch_operations.py::TestBatchOperations::test_store_chunks_with_hierarchy PASSED [ 16%]
tests/unit/database/test_connection.py::TestDatabaseConnection::test_connection_initialization PASSED [ 16%]
tests/unit/database/test_connection.py::TestDatabaseConnection::test_connection_with_default_config PASSED [ 16%]
tests/unit/database/test_connection.py::TestDatabaseConnection::test_session_context_manager_commit PASSED [ 16%]
tests/unit/database/test_connection.py::TestDatabaseConnection::test_session_context_manager_rollback PASSED [ 16%]
tests/unit/database/test_connection.py::TestDatabaseConnection::test_health_check_success PASSED [ 16%]
tests/unit/database/test_connection.py::TestDatabaseConnection::test_health_check_failure PASSED [ 16%]
tests/unit/database/test_connection.py::TestDatabaseConnection::test_get_pool_status PASSED [ 16%]
tests/unit/database/test_connection.py::TestDatabaseConnection::test_create_tables PASSED [ 16%]
tests/unit/database/test_connection.py::TestDatabaseConnection::test_drop_tables PASSED [ 17%]
tests/unit/database/test_connection.py::TestDatabaseConnection::test_context_manager PASSED [ 17%]
tests/unit/database/test_connection.py::TestDatabaseConnection::test_multiple_sessions PASSED [ 17%]
tests/unit/database/test_connection.py::TestDatabaseConnection::test_pool_configuration PASSED [ 17%]
tests/unit/database/test_connection.py::TestDatabaseConnectionEvents::test_on_connect_event PASSED [ 17%]
tests/unit/database/test_connection.py::TestDatabaseConnectionEvents::test_on_checkout_event PASSED [ 17%]
tests/unit/database/test_migrations.py::TestAlembicMigrations::test_migration_upgrade_to_head PASSED [ 17%]
tests/unit/database/test_migrations.py::TestAlembicMigrations::test_migration_downgrade PASSED [ 17%]
tests/unit/database/test_migrations.py::TestAlembicMigrations::test_migration_history PASSED [ 17%]
tests/unit/database/test_migrations.py::TestAlembicMigrations::test_migration_idempotency PASSED [ 17%]
tests/unit/database/test_migrations.py::TestAlembicMigrations::test_get_current_version PASSED [ 17%]
tests/unit/database/test_migrations.py::TestAlembicMigrations::test_migration_creates_tables PASSED [ 17%]
tests/unit/database/test_migrations.py::TestAlembicMigrations::test_migration_creates_indexes PASSED [ 17%]
tests/unit/database/test_models.py::TestDocumentModel::test_document_model_has_required_columns PASSED [ 17%]
tests/unit/database/test_models.py::TestDocumentModel::test_document_creation PASSED [ 17%]
tests/unit/database/test_models.py::TestDocumentModel::test_document_default_values PASSED [ 17%]
tests/unit/database/test_models.py::TestDocumentModel::test_document_metadata_accepts_json PASSED [ 17%]
tests/unit/database/test_models.py::TestDocumentModel::test_document_status_values PASSED [ 18%]
tests/unit/database/test_models.py::TestDocumentModel::test_document_repr PASSED [ 18%]
tests/unit/database/test_models.py::TestDocumentModel::test_document_persistence PASSED [ 18%]
tests/unit/database/test_models.py::TestChunkModel::test_chunk_model_has_required_columns PASSED [ 18%]
tests/unit/database/test_models.py::TestChunkModel::test_chunk_creation PASSED [ 18%]
tests/unit/database/test_models.py::TestChunkModel::test_chunk_creation_with_embedding PASSED [ 18%]
tests/unit/database/test_models.py::TestChunkModel::test_chunk_default_values PASSED [ 18%]
tests/unit/database/test_models.py::TestChunkModel::test_chunk_metadata_accepts_json PASSED [ 18%]
tests/unit/database/test_models.py::TestChunkModel::test_chunk_repr PASSED [ 18%]
tests/unit/database/test_models.py::TestChunkModel::test_chunk_repr_without_embedding PASSED [ 18%]
tests/unit/database/test_models.py::TestChunkModel::test_chunk_persistence PASSED [ 18%]
tests/unit/database/test_models.py::TestModelRelationships::test_foreign_key_relationship PASSED [ 18%]
tests/unit/database/test_models.py::TestModelRelationships::test_document_chunks_relationship PASSED [ 18%]
tests/unit/database/test_models.py::TestModelRelationships::test_chunk_document_relationship PASSED [ 18%]
tests/unit/database/test_models.py::TestModelRelationships::test_cascade_delete PASSED [ 18%]
tests/unit/database/test_models.py::TestModelIndexes::test_document_indexes PASSED [ 18%]
tests/unit/database/test_models.py::TestModelIndexes::test_chunk_indexes PASSED [ 18%]
tests/unit/database/test_pgvector.py::TestPgVectorIntegration::test_cosine_similarity_search PASSED [ 19%]
tests/unit/database/test_pgvector.py::TestPgVectorIntegration::test_vector_storage_format PASSED [ 19%]
tests/unit/database/test_pgvector.py::TestPgVectorIntegration::test_empty_chunks_storage PASSED [ 19%]
tests/unit/database/test_vector_indexing.py::TestVectorIndexing::test_create_hnsw_index PASSED [ 19%]
tests/unit/database/test_vector_indexing.py::TestVectorIndexing::test_create_ivfflat_index PASSED [ 19%]
tests/unit/database/test_vector_indexing.py::TestVectorIndexing::test_drop_index PASSED [ 19%]
tests/unit/database/test_vector_indexing.py::TestVectorIndexing::test_list_indexes PASSED [ 19%]
tests/unit/documentation/test_code_examples.py::TestCodeExamples::test_all_code_examples_have_valid_syntax PASSED [ 19%]
tests/unit/documentation/test_code_examples.py::TestCodeExamples::test_strategy_examples_have_imports PASSED [ 19%]
tests/unit/documentation/test_code_examples.py::TestCodeExamples::test_configuration_examples_valid SKIPPED [ 19%]
tests/unit/documentation/test_code_examples.py::TestCodeExamples::test_quick_start_example_complete PASSED [ 19%]
tests/unit/documentation/test_code_examples.py::TestCodeExamples::test_no_placeholder_code PASSED [ 19%]
tests/unit/documentation/test_documentation_completeness.py::TestDocumentationCompleteness::test_required_doc_files_exist PASSED [ 19%]
tests/unit/documentation/test_documentation_completeness.py::TestDocumentationCompleteness::test_all_strategies_documented PASSED [ 19%]
tests/unit/documentation/test_documentation_completeness.py::TestDocumentationCompleteness::test_all_public_classes_documented PASSED [ 19%]
tests/unit/documentation/test_documentation_completeness.py::TestDocumentationCompleteness::test_all_public_methods_documented PASSED [ 19%]
tests/unit/documentation/test_documentation_completeness.py::TestDocumentationCompleteness::test_documentation_completeness_score PASSED [ 19%]
tests/unit/documentation/test_documentation_completeness.py::TestDocumentationCompleteness::test_mkdocs_config_valid PASSED [ 20%]
tests/unit/documentation/test_documentation_completeness.py::TestDocumentationCompleteness::test_readme_exists PASSED [ 20%]
tests/unit/documentation/test_documentation_completeness.py::TestDocumentationCompleteness::test_changelog_exists PASSED [ 20%]
tests/unit/documentation/test_links.py::TestDocumentationLinks::test_no_broken_internal_links FAILED [ 20%]
tests/unit/documentation/test_links.py::TestDocumentationLinks::test_all_diagrams_valid PASSED [ 20%]
tests/unit/documentation/test_links.py::TestDocumentationLinks::test_no_todo_links PASSED [ 20%]
tests/unit/documentation/test_links.py::TestDocumentationLinks::test_external_links_valid SKIPPED [ 20%]
tests/unit/evaluation/test_benchmark_suite.py::TestBenchmarkRunner::test_init_with_config PASSED [ 20%]
tests/unit/evaluation/test_benchmark_suite.py::TestBenchmarkRunner::test_init_with_metrics PASSED [ 20%]
tests/unit/evaluation/test_benchmark_suite.py::TestBenchmarkRunner::test_init_without_config_or_metrics PASSED [ 20%]
tests/unit/evaluation/test_benchmark_suite.py::TestBenchmarkRunner::test_run_benchmark_with_dataset PASSED [ 20%]
tests/unit/evaluation/test_benchmark_suite.py::TestBenchmarkRunner::test_run_benchmark_collects_metrics PASSED [ 20%]
tests/unit/evaluation/test_benchmark_suite.py::TestBenchmarkRunner::test_run_benchmark_aggregates_results PASSED [ 20%]
tests/unit/evaluation/test_benchmark_suite.py::TestBenchmarkRunner::test_compare_strategies PASSED [ 20%]
tests/unit/evaluation/test_benchmark_suite.py::TestBenchmarkRunner::test_compare_strategies_name_mismatch PASSED [ 20%]
tests/unit/evaluation/test_benchmark_suite.py::TestBenchmarkRunner::test_benchmark_error_handling PASSED [ 20%]
tests/unit/evaluation/test_benchmark_suite.py::TestBenchmarkRunner::test_save_checkpoint PASSED [ 20%]
tests/unit/evaluation/test_benchmark_suite.py::TestBenchmarkRunner::test_load_checkpoint PASSED [ 21%]
tests/unit/evaluation/test_benchmark_suite.py::TestBenchmarkRunner::test_resume_from_checkpoint PASSED [ 21%]
tests/unit/evaluation/test_benchmark_suite.py::TestBenchmarkResult::test_benchmark_result_to_dict PASSED [ 21%]
tests/unit/evaluation/test_benchmark_suite.py::TestBenchmarkResult::test_benchmark_result_save_load PASSED [ 21%]
tests/unit/evaluation/test_benchmark_suite.py::TestBenchmarkResult::test_empty_dataset_handling PASSED [ 21%]
tests/unit/evaluation/test_comparison.py::TestStrategyComparator::test_init_default_confidence PASSED [ 21%]
tests/unit/evaluation/test_comparison.py::TestStrategyComparator::test_init_custom_confidence PASSED [ 21%]
tests/unit/evaluation/test_comparison.py::TestStrategyComparator::test_compare_strategies PASSED [ 21%]
tests/unit/evaluation/test_comparison.py::TestStrategyComparator::test_compare_metric_specific PASSED [ 21%]
tests/unit/evaluation/test_comparison.py::TestStrategyComparator::test_generate_rankings PASSED [ 21%]
tests/unit/evaluation/test_comparison.py::TestStrategyComparator::test_find_best_strategy PASSED [ 21%]
tests/unit/evaluation/test_comparison.py::TestStrategyComparator::test_generate_report_table_format PASSED [ 21%]
tests/unit/evaluation/test_comparison.py::TestStrategyComparator::test_generate_report_markdown_format PASSED [ 21%]
tests/unit/evaluation/test_comparison.py::TestStrategyComparator::test_generate_report_text_format PASSED [ 21%]
tests/unit/evaluation/test_comparison.py::TestStrategyComparator::test_generate_summary_table PASSED [ 21%]
tests/unit/evaluation/test_comparison.py::TestStrategyComparator::test_comparison_with_statistical_tests PASSED [ 21%]
tests/unit/evaluation/test_comparison.py::TestStrategyComparator::test_comparison_with_baseline PASSED [ 21%]
tests/unit/evaluation/test_comparison.py::TestStrategyComparator::test_comparison_single_strategy PASSED [ 22%]
tests/unit/evaluation/test_comparison.py::TestStrategyComparator::test_comparison_missing_metrics PASSED [ 22%]
tests/unit/evaluation/test_dataset_loader.py::TestDatasetLoader::test_load_json_dataset PASSED [ 22%]
tests/unit/evaluation/test_dataset_loader.py::TestDatasetLoader::test_load_jsonl_dataset PASSED [ 22%]
tests/unit/evaluation/test_dataset_loader.py::TestDatasetLoader::test_load_csv_dataset PASSED [ 22%]
tests/unit/evaluation/test_dataset_loader.py::TestDatasetLoader::test_load_nonexistent_file PASSED [ 22%]
tests/unit/evaluation/test_dataset_loader.py::TestDatasetLoader::test_load_unsupported_format PASSED [ 22%]
tests/unit/evaluation/test_dataset_loader.py::TestDatasetLoader::test_dataset_name_override PASSED [ 22%]
tests/unit/evaluation/test_dataset_loader.py::TestDatasetLoader::test_save_and_load_json PASSED [ 22%]
tests/unit/evaluation/test_dataset_loader.py::TestDatasetLoader::test_save_and_load_jsonl PASSED [ 22%]
tests/unit/evaluation/test_dataset_loader.py::TestDatasetLoader::test_save_and_load_csv PASSED [ 22%]
tests/unit/evaluation/test_dataset_loader.py::TestEvaluationDataset::test_dataset_iteration PASSED [ 22%]
tests/unit/evaluation/test_dataset_loader.py::TestEvaluationDataset::test_dataset_indexing PASSED [ 22%]
tests/unit/evaluation/test_dataset_loader.py::TestEvaluationDataset::test_get_by_id PASSED [ 22%]
tests/unit/evaluation/test_dataset_loader.py::TestEvaluationDataset::test_dataset_split PASSED [ 22%]
tests/unit/evaluation/test_dataset_loader.py::TestEvaluationDataset::test_get_statistics PASSED [ 22%]
tests/unit/evaluation/test_export.py::TestCSVExporter::test_csv_export_summary PASSED [ 22%]
tests/unit/evaluation/test_export.py::TestCSVExporter::test_csv_export_detailed PASSED [ 23%]
tests/unit/evaluation/test_export.py::TestCSVExporter::test_csv_export_comparison PASSED [ 23%]
tests/unit/evaluation/test_export.py::TestCSVExporter::test_csv_export_comparison_custom_metrics PASSED [ 23%]
tests/unit/evaluation/test_export.py::TestCSVExporter::test_csv_export_creates_directories PASSED [ 23%]
tests/unit/evaluation/test_export.py::TestJSONExporter::test_json_export_with_details PASSED [ 23%]
tests/unit/evaluation/test_export.py::TestJSONExporter::test_json_export_without_details PASSED [ 23%]
tests/unit/evaluation/test_export.py::TestJSONExporter::test_json_export_comparison PASSED [ 23%]
tests/unit/evaluation/test_export.py::TestJSONExporter::test_json_export_indentation PASSED [ 23%]
tests/unit/evaluation/test_export.py::TestJSONExporter::test_json_export_creates_directories PASSED [ 23%]
tests/unit/evaluation/test_export.py::TestJSONExporter::test_export_file_content_validity PASSED [ 23%]
tests/unit/evaluation/test_export.py::TestJSONExporter::test_csv_field_selection PASSED [ 23%]
tests/unit/evaluation/test_retrieval_metrics.py::TestPrecisionAtK::test_perfect_precision PASSED [ 23%]
tests/unit/evaluation/test_retrieval_metrics.py::TestPrecisionAtK::test_zero_precision PASSED [ 23%]
tests/unit/evaluation/test_retrieval_metrics.py::TestPrecisionAtK::test_partial_precision PASSED [ 23%]
tests/unit/evaluation/test_retrieval_metrics.py::TestPrecisionAtK::test_fewer_retrieved_than_k PASSED [ 23%]
tests/unit/evaluation/test_retrieval_metrics.py::TestPrecisionAtK::test_invalid_k PASSED [ 23%]
tests/unit/evaluation/test_retrieval_metrics.py::TestRecallAtK::test_perfect_recall PASSED [ 23%]
tests/unit/evaluation/test_retrieval_metrics.py::TestRecallAtK::test_zero_recall PASSED [ 24%]
tests/unit/evaluation/test_retrieval_metrics.py::TestRecallAtK::test_partial_recall PASSED [ 24%]
tests/unit/evaluation/test_retrieval_metrics.py::TestRecallAtK::test_empty_relevant PASSED [ 24%]
tests/unit/evaluation/test_retrieval_metrics.py::TestMeanReciprocalRank::test_first_relevant PASSED [ 24%]
tests/unit/evaluation/test_retrieval_metrics.py::TestMeanReciprocalRank::test_third_relevant PASSED [ 24%]
tests/unit/evaluation/test_retrieval_metrics.py::TestMeanReciprocalRank::test_no_relevant_found PASSED [ 24%]
tests/unit/evaluation/test_retrieval_metrics.py::TestMeanReciprocalRank::test_multiple_relevant PASSED [ 24%]
tests/unit/evaluation/test_retrieval_metrics.py::TestNDCG::test_perfect_ranking PASSED [ 24%]
tests/unit/evaluation/test_retrieval_metrics.py::TestNDCG::test_worst_ranking PASSED [ 24%]
tests/unit/evaluation/test_retrieval_metrics.py::TestNDCG::test_no_relevant_docs PASSED [ 24%]
tests/unit/evaluation/test_retrieval_metrics.py::TestNDCG::test_partial_relevance PASSED [ 24%]
tests/unit/evaluation/test_retrieval_metrics.py::TestHitRateAtK::test_hit PASSED [ 24%]
tests/unit/evaluation/test_retrieval_metrics.py::TestHitRateAtK::test_no_hit PASSED [ 24%]
tests/unit/evaluation/test_retrieval_metrics.py::TestHitRateAtK::test_hit_outside_k PASSED [ 24%]
tests/unit/evaluation/test_retrieval_metrics.py::TestMetricProperties::test_metric_names PASSED [ 24%]
tests/unit/evaluation/test_retrieval_metrics.py::TestMetricProperties::test_higher_is_better PASSED [ 24%]
tests/unit/evaluation/test_statistical_testing.py::TestStatisticalAnalyzer::test_init_default_confidence PASSED [ 24%]
tests/unit/evaluation/test_statistical_testing.py::TestStatisticalAnalyzer::test_init_custom_confidence PASSED [ 25%]
tests/unit/evaluation/test_statistical_testing.py::TestStatisticalAnalyzer::test_init_invalid_confidence PASSED [ 25%]
tests/unit/evaluation/test_statistical_testing.py::TestStatisticalAnalyzer::test_paired_t_test_significant_difference PASSED [ 25%]
tests/unit/evaluation/test_statistical_testing.py::TestStatisticalAnalyzer::test_paired_t_test_no_difference PASSED [ 25%]
tests/unit/evaluation/test_statistical_testing.py::TestStatisticalAnalyzer::test_confidence_interval_contains_mean PASSED [ 25%]
tests/unit/evaluation/test_statistical_testing.py::TestStatisticalAnalyzer::test_confidence_interval_width PASSED [ 25%]
tests/unit/evaluation/test_statistical_testing.py::TestStatisticalAnalyzer::test_confidence_interval_single_value PASSED [ 25%]
tests/unit/evaluation/test_statistical_testing.py::TestStatisticalAnalyzer::test_bootstrap_confidence_interval PASSED [ 25%]
tests/unit/evaluation/test_statistical_testing.py::TestStatisticalAnalyzer::test_cohens_d_calculation PASSED [ 25%]
tests/unit/evaluation/test_statistical_testing.py::TestStatisticalAnalyzer::test_cohens_d_zero_difference PASSED [ 25%]
tests/unit/evaluation/test_statistical_testing.py::TestStatisticalAnalyzer::test_cohens_d_interpretation_small PASSED [ 25%]
tests/unit/evaluation/test_statistical_testing.py::TestStatisticalAnalyzer::test_cohens_d_interpretation_medium PASSED [ 25%]
tests/unit/evaluation/test_statistical_testing.py::TestStatisticalAnalyzer::test_cohens_d_interpretation_large PASSED [ 25%]
tests/unit/evaluation/test_statistical_testing.py::TestStatisticalAnalyzer::test_bonferroni_correction PASSED [ 25%]
tests/unit/evaluation/test_statistical_testing.py::TestStatisticalAnalyzer::test_bonferroni_correction_custom_comparisons PASSED [ 25%]
tests/unit/evaluation/test_statistical_testing.py::TestStatisticalAnalyzer::test_analyze_metric_comprehensive PASSED [ 25%]
tests/unit/evaluation/test_statistical_testing.py::TestStatisticalAnalyzer::test_statistical_test_result_structure PASSED [ 25%]
tests/unit/evaluation/test_statistical_testing.py::TestStatisticalAnalyzer::test_edge_case_equal_distributions PASSED [ 25%]
tests/unit/evaluation/test_statistical_testing.py::TestStatisticalAnalyzer::test_edge_case_high_variance PASSED [ 26%]
tests/unit/evaluation/test_statistical_testing.py::TestStatisticalAnalyzer::test_edge_case_small_sample PASSED [ 26%]
tests/unit/examples/test_examples_imports.py::TestExamplesImports::test_simple_example_imports_rag_factory PASSED [ 26%]
tests/unit/examples/test_examples_imports.py::TestExamplesImports::test_medium_example_imports PASSED [ 26%]
tests/unit/examples/test_examples_imports.py::TestExamplesImports::test_all_examples_import_from_rag_factory PASSED [ 26%]
tests/unit/examples/test_examples_imports.py::TestExamplesImports::test_no_relative_imports_in_examples PASSED [ 26%]
tests/unit/examples/test_examples_imports.py::TestExamplesImports::test_examples_use_absolute_imports PASSED [ 26%]
tests/unit/examples/test_examples_imports.py::TestExamplesImports::test_no_wildcard_imports PASSED [ 26%]
tests/unit/examples/test_examples_imports.py::TestExamplesImports::test_imports_are_organized PASSED [ 26%]
tests/unit/examples/test_examples_syntax.py::TestExamplesSyntax::test_all_examples_valid_syntax PASSED [ 26%]
tests/unit/examples/test_examples_syntax.py::TestExamplesSyntax::test_simple_example_exists PASSED [ 26%]
tests/unit/examples/test_examples_syntax.py::TestExamplesSyntax::test_medium_example_exists PASSED [ 26%]
tests/unit/examples/test_examples_syntax.py::TestExamplesSyntax::test_advanced_example_exists PASSED [ 26%]
tests/unit/examples/test_examples_syntax.py::TestExamplesSyntax::test_all_examples_have_docstrings PASSED [ 26%]
tests/unit/examples/test_examples_syntax.py::TestExamplesSyntax::test_all_examples_have_main_function PASSED [ 26%]
tests/unit/examples/test_examples_syntax.py::TestExamplesSyntax::test_examples_have_proper_encoding PASSED [ 26%]
tests/unit/examples/test_examples_syntax.py::TestExamplesSyntax::test_examples_not_too_long PASSED [ 26%]
tests/unit/examples/test_requirements.py::TestRequirements::test_simple_has_requirements PASSED [ 27%]
tests/unit/examples/test_requirements.py::TestRequirements::test_medium_has_requirements PASSED [ 27%]
tests/unit/examples/test_requirements.py::TestRequirements::test_advanced_has_requirements PASSED [ 27%]
tests/unit/examples/test_requirements.py::TestRequirements::test_all_example_dirs_have_requirements PASSED [ 27%]
tests/unit/examples/test_requirements.py::TestRequirements::test_requirements_have_rag_factory PASSED [ 27%]
tests/unit/examples/test_requirements.py::TestRequirements::test_requirements_are_valid_format PASSED [ 27%]
tests/unit/examples/test_requirements.py::TestRequirements::test_no_duplicate_requirements PASSED [ 27%]
tests/unit/examples/test_requirements.py::TestRequirements::test_requirements_have_versions PASSED [ 27%]
tests/unit/mocks/test_mock_builders.py::TestServiceMocks::test_create_mock_embedding_service PASSED [ 27%]
tests/unit/mocks/test_mock_builders.py::TestServiceMocks::test_create_mock_database_service PASSED [ 27%]
tests/unit/mocks/test_mock_builders.py::TestServiceMocks::test_create_mock_llm_service PASSED [ 27%]
tests/unit/mocks/test_mock_builders.py::TestServiceMocks::test_create_mock_neo4j_service PASSED [ 27%]
tests/unit/mocks/test_mock_builders.py::TestRegistryMocks::test_create_mock_registry_with_services PASSED [ 27%]
tests/unit/mocks/test_mock_builders.py::TestRegistryMocks::test_create_mock_registry_with_graph_services PASSED [ 27%]
tests/unit/mocks/test_mock_builders.py::TestDataMocks::test_create_mock_chunk PASSED [ 27%]
tests/unit/mocks/test_mock_builders.py::TestDataMocks::test_create_mock_document PASSED [ 27%]
tests/unit/mocks/test_mock_builders.py::TestFixtures::test_mock_embedding_service_fixture PASSED [ 27%]
tests/unit/mocks/test_mock_builders.py::TestFixtures::test_mock_database_service_fixture PASSED [ 28%]
tests/unit/mocks/test_mock_builders.py::TestFixtures::test_mock_llm_service_fixture PASSED [ 28%]
tests/unit/mocks/test_mock_builders.py::TestFixtures::test_mock_registry_with_services_fixture PASSED [ 28%]
tests/unit/models/embedding/test_registry.py::test_register_model PASSED [ 28%]
tests/unit/models/embedding/test_registry.py::test_register_model_overwrites_existing PASSED [ 28%]
tests/unit/models/embedding/test_registry.py::test_get_model_not_found PASSED [ 28%]
tests/unit/models/embedding/test_registry.py::test_list_models PASSED    [ 28%]
tests/unit/models/embedding/test_registry.py::test_filter_by_domain PASSED [ 28%]
tests/unit/models/embedding/test_registry.py::test_filter_by_format PASSED [ 28%]
tests/unit/models/embedding/test_registry.py::test_filter_by_tags PASSED [ 28%]
tests/unit/models/embedding/test_registry.py::test_update_metrics PASSED [ 28%]
tests/unit/models/embedding/test_registry.py::test_update_metrics_nonexistent_model PASSED [ 28%]
tests/unit/models/embedding/test_registry.py::test_search_models PASSED  [ 28%]
tests/unit/models/embedding/test_registry.py::test_search_models_by_description PASSED [ 28%]
tests/unit/models/embedding/test_registry.py::test_search_models_case_insensitive PASSED [ 28%]
tests/unit/models/embedding/test_registry.py::test_delete_model PASSED   [ 28%]
tests/unit/models/embedding/test_registry.py::test_delete_nonexistent_model PASSED [ 28%]
tests/unit/models/embedding/test_registry.py::test_registry_persistence PASSED [ 29%]
tests/unit/models/embedding/test_registry.py::test_register_multiple_versions PASSED [ 29%]
tests/unit/models/embedding/test_registry.py::test_list_models_versions PASSED [ 29%]
tests/unit/models/embedding/test_registry.py::test_delete_specific_version PASSED [ 29%]
tests/unit/models/embedding/test_registry.py::test_delete_all_versions PASSED [ 29%]
tests/unit/models/embedding/test_registry.py::test_set_health_status PASSED [ 29%]
tests/unit/models/embedding/test_registry.py::test_registry_persistence_versions PASSED [ 29%]
tests/unit/models/embedding/test_registry.py::test_empty_registry PASSED [ 29%]
tests/unit/models/evaluation/test_ab_testing.py::test_framework_initialization PASSED [ 29%]
tests/unit/models/evaluation/test_ab_testing.py::test_start_test PASSED  [ 29%]
tests/unit/models/evaluation/test_ab_testing.py::test_traffic_splitting PASSED [ 29%]
tests/unit/models/evaluation/test_ab_testing.py::test_traffic_splitting_different_ratios PASSED [ 29%]
tests/unit/models/evaluation/test_ab_testing.py::test_should_use_model_b_inactive_test PASSED [ 29%]
tests/unit/models/evaluation/test_ab_testing.py::test_record_results PASSED [ 29%]
tests/unit/models/evaluation/test_ab_testing.py::test_record_result_inactive_test PASSED [ 29%]
tests/unit/models/evaluation/test_ab_testing.py::test_analyze_test PASSED [ 29%]
tests/unit/models/evaluation/test_ab_testing.py::test_analyze_test_not_found PASSED [ 29%]
tests/unit/models/evaluation/test_ab_testing.py::test_analyze_test_insufficient_samples PASSED [ 30%]
tests/unit/models/evaluation/test_ab_testing.py::test_winner_determination_clear_winner PASSED [ 30%]
tests/unit/models/evaluation/test_ab_testing.py::test_winner_determination_no_difference PASSED [ 30%]
tests/unit/models/evaluation/test_ab_testing.py::test_gradual_rollout PASSED [ 30%]
tests/unit/models/evaluation/test_ab_testing.py::test_gradual_rollout_bounds PASSED [ 30%]
tests/unit/models/evaluation/test_ab_testing.py::test_gradual_rollout_not_found PASSED [ 30%]
tests/unit/models/evaluation/test_ab_testing.py::test_metrics_comparison_calculation PASSED [ 30%]
tests/unit/models/evaluation/test_ab_testing.py::test_confidence_intervals PASSED [ 30%]
tests/unit/observability/test_cost_calculator.py::TestModelPricing::test_model_pricing_creation PASSED [ 30%]
tests/unit/observability/test_cost_calculator.py::TestCostCalculator::test_calculator_initialization PASSED [ 30%]
tests/unit/observability/test_cost_calculator.py::TestCostCalculator::test_calculate_cost_llm PASSED [ 30%]
tests/unit/observability/test_cost_calculator.py::TestCostCalculator::test_calculate_cost_embedding PASSED [ 30%]
tests/unit/observability/test_cost_calculator.py::TestCostCalculator::test_calculate_cost_unknown_model PASSED [ 30%]
tests/unit/observability/test_cost_calculator.py::TestCostCalculator::test_calculate_rerank_cost PASSED [ 30%]
tests/unit/observability/test_cost_calculator.py::TestCostCalculator::test_calculate_rerank_cost_invalid_model PASSED [ 30%]
tests/unit/observability/test_cost_calculator.py::TestCostCalculator::test_add_custom_model PASSED [ 30%]
tests/unit/observability/test_cost_calculator.py::TestCostCalculator::test_get_model_pricing PASSED [ 30%]
tests/unit/observability/test_cost_calculator.py::TestCostCalculator::test_get_model_pricing_nonexistent PASSED [ 31%]
tests/unit/observability/test_cost_calculator.py::TestCostCalculator::test_list_available_models PASSED [ 31%]
tests/unit/observability/test_cost_calculator.py::TestCostCalculator::test_custom_pricing_override PASSED [ 31%]
tests/unit/observability/test_cost_calculator.py::TestCostCalculator::test_zero_cost_models PASSED [ 31%]
tests/unit/observability/test_cost_calculator.py::TestGetCostCalculator::test_get_calculator_singleton PASSED [ 31%]
tests/unit/observability/test_cost_calculator.py::TestGetCostCalculator::test_get_calculator_with_custom_pricing PASSED [ 31%]
tests/unit/observability/test_cost_calculator.py::TestDefaultPricing::test_default_pricing_has_common_models PASSED [ 31%]
tests/unit/observability/test_cost_calculator.py::TestDefaultPricing::test_default_pricing_structure PASSED [ 31%]
tests/unit/observability/test_filters.py::TestPIIFilter::test_filter_email PASSED [ 31%]
tests/unit/observability/test_filters.py::TestPIIFilter::test_filter_multiple_emails PASSED [ 31%]
tests/unit/observability/test_filters.py::TestPIIFilter::test_filter_phone PASSED [ 31%]
tests/unit/observability/test_filters.py::TestPIIFilter::test_filter_ssn PASSED [ 31%]
tests/unit/observability/test_filters.py::TestPIIFilter::test_filter_credit_card PASSED [ 31%]
tests/unit/observability/test_filters.py::TestPIIFilter::test_filter_credit_card_no_dashes PASSED [ 31%]
tests/unit/observability/test_filters.py::TestPIIFilter::test_filter_none_text PASSED [ 31%]
tests/unit/observability/test_filters.py::TestPIIFilter::test_filter_empty_text PASSED [ 31%]
tests/unit/observability/test_filters.py::TestPIIFilter::test_filter_dict PASSED [ 31%]
tests/unit/observability/test_filters.py::TestPIIFilter::test_filter_nested_dict PASSED [ 32%]
tests/unit/observability/test_filters.py::TestPIIFilter::test_filter_dict_with_list PASSED [ 32%]
tests/unit/observability/test_filters.py::TestPIIFilter::test_filter_preserves_non_pii PASSED [ 32%]
tests/unit/observability/test_filters.py::TestPIIFilter::test_filter_mixed_content PASSED [ 32%]
tests/unit/observability/test_filters.py::TestSamplingFilter::test_sampling_filter_initialization PASSED [ 32%]
tests/unit/observability/test_filters.py::TestSamplingFilter::test_sampling_filter_invalid_rate_too_high PASSED [ 32%]
tests/unit/observability/test_filters.py::TestSamplingFilter::test_sampling_filter_invalid_rate_negative PASSED [ 32%]
tests/unit/observability/test_filters.py::TestSamplingFilter::test_sampling_filter_100_percent PASSED [ 32%]
tests/unit/observability/test_filters.py::TestSamplingFilter::test_sampling_filter_0_percent PASSED [ 32%]
tests/unit/observability/test_filters.py::TestSamplingFilter::test_sampling_filter_50_percent PASSED [ 32%]
tests/unit/observability/test_filters.py::TestSamplingFilter::test_sampling_filter_10_percent PASSED [ 32%]
tests/unit/observability/test_logger.py::TestLogContext::test_log_context_creation PASSED [ 32%]
tests/unit/observability/test_logger.py::TestLogContext::test_elapsed_ms PASSED [ 32%]
tests/unit/observability/test_logger.py::TestRAGLogger::test_logger_initialization PASSED [ 32%]
tests/unit/observability/test_logger.py::TestRAGLogger::test_logger_with_config PASSED [ 32%]
tests/unit/observability/test_logger.py::TestRAGLogger::test_logger_with_log_file PASSED [ 32%]
tests/unit/observability/test_logger.py::TestRAGLogger::test_operation_context_success PASSED [ 32%]
tests/unit/observability/test_logger.py::TestRAGLogger::test_operation_context_failure PASSED [ 33%]
tests/unit/observability/test_logger.py::TestRAGLogger::test_operation_context_metadata PASSED [ 33%]
tests/unit/observability/test_logger.py::TestRAGLogger::test_log_query PASSED [ 33%]
tests/unit/observability/test_logger.py::TestRAGLogger::test_log_metrics PASSED [ 33%]
tests/unit/observability/test_logger.py::TestRAGLogger::test_log_error PASSED [ 33%]
tests/unit/observability/test_logger.py::TestRAGLogger::test_convenience_methods PASSED [ 33%]
tests/unit/observability/test_logger.py::TestRAGLogger::test_query_sanitization_truncation PASSED [ 33%]
tests/unit/observability/test_logger.py::TestRAGLogger::test_query_sanitization_email PASSED [ 33%]
tests/unit/observability/test_logger.py::TestRAGLogger::test_query_sanitization_phone PASSED [ 33%]
tests/unit/observability/test_logger.py::TestRAGLogger::test_query_sanitization_ssn PASSED [ 33%]
tests/unit/observability/test_logger.py::TestRAGLogger::test_query_sanitization_none PASSED [ 33%]
tests/unit/observability/test_logger.py::TestGetLogger::test_get_logger_singleton PASSED [ 33%]
tests/unit/observability/test_logger.py::TestGetLogger::test_get_logger_with_config PASSED [ 33%]
tests/unit/observability/test_logger.py::TestLogLevel::test_log_level_values PASSED [ 33%]
tests/unit/observability/test_metrics_collector.py::TestMetricPoint::test_metric_point_creation PASSED [ 33%]
tests/unit/observability/test_metrics_collector.py::TestPerformanceMetrics::test_performance_metrics_creation PASSED [ 33%]
tests/unit/observability/test_metrics_collector.py::TestPerformanceMetrics::test_avg_latency_calculation PASSED [ 33%]
tests/unit/observability/test_metrics_collector.py::TestPerformanceMetrics::test_avg_latency_no_queries PASSED [ 34%]
tests/unit/observability/test_metrics_collector.py::TestPerformanceMetrics::test_success_rate_calculation PASSED [ 34%]
tests/unit/observability/test_metrics_collector.py::TestPerformanceMetrics::test_success_rate_no_queries PASSED [ 34%]
tests/unit/observability/test_metrics_collector.py::TestPerformanceMetrics::test_failure_rate_calculation PASSED [ 34%]
tests/unit/observability/test_metrics_collector.py::TestPerformanceMetrics::test_latency_percentiles PASSED [ 34%]
tests/unit/observability/test_metrics_collector.py::TestPerformanceMetrics::test_percentile_single_value PASSED [ 34%]
tests/unit/observability/test_metrics_collector.py::TestPerformanceMetrics::test_percentile_no_values PASSED [ 34%]
tests/unit/observability/test_metrics_collector.py::TestMetricsCollector::test_collector_initialization PASSED [ 34%]
tests/unit/observability/test_metrics_collector.py::TestMetricsCollector::test_record_successful_query PASSED [ 34%]
tests/unit/observability/test_metrics_collector.py::TestMetricsCollector::test_record_failed_query PASSED [ 34%]
tests/unit/observability/test_metrics_collector.py::TestMetricsCollector::test_multiple_queries PASSED [ 34%]
tests/unit/observability/test_metrics_collector.py::TestMetricsCollector::test_success_rate_calculation PASSED [ 34%]
tests/unit/observability/test_metrics_collector.py::TestMetricsCollector::test_multiple_strategies PASSED [ 34%]
tests/unit/observability/test_metrics_collector.py::TestMetricsCollector::test_get_metrics_nonexistent_strategy PASSED [ 34%]
tests/unit/observability/test_metrics_collector.py::TestMetricsCollector::test_get_summary PASSED [ 34%]
tests/unit/observability/test_metrics_collector.py::TestMetricsCollector::test_get_strategy_names PASSED [ 34%]
tests/unit/observability/test_metrics_collector.py::TestMetricsCollector::test_reset_specific_strategy PASSED [ 34%]
tests/unit/observability/test_metrics_collector.py::TestMetricsCollector::test_reset_all_metrics PASSED [ 35%]
tests/unit/observability/test_metrics_collector.py::TestMetricsCollector::test_time_series_recording PASSED [ 35%]
tests/unit/observability/test_metrics_collector.py::TestMetricsCollector::test_time_series_time_window PASSED [ 35%]
tests/unit/observability/test_metrics_collector.py::TestMetricsCollector::test_time_series_nonexistent_metric PASSED [ 35%]
tests/unit/observability/test_metrics_collector.py::TestMetricsCollector::test_thread_safety PASSED [ 35%]
tests/unit/observability/test_metrics_collector.py::TestMetricsCollector::test_error_tracking PASSED [ 35%]
tests/unit/observability/test_metrics_collector.py::TestGetCollector::test_get_collector_singleton PASSED [ 35%]
tests/unit/observability/test_metrics_collector.py::TestGetCollector::test_get_collector_persistence PASSED [ 35%]
tests/unit/observability/test_performance_monitor.py::TestPerformanceSnapshot::test_performance_snapshot_creation PASSED [ 35%]
tests/unit/observability/test_performance_monitor.py::TestPerformanceMonitor::test_monitor_initialization PASSED [ 35%]
tests/unit/observability/test_performance_monitor.py::TestPerformanceMonitor::test_track_operation PASSED [ 35%]
tests/unit/observability/test_performance_monitor.py::TestPerformanceMonitor::test_track_multiple_executions PASSED [ 35%]
tests/unit/observability/test_performance_monitor.py::TestPerformanceMonitor::test_track_multiple_operations PASSED [ 35%]
tests/unit/observability/test_performance_monitor.py::TestPerformanceMonitor::test_get_stats_nonexistent PASSED [ 35%]
tests/unit/observability/test_performance_monitor.py::TestPerformanceMonitor::test_stats_calculation PASSED [ 35%]
tests/unit/observability/test_performance_monitor.py::TestPerformanceMonitor::test_reset_specific_operation PASSED [ 35%]
tests/unit/observability/test_performance_monitor.py::TestPerformanceMonitor::test_reset_all PASSED [ 35%]
tests/unit/observability/test_performance_monitor.py::TestPerformanceMonitor::test_get_current_system_stats PASSED [ 36%]
tests/unit/observability/test_performance_monitor.py::TestPerformanceMonitor::test_track_with_exception PASSED [ 36%]
tests/unit/observability/test_performance_monitor.py::TestGetPerformanceMonitor::test_get_monitor_singleton PASSED [ 36%]
tests/unit/observability/test_performance_monitor.py::TestGetPerformanceMonitor::test_get_monitor_persistence PASSED [ 36%]
tests/unit/registry/test_exceptions.py::test_service_registry_error PASSED [ 36%]
tests/unit/registry/test_exceptions.py::test_service_not_found_error PASSED [ 36%]
tests/unit/registry/test_exceptions.py::test_service_instantiation_error PASSED [ 36%]
tests/unit/registry/test_service_factory.py::TestServiceTypeDetection::test_is_llm_service PASSED [ 36%]
tests/unit/registry/test_service_factory.py::TestServiceTypeDetection::test_is_llm_service_missing_url PASSED [ 36%]
tests/unit/registry/test_service_factory.py::TestServiceTypeDetection::test_is_llm_service_missing_model PASSED [ 36%]
tests/unit/registry/test_service_factory.py::TestServiceTypeDetection::test_is_embedding_service PASSED [ 36%]
tests/unit/registry/test_service_factory.py::TestServiceTypeDetection::test_is_embedding_service_missing_provider PASSED [ 36%]
tests/unit/registry/test_service_factory.py::TestServiceTypeDetection::test_is_database_service_postgres PASSED [ 36%]
tests/unit/registry/test_service_factory.py::TestServiceTypeDetection::test_is_database_service_neo4j PASSED [ 36%]
tests/unit/registry/test_service_factory.py::TestServiceTypeDetection::test_is_database_service_unknown_type PASSED [ 36%]
tests/unit/registry/test_service_factory.py::TestLLMServiceCreation::test_create_llm_service_openai PASSED [ 36%]
tests/unit/registry/test_service_factory.py::TestLLMServiceCreation::test_create_llm_service_lm_studio PASSED [ 36%]
tests/unit/registry/test_service_factory.py::TestLLMServiceCreation::test_create_llm_service_with_defaults PASSED [ 37%]
tests/unit/registry/test_service_factory.py::TestEmbeddingServiceCreation::test_create_embedding_service_onnx PASSED [ 37%]
tests/unit/registry/test_service_factory.py::TestEmbeddingServiceCreation::test_create_embedding_service_onnx_with_defaults PASSED [ 37%]
tests/unit/registry/test_service_factory.py::TestEmbeddingServiceCreation::test_create_embedding_service_openai PASSED [ 37%]
tests/unit/registry/test_service_factory.py::TestEmbeddingServiceCreation::test_create_embedding_service_cohere_not_implemented PASSED [ 37%]
tests/unit/registry/test_service_factory.py::TestEmbeddingServiceCreation::test_create_embedding_service_unknown_provider PASSED [ 37%]
tests/unit/registry/test_service_factory.py::TestDatabaseServiceCreation::test_create_database_service_postgres_with_connection_string PASSED [ 37%]
tests/unit/registry/test_service_factory.py::TestDatabaseServiceCreation::test_create_database_service_postgres_with_components PASSED [ 37%]
tests/unit/registry/test_service_factory.py::TestDatabaseServiceCreation::test_create_database_service_postgres_with_defaults PASSED [ 37%]
tests/unit/registry/test_service_factory.py::TestDatabaseServiceCreation::test_create_database_service_neo4j PASSED [ 37%]
tests/unit/registry/test_service_factory.py::TestDatabaseServiceCreation::test_create_database_service_neo4j_with_defaults PASSED [ 37%]
tests/unit/registry/test_service_factory.py::TestDatabaseServiceCreation::test_create_database_service_unknown_type PASSED [ 37%]
tests/unit/registry/test_service_factory.py::TestServiceCreation::test_create_service_llm PASSED [ 37%]
tests/unit/registry/test_service_factory.py::TestServiceCreation::test_create_service_embedding PASSED [ 37%]
tests/unit/registry/test_service_factory.py::TestServiceCreation::test_create_service_database PASSED [ 37%]
tests/unit/registry/test_service_factory.py::TestServiceCreation::test_create_service_unknown_type PASSED [ 37%]
tests/unit/registry/test_service_registry.py::TestServiceRegistryInitialization::test_registry_initialization PASSED [ 37%]
tests/unit/registry/test_service_registry.py::TestServiceRegistryInitialization::test_registry_initialization_file_not_found PASSED [ 38%]
tests/unit/registry/test_service_registry.py::TestServiceRegistryInitialization::test_registry_initialization_invalid_yaml PASSED [ 38%]
tests/unit/registry/test_service_registry.py::TestServiceRegistryInitialization::test_registry_loads_and_validates_config PASSED [ 38%]
tests/unit/registry/test_service_registry.py::TestServiceRegistryInitialization::test_registry_resolves_environment_variables PASSED [ 38%]
tests/unit/registry/test_service_registry.py::TestServiceLookup::test_list_services PASSED [ 38%]
tests/unit/registry/test_service_registry.py::TestServiceLookup::test_list_services_empty_registry PASSED [ 38%]
tests/unit/registry/test_service_registry.py::TestServiceLookup::test_get_service_creates_instance PASSED [ 38%]
tests/unit/registry/test_service_registry.py::TestServiceLookup::test_get_service_caches_instance PASSED [ 38%]
tests/unit/registry/test_service_registry.py::TestServiceLookup::test_get_service_with_dollar_prefix PASSED [ 38%]
tests/unit/registry/test_service_registry.py::TestServiceLookup::test_get_service_strips_dollar_prefix PASSED [ 38%]
tests/unit/registry/test_service_registry.py::TestServiceLookup::test_get_nonexistent_service_raises_error PASSED [ 38%]
tests/unit/registry/test_service_registry.py::TestServiceLookup::test_get_service_from_empty_registry PASSED [ 38%]
tests/unit/registry/test_service_registry.py::TestServiceLookup::test_get_service_instantiation_failure PASSED [ 38%]
tests/unit/registry/test_service_registry.py::TestServiceLifecycle::test_reload_service PASSED [ 38%]
tests/unit/registry/test_service_registry.py::TestServiceLifecycle::test_reload_service_without_close_method PASSED [ 38%]
tests/unit/registry/test_service_registry.py::TestServiceLifecycle::test_reload_service_with_dollar_prefix PASSED [ 38%]
tests/unit/registry/test_service_registry.py::TestServiceLifecycle::test_reload_nonexistent_service PASSED [ 38%]
tests/unit/registry/test_service_registry.py::TestServiceLifecycle::test_shutdown_closes_all_services PASSED [ 39%]
tests/unit/registry/test_service_registry.py::TestServiceLifecycle::test_shutdown_handles_close_errors PASSED [ 39%]
tests/unit/registry/test_service_registry.py::TestServiceLifecycle::test_shutdown_skips_services_without_close PASSED [ 39%]
tests/unit/registry/test_service_registry.py::TestContextManager::test_context_manager PASSED [ 39%]
tests/unit/registry/test_service_registry.py::TestContextManager::test_context_manager_with_exception PASSED [ 39%]
tests/unit/registry/test_service_registry.py::TestContextManager::test_context_manager_usage PASSED [ 39%]
tests/unit/registry/test_service_registry.py::TestThreadSafety::test_double_check_locking PASSED [ 39%]
tests/unit/registry/test_service_registry.py::TestThreadSafety::test_per_service_locks PASSED [ 39%]
tests/unit/registry/test_threading.py::TestConcurrentServiceAccess::test_concurrent_service_access_creates_single_instance PASSED [ 39%]
tests/unit/registry/test_threading.py::TestConcurrentServiceAccess::test_concurrent_service_access_returns_same_instance PASSED [ 39%]
tests/unit/registry/test_threading.py::TestConcurrentServiceAccess::test_concurrent_access_with_slow_instantiation PASSED [ 39%]
tests/unit/registry/test_threading.py::TestConcurrentDifferentServices::test_concurrent_different_services PASSED [ 39%]
tests/unit/registry/test_threading.py::TestConcurrentDifferentServices::test_concurrent_different_services_independent_locks PASSED [ 39%]
tests/unit/registry/test_threading.py::TestConcurrentReload::test_reload_while_getting_service PASSED [ 39%]
tests/unit/registry/test_threading.py::TestConcurrentShutdown::test_shutdown_while_getting_services PASSED [ 39%]
tests/unit/registry/test_threading.py::TestRaceConditions::test_no_duplicate_instantiation_race PASSED [ 39%]
tests/unit/registry/test_threading.py::TestRaceConditions::test_cache_consistency_under_load PASSED [ 39%]
tests/unit/repositories/test_chunk_repository.py::TestChunkRepositoryCreate::test_create_chunk_success PASSED [ 40%]
tests/unit/repositories/test_chunk_repository.py::TestChunkRepositoryCreate::test_create_chunk_with_embedding PASSED [ 40%]
tests/unit/repositories/test_chunk_repository.py::TestChunkRepositoryCreate::test_create_chunk_with_metadata PASSED [ 40%]
tests/unit/repositories/test_chunk_repository.py::TestChunkRepositoryCreate::test_create_chunk_database_error PASSED [ 40%]
tests/unit/repositories/test_chunk_repository.py::TestChunkRepositoryCreate::test_bulk_create_chunks PASSED [ 40%]
tests/unit/repositories/test_chunk_repository.py::TestChunkRepositoryCreate::test_bulk_create_database_error PASSED [ 40%]
tests/unit/repositories/test_chunk_repository.py::TestChunkRepositoryRead::test_get_by_id_found PASSED [ 40%]
tests/unit/repositories/test_chunk_repository.py::TestChunkRepositoryRead::test_get_by_id_not_found PASSED [ 40%]
tests/unit/repositories/test_chunk_repository.py::TestChunkRepositoryRead::test_get_by_id_database_error PASSED [ 40%]
tests/unit/repositories/test_chunk_repository.py::TestChunkRepositoryRead::test_get_by_document PASSED [ 40%]
tests/unit/repositories/test_chunk_repository.py::TestChunkRepositoryRead::test_count_by_document PASSED [ 40%]
tests/unit/repositories/test_chunk_repository.py::TestChunkRepositoryUpdate::test_update_chunk_success PASSED [ 40%]
tests/unit/repositories/test_chunk_repository.py::TestChunkRepositoryUpdate::test_update_chunk_not_found PASSED [ 40%]
tests/unit/repositories/test_chunk_repository.py::TestChunkRepositoryUpdate::test_update_embedding PASSED [ 40%]
tests/unit/repositories/test_chunk_repository.py::TestChunkRepositoryUpdate::test_update_embedding_not_found PASSED [ 40%]
tests/unit/repositories/test_chunk_repository.py::TestChunkRepositoryUpdate::test_bulk_update_embeddings PASSED [ 40%]
tests/unit/repositories/test_chunk_repository.py::TestChunkRepositoryUpdate::test_bulk_update_embeddings_database_error PASSED [ 40%]
tests/unit/repositories/test_chunk_repository.py::TestChunkRepositoryDelete::test_delete_chunk_success PASSED [ 41%]
tests/unit/repositories/test_chunk_repository.py::TestChunkRepositoryDelete::test_delete_chunk_not_found PASSED [ 41%]
tests/unit/repositories/test_chunk_repository.py::TestChunkRepositoryDelete::test_delete_by_document PASSED [ 41%]
tests/unit/repositories/test_chunk_repository.py::TestChunkRepositoryDelete::test_delete_database_error PASSED [ 41%]
tests/unit/repositories/test_chunk_repository.py::TestChunkRepositoryVectorSearch::test_search_similar_validation_empty_embedding PASSED [ 41%]
tests/unit/repositories/test_chunk_repository.py::TestChunkRepositoryVectorSearch::test_search_similar_validation_invalid_top_k PASSED [ 41%]
tests/unit/repositories/test_chunk_repository.py::TestChunkRepositoryVectorSearch::test_search_similar_success PASSED [ 41%]
tests/unit/repositories/test_chunk_repository.py::TestChunkRepositoryVectorSearch::test_search_similar_with_threshold PASSED [ 41%]
tests/unit/repositories/test_chunk_repository.py::TestChunkRepositoryVectorSearch::test_search_similar_database_error PASSED [ 41%]
tests/unit/repositories/test_chunk_repository.py::TestChunkRepositoryVectorSearch::test_search_similar_with_filter_validation PASSED [ 41%]
tests/unit/repositories/test_chunk_repository.py::TestChunkRepositoryVectorSearch::test_search_similar_with_filter_success PASSED [ 41%]
tests/unit/repositories/test_chunk_repository.py::TestChunkRepositoryVectorSearch::test_search_similar_with_metadata_success PASSED [ 41%]
tests/unit/repositories/test_chunk_repository.py::TestChunkRepositoryVectorSearch::test_search_similar_with_metadata_validation PASSED [ 41%]
tests/unit/repositories/test_chunk_repository.py::TestChunkRepositoryEdgeCases::test_create_chunk_without_embedding PASSED [ 41%]
tests/unit/repositories/test_chunk_repository.py::TestChunkRepositoryEdgeCases::test_update_with_metadata_attribute PASSED [ 41%]
tests/unit/repositories/test_document_repository.py::TestDocumentRepositoryCreate::test_create_document_success PASSED [ 41%]
tests/unit/repositories/test_document_repository.py::TestDocumentRepositoryCreate::test_create_document_with_metadata PASSED [ 41%]
tests/unit/repositories/test_document_repository.py::TestDocumentRepositoryCreate::test_create_document_duplicate_raises_error PASSED [ 42%]
tests/unit/repositories/test_document_repository.py::TestDocumentRepositoryCreate::test_create_document_database_error PASSED [ 42%]
tests/unit/repositories/test_document_repository.py::TestDocumentRepositoryRead::test_get_by_id_found PASSED [ 42%]
tests/unit/repositories/test_document_repository.py::TestDocumentRepositoryRead::test_get_by_id_not_found PASSED [ 42%]
tests/unit/repositories/test_document_repository.py::TestDocumentRepositoryRead::test_get_by_id_database_error PASSED [ 42%]
tests/unit/repositories/test_document_repository.py::TestDocumentRepositoryRead::test_get_by_content_hash_found PASSED [ 42%]
tests/unit/repositories/test_document_repository.py::TestDocumentRepositoryRead::test_list_all_with_pagination PASSED [ 42%]
tests/unit/repositories/test_document_repository.py::TestDocumentRepositoryRead::test_count_documents PASSED [ 42%]
tests/unit/repositories/test_document_repository.py::TestDocumentRepositoryRead::test_get_by_status PASSED [ 42%]
tests/unit/repositories/test_document_repository.py::TestDocumentRepositoryUpdate::test_update_document_success PASSED [ 42%]
tests/unit/repositories/test_document_repository.py::TestDocumentRepositoryUpdate::test_update_document_not_found PASSED [ 42%]
tests/unit/repositories/test_document_repository.py::TestDocumentRepositoryUpdate::test_update_status PASSED [ 42%]
tests/unit/repositories/test_document_repository.py::TestDocumentRepositoryUpdate::test_update_metadata PASSED [ 42%]
tests/unit/repositories/test_document_repository.py::TestDocumentRepositoryUpdate::test_update_database_error PASSED [ 42%]
tests/unit/repositories/test_document_repository.py::TestDocumentRepositoryDelete::test_delete_document_success PASSED [ 42%]
tests/unit/repositories/test_document_repository.py::TestDocumentRepositoryDelete::test_delete_document_not_found PASSED [ 42%]
tests/unit/repositories/test_document_repository.py::TestDocumentRepositoryDelete::test_delete_database_error PASSED [ 42%]
tests/unit/repositories/test_document_repository.py::TestDocumentRepositoryDelete::test_bulk_delete_documents PASSED [ 43%]
tests/unit/repositories/test_document_repository.py::TestDocumentRepositoryBulkOperations::test_bulk_create_documents PASSED [ 43%]
tests/unit/repositories/test_document_repository.py::TestDocumentRepositoryBulkOperations::test_bulk_create_database_error PASSED [ 43%]
tests/unit/repositories/test_document_repository.py::TestDocumentRepositoryTransactions::test_commit_success PASSED [ 43%]
tests/unit/repositories/test_document_repository.py::TestDocumentRepositoryTransactions::test_commit_failure_triggers_rollback PASSED [ 43%]
tests/unit/repositories/test_document_repository.py::TestDocumentRepositoryTransactions::test_rollback PASSED [ 43%]
tests/unit/repositories/test_exceptions.py::TestRepositoryError::test_repository_error_message PASSED [ 43%]
tests/unit/repositories/test_exceptions.py::TestRepositoryError::test_repository_error_inheritance PASSED [ 43%]
tests/unit/repositories/test_exceptions.py::TestEntityNotFoundError::test_entity_not_found_attributes PASSED [ 43%]
tests/unit/repositories/test_exceptions.py::TestEntityNotFoundError::test_entity_not_found_message PASSED [ 43%]
tests/unit/repositories/test_exceptions.py::TestEntityNotFoundError::test_entity_not_found_inheritance PASSED [ 43%]
tests/unit/repositories/test_exceptions.py::TestDuplicateEntityError::test_duplicate_entity_attributes PASSED [ 43%]
tests/unit/repositories/test_exceptions.py::TestDuplicateEntityError::test_duplicate_entity_message PASSED [ 43%]
tests/unit/repositories/test_exceptions.py::TestDuplicateEntityError::test_duplicate_entity_inheritance PASSED [ 43%]
tests/unit/repositories/test_exceptions.py::TestDatabaseConnectionError::test_database_connection_error_message PASSED [ 43%]
tests/unit/repositories/test_exceptions.py::TestDatabaseConnectionError::test_database_connection_error_inheritance PASSED [ 43%]
tests/unit/repositories/test_exceptions.py::TestInvalidQueryError::test_invalid_query_error_message PASSED [ 43%]
tests/unit/repositories/test_exceptions.py::TestInvalidQueryError::test_invalid_query_error_inheritance PASSED [ 44%]
tests/unit/services/database/test_database_context.py::TestDatabaseContextInitialization::test_initialization_with_all_parameters PASSED [ 44%]
tests/unit/services/database/test_database_context.py::TestDatabaseContextInitialization::test_initialization_without_field_mapping PASSED [ 44%]
tests/unit/services/database/test_database_context.py::TestDatabaseContextInitialization::test_field_mapping_passthrough PASSED [ 44%]
tests/unit/services/database/test_database_context.py::TestTableMapping::test_get_table_unmapped_logical_name_raises_error PASSED [ 44%]
tests/unit/services/database/test_database_context.py::TestTableMapping::test_get_table_caches_reflected_tables PASSED [ 44%]
tests/unit/services/database/test_database_context.py::TestFieldMapping::test_map_field_with_mapping PASSED [ 44%]
tests/unit/services/database/test_database_context.py::TestFieldMapping::test_map_field_without_mapping PASSED [ 44%]
tests/unit/services/database/test_database_context.py::TestFieldMapping::test_map_field_with_empty_mapping PASSED [ 44%]
tests/unit/services/database/test_database_context.py::TestContextIsolation::test_different_contexts_have_different_mappings PASSED [ 44%]
tests/unit/services/database/test_database_context.py::TestContextIsolation::test_contexts_share_same_engine PASSED [ 44%]
tests/unit/services/database/test_database_context.py::TestContextIsolation::test_contexts_have_independent_reflection_cache PASSED [ 44%]
tests/unit/services/database/test_database_context_crud.py::TestInsertOperation::test_insert_with_field_mapping PASSED [ 44%]
tests/unit/services/database/test_database_context_crud.py::TestInsertOperation::test_insert_without_field_mapping PASSED [ 44%]
tests/unit/services/database/test_database_context_crud.py::TestInsertOperation::test_insert_multiple_rows PASSED [ 44%]
tests/unit/services/database/test_database_context_crud.py::TestQueryOperation::test_query_all_rows PASSED [ 44%]
tests/unit/services/database/test_database_context_crud.py::TestQueryOperation::test_query_with_filter PASSED [ 44%]
tests/unit/services/database/test_database_context_crud.py::TestQueryOperation::test_query_with_multiple_filters PASSED [ 45%]
tests/unit/services/database/test_database_context_crud.py::TestQueryOperation::test_query_with_limit PASSED [ 45%]
tests/unit/services/database/test_database_context_crud.py::TestQueryOperation::test_query_empty_result PASSED [ 45%]
tests/unit/services/database/test_database_context_crud.py::TestUpdateOperation::test_update_with_mapping PASSED [ 45%]
tests/unit/services/database/test_database_context_crud.py::TestUpdateOperation::test_update_multiple_rows PASSED [ 45%]
tests/unit/services/database/test_database_context_crud.py::TestUpdateOperation::test_update_multiple_fields PASSED [ 45%]
tests/unit/services/database/test_database_context_crud.py::TestDeleteOperation::test_delete_with_mapping PASSED [ 45%]
tests/unit/services/database/test_database_context_crud.py::TestDeleteOperation::test_delete_multiple_rows PASSED [ 45%]
tests/unit/services/database/test_database_context_crud.py::TestDeleteOperation::test_delete_with_specific_filter PASSED [ 45%]
tests/unit/services/database/test_database_context_crud.py::TestCRUDIntegration::test_full_crud_cycle PASSED [ 45%]
tests/unit/services/database/test_database_context_vector.py::TestVectorSearchErrorHandling::test_invalid_distance_metric_raises_error PASSED [ 45%]
tests/unit/services/database/test_database_context_vector.py::TestVectorSearchWithPostgreSQL::test_vector_search_cosine_distance SKIPPEDused
Is the server running on that host and accepting TCP/IP connections?
(Background on this error at: https://sqlalche.me/e/20/e3q8))            [ 45%]
tests/unit/services/database/test_database_context_vector.py::TestVectorSearchWithPostgreSQL::test_vector_search_l2_distance SKIPPEDrver at
"localhost" (127.0.0.1), port 5432 failed: Connection refused
        Is
the server running on that host and accepting TCP/IP connections?
(Background on this error at: https://sqlalche.me/e/20/e3q8))            [ 45%]
tests/unit/services/database/test_database_context_vector.py::TestVectorSearchWithPostgreSQL::test_vector_search_inner_product SKIPPEDefused
Is the server running on that host and accepting TCP/IP connections?
(Background on this error at: https://sqlalche.me/e/20/e3q8))            [ 45%]
tests/unit/services/database/test_database_context_vector.py::TestVectorSearchWithPostgreSQL::test_vector_search_top_k_limit SKIPPEDrver at
"localhost" (127.0.0.1), port 5432 failed: Connection refused
        Is
the server running on that host and accepting TCP/IP connections?
(Background on this error at: https://sqlalche.me/e/20/e3q8))            [ 45%]
tests/unit/services/database/test_database_context_vector.py::TestVectorSearchWithPostgreSQL::test_vector_search_with_field_mapping SKIPPEDd
Is the server running on that host and accepting TCP/IP connections?
(Background on this error at: https://sqlalche.me/e/20/e3q8))            [ 45%]
tests/unit/services/database/test_database_context_vector.py::TestVectorSearchWithPostgreSQL::test_vector_search_empty_table SKIPPEDrver at
"localhost" (127.0.0.1), port 5432 failed: Connection refused
        Is
the server running on that host and accepting TCP/IP connections?
(Background on this error at: https://sqlalche.me/e/20/e3q8))            [ 45%]
tests/unit/services/database/test_database_context_vector.py::TestVectorSearchMocking::test_vector_search_uses_correct_distance_function PASSED [ 46%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_init_with_config_path PASSED [ 46%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_init_without_config_path PASSED [ 46%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_find_alembic_config_success PASSED [ 46%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_find_alembic_config_not_found PASSED [ 46%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_validate_all_migrations_applied PASSED [ 46%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_validate_missing_migrations PASSED [ 46%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_validate_no_migrations_applied PASSED [ 46%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_validate_or_raise_success PASSED [ 46%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_validate_or_raise_failure PASSED [ 46%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_build_error_message PASSED [ 46%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_build_error_message_empty PASSED [ 46%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_get_current_revision_success PASSED [ 46%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_get_current_revision_no_table PASSED [ 46%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_get_current_revision_programming_error PASSED [ 46%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_get_applied_revisions PASSED [ 46%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_get_current_revision_public_method PASSED [ 46%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_get_all_revisions PASSED [ 47%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_get_all_revisions_no_head PASSED [ 47%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_is_at_head_true PASSED [ 47%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_is_at_head_false PASSED [ 47%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_is_at_head_no_migrations PASSED [ 47%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_migration_validation_error_attributes PASSED [ 47%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidatorIntegration::test_full_validation_workflow PASSED [ 47%]
tests/unit/services/database/test_postgres_service_context.py::TestGetContextMethod::test_get_context_creates_context_with_mappings PASSED [ 47%]
tests/unit/services/database/test_postgres_service_context.py::TestGetContextMethod::test_get_context_without_field_mapping PASSED [ 47%]
tests/unit/services/database/test_postgres_service_context.py::TestGetContextMethod::test_get_context_caches_contexts PASSED [ 47%]
tests/unit/services/database/test_postgres_service_context.py::TestGetContextMethod::test_get_context_different_mappings_create_different_contexts PASSED [ 47%]
tests/unit/services/database/test_postgres_service_context.py::TestGetContextMethod::test_get_context_shares_engine_across_contexts PASSED [ 47%]
tests/unit/services/database/test_postgres_service_context.py::TestSyncEngineCreation::test_sync_engine_created_with_correct_connection_string PASSED [ 47%]
tests/unit/services/database/test_postgres_service_context.py::TestSyncEngineCreation::test_sync_engine_created_with_connection_pooling PASSED [ 47%]
tests/unit/services/database/test_postgres_service_context.py::TestSyncEngineCreation::test_sync_engine_created_without_password PASSED [ 47%]
tests/unit/services/database/test_postgres_service_context.py::TestSyncEngineCreation::test_sync_engine_reused_across_calls PASSED [ 47%]
tests/unit/services/database/test_postgres_service_context.py::TestSyncEngineCreation::test_get_context_raises_error_when_sqlalchemy_not_available PASSED [ 47%]
tests/unit/services/database/test_postgres_service_context.py::TestContextCleanup::test_close_disposes_sync_engine PASSED [ 48%]
tests/unit/services/database/test_postgres_service_context.py::TestContextCleanup::test_close_clears_context_cache PASSED [ 48%]
tests/unit/services/database/test_postgres_service_context.py::TestContextCleanup::test_close_handles_no_engine_gracefully PASSED [ 48%]
tests/unit/services/database/test_postgres_service_context.py::TestContextCacheKeyGeneration::test_same_mappings_generate_same_cache_key PASSED [ 48%]
tests/unit/services/database/test_postgres_service_context.py::TestContextCacheKeyGeneration::test_different_table_mappings_generate_different_keys PASSED [ 48%]
tests/unit/services/database/test_postgres_service_context.py::TestContextCacheKeyGeneration::test_different_field_mappings_generate_different_keys PASSED [ 48%]
tests/unit/services/database/test_postgres_service_context.py::TestContextCacheKeyGeneration::test_none_field_mapping_vs_empty_dict PASSED [ 48%]
tests/unit/services/embedding/test_cache.py::test_cache_set_and_get PASSED [ 48%]
tests/unit/services/embedding/test_cache.py::test_cache_miss PASSED      [ 48%]
tests/unit/services/embedding/test_cache.py::test_cache_expiration PASSED [ 48%]
tests/unit/services/embedding/test_cache.py::test_cache_max_size PASSED  [ 48%]
tests/unit/services/embedding/test_cache.py::test_cache_lru_eviction PASSED [ 48%]
tests/unit/services/embedding/test_cache.py::test_cache_clear PASSED     [ 48%]
tests/unit/services/embedding/test_cache.py::test_cache_stats PASSED     [ 48%]
tests/unit/services/embedding/test_cache.py::test_cache_thread_safety PASSED [ 48%]
tests/unit/services/embedding/test_cache.py::test_cache_update_existing_key PASSED [ 48%]
tests/unit/services/embedding/test_cache.py::test_cache_large_embeddings PASSED [ 48%]
tests/unit/services/embedding/test_onnx_local_provider.py::test_provider_not_available_raises_error PASSED [ 49%]
tests/unit/services/embedding/test_onnx_local_provider.py::test_provider_initialization PASSED [ 49%]
tests/unit/services/embedding/test_onnx_local_provider.py::test_get_embeddings PASSED [ 49%]
tests/unit/services/embedding/test_onnx_local_provider.py::test_calculate_cost_is_zero PASSED [ 49%]
tests/unit/services/embedding/test_onnx_local_provider.py::test_known_model_dimensions PASSED [ 49%]
tests/unit/services/embedding/test_onnx_local_provider.py::test_unknown_model_uses_output_shape PASSED [ 49%]
tests/unit/services/embedding/test_onnx_local_provider.py::test_custom_batch_size PASSED [ 49%]
tests/unit/services/embedding/test_onnx_local_provider.py::test_model_loading_failure PASSED [ 49%]
tests/unit/services/embedding/test_onnx_local_provider.py::test_get_model_name PASSED [ 49%]
tests/unit/services/embedding/test_onnx_local_provider.py::test_mean_pooling PASSED [ 49%]
tests/unit/services/embedding/test_openai_provider.py::test_provider_initialization PASSED [ 49%]
tests/unit/services/embedding/test_openai_provider.py::test_provider_invalid_model PASSED [ 49%]
tests/unit/services/embedding/test_openai_provider.py::test_provider_missing_api_key PASSED [ 49%]
tests/unit/services/embedding/test_openai_provider.py::test_get_embeddings PASSED [ 49%]
tests/unit/services/embedding/test_openai_provider.py::test_calculate_cost PASSED [ 49%]
tests/unit/services/embedding/test_openai_provider.py::test_get_max_batch_size PASSED [ 49%]
tests/unit/services/embedding/test_openai_provider.py::test_get_model_name PASSED [ 49%]
tests/unit/services/embedding/test_openai_provider.py::test_different_models PASSED [ 50%]
tests/unit/services/embedding/test_openai_provider.py::test_openai_not_installed PASSED [ 50%]
tests/unit/services/embedding/test_rate_limiter.py::test_rate_limiter_initialization PASSED [ 50%]
tests/unit/services/embedding/test_rate_limiter.py::test_rate_limiter_allows_first_request PASSED [ 50%]
tests/unit/services/embedding/test_rate_limiter.py::test_rate_limiter_enforces_limit PASSED [ 50%]
tests/unit/services/embedding/test_rate_limiter.py::test_rate_limiter_requests_per_minute PASSED [ 50%]
tests/unit/services/embedding/test_rate_limiter.py::test_rate_limiter_multiple_requests PASSED [ 50%]
tests/unit/services/embedding/test_rate_limiter.py::test_rate_limiter_thread_safety PASSED [ 50%]
tests/unit/services/embedding/test_rate_limiter.py::test_rate_limiter_prefers_stricter_limit PASSED [ 50%]
tests/unit/services/embedding/test_service.py::test_service_initialization PASSED [ 50%]
tests/unit/services/embedding/test_service.py::test_embed_single_text PASSED [ 50%]
tests/unit/services/embedding/test_service.py::test_embed_multiple_texts PASSED [ 50%]
tests/unit/services/embedding/test_service.py::test_embed_empty_list_raises_error PASSED [ 50%]
tests/unit/services/embedding/test_service.py::test_cache_hit PASSED     [ 50%]
tests/unit/services/embedding/test_service.py::test_cache_disabled PASSED [ 50%]
tests/unit/services/embedding/test_service.py::test_batch_splitting PASSED [ 50%]
tests/unit/services/embedding/test_service.py::test_get_stats PASSED     [ 50%]
tests/unit/services/embedding/test_service.py::test_clear_cache PASSED   [ 50%]
tests/unit/services/embedding/test_service.py::test_unknown_provider_raises_error PASSED [ 51%]
tests/unit/services/embedding/test_service.py::test_compute_cache_key PASSED [ 51%]
tests/unit/services/embedding/test_service.py::test_cache_different_models PASSED [ 51%]
tests/unit/services/embedding/test_service.py::test_rate_limiter_interaction PASSED [ 51%]
tests/unit/services/embedding/test_service.py::test_provider_error_handling PASSED [ 51%]
tests/unit/services/embeddings/test_onnx_local.py::TestONNXLocalProvider::test_initialization PASSED [ 51%]
tests/unit/services/embeddings/test_onnx_local.py::TestONNXLocalProvider::test_initialization_with_custom_config PASSED [ 51%]
tests/unit/services/embeddings/test_onnx_local.py::TestONNXLocalProvider::test_get_embeddings_single_text PASSED [ 51%]
tests/unit/services/embeddings/test_onnx_local.py::TestONNXLocalProvider::test_get_embeddings_multiple_texts PASSED [ 51%]
tests/unit/services/embeddings/test_onnx_local.py::TestONNXLocalProvider::test_get_embeddings_empty_list PASSED [ 51%]
tests/unit/services/embeddings/test_onnx_local.py::TestONNXLocalProvider::test_embedding_normalization PASSED [ 51%]
tests/unit/services/embeddings/test_onnx_local.py::TestONNXLocalProvider::test_get_dimensions PASSED [ 51%]
tests/unit/services/embeddings/test_onnx_local.py::TestONNXLocalProvider::test_get_max_batch_size PASSED [ 51%]
tests/unit/services/embeddings/test_onnx_local.py::TestONNXLocalProvider::test_get_model_name PASSED [ 51%]
tests/unit/services/embeddings/test_onnx_local.py::TestONNXLocalProvider::test_calculate_cost PASSED [ 51%]
tests/unit/services/embeddings/test_onnx_local.py::TestONNXLocalProvider::test_known_models PASSED [ 51%]
tests/unit/services/embeddings/test_onnx_local.py::TestONNXLocalProvider::test_missing_onnx_runtime PASSED [ 51%]
tests/unit/services/embeddings/test_onnx_local.py::TestONNXLocalProvider::test_model_loading_failure PASSED [ 52%]
tests/unit/services/embeddings/test_onnx_local.py::TestONNXLocalProvider::test_session_creation_failure PASSED [ 52%]
tests/unit/services/llm/test_anthropic_provider.py::test_provider_initialization PASSED [ 52%]
tests/unit/services/llm/test_anthropic_provider.py::test_provider_invalid_model PASSED [ 52%]
tests/unit/services/llm/test_anthropic_provider.py::test_complete PASSED [ 52%]
tests/unit/services/llm/test_anthropic_provider.py::test_complete_with_system_message PASSED [ 52%]
tests/unit/services/llm/test_anthropic_provider.py::test_count_tokens PASSED [ 52%]
tests/unit/services/llm/test_anthropic_provider.py::test_calculate_cost PASSED [ 52%]
tests/unit/services/llm/test_anthropic_provider.py::test_get_model_name PASSED [ 52%]
tests/unit/services/llm/test_anthropic_provider.py::test_get_max_tokens PASSED [ 52%]
tests/unit/services/llm/test_anthropic_provider.py::test_stream PASSED   [ 52%]
tests/unit/services/llm/test_anthropic_provider.py::test_different_models PASSED [ 52%]
tests/unit/services/llm/test_ollama_provider.py::test_provider_initialization PASSED [ 52%]
tests/unit/services/llm/test_ollama_provider.py::test_provider_default_values PASSED [ 52%]
tests/unit/services/llm/test_ollama_provider.py::test_complete PASSED    [ 52%]
tests/unit/services/llm/test_ollama_provider.py::test_complete_with_system_message PASSED [ 52%]
tests/unit/services/llm/test_ollama_provider.py::test_count_tokens PASSED [ 52%]
tests/unit/services/llm/test_ollama_provider.py::test_calculate_cost PASSED [ 53%]
tests/unit/services/llm/test_ollama_provider.py::test_get_model_name PASSED [ 53%]
tests/unit/services/llm/test_ollama_provider.py::test_get_max_tokens PASSED [ 53%]
tests/unit/services/llm/test_ollama_provider.py::test_messages_to_prompt PASSED [ 53%]
tests/unit/services/llm/test_ollama_provider.py::test_stream PASSED      [ 53%]
tests/unit/services/llm/test_openai_provider.py::test_provider_initialization PASSED [ 53%]
tests/unit/services/llm/test_openai_provider.py::test_provider_invalid_model PASSED [ 53%]
tests/unit/services/llm/test_openai_provider.py::test_complete PASSED    [ 53%]
tests/unit/services/llm/test_openai_provider.py::test_complete_with_system_message PASSED [ 53%]
tests/unit/services/llm/test_openai_provider.py::test_count_tokens PASSED [ 53%]
tests/unit/services/llm/test_openai_provider.py::test_calculate_cost PASSED [ 53%]
tests/unit/services/llm/test_openai_provider.py::test_get_model_name PASSED [ 53%]
tests/unit/services/llm/test_openai_provider.py::test_get_max_tokens PASSED [ 53%]
tests/unit/services/llm/test_openai_provider.py::test_stream PASSED      [ 53%]
tests/unit/services/llm/test_openai_provider.py::test_different_models PASSED [ 53%]
tests/unit/services/llm/test_prompt_template.py::test_template_with_system_and_user PASSED [ 53%]
tests/unit/services/llm/test_prompt_template.py::test_template_user_only PASSED [ 53%]
tests/unit/services/llm/test_prompt_template.py::test_template_with_few_shot_examples PASSED [ 54%]
tests/unit/services/llm/test_prompt_template.py::test_template_missing_variable_raises_error PASSED [ 54%]
tests/unit/services/llm/test_prompt_template.py::test_template_validation PASSED [ 54%]
tests/unit/services/llm/test_prompt_template.py::test_common_template_rag_qa PASSED [ 54%]
tests/unit/services/llm/test_prompt_template.py::test_common_template_summarization PASSED [ 54%]
tests/unit/services/llm/test_prompt_template.py::test_template_multiple_variables PASSED [ 54%]
tests/unit/services/llm/test_prompt_template.py::test_template_with_assistant_prefix PASSED [ 54%]
tests/unit/services/llm/test_prompt_template.py::test_common_template_classification PASSED [ 54%]
tests/unit/services/llm/test_prompt_template.py::test_common_template_extraction PASSED [ 54%]
tests/unit/services/llm/test_prompt_template.py::test_empty_template PASSED [ 54%]
tests/unit/services/llm/test_prompt_template.py::test_template_with_special_characters PASSED [ 54%]
tests/unit/services/llm/test_service.py::test_service_initialization PASSED [ 54%]
tests/unit/services/llm/test_service.py::test_complete_single_message PASSED [ 54%]
tests/unit/services/llm/test_service.py::test_complete_with_system_message PASSED [ 54%]
tests/unit/services/llm/test_service.py::test_complete_empty_messages_raises_error PASSED [ 54%]
tests/unit/services/llm/test_service.py::test_complete_with_temperature PASSED [ 54%]
tests/unit/services/llm/test_service.py::test_complete_with_max_tokens PASSED [ 54%]
tests/unit/services/llm/test_service.py::test_stats_tracking PASSED      [ 55%]
tests/unit/services/llm/test_service.py::test_count_tokens PASSED        [ 55%]
tests/unit/services/llm/test_service.py::test_estimate_cost PASSED       [ 55%]
tests/unit/services/llm/test_service.py::test_stream_messages PASSED     [ 55%]
tests/unit/services/llm/test_service.py::test_stream_with_callback PASSED [ 55%]
tests/unit/services/llm/test_service.py::test_stream_empty_messages_raises_error PASSED [ 55%]
tests/unit/services/llm/test_service.py::test_provider_error_handling PASSED [ 55%]
tests/unit/services/llm/test_service.py::test_rate_limiter_interaction PASSED [ 55%]
tests/unit/services/test_consistency.py::TestConsistencyChecker::test_indexing_consistent_vectors PASSED [ 55%]
tests/unit/services/test_consistency.py::TestConsistencyChecker::test_indexing_consistent_graph PASSED [ 55%]
tests/unit/services/test_consistency.py::TestConsistencyChecker::test_indexing_consistent_in_memory PASSED [ 55%]
tests/unit/services/test_consistency.py::TestConsistencyChecker::test_indexing_vectors_without_embedding PASSED [ 55%]
tests/unit/services/test_consistency.py::TestConsistencyChecker::test_indexing_graph_without_graph_service PASSED [ 55%]
tests/unit/services/test_consistency.py::TestConsistencyChecker::test_indexing_database_without_database_service PASSED [ 55%]
tests/unit/services/test_consistency.py::TestConsistencyChecker::test_indexing_in_memory_with_database PASSED [ 55%]
tests/unit/services/test_consistency.py::TestConsistencyChecker::test_indexing_multiple_inconsistencies PASSED [ 55%]
tests/unit/services/test_consistency.py::TestConsistencyChecker::test_retrieval_consistent_vectors PASSED [ 55%]
tests/unit/services/test_consistency.py::TestConsistencyChecker::test_retrieval_consistent_graph PASSED [ 56%]
tests/unit/services/test_consistency.py::TestConsistencyChecker::test_retrieval_consistent_keywords PASSED [ 56%]
tests/unit/services/test_consistency.py::TestConsistencyChecker::test_retrieval_vectors_without_database PASSED [ 56%]
tests/unit/services/test_consistency.py::TestConsistencyChecker::test_retrieval_graph_without_graph_service PASSED [ 56%]
tests/unit/services/test_consistency.py::TestConsistencyChecker::test_retrieval_keywords_without_database PASSED [ 56%]
tests/unit/services/test_consistency.py::TestConsistencyChecker::test_retrieval_multiple_inconsistencies PASSED [ 56%]
tests/unit/services/test_consistency.py::TestConsistencyChecker::test_retrieval_empty_requirements PASSED [ 56%]
tests/unit/services/test_database_service.py::test_service_initialization PASSED [ 56%]
tests/unit/services/test_database_service.py::test_ensure_table PASSED   [ 56%]
tests/unit/services/test_database_service.py::test_store_chunks PASSED   [ 56%]
tests/unit/services/test_database_service.py::test_store_empty_chunks PASSED [ 56%]
tests/unit/services/test_database_service.py::test_search_chunks PASSED  [ 56%]
tests/unit/services/test_database_service.py::test_get_chunk PASSED      [ 56%]
tests/unit/services/test_database_service.py::test_get_chunk_not_found PASSED [ 56%]
tests/unit/services/test_database_service.py::test_get_chunks_for_documents PASSED [ 56%]
tests/unit/services/test_database_service.py::test_close PASSED          [ 56%]
tests/unit/services/test_database_service.py::test_context_manager PASSED [ 56%]
tests/unit/services/test_dependencies.py::TestServiceDependency::test_enum_has_all_service_types PASSED [ 57%]
tests/unit/services/test_dependencies.py::TestServiceDependency::test_enum_values_are_unique PASSED [ 57%]
tests/unit/services/test_dependencies.py::TestServiceDependency::test_enum_count PASSED [ 57%]
tests/unit/services/test_dependencies.py::TestStrategyDependencies::test_instantiation_with_no_services PASSED [ 57%]
tests/unit/services/test_dependencies.py::TestStrategyDependencies::test_instantiation_with_all_services PASSED [ 57%]
tests/unit/services/test_dependencies.py::TestStrategyDependencies::test_instantiation_with_partial_services PASSED [ 57%]
tests/unit/services/test_dependencies.py::TestValidationLogic::test_validation_with_all_required_services_present PASSED [ 57%]
tests/unit/services/test_dependencies.py::TestValidationLogic::test_validation_with_some_services_missing PASSED [ 57%]
tests/unit/services/test_dependencies.py::TestValidationLogic::test_validation_with_empty_requirements PASSED [ 57%]
tests/unit/services/test_dependencies.py::TestValidationLogic::test_validation_with_all_services_missing PASSED [ 57%]
tests/unit/services/test_dependencies.py::TestValidationLogic::test_validation_with_extra_services_present PASSED [ 57%]
tests/unit/services/test_dependencies.py::TestValidationLogic::test_validation_for_each_service_type PASSED [ 57%]
tests/unit/services/test_dependencies.py::TestErrorMessaging::test_message_for_valid_container PASSED [ 57%]
tests/unit/services/test_dependencies.py::TestErrorMessaging::test_message_for_single_missing_service PASSED [ 57%]
tests/unit/services/test_dependencies.py::TestErrorMessaging::test_message_for_multiple_missing_services PASSED [ 57%]
tests/unit/services/test_dependencies.py::TestErrorMessaging::test_message_format PASSED [ 57%]
tests/unit/services/test_dependencies.py::TestErrorMessaging::test_message_with_empty_requirements PASSED [ 57%]
tests/unit/services/test_graph_interface.py::TestIGraphServiceInterface::test_interface_is_abstract PASSED [ 58%]
tests/unit/services/test_graph_interface.py::TestIGraphServiceInterface::test_interface_requires_all_methods PASSED [ 58%]
tests/unit/services/test_graph_interface.py::TestIGraphServiceInterface::test_create_node_signature PASSED [ 58%]
tests/unit/services/test_graph_interface.py::TestIGraphServiceInterface::test_create_relationship_signature PASSED [ 58%]
tests/unit/services/test_graph_interface.py::TestIGraphServiceInterface::test_query_signature PASSED [ 58%]
tests/unit/services/test_graph_interface.py::TestIGraphServiceInterface::test_minimal_concrete_implementation PASSED [ 58%]
tests/unit/services/test_interfaces.py::test_illm_service_requires_implementation PASSED [ 58%]
tests/unit/services/test_interfaces.py::test_illm_service_requires_complete_method PASSED [ 58%]
tests/unit/services/test_interfaces.py::test_illm_service_requires_stream_complete_method PASSED [ 58%]
tests/unit/services/test_interfaces.py::test_illm_service_mock_implementation PASSED [ 58%]
tests/unit/services/test_interfaces.py::test_illm_service_has_docstring PASSED [ 58%]
tests/unit/services/test_interfaces.py::test_iembedding_service_requires_implementation PASSED [ 58%]
tests/unit/services/test_interfaces.py::test_iembedding_service_requires_embed_method PASSED [ 58%]
tests/unit/services/test_interfaces.py::test_iembedding_service_mock_implementation PASSED [ 58%]
tests/unit/services/test_interfaces.py::test_iembedding_service_has_docstring PASSED [ 58%]
tests/unit/services/test_interfaces.py::test_igraph_service_requires_implementation PASSED [ 58%]
tests/unit/services/test_interfaces.py::test_igraph_service_requires_create_node_method PASSED [ 58%]
tests/unit/services/test_interfaces.py::test_igraph_service_mock_implementation PASSED [ 59%]
tests/unit/services/test_interfaces.py::test_igraph_service_has_docstring PASSED [ 59%]
tests/unit/services/test_interfaces.py::test_ireranking_service_requires_implementation PASSED [ 59%]
tests/unit/services/test_interfaces.py::test_ireranking_service_mock_implementation PASSED [ 59%]
tests/unit/services/test_interfaces.py::test_ireranking_service_has_docstring PASSED [ 59%]
tests/unit/services/test_interfaces.py::test_idatabase_service_requires_implementation PASSED [ 59%]
tests/unit/services/test_interfaces.py::test_idatabase_service_requires_store_chunks_method PASSED [ 59%]
tests/unit/services/test_interfaces.py::test_idatabase_service_mock_implementation PASSED [ 59%]
tests/unit/services/test_interfaces.py::test_idatabase_service_has_docstring PASSED [ 59%]
tests/unit/services/test_interfaces.py::test_all_interfaces_have_type_hints PASSED [ 59%]
tests/unit/services/test_reranking_interface.py::TestIRerankingServiceInterface::test_interface_is_abstract PASSED [ 59%]
tests/unit/services/test_reranking_interface.py::TestIRerankingServiceInterface::test_interface_requires_rerank_method PASSED [ 59%]
tests/unit/services/test_reranking_interface.py::TestIRerankingServiceInterface::test_rerank_method_signature PASSED [ 59%]
tests/unit/services/test_reranking_interface.py::TestIRerankingServiceInterface::test_minimal_concrete_implementation PASSED [ 59%]
tests/unit/services/utils/test_onnx_utils.py::TestMeanPooling::test_basic_pooling PASSED [ 59%]
tests/unit/services/utils/test_onnx_utils.py::TestMeanPooling::test_pooling_with_padding PASSED [ 59%]
tests/unit/services/utils/test_onnx_utils.py::TestMeanPooling::test_pooling_single_token PASSED [ 59%]
tests/unit/services/utils/test_onnx_utils.py::TestNormalizeEmbeddings::test_normalize_2d_array PASSED [ 60%]
tests/unit/services/utils/test_onnx_utils.py::TestNormalizeEmbeddings::test_normalize_1d_array PASSED [ 60%]
tests/unit/services/utils/test_onnx_utils.py::TestNormalizeEmbeddings::test_normalize_zero_vector PASSED [ 60%]
tests/unit/services/utils/test_onnx_utils.py::TestNormalizeEmbeddings::test_normalize_already_normalized PASSED [ 60%]
tests/unit/services/utils/test_onnx_utils.py::TestCosineSimilarity::test_identical_vectors PASSED [ 60%]
tests/unit/services/utils/test_onnx_utils.py::TestCosineSimilarity::test_orthogonal_vectors PASSED [ 60%]
tests/unit/services/utils/test_onnx_utils.py::TestCosineSimilarity::test_opposite_vectors PASSED [ 60%]
tests/unit/services/utils/test_onnx_utils.py::TestCosineSimilarity::test_similar_vectors PASSED [ 60%]
tests/unit/services/utils/test_onnx_utils.py::TestCosineSimilarity::test_zero_vector PASSED [ 60%]
tests/unit/services/utils/test_onnx_utils.py::TestCosineSimilarity::test_2d_arrays PASSED [ 60%]
tests/unit/services/utils/test_onnx_utils.py::TestGetModelMetadata::test_metadata_extraction PASSED [ 60%]
tests/unit/services/utils/test_onnx_utils.py::TestGetModelMetadata::test_metadata_with_2d_output PASSED [ 60%]
tests/unit/services/utils/test_onnx_utils.py::TestGetModelMetadata::test_metadata_without_embedding_dim PASSED [ 60%]
tests/unit/services/utils/test_onnx_utils.py::TestGetModelMetadata::test_metadata_with_dynamic_shapes PASSED [ 60%]
tests/unit/strategies/agentic/test_agent.py::test_agent_state_initialization PASSED [ 60%]
tests/unit/strategies/agentic/test_agent.py::test_agent_state_add_tool_call PASSED [ 60%]
tests/unit/strategies/agentic/test_agent.py::test_agent_state_add_tool_result PASSED [ 60%]
tests/unit/strategies/agentic/test_agent.py::test_agent_state_should_continue_max_iterations PASSED [ 61%]
tests/unit/strategies/agentic/test_agent.py::test_agent_state_should_continue_sufficient_results PASSED [ 61%]
tests/unit/strategies/agentic/test_agent.py::test_agent_initialization PASSED [ 61%]
tests/unit/strategies/agentic/test_agent.py::test_agent_run_basic PASSED [ 61%]
tests/unit/strategies/agentic/test_agent.py::test_agent_planning_phase PASSED [ 61%]
tests/unit/strategies/agentic/test_agent.py::test_agent_tool_execution PASSED [ 61%]
tests/unit/strategies/agentic/test_agent.py::test_agent_tool_execution_not_found PASSED [ 61%]
tests/unit/strategies/agentic/test_agent.py::test_agent_synthesize_results PASSED [ 61%]
tests/unit/strategies/agentic/test_agent.py::test_agent_synthesize_results_ignores_failed PASSED [ 61%]
tests/unit/strategies/agentic/test_agent.py::test_agent_max_iterations PASSED [ 61%]
tests/unit/strategies/agentic/test_agent.py::test_agent_parse_tool_calls_structured PASSED [ 61%]
tests/unit/strategies/agentic/test_agent.py::test_agent_parse_tool_calls_done PASSED [ 61%]
tests/unit/strategies/agentic/test_agent.py::test_agent_parse_tool_calls_fallback PASSED [ 61%]
tests/unit/strategies/agentic/test_query_analyzer.py::test_query_analyzer_initialization PASSED [ 61%]
tests/unit/strategies/agentic/test_query_analyzer.py::test_extract_entities PASSED [ 61%]
tests/unit/strategies/agentic/test_query_analyzer.py::test_extract_entities_quoted PASSED [ 61%]
tests/unit/strategies/agentic/test_query_analyzer.py::test_extract_keywords PASSED [ 61%]
tests/unit/strategies/agentic/test_query_analyzer.py::test_assess_complexity_simple PASSED [ 62%]
tests/unit/strategies/agentic/test_query_analyzer.py::test_assess_complexity_complex PASSED [ 62%]
tests/unit/strategies/agentic/test_query_analyzer.py::test_assess_complexity_multiple_questions PASSED [ 62%]
tests/unit/strategies/agentic/test_query_analyzer.py::test_classify_type_factual PASSED [ 62%]
tests/unit/strategies/agentic/test_query_analyzer.py::test_classify_type_exploratory PASSED [ 62%]
tests/unit/strategies/agentic/test_query_analyzer.py::test_classify_type_specific_document PASSED [ 62%]
tests/unit/strategies/agentic/test_query_analyzer.py::test_classify_type_metadata PASSED [ 62%]
tests/unit/strategies/agentic/test_query_analyzer.py::test_recommend_tools_factual PASSED [ 62%]
tests/unit/strategies/agentic/test_query_analyzer.py::test_recommend_tools_specific_document PASSED [ 62%]
tests/unit/strategies/agentic/test_query_analyzer.py::test_recommend_tools_metadata PASSED [ 62%]
tests/unit/strategies/agentic/test_query_analyzer.py::test_recommend_tools_technical_terms PASSED [ 62%]
tests/unit/strategies/agentic/test_query_analyzer.py::test_analyze_full_workflow PASSED [ 62%]
tests/unit/strategies/agentic/test_strategy.py::test_config_defaults PASSED [ 62%]
tests/unit/strategies/agentic/test_strategy.py::test_config_custom_values PASSED [ 62%]
tests/unit/strategies/agentic/test_strategy.py::test_config_validation PASSED [ 62%]
tests/unit/strategies/agentic/test_strategy.py::test_strategy_initialization PASSED [ 62%]
tests/unit/strategies/agentic/test_strategy.py::test_strategy_initialization_with_config PASSED [ 62%]
tests/unit/strategies/agentic/test_strategy.py::test_strategy_retrieve PASSED [ 63%]
tests/unit/strategies/agentic/test_strategy.py::test_strategy_retrieve_with_query_analysis PASSED [ 63%]
tests/unit/strategies/agentic/test_strategy.py::test_strategy_fallback_on_error PASSED [ 63%]
tests/unit/strategies/agentic/test_strategy.py::test_strategy_no_fallback_raises_error PASSED [ 63%]
tests/unit/strategies/agentic/test_strategy.py::test_strategy_get_stats PASSED [ 63%]
tests/unit/strategies/agentic/test_strategy.py::test_strategy_top_k_limit PASSED [ 63%]
tests/unit/strategies/agentic/test_tools.py::test_tool_parameter_creation PASSED [ 63%]
tests/unit/strategies/agentic/test_tools.py::test_tool_result_creation PASSED [ 63%]
tests/unit/strategies/agentic/test_tools.py::test_tool_to_anthropic_format PASSED [ 63%]
tests/unit/strategies/agentic/test_tools.py::test_semantic_search_tool_definition PASSED [ 63%]
tests/unit/strategies/agentic/test_tools.py::test_semantic_search_tool_execute PASSED [ 63%]
tests/unit/strategies/agentic/test_tools.py::test_semantic_search_tool_error_handling PASSED [ 63%]
tests/unit/strategies/agentic/test_tools.py::test_document_reader_tool PASSED [ 63%]
tests/unit/strategies/agentic/test_tools.py::test_document_reader_tool_not_found PASSED [ 63%]
tests/unit/strategies/agentic/test_tools.py::test_document_reader_tool_invalid_id PASSED [ 63%]
tests/unit/strategies/agentic/test_tools.py::test_metadata_search_tool PASSED [ 63%]
tests/unit/strategies/agentic/test_tools.py::test_hybrid_search_tool PASSED [ 63%]
tests/unit/strategies/chunking/test_docling_chunker.py::test_is_docling_available PASSED [ 64%]
tests/unit/strategies/chunking/test_docling_chunker.py::test_get_docling_version PASSED [ 64%]
tests/unit/strategies/chunking/test_docling_chunker.py::test_docling_chunker_import_error_when_not_installed PASSED [ 64%]
tests/unit/strategies/chunking/test_docling_chunker.py::test_docling_chunker_initialization SKIPPED [ 64%]
tests/unit/strategies/chunking/test_docling_chunker.py::test_docling_chunker_placeholder_warning SKIPPED [ 64%]
tests/unit/strategies/chunking/test_docling_chunker.py::test_docling_chunker_module_structure PASSED [ 64%]
tests/unit/strategies/chunking/test_fixed_size_chunker.py::test_fixed_size_chunker_initialization PASSED [ 64%]
tests/unit/strategies/chunking/test_fixed_size_chunker.py::test_chunk_document_basic PASSED [ 64%]
tests/unit/strategies/chunking/test_fixed_size_chunker.py::test_chunk_document_empty PASSED [ 64%]
tests/unit/strategies/chunking/test_fixed_size_chunker.py::test_chunk_size_approximately_target PASSED [ 64%]
tests/unit/strategies/chunking/test_fixed_size_chunker.py::test_chunk_overlap PASSED [ 64%]
tests/unit/strategies/chunking/test_fixed_size_chunker.py::test_no_overlap PASSED [ 64%]
tests/unit/strategies/chunking/test_fixed_size_chunker.py::test_chunk_multiple_documents PASSED [ 64%]
tests/unit/strategies/chunking/test_fixed_size_chunker.py::test_get_overlap_words PASSED [ 64%]
tests/unit/strategies/chunking/test_fixed_size_chunker.py::test_get_overlap_words_zero_overlap PASSED [ 64%]
tests/unit/strategies/chunking/test_fixed_size_chunker.py::test_count_tokens PASSED [ 64%]
tests/unit/strategies/chunking/test_fixed_size_chunker.py::test_single_word_document PASSED [ 64%]
tests/unit/strategies/chunking/test_fixed_size_chunker.py::test_chunk_metadata PASSED [ 65%]
tests/unit/strategies/chunking/test_fixed_size_chunker.py::test_create_chunk_helper PASSED [ 65%]
tests/unit/strategies/chunking/test_hybrid_chunker.py::test_hybrid_chunker_initialization_with_embeddings PASSED [ 65%]
tests/unit/strategies/chunking/test_hybrid_chunker.py::test_hybrid_chunker_initialization_without_embeddings PASSED [ 65%]
tests/unit/strategies/chunking/test_hybrid_chunker.py::test_chunk_markdown_document PASSED [ 65%]
tests/unit/strategies/chunking/test_hybrid_chunker.py::test_chunk_document_empty PASSED [ 65%]
tests/unit/strategies/chunking/test_hybrid_chunker.py::test_structural_only_mode PASSED [ 65%]
tests/unit/strategies/chunking/test_hybrid_chunker.py::test_semantic_refinement_of_large_chunks PASSED [ 65%]
tests/unit/strategies/chunking/test_hybrid_chunker.py::test_hierarchy_preservation PASSED [ 65%]
tests/unit/strategies/chunking/test_hybrid_chunker.py::test_chunk_multiple_documents PASSED [ 65%]
tests/unit/strategies/chunking/test_hybrid_chunker.py::test_atomic_content_not_split PASSED [ 65%]
tests/unit/strategies/chunking/test_hybrid_chunker.py::test_get_stats PASSED [ 65%]
tests/unit/strategies/chunking/test_hybrid_chunker.py::test_chunk_position_reindexing PASSED [ 65%]
tests/unit/strategies/chunking/test_hybrid_chunker.py::test_semantic_chunking_failure_fallback PASSED [ 65%]
tests/unit/strategies/chunking/test_semantic_chunker.py::test_semantic_chunker_initialization PASSED [ 65%]
tests/unit/strategies/chunking/test_semantic_chunker.py::test_semantic_chunker_requires_embeddings PASSED [ 65%]
tests/unit/strategies/chunking/test_semantic_chunker.py::test_chunk_document_basic PASSED [ 65%]
tests/unit/strategies/chunking/test_semantic_chunker.py::test_chunk_document_empty PASSED [ 66%]
tests/unit/strategies/chunking/test_semantic_chunker.py::test_split_into_sentences PASSED [ 66%]
tests/unit/strategies/chunking/test_semantic_chunker.py::test_cosine_similarity PASSED [ 66%]
tests/unit/strategies/chunking/test_semantic_chunker.py::test_detect_boundaries_high_similarity PASSED [ 66%]
tests/unit/strategies/chunking/test_semantic_chunker.py::test_detect_boundaries_low_similarity PASSED [ 66%]
tests/unit/strategies/chunking/test_semantic_chunker.py::test_single_sentence_document PASSED [ 66%]
tests/unit/strategies/chunking/test_semantic_chunker.py::test_fallback_chunking PASSED [ 66%]
tests/unit/strategies/chunking/test_semantic_chunker.py::test_chunk_multiple_documents PASSED [ 66%]
tests/unit/strategies/chunking/test_semantic_chunker.py::test_count_tokens_with_tokenizer PASSED [ 66%]
tests/unit/strategies/chunking/test_semantic_chunker.py::test_create_segments PASSED [ 66%]
tests/unit/strategies/chunking/test_semantic_chunker.py::test_coherence_score_computation PASSED [ 66%]
tests/unit/strategies/chunking/test_structural_chunker.py::test_structural_chunker_initialization PASSED [ 66%]
tests/unit/strategies/chunking/test_structural_chunker.py::test_is_markdown_detection PASSED [ 66%]
tests/unit/strategies/chunking/test_structural_chunker.py::test_chunk_markdown_with_headers PASSED [ 66%]
tests/unit/strategies/chunking/test_structural_chunker.py::test_split_by_headers_hierarchy PASSED [ 66%]
tests/unit/strategies/chunking/test_structural_chunker.py::test_chunk_plain_text_by_paragraphs PASSED [ 66%]
tests/unit/strategies/chunking/test_structural_chunker.py::test_large_section_splitting PASSED [ 66%]
tests/unit/strategies/chunking/test_structural_chunker.py::test_empty_markdown_document PASSED [ 67%]
tests/unit/strategies/chunking/test_structural_chunker.py::test_markdown_with_code_blocks PASSED [ 67%]
tests/unit/strategies/chunking/test_structural_chunker.py::test_multiple_documents_batch PASSED [ 67%]
tests/unit/strategies/chunking/test_structural_chunker.py::test_split_into_paragraphs PASSED [ 67%]
tests/unit/strategies/chunking/test_structural_chunker.py::test_is_atomic_content_code_block PASSED [ 67%]
tests/unit/strategies/chunking/test_structural_chunker.py::test_is_atomic_content_table PASSED [ 67%]
tests/unit/strategies/chunking/test_structural_chunker.py::test_atomic_content_not_split PASSED [ 67%]
tests/unit/strategies/chunking/test_structural_chunker.py::test_respect_headers_disabled PASSED [ 67%]
tests/unit/strategies/chunking/test_structural_chunker.py::test_count_tokens PASSED [ 67%]
tests/unit/strategies/contextual/test_batch_processor.py::test_process_chunks_batching PASSED [ 67%]
tests/unit/strategies/contextual/test_batch_processor.py::test_parallel_batch_processing PASSED [ 67%]
tests/unit/strategies/contextual/test_batch_processor.py::test_cost_tracking_during_batch PASSED [ 67%]
tests/unit/strategies/contextual/test_batch_processor.py::test_error_handling_in_batch PASSED [ 67%]
tests/unit/strategies/contextual/test_batch_processor.py::test_sequential_batch_processing PASSED [ 67%]
tests/unit/strategies/contextual/test_batch_processor.py::test_batch_creation PASSED [ 67%]
tests/unit/strategies/contextual/test_batch_processor.py::test_contextualized_text_format PASSED [ 67%]
tests/unit/strategies/contextual/test_context_generator.py::test_generate_context_basic PASSED [ 67%]
tests/unit/strategies/contextual/test_context_generator.py::test_context_includes_document_metadata PASSED [ 68%]
tests/unit/strategies/contextual/test_context_generator.py::test_skip_short_chunks PASSED [ 68%]
tests/unit/strategies/contextual/test_context_generator.py::test_skip_code_blocks PASSED [ 68%]
tests/unit/strategies/contextual/test_context_generator.py::test_fallback_on_error PASSED [ 68%]
tests/unit/strategies/contextual/test_context_generator.py::test_context_length_validation PASSED [ 68%]
tests/unit/strategies/contextual/test_context_generator.py::test_disabled_contextualization PASSED [ 68%]
tests/unit/strategies/contextual/test_context_generator.py::test_token_counting PASSED [ 68%]
tests/unit/strategies/contextual/test_context_generator.py::test_context_truncation PASSED [ 68%]
tests/unit/strategies/contextual/test_cost_tracker.py::test_calculate_cost PASSED [ 68%]
tests/unit/strategies/contextual/test_cost_tracker.py::test_record_chunk_cost PASSED [ 68%]
tests/unit/strategies/contextual/test_cost_tracker.py::test_cost_summary PASSED [ 68%]
tests/unit/strategies/contextual/test_cost_tracker.py::test_budget_alert FAILED [ 68%]
tests/unit/strategies/contextual/test_cost_tracker.py::test_reset PASSED [ 68%]
tests/unit/strategies/contextual/test_cost_tracker.py::test_check_budget_limit PASSED [ 68%]
tests/unit/strategies/contextual/test_cost_tracker.py::test_multiple_chunk_costs PASSED [ 68%]
tests/unit/strategies/contextual/test_cost_tracker.py::test_cost_per_1k_chunks PASSED [ 68%]
tests/unit/strategies/contextual/test_cost_tracker.py::test_empty_tracker_summary PASSED [ 68%]
tests/unit/strategies/contextual/test_storage.py::test_store_chunks PASSED [ 69%]
tests/unit/strategies/contextual/test_storage.py::test_store_without_context PASSED [ 69%]
tests/unit/strategies/contextual/test_storage.py::test_retrieve_original_format PASSED [ 69%]
tests/unit/strategies/contextual/test_storage.py::test_retrieve_contextualized_format PASSED [ 69%]
tests/unit/strategies/contextual/test_storage.py::test_retrieve_both_format PASSED [ 69%]
tests/unit/strategies/contextual/test_storage.py::test_retrieve_context_only PASSED [ 69%]
tests/unit/strategies/contextual/test_storage.py::test_store_multiple_chunks PASSED [ 69%]
tests/unit/strategies/contextual/test_storage.py::test_config_controls_storage PASSED [ 69%]
tests/unit/strategies/fine_tuned/test_ab_testing.py::TestABTestingFramework::test_start_stop_experiment PASSED [ 69%]
tests/unit/strategies/fine_tuned/test_ab_testing.py::TestABTestingFramework::test_get_model_for_request PASSED [ 69%]
tests/unit/strategies/fine_tuned/test_ab_testing.py::TestABTestingFramework::test_record_and_stats PASSED [ 69%]
tests/unit/strategies/fine_tuned/test_custom_loader.py::TestCustomModelLoader::test_load_model_onnx PASSED [ 69%]
tests/unit/strategies/fine_tuned/test_custom_loader.py::TestCustomModelLoader::test_load_model_pytorch PASSED [ 69%]
tests/unit/strategies/fine_tuned/test_custom_loader.py::TestCustomModelLoader::test_load_model_fallback PASSED [ 69%]
tests/unit/strategies/fine_tuned/test_model_registry.py::TestONNXModelRegistry::test_register_model PASSED [ 69%]
tests/unit/strategies/fine_tuned/test_model_registry.py::TestONNXModelRegistry::test_get_model PASSED [ 69%]
tests/unit/strategies/fine_tuned/test_model_registry.py::TestONNXModelRegistry::test_list_models PASSED [ 69%]
tests/unit/strategies/fine_tuned/test_model_registry.py::TestONNXModelRegistry::test_delete_model PASSED [ 70%]
tests/unit/strategies/fine_tuned/test_model_registry.py::TestONNXModelRegistry::test_get_latest_version PASSED [ 70%]
tests/unit/strategies/hierarchical/test_hierarchy_builder.py::TestHierarchyBuilder::test_build_creates_root_chunk PASSED [ 70%]
tests/unit/strategies/hierarchical/test_hierarchy_builder.py::TestHierarchyBuilder::test_is_markdown_detection PASSED [ 70%]
tests/unit/strategies/hierarchical/test_hierarchy_builder.py::TestHierarchyBuilder::test_markdown_hierarchy_structure PASSED [ 70%]
tests/unit/strategies/hierarchical/test_hierarchy_builder.py::TestHierarchyBuilder::test_split_by_headers PASSED [ 70%]
tests/unit/strategies/hierarchical/test_hierarchy_builder.py::TestHierarchyBuilder::test_paragraph_hierarchy PASSED [ 70%]
tests/unit/strategies/hierarchical/test_hierarchy_builder.py::TestHierarchyBuilder::test_hierarchy_metadata PASSED [ 70%]
tests/unit/strategies/hierarchical/test_hierarchy_builder.py::TestHierarchyBuilder::test_parent_child_relationships PASSED [ 70%]
tests/unit/strategies/hierarchical/test_hierarchy_builder.py::TestHierarchyBuilder::test_min_chunk_size_respected PASSED [ 70%]
tests/unit/strategies/hierarchical/test_hierarchy_builder.py::TestHierarchyBuilder::test_max_hierarchy_depth PASSED [ 70%]
tests/unit/strategies/hierarchical/test_hierarchy_builder.py::TestHierarchyBuilder::test_empty_document PASSED [ 70%]
tests/unit/strategies/hierarchical/test_hierarchy_builder.py::TestHierarchyBuilder::test_document_with_no_structure PASSED [ 70%]
tests/unit/strategies/hierarchical/test_hierarchy_builder.py::TestHierarchyBuilderEdgeCases::test_nested_headers_same_level PASSED [ 70%]
tests/unit/strategies/hierarchical/test_hierarchy_builder.py::TestHierarchyBuilderEdgeCases::test_header_without_content PASSED [ 70%]
tests/unit/strategies/hierarchical/test_hierarchy_builder.py::TestHierarchyBuilderEdgeCases::test_very_long_document PASSED [ 70%]
tests/unit/strategies/hierarchical/test_parent_retriever.py::TestParentRetriever::test_expand_immediate_parent PASSED [ 70%]
tests/unit/strategies/hierarchical/test_parent_retriever.py::TestParentRetriever::test_expand_no_parent PASSED [ 71%]
tests/unit/strategies/hierarchical/test_parent_retriever.py::TestParentRetriever::test_deduplication PASSED [ 71%]
tests/unit/strategies/hierarchical/test_parent_retriever.py::TestParentRetriever::test_adaptive_strategy_small_chunk PASSED [ 71%]
tests/unit/strategies/hierarchical/test_parent_retriever.py::TestParentRetriever::test_adaptive_strategy_paragraph_level PASSED [ 71%]
tests/unit/strategies/hierarchical/test_parent_retriever.py::TestParentRetriever::test_window_expansion PASSED [ 71%]
tests/unit/strategies/hierarchical/test_parent_retriever.py::TestParentRetrieverEdgeCases::test_circular_reference_protection PASSED [ 71%]
tests/unit/strategies/hierarchical/test_parent_retriever.py::TestParentRetrieverEdgeCases::test_missing_parent_handling PASSED [ 71%]
tests/unit/strategies/indexing/test_context_aware.py::test_capabilities PASSED [ 71%]
tests/unit/strategies/indexing/test_context_aware.py::test_requirements PASSED [ 71%]
tests/unit/strategies/indexing/test_context_aware.py::test_split_into_sentences PASSED [ 71%]
tests/unit/strategies/indexing/test_context_aware.py::test_create_windows PASSED [ 71%]
tests/unit/strategies/indexing/test_context_aware.py::test_find_boundaries PASSED [ 71%]
tests/unit/strategies/indexing/test_context_aware.py::test_create_chunks_respects_boundaries PASSED [ 71%]
tests/unit/strategies/indexing/test_context_aware.py::test_create_chunks_respects_min_size PASSED [ 71%]
tests/unit/strategies/indexing/test_context_aware.py::test_create_chunks_respects_max_size PASSED [ 71%]
tests/unit/strategies/indexing/test_context_aware.py::test_process_flow PASSED [ 71%]
tests/unit/strategies/knowledge_graph/test_entity_extractor.py::test_entity_extraction_basic PASSED [ 71%]
tests/unit/strategies/knowledge_graph/test_entity_extractor.py::test_entity_extraction_with_confidence PASSED [ 72%]
tests/unit/strategies/knowledge_graph/test_entity_extractor.py::test_entity_deduplication PASSED [ 72%]
tests/unit/strategies/knowledge_graph/test_entity_extractor.py::test_batch_extraction PASSED [ 72%]
tests/unit/strategies/knowledge_graph/test_entity_extractor.py::test_invalid_json_response PASSED [ 72%]
tests/unit/strategies/knowledge_graph/test_entity_extractor.py::test_confidence_filtering PASSED [ 72%]
tests/unit/strategies/knowledge_graph/test_hybrid_retriever.py::test_hybrid_retrieval PASSED [ 72%]
tests/unit/strategies/knowledge_graph/test_hybrid_retriever.py::test_score_combination PASSED [ 72%]
tests/unit/strategies/knowledge_graph/test_hybrid_retriever.py::test_empty_vector_results PASSED [ 72%]
tests/unit/strategies/knowledge_graph/test_hybrid_retriever.py::test_entities_in_chunks PASSED [ 72%]
tests/unit/strategies/knowledge_graph/test_hybrid_retriever.py::test_graph_expansion PASSED [ 72%]
tests/unit/strategies/knowledge_graph/test_hybrid_retriever.py::test_top_k_limiting PASSED [ 72%]
tests/unit/strategies/knowledge_graph/test_hybrid_retriever.py::test_score_ordering PASSED [ 72%]
tests/unit/strategies/knowledge_graph/test_memory_graph_store.py::test_add_entity PASSED [ 72%]
tests/unit/strategies/knowledge_graph/test_memory_graph_store.py::test_add_relationship PASSED [ 72%]
tests/unit/strategies/knowledge_graph/test_memory_graph_store.py::test_graph_traversal PASSED [ 72%]
tests/unit/strategies/knowledge_graph/test_memory_graph_store.py::test_find_entities_by_name PASSED [ 72%]
tests/unit/strategies/knowledge_graph/test_memory_graph_store.py::test_graph_stats PASSED [ 72%]
tests/unit/strategies/knowledge_graph/test_memory_graph_store.py::test_delete_entity PASSED [ 73%]
tests/unit/strategies/knowledge_graph/test_memory_graph_store.py::test_clear_graph PASSED [ 73%]
tests/unit/strategies/knowledge_graph/test_memory_graph_store.py::test_relationship_type_filtering PASSED [ 73%]
tests/unit/strategies/late_chunking/test_coherence_analyzer.py::test_analyze_chunk_coherence PASSED [ 73%]
tests/unit/strategies/late_chunking/test_coherence_analyzer.py::test_coherence_score_calculation PASSED [ 73%]
tests/unit/strategies/late_chunking/test_coherence_analyzer.py::test_coherence_score_size_penalty PASSED [ 73%]
tests/unit/strategies/late_chunking/test_coherence_analyzer.py::test_compare_with_traditional PASSED [ 73%]
tests/unit/strategies/late_chunking/test_coherence_analyzer.py::test_compare_metrics_types PASSED [ 73%]
tests/unit/strategies/late_chunking/test_coherence_analyzer.py::test_coherence_with_no_scores PASSED [ 73%]
tests/unit/strategies/late_chunking/test_coherence_analyzer.py::test_analyze_preserves_chunk_data PASSED [ 73%]
tests/unit/strategies/late_chunking/test_document_embedder.py::test_document_embedding_basic PASSED [ 73%]
tests/unit/strategies/late_chunking/test_document_embedder.py::test_token_embeddings_extracted PASSED [ 73%]
tests/unit/strategies/late_chunking/test_document_embedder.py::test_mean_pooling PASSED [ 73%]
tests/unit/strategies/late_chunking/test_document_embedder.py::test_mean_pooling_with_mask PASSED [ 73%]
tests/unit/strategies/late_chunking/test_document_embedder.py::test_long_document_truncation PASSED [ 73%]
tests/unit/strategies/late_chunking/test_document_embedder.py::test_batch_processing PASSED [ 73%]
tests/unit/strategies/late_chunking/test_document_embedder.py::test_embedding_dimensions_consistent PASSED [ 73%]
tests/unit/strategies/late_chunking/test_document_embedder.py::test_model_name_stored PASSED [ 74%]
tests/unit/strategies/late_chunking/test_document_embedder.py::test_chunk_embeddings PASSED [ 74%]
tests/unit/strategies/late_chunking/test_document_embedder.py::test_pool_embeddings_mean PASSED [ 74%]
tests/unit/strategies/late_chunking/test_document_embedder.py::test_pool_embeddings_max PASSED [ 74%]
tests/unit/strategies/late_chunking/test_document_embedder.py::test_pool_embeddings_first PASSED [ 74%]
tests/unit/strategies/late_chunking/test_document_embedder.py::test_decode_tokens PASSED [ 74%]
tests/unit/strategies/late_chunking/test_embedding_chunker.py::test_fixed_size_chunking PASSED [ 74%]
tests/unit/strategies/late_chunking/test_embedding_chunker.py::test_semantic_boundary_chunking PASSED [ 74%]
tests/unit/strategies/late_chunking/test_embedding_chunker.py::test_adaptive_chunking PASSED [ 74%]
tests/unit/strategies/late_chunking/test_embedding_chunker.py::test_chunk_text_reconstruction PASSED [ 74%]
tests/unit/strategies/late_chunking/test_embedding_chunker.py::test_chunk_embedding_averaging PASSED [ 74%]
tests/unit/strategies/late_chunking/test_embedding_chunker.py::test_cosine_similarity PASSED [ 74%]
tests/unit/strategies/late_chunking/test_embedding_chunker.py::test_cosine_similarity_zero_vectors PASSED [ 74%]
tests/unit/strategies/late_chunking/test_embedding_chunker.py::test_chunk_overlap PASSED [ 74%]
tests/unit/strategies/late_chunking/test_embedding_chunker.py::test_chunk_ids_unique PASSED [ 74%]
tests/unit/strategies/late_chunking/test_embedding_chunker.py::test_detect_semantic_boundaries PASSED [ 74%]
tests/unit/strategies/late_chunking/test_embedding_chunker.py::test_hierarchical_chunking_fallback PASSED [ 74%]
tests/unit/strategies/late_chunking/test_embedding_chunker.py::test_chunk_metadata PASSED [ 75%]
tests/unit/strategies/multi_query/test_deduplicator.py::test_exact_deduplication PASSED [ 75%]
tests/unit/strategies/multi_query/test_deduplicator.py::test_frequency_tracking PASSED [ 75%]
tests/unit/strategies/multi_query/test_deduplicator.py::test_max_score_retention PASSED [ 75%]
tests/unit/strategies/multi_query/test_deduplicator.py::test_skip_failed_queries PASSED [ 75%]
tests/unit/strategies/multi_query/test_deduplicator.py::test_empty_results PASSED [ 75%]
tests/unit/strategies/multi_query/test_deduplicator.py::test_variant_indices_tracking PASSED [ 75%]
tests/unit/strategies/multi_query/test_deduplicator.py::test_near_duplicate_detection PASSED [ 75%]
tests/unit/strategies/multi_query/test_parallel_executor.py::test_execute_queries_parallel PASSED [ 75%]
tests/unit/strategies/multi_query/test_parallel_executor.py::test_execute_single_query PASSED [ 75%]
tests/unit/strategies/multi_query/test_parallel_executor.py::test_query_timeout_handling PASSED [ 75%]
tests/unit/strategies/multi_query/test_parallel_executor.py::test_partial_failure_handling PASSED [ 75%]
tests/unit/strategies/multi_query/test_parallel_executor.py::test_minimum_successful_queries PASSED [ 75%]
tests/unit/strategies/multi_query/test_parallel_executor.py::test_sync_vector_store_support PASSED [ 75%]
tests/unit/strategies/multi_query/test_ranker.py::test_rank_by_max_score PASSED [ 75%]
tests/unit/strategies/multi_query/test_ranker.py::test_rank_by_frequency_boost PASSED [ 75%]
tests/unit/strategies/multi_query/test_ranker.py::test_rank_by_rrf PASSED [ 75%]
tests/unit/strategies/multi_query/test_ranker.py::test_top_k_selection PASSED [ 75%]
tests/unit/strategies/multi_query/test_ranker.py::test_empty_results PASSED [ 76%]
tests/unit/strategies/multi_query/test_ranker.py::test_hybrid_ranking PASSED [ 76%]
tests/unit/strategies/multi_query/test_ranker.py::test_ranking_preserves_metadata PASSED [ 76%]
tests/unit/strategies/multi_query/test_variant_generator.py::test_generate_variants_basic PASSED [ 76%]
tests/unit/strategies/multi_query/test_variant_generator.py::test_generate_variants_include_original PASSED [ 76%]
tests/unit/strategies/multi_query/test_variant_generator.py::test_generate_variants_exclude_original PASSED [ 76%]
tests/unit/strategies/multi_query/test_variant_generator.py::test_variant_validation PASSED [ 76%]
tests/unit/strategies/multi_query/test_variant_generator.py::test_variant_generation_failure_fallback PASSED [ 76%]
tests/unit/strategies/multi_query/test_variant_generator.py::test_variant_deduplication PASSED [ 76%]
tests/unit/strategies/multi_query/test_variant_generator.py::test_variant_generation_with_complete_method PASSED [ 76%]
tests/unit/strategies/query_expansion/test_base.py::TestExpansionStrategy::test_strategy_values PASSED [ 76%]
tests/unit/strategies/query_expansion/test_base.py::TestExpandedQuery::test_expanded_query_creation PASSED [ 76%]
tests/unit/strategies/query_expansion/test_base.py::TestExpandedQuery::test_expanded_query_with_reasoning PASSED [ 76%]
tests/unit/strategies/query_expansion/test_base.py::TestExpandedQuery::test_expanded_query_with_metadata PASSED [ 76%]
tests/unit/strategies/query_expansion/test_base.py::TestExpansionConfig::test_default_config PASSED [ 76%]
tests/unit/strategies/query_expansion/test_base.py::TestExpansionConfig::test_custom_config PASSED [ 76%]
tests/unit/strategies/query_expansion/test_base.py::TestIQueryExpander::test_validate_query_empty PASSED [ 76%]
tests/unit/strategies/query_expansion/test_base.py::TestIQueryExpander::test_validate_query_whitespace PASSED [ 77%]
tests/unit/strategies/query_expansion/test_base.py::TestIQueryExpander::test_validate_query_too_long PASSED [ 77%]
tests/unit/strategies/query_expansion/test_base.py::TestIQueryExpander::test_validate_query_valid PASSED [ 77%]
tests/unit/strategies/query_expansion/test_base.py::TestIQueryExpander::test_extract_added_terms PASSED [ 77%]
tests/unit/strategies/query_expansion/test_base.py::TestIQueryExpander::test_extract_added_terms_no_additions PASSED [ 77%]
tests/unit/strategies/query_expansion/test_base.py::TestIQueryExpander::test_expand_mock PASSED [ 77%]
tests/unit/strategies/query_expansion/test_expander_service.py::TestQueryExpanderService::test_service_initialization PASSED [ 77%]
tests/unit/strategies/query_expansion/test_expander_service.py::TestQueryExpanderService::test_service_initialization_without_cache PASSED [ 77%]
tests/unit/strategies/query_expansion/test_expander_service.py::TestQueryExpanderService::test_expand_basic PASSED [ 77%]
tests/unit/strategies/query_expansion/test_expander_service.py::TestQueryExpanderService::test_expand_with_cache_hit PASSED [ 77%]
tests/unit/strategies/query_expansion/test_expander_service.py::TestQueryExpanderService::test_expand_disabled PASSED [ 77%]
tests/unit/strategies/query_expansion/test_expander_service.py::TestQueryExpanderService::test_expand_with_error_fallback PASSED [ 77%]
tests/unit/strategies/query_expansion/test_expander_service.py::TestQueryExpanderService::test_multiple_variants PASSED [ 77%]
tests/unit/strategies/query_expansion/test_expander_service.py::TestQueryExpanderService::test_get_stats PASSED [ 77%]
tests/unit/strategies/query_expansion/test_expander_service.py::TestQueryExpanderService::test_clear_cache PASSED [ 77%]
tests/unit/strategies/query_expansion/test_expander_service.py::TestQueryExpanderService::test_execution_time_tracked PASSED [ 77%]
tests/unit/strategies/query_expansion/test_expander_service.py::TestQueryExpanderService::test_stats_average_execution_time PASSED [ 77%]
tests/unit/strategies/query_expansion/test_expander_service.py::TestQueryExpanderService::test_cache_key_computation PASSED [ 78%]
tests/unit/strategies/query_expansion/test_expander_service.py::TestQueryExpanderService::test_passthrough_result_metadata PASSED [ 78%]
tests/unit/strategies/query_expansion/test_expander_service.py::TestQueryExpanderService::test_hyde_expander_used_for_hyde_strategy PASSED [ 78%]
tests/unit/strategies/query_expansion/test_expander_service.py::TestQueryExpanderService::test_llm_expander_used_for_other_strategies PASSED [ 78%]
tests/unit/strategies/query_expansion/test_llm_expander.py::TestLLMQueryExpander::test_initialization PASSED [ 78%]
tests/unit/strategies/query_expansion/test_llm_expander.py::TestLLMQueryExpander::test_expand_query PASSED [ 78%]
tests/unit/strategies/query_expansion/test_llm_expander.py::TestLLMQueryExpander::test_expand_calls_llm_with_correct_params PASSED [ 78%]
tests/unit/strategies/query_expansion/test_llm_expander.py::TestLLMQueryExpander::test_validate_query_empty PASSED [ 78%]
tests/unit/strategies/query_expansion/test_llm_expander.py::TestLLMQueryExpander::test_validate_query_too_long PASSED [ 78%]
tests/unit/strategies/query_expansion/test_llm_expander.py::TestLLMQueryExpander::test_extract_added_terms PASSED [ 78%]
tests/unit/strategies/query_expansion/test_llm_expander.py::TestLLMQueryExpander::test_expand_with_domain_context PASSED [ 78%]
tests/unit/strategies/query_expansion/test_llm_expander.py::TestLLMQueryExpander::test_different_expansion_strategies PASSED [ 78%]
tests/unit/strategies/query_expansion/test_llm_expander.py::TestLLMQueryExpander::test_metadata_includes_token_info PASSED [ 78%]
tests/unit/strategies/query_expansion/test_llm_expander.py::TestLLMQueryExpander::test_llm_response_trimmed PASSED [ 78%]
tests/unit/strategies/query_expansion/test_llm_expander.py::TestLLMQueryExpander::test_confidence_is_one PASSED [ 78%]
tests/unit/strategies/query_expansion/test_prompts.py::TestExpansionPrompts::test_initialization PASSED [ 78%]
tests/unit/strategies/query_expansion/test_prompts.py::TestExpansionPrompts::test_get_system_prompt_keyword PASSED [ 78%]
tests/unit/strategies/query_expansion/test_prompts.py::TestExpansionPrompts::test_get_system_prompt_reformulation PASSED [ 79%]
tests/unit/strategies/query_expansion/test_prompts.py::TestExpansionPrompts::test_get_system_prompt_question_generation PASSED [ 79%]
tests/unit/strategies/query_expansion/test_prompts.py::TestExpansionPrompts::test_get_system_prompt_multi_query PASSED [ 79%]
tests/unit/strategies/query_expansion/test_prompts.py::TestExpansionPrompts::test_get_system_prompt_hyde PASSED [ 79%]
tests/unit/strategies/query_expansion/test_prompts.py::TestExpansionPrompts::test_custom_system_prompt PASSED [ 79%]
tests/unit/strategies/query_expansion/test_prompts.py::TestExpansionPrompts::test_get_user_prompt_keyword PASSED [ 79%]
tests/unit/strategies/query_expansion/test_prompts.py::TestExpansionPrompts::test_get_user_prompt_reformulation PASSED [ 79%]
tests/unit/strategies/query_expansion/test_prompts.py::TestExpansionPrompts::test_get_user_prompt_question_generation PASSED [ 79%]
tests/unit/strategies/query_expansion/test_prompts.py::TestExpansionPrompts::test_get_user_prompt_multi_query PASSED [ 79%]
tests/unit/strategies/query_expansion/test_prompts.py::TestExpansionPrompts::test_get_user_prompt_hyde PASSED [ 79%]
tests/unit/strategies/reranking/test_base.py::TestRerankConfig::test_default_config PASSED [ 79%]
tests/unit/strategies/reranking/test_base.py::TestRerankConfig::test_custom_config PASSED [ 79%]
tests/unit/strategies/reranking/test_base.py::TestRerankResult::test_rerank_result_creation PASSED [ 79%]
tests/unit/strategies/reranking/test_base.py::TestRerankResponse::test_rerank_response_creation PASSED [ 79%]
tests/unit/strategies/reranking/test_base.py::TestRerankResponse::test_rerank_response_with_metadata PASSED [ 79%]
tests/unit/strategies/reranking/test_base.py::TestIReranker::test_normalize_scores_basic PASSED [ 79%]
tests/unit/strategies/reranking/test_base.py::TestIReranker::test_normalize_scores_empty PASSED [ 79%]
tests/unit/strategies/reranking/test_base.py::TestIReranker::test_normalize_scores_all_same PASSED [ 80%]
tests/unit/strategies/reranking/test_base.py::TestIReranker::test_validate_inputs_empty_query PASSED [ 80%]
tests/unit/strategies/reranking/test_base.py::TestIReranker::test_validate_inputs_empty_documents PASSED [ 80%]
tests/unit/strategies/reranking/test_base.py::TestIReranker::test_validate_inputs_too_many_documents PASSED [ 80%]
tests/unit/strategies/reranking/test_base.py::TestIReranker::test_validate_inputs_valid PASSED [ 80%]
tests/unit/strategies/reranking/test_base.py::TestIReranker::test_mock_reranker_rerank PASSED [ 80%]
tests/unit/strategies/reranking/test_base.py::TestIReranker::test_mock_reranker_get_model_name PASSED [ 80%]
tests/unit/strategies/reranking/test_cache.py::TestRerankCache::test_cache_initialization PASSED [ 80%]
tests/unit/strategies/reranking/test_cache.py::TestRerankCache::test_cache_set_and_get PASSED [ 80%]
tests/unit/strategies/reranking/test_cache.py::TestRerankCache::test_cache_miss PASSED [ 80%]
tests/unit/strategies/reranking/test_cache.py::TestRerankCache::test_cache_hit PASSED [ 80%]
tests/unit/strategies/reranking/test_cache.py::TestRerankCache::test_cache_expiration PASSED [ 80%]
tests/unit/strategies/reranking/test_cache.py::TestRerankCache::test_cache_clear PASSED [ 80%]
tests/unit/strategies/reranking/test_cache.py::TestRerankCache::test_evict_expired PASSED [ 80%]
tests/unit/strategies/reranking/test_cache.py::TestRerankCache::test_cache_stats PASSED [ 80%]
tests/unit/strategies/reranking/test_cache.py::TestRerankCache::test_cache_hit_rate PASSED [ 80%]
tests/unit/strategies/reranking/test_cache.py::TestRerankCache::test_compute_key_static PASSED [ 80%]
tests/unit/strategies/reranking/test_cache.py::TestRerankCache::test_compute_key_document_order PASSED [ 81%]
tests/unit/strategies/reranking/test_cache.py::TestRerankCache::test_multiple_entries PASSED [ 81%]
tests/unit/strategies/reranking/test_cache.py::TestRerankCache::test_cache_overwrite PASSED [ 81%]
tests/unit/strategies/reranking/test_cosine_reranker.py::TestCosineRerankerInitialization::test_initialization_success PASSED [ 81%]
tests/unit/strategies/reranking/test_cosine_reranker.py::TestCosineRerankerInitialization::test_initialization_without_embedder PASSED [ 81%]
tests/unit/strategies/reranking/test_cosine_reranker.py::TestCosineRerankerInitialization::test_initialization_invalid_metric PASSED [ 81%]
tests/unit/strategies/reranking/test_cosine_reranker.py::TestCosineRerankerInitialization::test_supported_metrics PASSED [ 81%]
tests/unit/strategies/reranking/test_cosine_reranker.py::TestCosineRerankerReranking::test_rerank_cosine_similarity PASSED [ 81%]
tests/unit/strategies/reranking/test_cosine_reranker.py::TestCosineRerankerReranking::test_rerank_dot_product PASSED [ 81%]
tests/unit/strategies/reranking/test_cosine_reranker.py::TestCosineRerankerReranking::test_rerank_euclidean_similarity PASSED [ 81%]
tests/unit/strategies/reranking/test_cosine_reranker.py::TestCosineRerankerReranking::test_rerank_empty_documents PASSED [ 81%]
tests/unit/strategies/reranking/test_cosine_reranker.py::TestCosineRerankerReranking::test_rerank_empty_query PASSED [ 81%]
tests/unit/strategies/reranking/test_cosine_reranker.py::TestCosineRerankerReranking::test_rerank_with_normalization PASSED [ 81%]
tests/unit/strategies/reranking/test_cosine_reranker.py::TestCosineRerankerNormalization::test_normalize_vector PASSED [ 81%]
tests/unit/strategies/reranking/test_cosine_reranker.py::TestCosineRerankerNormalization::test_normalize_zero_vector PASSED [ 81%]
tests/unit/strategies/reranking/test_cosine_reranker.py::TestCosineRerankerNormalization::test_normalize_batch PASSED [ 81%]
tests/unit/strategies/reranking/test_cosine_reranker.py::TestCosineRerankerModelName::test_get_model_name_cosine PASSED [ 81%]
tests/unit/strategies/reranking/test_cosine_reranker.py::TestCosineRerankerModelName::test_get_model_name_dot PASSED [ 82%]
tests/unit/strategies/reranking/test_cosine_reranker.py::TestCosineRerankerModelName::test_get_model_name_euclidean PASSED [ 82%]
tests/unit/strategies/reranking/test_cosine_reranker.py::TestCosineRerankerPerformance::test_large_batch_processing PASSED [ 82%]
tests/unit/strategies/reranking/test_cross_encoder_reranker.py::TestCrossEncoderReranker::test_initialization SKIPPED [ 82%]
tests/unit/strategies/reranking/test_cross_encoder_reranker.py::TestCrossEncoderReranker::test_initialization_with_cuda SKIPPED [ 82%]
tests/unit/strategies/reranking/test_cross_encoder_reranker.py::TestCrossEncoderReranker::test_rerank_basic SKIPPED [ 82%]
tests/unit/strategies/reranking/test_cross_encoder_reranker.py::TestCrossEncoderReranker::test_rerank_batching SKIPPED [ 82%]
tests/unit/strategies/reranking/test_cross_encoder_reranker.py::TestCrossEncoderReranker::test_validate_empty_query SKIPPED [ 82%]
tests/unit/strategies/reranking/test_cross_encoder_reranker.py::TestCrossEncoderReranker::test_validate_empty_documents SKIPPED [ 82%]
tests/unit/strategies/reranking/test_cross_encoder_reranker.py::TestCrossEncoderReranker::test_validate_too_many_documents SKIPPED [ 82%]
tests/unit/strategies/reranking/test_cross_encoder_reranker.py::TestCrossEncoderReranker::test_get_model_name SKIPPED [ 82%]
tests/unit/strategies/reranking/test_cross_encoder_reranker.py::TestCrossEncoderReranker::test_model_name_shortcut SKIPPED [ 82%]
tests/unit/strategies/reranking/test_cross_encoder_reranker.py::test_import_error_without_dependencies PASSED [ 82%]
tests/unit/strategies/reranking/test_metrics.py::TestDCG::test_dcg_basic PASSED [ 82%]
tests/unit/strategies/reranking/test_metrics.py::TestDCG::test_dcg_empty PASSED [ 82%]
tests/unit/strategies/reranking/test_metrics.py::TestDCG::test_dcg_at_k_limits PASSED [ 82%]
tests/unit/strategies/reranking/test_metrics.py::TestNDCG::test_ndcg_perfect_ranking PASSED [ 82%]
tests/unit/strategies/reranking/test_metrics.py::TestNDCG::test_ndcg_worst_ranking PASSED [ 83%]
tests/unit/strategies/reranking/test_metrics.py::TestNDCG::test_ndcg_empty PASSED [ 83%]
tests/unit/strategies/reranking/test_metrics.py::TestNDCG::test_ndcg_all_zeros PASSED [ 83%]
tests/unit/strategies/reranking/test_metrics.py::TestNDCG::test_ndcg_range PASSED [ 83%]
tests/unit/strategies/reranking/test_metrics.py::TestMRR::test_mrr_first_position PASSED [ 83%]
tests/unit/strategies/reranking/test_metrics.py::TestMRR::test_mrr_second_position PASSED [ 83%]
tests/unit/strategies/reranking/test_metrics.py::TestMRR::test_mrr_third_position PASSED [ 83%]
tests/unit/strategies/reranking/test_metrics.py::TestMRR::test_mrr_multiple_positions PASSED [ 83%]
tests/unit/strategies/reranking/test_metrics.py::TestMRR::test_mrr_empty PASSED [ 83%]
tests/unit/strategies/reranking/test_metrics.py::TestPrecisionAtK::test_precision_all_relevant PASSED [ 83%]
tests/unit/strategies/reranking/test_metrics.py::TestPrecisionAtK::test_precision_none_relevant PASSED [ 83%]
tests/unit/strategies/reranking/test_metrics.py::TestPrecisionAtK::test_precision_half_relevant PASSED [ 83%]
tests/unit/strategies/reranking/test_metrics.py::TestPrecisionAtK::test_precision_at_k_limits PASSED [ 83%]
tests/unit/strategies/reranking/test_metrics.py::TestPrecisionAtK::test_precision_empty PASSED [ 83%]
tests/unit/strategies/reranking/test_metrics.py::TestRecallAtK::test_recall_all_found PASSED [ 83%]
tests/unit/strategies/reranking/test_metrics.py::TestRecallAtK::test_recall_partial_found PASSED [ 83%]
tests/unit/strategies/reranking/test_metrics.py::TestRecallAtK::test_recall_at_k_limits PASSED [ 83%]
tests/unit/strategies/reranking/test_metrics.py::TestRecallAtK::test_recall_empty PASSED [ 84%]
tests/unit/strategies/reranking/test_metrics.py::TestCompareRankings::test_compare_improved_ranking PASSED [ 84%]
tests/unit/strategies/reranking/test_metrics.py::TestCompareRankings::test_compare_same_ranking PASSED [ 84%]
tests/unit/strategies/reranking/test_metrics.py::TestCompareRankings::test_compare_empty PASSED [ 84%]
tests/unit/strategies/reranking/test_metrics.py::TestRankingCorrelation::test_correlation_identical PASSED [ 84%]
tests/unit/strategies/reranking/test_metrics.py::TestRankingCorrelation::test_correlation_reversed PASSED [ 84%]
tests/unit/strategies/reranking/test_metrics.py::TestRankingCorrelation::test_correlation_different_lengths PASSED [ 84%]
tests/unit/strategies/reranking/test_metrics.py::TestRankingCorrelation::test_correlation_empty PASSED [ 84%]
tests/unit/strategies/reranking/test_metrics.py::TestRankingCorrelation::test_correlation_single_item PASSED [ 84%]
tests/unit/strategies/reranking/test_metrics.py::TestRankingAnalyzer::test_analyzer_initialization PASSED [ 84%]
tests/unit/strategies/reranking/test_metrics.py::TestRankingAnalyzer::test_analyzer_add_ranking PASSED [ 84%]
tests/unit/strategies/reranking/test_metrics.py::TestRankingAnalyzer::test_analyzer_multiple_rankings PASSED [ 84%]
tests/unit/strategies/reranking/test_metrics.py::TestRankingAnalyzer::test_analyzer_improvement_rate PASSED [ 84%]
tests/unit/strategies/reranking/test_metrics.py::TestRankingAnalyzer::test_analyzer_clear PASSED [ 84%]
tests/unit/strategies/reranking/test_metrics.py::TestRankingAnalyzer::test_analyzer_average_metrics PASSED [ 84%]
tests/unit/strategies/reranking/test_reranker_selector.py::TestRerankerSelectorAvailability::test_is_cohere_available_with_key_and_package PASSED [ 84%]
tests/unit/strategies/reranking/test_reranker_selector.py::TestRerankerSelectorAvailability::test_is_cohere_available_no_key PASSED [ 84%]
tests/unit/strategies/reranking/test_reranker_selector.py::TestRerankerSelectorAvailability::test_is_cohere_available_with_env_key PASSED [ 85%]
tests/unit/strategies/reranking/test_reranker_selector.py::TestRerankerSelectorAvailability::test_is_torch_available_true PASSED [ 85%]
tests/unit/strategies/reranking/test_reranker_selector.py::TestRerankerSelectorAvailability::test_is_torch_available_false PASSED [ 85%]
tests/unit/strategies/reranking/test_reranker_selector.py::TestRerankerSelectorAvailability::test_get_available_rerankers PASSED [ 85%]
tests/unit/strategies/reranking/test_reranker_selector.py::TestRerankerSelectorAutoSelection::test_auto_select_cohere_when_available PASSED [ 85%]
tests/unit/strategies/reranking/test_reranker_selector.py::TestRerankerSelectorAutoSelection::test_auto_select_cosine_when_cohere_unavailable PASSED [ 85%]
tests/unit/strategies/reranking/test_reranker_selector.py::TestRerankerSelectorAutoSelection::test_auto_select_with_custom_config PASSED [ 85%]
tests/unit/strategies/reranking/test_reranker_selector.py::TestRerankerSelectorManualSelection::test_manual_select_cohere PASSED [ 85%]
tests/unit/strategies/reranking/test_reranker_selector.py::TestRerankerSelectorManualSelection::test_manual_select_cosine PASSED [ 85%]
tests/unit/strategies/reranking/test_reranker_selector.py::TestRerankerSelectorManualSelection::test_manual_select_bge_with_torch PASSED [ 85%]
tests/unit/strategies/reranking/test_reranker_selector.py::TestRerankerSelectorManualSelection::test_manual_select_bge_without_torch PASSED [ 85%]
tests/unit/strategies/reranking/test_reranker_selector.py::TestRerankerSelectorManualSelection::test_manual_select_cross_encoder_with_torch PASSED [ 85%]
tests/unit/strategies/reranking/test_reranker_selector.py::TestRerankerSelectorManualSelection::test_manual_select_cross_encoder_without_torch PASSED [ 85%]
tests/unit/strategies/reranking/test_reranker_selector.py::TestRerankerSelectorManualSelection::test_manual_select_unknown_type PASSED [ 85%]
tests/unit/strategies/reranking/test_reranker_selector.py::TestRerankerSelectorErrorMessages::test_cohere_error_message_suggests_alternatives PASSED [ 85%]
tests/unit/strategies/reranking/test_reranker_selector.py::TestRerankerSelectorErrorMessages::test_bge_error_message_suggests_alternatives PASSED [ 85%]
tests/unit/strategies/reranking/test_reranker_selector.py::TestRerankerSelectorErrorMessages::test_cross_encoder_error_message_suggests_alternatives PASSED [ 85%]
tests/unit/strategies/reranking/test_reranker_selector.py::TestRerankerSelectorConfiguration::test_config_api_key_overrides_env PASSED [ 86%]
tests/unit/strategies/reranking/test_reranker_selector.py::TestRerankerSelectorConfiguration::test_cosine_metric_configuration PASSED [ 86%]
tests/unit/strategies/reranking/test_reranker_service.py::TestCandidateDocument::test_candidate_creation PASSED [ 86%]
tests/unit/strategies/reranking/test_reranker_service.py::TestCandidateDocument::test_candidate_default_metadata PASSED [ 86%]
tests/unit/strategies/reranking/test_reranker_service.py::TestRerankerService::test_service_initialization PASSED [ 86%]
tests/unit/strategies/reranking/test_reranker_service.py::TestRerankerService::test_service_without_cache PASSED [ 86%]
tests/unit/strategies/reranking/test_reranker_service.py::TestRerankerService::test_rerank_basic PASSED [ 86%]
tests/unit/strategies/reranking/test_reranker_service.py::TestRerankerService::test_rerank_empty_candidates PASSED [ 86%]
tests/unit/strategies/reranking/test_reranker_service.py::TestRerankerService::test_rerank_top_k_limit PASSED [ 86%]
tests/unit/strategies/reranking/test_reranker_service.py::TestRerankerService::test_cache_hit PASSED [ 86%]
tests/unit/strategies/reranking/test_reranker_service.py::TestRerankerService::test_cache_disabled PASSED [ 86%]
tests/unit/strategies/reranking/test_reranker_service.py::TestRerankerService::test_score_threshold PASSED [ 86%]
tests/unit/strategies/reranking/test_reranker_service.py::TestRerankerService::test_fallback_on_error PASSED [ 86%]
tests/unit/strategies/reranking/test_reranker_service.py::TestRerankerService::test_no_fallback_raises_error PASSED [ 86%]
tests/unit/strategies/reranking/test_reranker_service.py::TestRerankerService::test_get_stats PASSED [ 86%]
tests/unit/strategies/reranking/test_reranker_service.py::TestRerankerService::test_clear_cache PASSED [ 86%]
tests/unit/strategies/reranking/test_reranker_service.py::TestRerankerService::test_score_normalization PASSED [ 86%]
tests/unit/strategies/reranking/test_reranker_service.py::TestRerankerService::test_cohere_model_initialization PASSED [ 87%]
tests/unit/strategies/self_reflective/test_grader.py::test_grade_results PASSED [ 87%]
tests/unit/strategies/self_reflective/test_grader.py::test_grade_parsing PASSED [ 87%]
tests/unit/strategies/self_reflective/test_grader.py::test_batch_grading PASSED [ 87%]
tests/unit/strategies/self_reflective/test_grader.py::test_grade_fallback_on_parse_error PASSED [ 87%]
tests/unit/strategies/self_reflective/test_grader.py::test_grade_levels PASSED [ 87%]
tests/unit/strategies/self_reflective/test_grader.py::test_empty_results PASSED [ 87%]
tests/unit/strategies/self_reflective/test_grader.py::test_grading_error_handling PASSED [ 87%]
tests/unit/strategies/self_reflective/test_grader.py::test_build_grading_prompt PASSED [ 87%]
tests/unit/strategies/self_reflective/test_refiner.py::test_refine_query PASSED [ 87%]
tests/unit/strategies/self_reflective/test_refiner.py::test_identify_gaps PASSED [ 87%]
tests/unit/strategies/self_reflective/test_refiner.py::test_parse_refinement PASSED [ 87%]
tests/unit/strategies/self_reflective/test_refiner.py::test_refinement_with_previous_attempts PASSED [ 87%]
tests/unit/strategies/self_reflective/test_refiner.py::test_refinement_strategies PASSED [ 87%]
tests/unit/strategies/self_reflective/test_refiner.py::test_empty_grades PASSED [ 87%]
tests/unit/strategies/self_reflective/test_refiner.py::test_refinement_error_handling PASSED [ 87%]
tests/unit/strategies/self_reflective/test_refiner.py::test_build_refinement_prompt PASSED [ 87%]
tests/unit/strategies/self_reflective/test_strategy.py::test_retrieve_good_results_no_retry PASSED [ 88%]
tests/unit/strategies/self_reflective/test_strategy.py::test_retrieve_poor_results_triggers_retry PASSED [ 88%]
tests/unit/strategies/self_reflective/test_strategy.py::test_max_retries_enforced PASSED [ 88%]
tests/unit/strategies/self_reflective/test_strategy.py::test_result_aggregation PASSED [ 88%]
tests/unit/strategies/self_reflective/test_strategy.py::test_timeout_protection PASSED [ 88%]
tests/unit/strategies/self_reflective/test_strategy.py::test_same_query_prevention PASSED [ 88%]
tests/unit/strategies/self_reflective/test_strategy.py::test_normalize_results PASSED [ 88%]
tests/unit/strategies/self_reflective/test_strategy.py::test_strategy_properties PASSED [ 88%]
tests/unit/strategies/test_base.py::test_interface_is_abstract PASSED    [ 88%]
tests/unit/strategies/test_base.py::test_interface_requires_all_abstract_methods PASSED [ 88%]
tests/unit/strategies/test_base.py::test_strategy_config_defaults PASSED [ 88%]
tests/unit/strategies/test_base.py::test_strategy_config_custom_values PASSED [ 88%]
tests/unit/strategies/test_base.py::test_strategy_config_validation PASSED [ 88%]
tests/unit/strategies/test_base.py::test_chunk_creation PASSED           [ 88%]
tests/unit/strategies/test_base.py::test_chunk_serialization PASSED      [ 88%]
tests/unit/strategies/test_base.py::test_prepared_data_creation PASSED   [ 88%]
tests/unit/strategies/test_base.py::test_query_result_creation PASSED    [ 88%]
tests/unit/strategies/test_base.py::test_minimal_concrete_implementation PASSED [ 89%]
tests/unit/strategies/test_base.py::test_concrete_implementation_initialize PASSED [ 89%]
tests/unit/strategies/test_base.py::test_type_hints_present PASSED       [ 89%]
tests/unit/strategies/test_base.py::test_async_method_signature PASSED   [ 89%]
tests/unit/strategies/test_base.py::test_requires_services_type_hints PASSED [ 89%]
tests/unit/strategies/test_base.py::test_prepare_data_type_hints PASSED  [ 89%]
tests/unit/strategies/test_base.py::test_process_query_type_hints PASSED [ 89%]
tests/unit/strategies/test_base_strategy_di.py::TestBaseStrategyDI::test_strategy_with_all_required_services PASSED [ 89%]
tests/unit/strategies/test_base_strategy_di.py::TestBaseStrategyDI::test_strategy_fails_without_required_llm_service PASSED [ 89%]
tests/unit/strategies/test_base_strategy_di.py::TestBaseStrategyDI::test_strategy_fails_without_required_embedding_service PASSED [ 89%]
tests/unit/strategies/test_base_strategy_di.py::TestBaseStrategyDI::test_strategy_fails_with_no_services PASSED [ 89%]
tests/unit/strategies/test_base_strategy_di.py::TestBaseStrategyDI::test_error_message_is_clear_and_helpful PASSED [ 89%]
tests/unit/strategies/test_base_strategy_di.py::TestBaseStrategyDI::test_strategy_with_extra_unused_services PASSED [ 89%]
tests/unit/strategies/test_base_strategy_di.py::TestStrategyWithNoRequirements::test_strategy_with_no_service_requirements PASSED [ 89%]
tests/unit/strategies/test_base_strategy_di.py::TestStrategyWithNoRequirements::test_strategy_with_no_requirements_accepts_services PASSED [ 89%]
tests/unit/strategies/test_base_strategy_di.py::TestDifferentServiceCombinations::test_database_only_strategy PASSED [ 89%]
tests/unit/strategies/test_base_strategy_di.py::TestDifferentServiceCombinations::test_database_only_strategy_fails_without_database PASSED [ 89%]
tests/unit/test_config.py::test_load_from_yaml PASSED                    [ 90%]
tests/unit/test_config.py::test_load_from_json PASSED                    [ 90%]
tests/unit/test_config.py::test_load_from_dict PASSED                    [ 90%]
tests/unit/test_config.py::test_file_not_found_raises_error PASSED       [ 90%]
tests/unit/test_config.py::test_invalid_yaml_raises_error PASSED         [ 90%]
tests/unit/test_config.py::test_invalid_json_raises_error PASSED         [ 90%]
tests/unit/test_config.py::test_unsupported_file_format_raises_error PASSED [ 90%]
tests/unit/test_config.py::test_empty_yaml_loads_as_empty_dict PASSED    [ 90%]
tests/unit/test_config.py::test_validation_enforces_chunk_size_range PASSED [ 90%]
tests/unit/test_config.py::test_validation_enforces_chunk_size_max PASSED [ 90%]
tests/unit/test_config.py::test_validation_enforces_top_k_min PASSED     [ 90%]
tests/unit/test_config.py::test_validation_enforces_log_level PASSED     [ 90%]
tests/unit/test_config.py::test_validation_accepts_valid_log_levels PASSED [ 90%]
tests/unit/test_config.py::test_validation_normalizes_log_level_case PASSED [ 90%]
tests/unit/test_config.py::test_default_config_loaded PASSED             [ 90%]
tests/unit/test_config.py::test_user_config_merged_with_defaults PASSED  [ 90%]
tests/unit/test_config.py::test_get_strategy_config_returns_default PASSED [ 90%]
tests/unit/test_config.py::test_environment_from_env_variable PASSED     [ 91%]
tests/unit/test_config.py::test_environment_override_merges_correctly PASSED [ 91%]
tests/unit/test_config.py::test_environment_override_nonexistent_file PASSED [ 91%]
tests/unit/test_config.py::test_deep_merge_nested_dicts PASSED           [ 91%]
tests/unit/test_config.py::test_get_with_dot_notation PASSED             [ 91%]
tests/unit/test_config.py::test_get_missing_key_returns_default PASSED   [ 91%]
tests/unit/test_config.py::test_get_strategy_config PASSED               [ 91%]
tests/unit/test_config.py::test_get_before_load_raises_error PASSED      [ 91%]
tests/unit/test_config.py::test_to_dict_exports_config PASSED            [ 91%]
tests/unit/test_config.py::test_to_dict_before_load_raises_error PASSED  [ 91%]
tests/unit/test_config.py::test_config_property_returns_schema PASSED    [ 91%]
tests/unit/test_config.py::test_hot_reload_detects_file_changes PASSED   [ 91%]
tests/unit/test_config.py::test_hot_reload_without_config_path_raises_error PASSED [ 91%]
tests/unit/test_config.py::test_disable_hot_reload PASSED                [ 91%]
tests/unit/test_config.py::test_reload_method_reloads_config PASSED      [ 91%]
tests/unit/test_config.py::test_strategy_config_schema_defaults PASSED   [ 91%]
tests/unit/test_config.py::test_global_config_schema_defaults PASSED     [ 91%]
tests/unit/test_config.py::test_pipeline_config_schema_defaults PASSED   [ 92%]
tests/unit/test_config.py::test_rag_config_schema_defaults PASSED        [ 92%]
tests/unit/test_config.py::test_config_manager_singleton PASSED          [ 92%]
tests/unit/test_config.py::test_config_file_handler_initialization PASSED [ 92%]
tests/unit/test_factory.py::test_factory_can_be_created PASSED           [ 92%]
tests/unit/test_factory.py::test_factory_has_empty_registry_initially PASSED [ 92%]
tests/unit/test_factory.py::test_register_strategy_adds_to_registry PASSED [ 92%]
tests/unit/test_factory.py::test_register_duplicate_raises_error PASSED  [ 92%]
tests/unit/test_factory.py::test_register_duplicate_with_override PASSED [ 92%]
tests/unit/test_factory.py::test_unregister_strategy PASSED              [ 92%]
tests/unit/test_factory.py::test_unregister_nonexistent_strategy PASSED  [ 92%]
tests/unit/test_factory.py::test_list_strategies_returns_all_names PASSED [ 92%]
tests/unit/test_factory.py::test_create_strategy_returns_instance PASSED [ 92%]
tests/unit/test_factory.py::test_create_unknown_strategy_raises_error PASSED [ 92%]
tests/unit/test_factory.py::test_create_strategy_with_config PASSED      [ 92%]
tests/unit/test_factory.py::test_strategy_not_found_error_message_includes_available PASSED [ 92%]
tests/unit/test_factory.py::test_create_strategy_without_config PASSED   [ 92%]
tests/unit/test_factory.py::test_invalid_config_raises_error PASSED      [ 93%]
tests/unit/test_factory.py::test_strategy_initialization_error_propagates PASSED [ 93%]
tests/unit/test_factory.py::test_register_decorator_auto_registers PASSED [ 93%]
tests/unit/test_factory.py::test_decorator_returns_class_unchanged PASSED [ 93%]
tests/unit/test_factory.py::test_create_from_yaml_config PASSED          [ 93%]
tests/unit/test_factory.py::test_create_from_json_config PASSED          [ 93%]
tests/unit/test_factory.py::test_create_from_nonexistent_config_file PASSED [ 93%]
tests/unit/test_factory.py::test_create_from_invalid_yaml PASSED         [ 93%]
tests/unit/test_factory.py::test_create_from_config_missing_strategy_name PASSED [ 93%]
tests/unit/test_factory.py::test_set_dependency PASSED                   [ 93%]
tests/unit/test_factory.py::test_get_dependency PASSED                   [ 93%]
tests/unit/test_factory.py::test_get_nonexistent_dependency PASSED       [ 93%]
tests/unit/test_factory.py::test_registry_is_class_level PASSED          [ 93%]
tests/unit/test_factory.py::test_create_from_unsupported_file_format PASSED [ 93%]
tests/unit/test_factory.py::test_clear_registry PASSED                   [ 93%]
tests/unit/test_factory.py::test_clear_dependencies PASSED               [ 93%]
tests/unit/test_factory_di.py::test_factory_initialization_with_no_services PASSED [ 93%]
tests/unit/test_factory_di.py::test_factory_initialization_with_llm_service PASSED [ 94%]
tests/unit/test_factory_di.py::test_factory_initialization_with_all_services PASSED [ 94%]
tests/unit/test_factory_di.py::test_factory_initialization_with_partial_services PASSED [ 94%]
tests/unit/test_factory_di.py::test_create_strategy_with_required_services PASSED [ 94%]
tests/unit/test_factory_di.py::test_create_strategy_without_required_services PASSED [ 94%]
tests/unit/test_factory_di.py::test_create_strategy_with_partial_services PASSED [ 94%]
tests/unit/test_factory_di.py::test_create_strategy_with_no_service_requirements PASSED [ 94%]
tests/unit/test_factory_di.py::test_create_database_only_strategy PASSED [ 94%]
tests/unit/test_factory_di.py::test_create_strategy_with_extra_services PASSED [ 94%]
tests/unit/test_factory_di.py::test_create_strategy_with_override_dependencies PASSED [ 94%]
tests/unit/test_factory_di.py::test_override_dependencies_can_add_missing_services PASSED [ 94%]
tests/unit/test_factory_di.py::test_override_dependencies_still_validates_requirements PASSED [ 94%]
tests/unit/test_factory_di.py::test_error_message_includes_strategy_name PASSED [ 94%]
tests/unit/test_factory_di.py::test_error_message_lists_missing_services PASSED [ 94%]
tests/unit/test_factory_di.py::test_create_strategy_without_config PASSED [ 94%]
tests/unit/test_factory_di.py::test_create_strategy_with_config PASSED   [ 94%]
tests/unit/test_factory_di.py::test_create_from_config_with_dependencies PASSED [ 94%]
tests/unit/test_factory_di.py::test_multiple_strategies_with_same_factory PASSED [ 95%]
tests/unit/test_factory_di.py::test_class_level_dependencies_still_exist PASSED [ 95%]
tests/unit/test_factory_di.py::test_set_and_get_dependency_still_work PASSED [ 95%]
tests/unit/test_factory_di.py::test_legacy_create_strategy_method_exists PASSED [ 95%]
tests/unit/test_package.py::TestImports::test_import_main_package PASSED [ 95%]
tests/unit/test_package.py::TestImports::test_import_factory PASSED      [ 95%]
tests/unit/test_package.py::TestImports::test_import_pipeline PASSED     [ 95%]
tests/unit/test_package.py::TestImports::test_import_config PASSED       [ 95%]
tests/unit/test_package.py::TestImports::test_import_base_strategy PASSED [ 95%]
tests/unit/test_package.py::TestImports::test_import_all_exports PASSED  [ 95%]
tests/unit/test_package.py::TestVersion::test_version_format PASSED      [ 95%]
tests/unit/test_package.py::TestVersion::test_version_accessible PASSED  [ 95%]
tests/unit/test_package.py::TestPackageStructure::test_strategies_subpackage_exists PASSED [ 95%]
tests/unit/test_package.py::TestPackageStructure::test_no_circular_imports PASSED [ 95%]
tests/unit/test_package.py::TestDependencies::test_required_dependencies_installed PASSED [ 95%]
tests/unit/test_package.py::TestDependencies::test_optional_dependencies_handled PASSED [ 95%]
tests/unit/test_pipeline.py::test_pipeline_can_be_created PASSED         [ 95%]
tests/unit/test_pipeline.py::test_pipeline_add_stage PASSED              [ 96%]
tests/unit/test_pipeline.py::test_pipeline_chaining PASSED               [ 96%]
tests/unit/test_pipeline.py::test_sequential_execution_order PASSED      [ 96%]
tests/unit/test_pipeline.py::test_sequential_execution_collects_results PASSED [ 96%]
tests/unit/test_pipeline.py::test_parallel_execution PASSED              [ 96%]
tests/unit/test_pipeline.py::test_strategy_error_caught PASSED           [ 96%]
tests/unit/test_pipeline.py::test_fallback_strategy_executed PASSED      [ 96%]
tests/unit/test_pipeline.py::test_duplicate_results_removed PASSED       [ 96%]
tests/unit/test_pipeline.py::test_results_sorted_by_score PASSED         [ 96%]
tests/unit/test_pipeline.py::test_performance_metrics_collected PASSED   [ 96%]
tests/unit/test_pipeline.py::test_from_config_creates_pipeline PASSED    [ 96%]
tests/unit/test_pipeline.py::test_cascade_mode_not_implemented PASSED    [ 96%]
tests/unit/test_pipeline.py::test_cascade_mode_not_implemented_async PASSED [ 96%]
tests/unit/test_pipeline.py::test_required_stage_failure_raises_exception PASSED [ 96%]
tests/unit/test_pipeline.py::test_required_stage_failure_raises_exception_async PASSED [ 96%]
tests/unit/test_pipeline.py::test_fallback_failure_when_required PASSED  [ 96%]
tests/unit/test_pipeline.py::test_fallback_failure_when_required_async PASSED [ 96%]
tests/unit/test_pipeline.py::test_parallel_required_stage_failure PASSED [ 97%]
tests/unit/test_pipeline.py::test_parallel_required_fallback_failure PASSED [ 97%]
tests/unit/test_pipeline.py::test_non_required_fallback_failure_continues PASSED [ 97%]
tests/unit/test_pipeline.py::test_non_required_fallback_failure_continues_async PASSED [ 97%]
tests/unit/test_pipeline.py::test_parallel_non_required_fallback_success PASSED [ 97%]
tests/unit/test_pipeline.py::test_parallel_non_required_both_fail PASSED [ 97%]
tests/unit/utils/test_token_counter.py::TestTokenCounter::test_initialization PASSED [ 97%]
tests/unit/utils/test_token_counter.py::TestTokenCounter::test_count_messages PASSED [ 97%]
tests/unit/utils/test_token_counter.py::TestTokenCounter::test_count_messages_empty PASSED [ 97%]
tests/unit/utils/test_token_counter.py::TestTokenCounter::test_count_function_call PASSED [ 97%]
tests/unit/utils/test_token_counter.py::TestTokenCounter::test_count_function_call_complex_args PASSED [ 97%]
tests/unit/utils/test_token_counter.py::TestTokenBudget::test_initialization PASSED [ 97%]
tests/unit/utils/test_token_counter.py::TestTokenBudget::test_initialization_with_reserve PASSED [ 97%]
tests/unit/utils/test_token_counter.py::TestTokenBudget::test_add_text_within_budget PASSED [ 97%]
tests/unit/utils/test_token_counter.py::TestTokenBudget::test_add_text_exceeds_budget PASSED [ 97%]
tests/unit/utils/test_token_counter.py::TestTokenBudget::test_add_text_exact_budget PASSED [ 97%]
tests/unit/utils/test_token_counter.py::TestTokenBudget::test_add_texts PASSED [ 97%]
tests/unit/utils/test_token_counter.py::TestTokenBudget::test_add_texts_all_fit PASSED [ 98%]
tests/unit/utils/test_token_counter.py::TestTokenBudget::test_add_texts_none_fit PASSED [ 98%]
tests/unit/utils/test_token_counter.py::TestTokenBudget::test_remaining PASSED [ 98%]
tests/unit/utils/test_token_counter.py::TestTokenBudget::test_reset PASSED [ 98%]
tests/unit/utils/test_token_counter.py::TestTokenBudget::test_multiple_adds_and_reset PASSED [ 98%]
tests/unit/utils/test_token_counter.py::TestTokenBudget::test_budget_with_reserve PASSED [ 98%]
tests/unit/utils/test_token_counter.py::TestTokenBudgetEdgeCases::test_zero_budget PASSED [ 98%]
tests/unit/utils/test_token_counter.py::TestTokenBudgetEdgeCases::test_empty_text PASSED [ 98%]
tests/unit/utils/test_token_counter.py::TestTokenBudgetEdgeCases::test_reserve_equals_max PASSED [ 98%]
tests/unit/utils/test_token_counter.py::TestTokenBudgetEdgeCases::test_reserve_exceeds_max PASSED [ 98%]
tests/unit/utils/test_tokenization.py::TestTokenizer::test_initialization_with_encoding PASSED [ 98%]
tests/unit/utils/test_tokenization.py::TestTokenizer::test_initialization_with_model PASSED [ 98%]
tests/unit/utils/test_tokenization.py::TestTokenizer::test_default_initialization PASSED [ 98%]
tests/unit/utils/test_tokenization.py::TestTokenizer::test_encode_decode PASSED [ 98%]
tests/unit/utils/test_tokenization.py::TestTokenizer::test_count_tokens PASSED [ 98%]
tests/unit/utils/test_tokenization.py::TestTokenizer::test_truncate PASSED [ 98%]
tests/unit/utils/test_tokenization.py::TestTokenizer::test_truncate_no_truncation_needed PASSED [ 98%]
tests/unit/utils/test_tokenization.py::TestTokenizer::test_split_by_tokens PASSED [ 99%]
tests/unit/utils/test_tokenization.py::TestTokenizer::test_split_with_overlap PASSED [ 99%]
tests/unit/utils/test_tokenization.py::TestTokenizer::test_split_short_text PASSED [ 99%]
tests/unit/utils/test_tokenization.py::TestTokenizer::test_fallback_tokenization PASSED [ 99%]
tests/unit/utils/test_tokenization.py::TestTokenizer::test_no_fallback_raises_error PASSED [ 99%]
tests/unit/utils/test_tokenization.py::TestTokenizer::test_different_encodings PASSED [ 99%]
tests/unit/utils/test_tokenization.py::TestTokenizer::test_special_characters PASSED [ 99%]
tests/unit/utils/test_tokenization.py::TestTokenizer::test_empty_text PASSED [ 99%]
tests/unit/utils/test_tokenization.py::TestConvenienceFunctions::test_count_tokens PASSED [ 99%]
tests/unit/utils/test_tokenization.py::TestConvenienceFunctions::test_truncate_text PASSED [ 99%]
tests/unit/utils/test_tokenization.py::TestConvenienceFunctions::test_split_text_by_tokens PASSED [ 99%]
tests/unit/utils/test_tokenization.py::TestEncodingFunctions::test_get_encoding PASSED [ 99%]
tests/unit/utils/test_tokenization.py::TestEncodingFunctions::test_get_encoding_caching PASSED [ 99%]
tests/unit/utils/test_tokenization.py::TestEncodingFunctions::test_get_encoding_invalid PASSED [ 99%]
tests/unit/utils/test_tokenization.py::TestEncodingFunctions::test_get_encoding_for_model PASSED [ 99%]
tests/unit/utils/test_tokenization.py::TestEncodingFunctions::test_get_encoding_for_unknown_model PASSED [ 99%]
tests/unit/utils/test_tokenization.py::TestMultilingualSupport::test_multilingual_text PASSED [ 99%]
tests/unit/utils/test_tokenization.py::TestMultilingualSupport::test_mixed_language_text PASSED [100%]

=================================== FAILURES ===================================
_____________ TestDocumentationLinks.test_no_broken_internal_links _____________

self = <test_links.TestDocumentationLinks object at 0x749d49d29ca0>
docs_root = PosixPath('/mnt/MCPProyects/ragTools/docs')

    def test_no_broken_internal_links(self, docs_root):
        """Test that all internal links are valid."""
        broken_links = []
    
        for md_file in docs_root.rglob("*.md"):
            links = self.extract_links(md_file)
    
            for text, link in links:
                # Skip external links
                if link.startswith("http"):
                    continue
    
                # Skip anchors
                if link.startswith("#"):
                    continue
    
                # Skip file:// links (used in implementation plan)
                if link.startswith("file://"):
                    continue
    
                # Resolve relative path
                target = (md_file.parent / link).resolve()
    
                if not target.exists():
                    broken_links.append(f"{md_file.name} -> {link}")
    
>       assert len(broken_links) == 0, \
            f"Broken internal links:\n" + "\n".join(broken_links)
E       AssertionError: Broken internal links:
E         MIGRATION_MANAGER_REMOVAL.md -> ../stories/epic-16/story-16.5-remove-migration-manager.md
E         README.md -> ./story-17.1-service-registry-configuration-schema.md
E         README.md -> ./story-17.2-service-registry-implementation.md
E         README.md -> ./story-17.4-migration-validator-alembic.md
E         README.md -> ./story-17.6-first-strategy-pair-testing.md
E         README.md -> ./story-17.7-remaining-strategy-pairs.md
E         README.md -> ./story-17.8-cli-validation-sample-docs.md
E         README.md -> ../../epics/epic-16-database-consolidation.md
E         README.md -> ../../epics/epic-16-database-consolidation.md
E         README.md -> ../../database/README.md
E         README.md -> ../../getting-started/installation.md
E       assert 11 == 0
E        +  where 11 = len(['MIGRATION_MANAGER_REMOVAL.md -> ../stories/epic-16/story-16.5-remove-migration-manager.md', 'README.md -> ./story-17.1-service-registry-configuration-schema.md', 'README.md -> ./story-17.2-service-registry-implementation.md', 'README.md -> ./story-17.4-migration-validator-alembic.md', 'README.md -> ./story-17.6-first-strategy-pair-testing.md', 'README.md -> ./story-17.7-remaining-strategy-pairs.md', 'README.md -> ./story-17.8-cli-validation-sample-docs.md', 'README.md -> ../../epics/epic-16-database-consolidation.md', 'README.md -> ../../epics/epic-16-database-consolidation.md', 'README.md -> ../../database/README.md', 'README.md -> ../../getting-started/installation.md'])

tests/unit/documentation/test_links.py:60: AssertionError
______________________________ test_budget_alert _______________________________

cost_tracker = <rag_factory.strategies.contextual.cost_tracker.CostTracker object at 0x749d3639c740>
caplog = <_pytest.logging.LogCaptureFixture object at 0x749d3639c950>

    def test_budget_alert(cost_tracker, caplog):
        """Test budget alert threshold."""
        import logging
        caplog.set_level(logging.WARNING)
    
        # Exceed budget threshold
        for i in range(100):
            cost_tracker.record_chunk_cost(
                chunk_id=f"chunk_{i}",
                input_tokens=1000,
                output_tokens=200,
                cost=0.02  # High cost
            )
    
        # Should trigger alert
>       assert "Cost alert" in caplog.text
E       AssertionError: assert 'Cost alert' in ''
E        +  where '' = <_pytest.logging.LogCaptureFixture object at 0x749d3639c950>.text

tests/unit/strategies/contextual/test_cost_tracker.py:88: AssertionError
=============================== warnings summary ===============================
rag_factory/services/llm/config.py:8
  /mnt/MCPProyects/ragTools/rag_factory/services/llm/config.py:8: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class LLMServiceConfig(BaseModel):

rag_factory/database/config.py:12
  /mnt/MCPProyects/ragTools/rag_factory/database/config.py:12: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DatabaseConfig(BaseSettings):

rag_factory/strategies/agentic/config.py:9
  /mnt/MCPProyects/ragTools/rag_factory/strategies/agentic/config.py:9: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class AgenticStrategyConfig(BaseModel):

rag_factory/strategies/contextual/config.py:31
  /mnt/MCPProyects/ragTools/rag_factory/strategies/contextual/config.py:31: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ContextualRetrievalConfig(BaseModel):

rag_factory/strategies/fine_tuned/config.py:6
  /mnt/MCPProyects/ragTools/rag_factory/strategies/fine_tuned/config.py:6: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class FineTunedConfig(BaseSettings):

rag_factory/strategies/late_chunking/models.py:21
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:21: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class TokenEmbedding(BaseModel):

rag_factory/strategies/late_chunking/models.py:34
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:34: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DocumentEmbedding(BaseModel):

rag_factory/strategies/late_chunking/models.py:49
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:49: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class EmbeddingChunk(BaseModel):

tests/unit/test_factory.py:35
  /mnt/MCPProyects/ragTools/tests/unit/test_factory.py:35: PytestCollectionWarning: cannot collect test class 'TestStrategy' because it has a __init__ constructor (from: tests/unit/test_factory.py)
    class TestStrategy(IRAGStrategy):

tests/unit/config/test_env_validator.py::TestEnvironmentValidator::test_validate_production_success
  /mnt/MCPProyects/ragTools/tests/unit/config/test_env_validator.py:18: DeprecationWarning: Environment variable 'DATABASE_TEST_URL' is deprecated. Please use 'TEST_DATABASE_URL' instead. Support for 'DATABASE_TEST_URL' will be removed in a future version.
  Migration: Rename DATABASE_TEST_URL=TEST_DATABASE_URL in your .env file.
    EnvironmentValidator.validate(mode='production')

tests/unit/config/test_env_validator.py::TestEnvironmentValidator::test_validate_development_success
  /mnt/MCPProyects/ragTools/tests/unit/config/test_env_validator.py:24: DeprecationWarning: Environment variable 'DATABASE_TEST_URL' is deprecated. Please use 'TEST_DATABASE_URL' instead. Support for 'DATABASE_TEST_URL' will be removed in a future version.
  Migration: Rename DATABASE_TEST_URL=TEST_DATABASE_URL in your .env file.
    EnvironmentValidator.validate(mode='development')

tests/unit/config/test_env_validator.py::TestEnvironmentValidator::test_validate_test_success
  /mnt/MCPProyects/ragTools/tests/unit/config/test_env_validator.py:30: DeprecationWarning: Environment variable 'DATABASE_TEST_URL' is deprecated. Please use 'TEST_DATABASE_URL' instead. Support for 'DATABASE_TEST_URL' will be removed in a future version.
  Migration: Rename DATABASE_TEST_URL=TEST_DATABASE_URL in your .env file.
    EnvironmentValidator.validate(mode='test')

tests/unit/database/test_models.py: 26 warnings
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py:3592: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    return util.wrap_callable(lambda ctx: fn(), fn)  # type: ignore

tests/unit/evaluation/test_statistical_testing.py::TestStatisticalAnalyzer::test_paired_t_test_significant_difference
tests/unit/evaluation/test_statistical_testing.py::TestStatisticalAnalyzer::test_analyze_metric_comprehensive
tests/unit/evaluation/test_statistical_testing.py::TestStatisticalAnalyzer::test_edge_case_high_variance
tests/unit/evaluation/test_statistical_testing.py::TestStatisticalAnalyzer::test_edge_case_small_sample
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/scipy/stats/_axis_nan_policy.py:423: RuntimeWarning: Precision loss occurred in moment calculation due to catastrophic cancellation. This occurs when the data are nearly identical. Results may be unreliable.
    return hypotest_fun_in(*args, **kwds)

tests/unit/evaluation/test_statistical_testing.py::TestStatisticalAnalyzer::test_confidence_interval_single_value
  /mnt/MCPProyects/ragTools/rag_factory/evaluation/analysis/statistics.py:156: SmallSampleWarning: One or more sample arguments is too small; all returned values will be NaN. See documentation for sample size requirements.
    sem = stats.sem(scores)

tests/unit/models/evaluation/test_ab_testing.py::test_winner_determination_clear_winner
tests/unit/models/evaluation/test_ab_testing.py::test_metrics_comparison_calculation
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/scipy/stats/_axis_nan_policy.py:579: RuntimeWarning: Precision loss occurred in moment calculation due to catastrophic cancellation. This occurs when the data are nearly identical. Results may be unreliable.
    res = hypotest_fun_out(*samples, **kwds)

tests/unit/models/evaluation/test_ab_testing.py::test_metrics_comparison_calculation
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/scipy/stats/_distn_infrastructure.py:2323: RuntimeWarning: invalid value encountered in multiply
    lower_bound = _a * scale + loc

tests/unit/models/evaluation/test_ab_testing.py::test_metrics_comparison_calculation
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/scipy/stats/_distn_infrastructure.py:2324: RuntimeWarning: invalid value encountered in multiply
    upper_bound = _b * scale + loc

tests/unit/strategies/agentic/test_strategy.py::test_strategy_get_stats
  /mnt/MCPProyects/ragTools/rag_factory/strategies/agentic/strategy.py:289: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    "config": self.strategy_config.dict()

tests/unit/strategies/fine_tuned/test_model_registry.py::TestONNXModelRegistry::test_register_model
tests/unit/strategies/fine_tuned/test_model_registry.py::TestONNXModelRegistry::test_get_model
tests/unit/strategies/fine_tuned/test_model_registry.py::TestONNXModelRegistry::test_list_models
tests/unit/strategies/fine_tuned/test_model_registry.py::TestONNXModelRegistry::test_list_models
tests/unit/strategies/fine_tuned/test_model_registry.py::TestONNXModelRegistry::test_list_models
tests/unit/strategies/fine_tuned/test_model_registry.py::TestONNXModelRegistry::test_delete_model
tests/unit/strategies/fine_tuned/test_model_registry.py::TestONNXModelRegistry::test_get_latest_version
tests/unit/strategies/fine_tuned/test_model_registry.py::TestONNXModelRegistry::test_get_latest_version
tests/unit/strategies/fine_tuned/test_model_registry.py::TestONNXModelRegistry::test_get_latest_version
  /mnt/MCPProyects/ragTools/rag_factory/strategies/fine_tuned/model_registry.py:293: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    key: meta.dict()

tests/unit/strategies/self_reflective/test_strategy.py: 12 warnings
  /mnt/MCPProyects/ragTools/rag_factory/strategies/self_reflective/strategy.py:179: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    result["refinements"] = [r.dict() for r in refinements]

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.3-final-0 ________________

Name                                                               Stmts   Miss  Cover   Missing
------------------------------------------------------------------------------------------------
rag_factory/__init__.py                                                3      0   100%
rag_factory/__version__.py                                             1      0   100%
rag_factory/cli/__init__.py                                            2      0   100%
rag_factory/cli/commands/__init__.py                                   1      0   100%
rag_factory/cli/commands/benchmark.py                                 96     27    72%   40-53, 64-84, 174-175, 257-258, 261
rag_factory/cli/commands/check_consistency.py                         43      3    93%   77, 90, 118
rag_factory/cli/commands/config.py                                    78     13    83%   36, 44, 46, 50-54, 59, 135, 182-183, 186
rag_factory/cli/commands/index.py                                     65     10    85%   29-39, 179-180, 183
rag_factory/cli/commands/query.py                                     47      6    87%   131, 140-141, 143-144, 147
rag_factory/cli/commands/repl.py                                     152    104    32%   39-40, 63-108, 112-120, 124-133, 137-155, 159-172, 176-186, 203-207, 211-220, 256-260
rag_factory/cli/commands/strategies.py                                45      4    91%   71-74, 118
rag_factory/cli/commands/validate_e2e.py                              91     69    24%   37-38, 42-142, 145-156
rag_factory/cli/commands/validate_pipeline.py                         70     11    84%   65-66, 69-70, 117-119, 153-156
rag_factory/cli/formatters/__init__.py                                 4      0   100%
rag_factory/cli/formatters/consistency.py                             61      0   100%
rag_factory/cli/formatters/output.py                                  20      0   100%
rag_factory/cli/formatters/results.py                                 71      0   100%
rag_factory/cli/formatters/validation.py                              63      0   100%
rag_factory/cli/main.py                                               31      8    74%   26-28, 49, 76-78, 82
rag_factory/cli/utils/__init__.py                                      3      0   100%
rag_factory/cli/utils/progress.py                                     14      0   100%
rag_factory/cli/utils/validation.py                                   53     15    72%   57-77
rag_factory/config/__init__.py                                         4      0   100%
rag_factory/config/env_resolver.py                                    52      3    94%   142-144
rag_factory/config/schemas/__init__.py                                 2      0   100%
rag_factory/config/schemas/version.py                                 10      6    40%   29-38
rag_factory/config/strategy_loader.py                                 54     12    78%   33, 49-60, 86
rag_factory/config/strategy_pair_manager.py                          105     23    78%   57-58, 66-70, 93, 114, 156-157, 191-196, 210-215, 274-275
rag_factory/config/validator.py                                       93      3    97%   70, 277, 352
rag_factory/core/__init__.py                                           4      4     0%   7-23
rag_factory/core/capabilities.py                                      61      0   100%
rag_factory/core/indexing_interface.py                                54      3    94%   144, 164, 208
rag_factory/core/pipeline.py                                          49      0   100%
rag_factory/core/retrieval_interface.py                               38      3    92%   138, 158, 196
rag_factory/database/__init__.py                                       4      0   100%
rag_factory/database/config.py                                        17      0   100%
rag_factory/database/connection.py                                    80      9    89%   168-170, 181-183, 212-214
rag_factory/database/env_validator.py                                 38      0   100%
rag_factory/database/models.py                                        85     10    88%   34, 42-45, 52, 69, 73, 77, 81, 85
rag_factory/database/vector_indexing.py                               38      1    97%   78
rag_factory/evaluation/__init__.py                                     4      0   100%
rag_factory/evaluation/analysis/__init__.py                            3      0   100%
rag_factory/evaluation/analysis/comparison.py                        135      9    93%   57, 59, 152, 175, 191, 253, 269, 316, 320
rag_factory/evaluation/analysis/statistics.py                         81      6    93%   98, 100, 153, 183, 252, 271
rag_factory/evaluation/benchmarks/__init__.py                          3      0   100%
rag_factory/evaluation/benchmarks/config.py                           25      4    84%   49, 51, 53, 55
rag_factory/evaluation/benchmarks/runner.py                          155     26    83%   17-18, 159-163, 182, 187, 205, 239-244, 279-287, 297-309
rag_factory/evaluation/datasets/__init__.py                            3      0   100%
rag_factory/evaluation/datasets/loader.py                             88     10    89%   103-104, 136, 149-150, 179, 192, 201-202, 236
rag_factory/evaluation/datasets/schema.py                             52      3    94%   46, 48, 149
rag_factory/evaluation/datasets/statistics.py                         65     65     0%   8-226
rag_factory/evaluation/exporters/__init__.py                           4      0   100%
rag_factory/evaluation/exporters/csv_exporter.py                      52      1    98%   70
rag_factory/evaluation/exporters/html_exporter.py                     47     39    17%   31-37, 41-165, 181-187, 192-293
rag_factory/evaluation/exporters/json_exporter.py                     19      0   100%
rag_factory/evaluation/metrics/__init__.py                             3      0   100%
rag_factory/evaluation/metrics/base.py                                31      3    90%   93, 99, 115
rag_factory/evaluation/metrics/cost.py                                65     65     0%   8-313
rag_factory/evaluation/metrics/performance.py                         42     42     0%   8-202
rag_factory/evaluation/metrics/quality.py                             84     84     0%   8-377
rag_factory/evaluation/metrics/retrieval.py                           77      8    90%   84, 118, 165, 233, 269, 327, 362, 401
rag_factory/exceptions.py                                             13      0   100%
rag_factory/factory.py                                               187     40    79%   257-258, 270, 452-454, 530, 585, 609, 644-699, 706, 709-714
rag_factory/legacy_config.py                                         155      9    94%   389, 418-419, 506-508, 523-525, 541-542
rag_factory/models/__init__.py                                         6      0   100%
rag_factory/models/embedding/__init__.py                               4      0   100%
rag_factory/models/embedding/loader.py                               179    152    15%   8, 16-18, 23-25, 45, 60-88, 92-97, 101-114, 118-135, 139-166, 175-191, 200-235, 244-313, 322-341, 350-367
rag_factory/models/embedding/models.py                                47      0   100%
rag_factory/models/embedding/registry.py                             128     17    87%   47-50, 57-59, 75-76, 117, 183, 187, 253, 259, 263, 275, 278
rag_factory/models/evaluation/__init__.py                              3      0   100%
rag_factory/models/evaluation/ab_testing.py                           98      7    93%   10-12, 107, 127, 189, 242
rag_factory/models/evaluation/models.py                               29      0   100%
rag_factory/observability/__init__.py                                  3      0   100%
rag_factory/observability/integrations/__init__.py                     1      1     0%   3
rag_factory/observability/integrations/prometheus.py                  47     47     0%   3-229
rag_factory/observability/logging/__init__.py                          2      0   100%
rag_factory/observability/logging/config.py                           16     16     0%   3-37
rag_factory/observability/logging/filters.py                          41      1    98%   73
rag_factory/observability/logging/logger.py                           86      0   100%
rag_factory/observability/metrics/__init__.py                          2      0   100%
rag_factory/observability/metrics/collector.py                       143      1    99%   89
rag_factory/observability/metrics/cost.py                             39      0   100%
rag_factory/observability/metrics/performance.py                      64      1    98%   118
rag_factory/observability/monitoring/__init__.py                       1      1     0%   3
rag_factory/observability/monitoring/api.py                          101    101     0%   3-328
rag_factory/pipeline.py                                              156      6    96%   187, 285-289, 300
rag_factory/registry/__init__.py                                       4      0   100%
rag_factory/registry/exceptions.py                                     6      0   100%
rag_factory/registry/service_factory.py                               62      0   100%
rag_factory/registry/service_registry.py                              91      3    97%   118, 191-192
rag_factory/repositories/__init__.py                                   5      0   100%
rag_factory/repositories/base.py                                      42     14    67%   53, 70, 87, 103, 136-139, 159-164
rag_factory/repositories/chunk.py                                    206     59    71%   75-76, 94-95, 200-202, 229-231, 358, 360, 395-396, 425, 438, 473-474, 519-521, 537-543, 557-563, 577-587, 604-626, 639-670
rag_factory/repositories/document.py                                  93     13    86%   67-68, 114-115, 253-255, 278-279, 292-293, 311-312
rag_factory/repositories/exceptions.py                                18      0   100%
rag_factory/services/__init__.py                                       4      0   100%
rag_factory/services/api/__init__.py                                   4      0   100%
rag_factory/services/api/anthropic.py                                 27     18    33%   46-52, 76-94, 118-141
rag_factory/services/api/cohere.py                                    30     19    37%   14-15, 49-59, 82-113
rag_factory/services/api/openai.py                                    46     31    33%   45-51, 75-93, 117-140, 168-174, 189-199, 216-227, 235
rag_factory/services/consistency.py                                   32      0   100%
rag_factory/services/database/__init__.py                              5      0   100%
rag_factory/services/database/database_context.py                    181    102    44%   310, 312, 314, 321-330, 338-339, 343-406, 414-415, 430-510, 516-517, 521-546
rag_factory/services/database/migration_validator.py                  85      4    95%   85, 168-170
rag_factory/services/database/neo4j.py                                54     36    33%   14, 60-71, 79-84, 103-114, 134-150, 172-181, 188-191, 195, 199
rag_factory/services/database/postgres.py                            177     40    77%   17-18, 26-27, 85, 91-103, 203-207, 211, 213, 217-218, 294-297, 355-379, 391, 497, 508
rag_factory/services/dependencies.py                                  41      0   100%
rag_factory/services/embedding/__init__.py                             4      0   100%
rag_factory/services/embedding/base.py                                31      6    81%   44, 59, 68, 77, 86, 98
rag_factory/services/embedding/cache.py                               43      0   100%
rag_factory/services/embedding/config.py                              29      3    90%   57, 63, 80
rag_factory/services/embedding/providers/__init__.py                   5      0   100%
rag_factory/services/embedding/providers/cohere.py                    53     36    32%   10-20, 55-75, 90-117, 125, 133, 141, 152-153
rag_factory/services/embedding/providers/local.py                     43     27    37%   8-9, 46-67, 83-109, 117, 125, 133, 146
rag_factory/services/embedding/providers/onnx_local.py               114     32    72%   18-19, 114, 143-147, 158, 170-175, 218-219, 248-250, 273, 289-308
rag_factory/services/embedding/providers/openai.py                    51     13    75%   10-20, 106-108
rag_factory/services/embedding/rate_limiter.py                        20      0   100%
rag_factory/services/embedding/service.py                            100      1    99%   88
rag_factory/services/interfaces.py                                    35      0   100%
rag_factory/services/llm/__init__.py                                   5      0   100%
rag_factory/services/llm/base.py                                      43      0   100%
rag_factory/services/llm/config.py                                    23      4    83%   48, 51-53
rag_factory/services/llm/prompt_template.py                           43      0   100%
rag_factory/services/llm/providers/__init__.py                        12     10    17%   10-22
rag_factory/services/llm/providers/anthropic.py                       57      2    96%   125, 139
rag_factory/services/llm/providers/ollama.py                          55      0   100%
rag_factory/services/llm/providers/openai.py                          57      6    89%   60, 101-105, 187
rag_factory/services/llm/service.py                                   66      5    92%   68, 161, 173-175
rag_factory/services/llm/token_counter.py                             27     17    37%   22-41, 56-57, 71-72
rag_factory/services/local/__init__.py                                 2      2     0%   7-9
rag_factory/services/local/reranker.py                                32     32     0%   7-116
rag_factory/services/onnx/__init__.py                                  2      0   100%
rag_factory/services/onnx/embedding.py                                29     19    34%   54-68, 83-93, 110-121, 129
rag_factory/services/utils/__init__.py                                 2      0   100%
rag_factory/services/utils/model_converter.py                        104    104     0%   8-291
rag_factory/services/utils/onnx_utils.py                             133     63    53%   22-23, 37, 77-84, 90-91, 96-97, 109-114, 142-146, 172-218, 240-274
rag_factory/services/utils/reranker_selector.py                       68      3    96%   123-125
rag_factory/strategies/__init__.py                                     2      0   100%
rag_factory/strategies/agentic/__init__.py                             7      0   100%
rag_factory/strategies/agentic/agent.py                              151     35    77%   77-78, 156, 212-214, 230-265, 291-293, 324-325, 357-368, 400-402, 407
rag_factory/strategies/agentic/config.py                              12      0   100%
rag_factory/strategies/agentic/frameworks/__init__.py                  1      1     0%   9
rag_factory/strategies/agentic/query_analyzer.py                      89      2    98%   176, 203
rag_factory/strategies/agentic/strategy.py                            87     10    89%   144, 156, 169, 242-243, 254-258
rag_factory/strategies/agentic/tool_implementations.py               135     12    91%   244-247, 370-373, 508-511
rag_factory/strategies/agentic/tools.py                               40      8    80%   66, 79, 89, 101, 139-142
rag_factory/strategies/base.py                                        55      0   100%
rag_factory/strategies/chunking/__init__.py                           15      4    73%   45-48
rag_factory/strategies/chunking/base.py                               91     16    82%   116, 122, 128, 159, 171, 182-196, 229, 254
rag_factory/strategies/chunking/docling_chunker.py                    45     21    53%   18, 69-73, 89-101, 112, 131-136, 147-152, 163-168, 187
rag_factory/strategies/chunking/fixed_size_chunker.py                 74     11    85%   8-9, 36-40, 44-46, 199-204
rag_factory/strategies/chunking/hybrid_chunker.py                     70      8    89%   70, 107-113, 129-130, 158
rag_factory/strategies/chunking/semantic_chunker.py                  195     28    86%   9-10, 14-15, 53, 59, 69-71, 90, 125-126, 194, 225, 252, 258, 294, 306-314, 437-441, 489
rag_factory/strategies/chunking/structural_chunker.py                147     25    83%   9-10, 40-44, 48-50, 121, 127-130, 246, 305, 325, 332-346, 380-385, 406, 413, 423
rag_factory/strategies/chunking/utils.py                              89     89     0%   3-264
rag_factory/strategies/contextual/__init__.py                          7      0   100%
rag_factory/strategies/contextual/batch_processor.py                  91     13    86%   124-125, 153-159, 191-196, 254, 266
rag_factory/strategies/contextual/config.py                           46      0   100%
rag_factory/strategies/contextual/context_generator.py                84     18    79%   83-84, 93-99, 113, 125-127, 131-133, 171-172, 226, 234
rag_factory/strategies/contextual/cost_tracker.py                     32      0   100%
rag_factory/strategies/contextual/prompts.py                          25      4    84%   98-101
rag_factory/strategies/contextual/storage.py                          44      0   100%
rag_factory/strategies/contextual/strategy.py                         78     49    37%   54-67, 75, 83, 107-156, 173, 186, 207-215, 231-262, 278, 284, 289, 298
rag_factory/strategies/fine_tuned/__init__.py                          4      0   100%
rag_factory/strategies/fine_tuned/ab_testing.py                       78      5    94%   63, 106, 110, 119, 125
rag_factory/strategies/fine_tuned/config.py                           11      0   100%
rag_factory/strategies/fine_tuned/custom_loader.py                    40      4    90%   41, 69, 87-88
rag_factory/strategies/fine_tuned/model_registry.py                  126     38    70%   40, 147, 185, 200-223, 227-240, 256, 277-287, 302-303
rag_factory/strategies/hierarchical/__init__.py                        5      0   100%
rag_factory/strategies/hierarchical/hierarchy_builder.py              79     13    84%   117, 149, 281, 310-335
rag_factory/strategies/hierarchical/models.py                         58      0   100%
rag_factory/strategies/hierarchical/parent_retriever.py               89     21    76%   64-74, 141-142, 213-227, 254-257
rag_factory/strategies/hierarchical/strategy.py                       76     58    24%   46-79, 92-93, 101, 112-144, 162-178, 206-240, 254, 268-269, 285-301
rag_factory/strategies/indexing/__init__.py                            6      0   100%
rag_factory/strategies/indexing/context_aware.py                     108     11    90%   74, 81, 89-91, 115, 126-128, 162, 197
rag_factory/strategies/indexing/hierarchical.py                       90     73    19%   50, 63, 88-134, 156-185, 201-236, 253-278, 292-293
rag_factory/strategies/indexing/in_memory.py                          41     25    39%   54, 65, 93-121, 143, 160, 173, 194-200
rag_factory/strategies/indexing/keyword_indexing.py                   42     42     0%   8-157
rag_factory/strategies/indexing/knowledge_graph_indexing.py           46     33    28%   18, 27, 48-89, 108-129
rag_factory/strategies/indexing/vector_embedding.py                   98     85    13%   25, 35, 55-116, 137-221
rag_factory/strategies/knowledge_graph/__init__.py                     4      0   100%
rag_factory/strategies/knowledge_graph/config.py                      21      2    90%   128-129
rag_factory/strategies/knowledge_graph/entity_extractor.py            70      7    90%   135-137, 162-164, 179
rag_factory/strategies/knowledge_graph/graph_store.py                 31      9    71%   25, 35, 48, 66, 86, 99, 109, 114, 124
rag_factory/strategies/knowledge_graph/hybrid_retriever.py            56      0   100%
rag_factory/strategies/knowledge_graph/memory_graph_store.py          97      8    92%   71, 82-85, 102-103, 126
rag_factory/strategies/knowledge_graph/models.py                      53      0   100%
rag_factory/strategies/knowledge_graph/relationship_extractor.py      62     50    19%   35-37, 56-85, 93-122, 132-189
rag_factory/strategies/knowledge_graph/strategy.py                    80     54    32%   46-64, 76, 95-168, 193-215, 224-234, 238, 242, 246, 251, 256
rag_factory/strategies/late_chunking/__init__.py                       6      0   100%
rag_factory/strategies/late_chunking/coherence_analyzer.py            27      1    96%   59
rag_factory/strategies/late_chunking/document_embedder.py            104     13    88%   35, 57-63, 72, 125-126, 232-233, 277, 303
rag_factory/strategies/late_chunking/embedding_chunker.py            117     22    81%   50-57, 121-145, 229-239
rag_factory/strategies/late_chunking/models.py                        62      0   100%
rag_factory/strategies/late_chunking/strategy.py                      70     46    34%   48-69, 77, 88, 107-122, 140-177, 196-205, 210, 215
rag_factory/strategies/multi_query/__init__.py                         7      0   100%
rag_factory/strategies/multi_query/config.py                          36      0   100%
rag_factory/strategies/multi_query/deduplicator.py                    87     14    84%   63-64, 121, 131-135, 146, 160-165, 173-174, 195
rag_factory/strategies/multi_query/parallel_executor.py               52      1    98%   163
rag_factory/strategies/multi_query/prompts.py                         10      2    80%   76-80
rag_factory/strategies/multi_query/ranker.py                          80      8    90%   47, 56-60, 98-103, 163
rag_factory/strategies/multi_query/strategy.py                        68     43    37%   45-55, 59, 75-105, 109, 113, 126-142, 154-174, 179, 184
rag_factory/strategies/multi_query/variant_generator.py               62      3    95%   79, 129, 177
rag_factory/strategies/query_expansion/__init__.py                     8      0   100%
rag_factory/strategies/query_expansion/base.py                        66      1    98%   103
rag_factory/strategies/query_expansion/cache.py                       52     21    60%   47-51, 81-97, 105-112
rag_factory/strategies/query_expansion/expander_service.py            92      1    99%   178
rag_factory/strategies/query_expansion/hyde_expander.py               19      9    53%   41-65
rag_factory/strategies/query_expansion/llm_expander.py                25      1    96%   66
rag_factory/strategies/query_expansion/metrics.py                     66     30    55%   44-45, 53-57, 76-109, 130, 134, 146-152, 160
rag_factory/strategies/query_expansion/prompts.py                     13      0   100%
rag_factory/strategies/reranking/__init__.py                           7      0   100%
rag_factory/strategies/reranking/base.py                              68      2    97%   101, 106
rag_factory/strategies/reranking/bge_reranker.py                      51     37    27%   14, 53-81, 103-147, 151
rag_factory/strategies/reranking/cache.py                             48      0   100%
rag_factory/strategies/reranking/cohere_reranker.py                   34     20    41%   15-16, 55-71, 94-115, 119
rag_factory/strategies/reranking/cosine_reranker.py                   62      7    89%   128, 163-171
rag_factory/strategies/reranking/cross_encoder_reranker.py            40     24    40%   13-14, 65-76, 98-120, 124
rag_factory/strategies/reranking/metrics.py                           67      0   100%
rag_factory/strategies/reranking/reranker_service.py                 115      8    93%   80, 84-89, 167, 203-204
rag_factory/strategies/retrieval/__init__.py                           6      0   100%
rag_factory/strategies/retrieval/keyword_retriever.py                 56     40    29%   41, 71-113, 126-133, 153-172
rag_factory/strategies/retrieval/knowledge_graph_retriever.py         22      8    64%   19, 48-70
rag_factory/strategies/retrieval/multi_query_retriever.py             22      8    64%   19, 44-66
rag_factory/strategies/retrieval/query_expansion_retriever.py         24      8    67%   20, 45-67
rag_factory/strategies/retrieval/semantic_retriever.py                23     11    52%   23, 61-94
rag_factory/strategies/self_reflective/__init__.py                     6      0   100%
rag_factory/strategies/self_reflective/config.py                      20      8    60%   29-42
rag_factory/strategies/self_reflective/grader.py                      80      3    96%   234-237
rag_factory/strategies/self_reflective/models.py                      48      0   100%
rag_factory/strategies/self_reflective/refiner.py                     69      3    96%   131, 221-222
rag_factory/strategies/self_reflective/strategy.py                    92      2    98%   84-85
rag_factory/utils/__init__.py                                          3      0   100%
rag_factory/utils/token_counter.py                                    45      0   100%
rag_factory/utils/tokenization.py                                     95      6    94%   63-64, 144, 185, 251-252
------------------------------------------------------------------------------------------------
TOTAL                                                              12307   3139    74%
=========================== short test summary info ============================
FAILED tests/unit/documentation/test_links.py::TestDocumentationLinks::test_no_broken_internal_links - AssertionError: Broken internal links:
  MIGRATION_MANAGER_REMOVAL.md -> ../stories/epic-16/story-16.5-remove-migration-manager.md
  README.md -> ./story-17.1-service-registry-configuration-schema.md
  README.md -> ./story-17.2-service-registry-implementation.md
  README.md -> ./story-17.4-migration-validator-alembic.md
  README.md -> ./story-17.6-first-strategy-pair-testing.md
  README.md -> ./story-17.7-remaining-strategy-pairs.md
  README.md -> ./story-17.8-cli-validation-sample-docs.md
  README.md -> ../../epics/epic-16-database-consolidation.md
  README.md -> ../../epics/epic-16-database-consolidation.md
  README.md -> ../../database/README.md
  README.md -> ../../getting-started/installation.md
assert 11 == 0
 +  where 11 = len(['MIGRATION_MANAGER_REMOVAL.md -> ../stories/epic-16/story-16.5-remove-migration-manager.md', 'README.md -> ./story-17.1-service-registry-configuration-schema.md', 'README.md -> ./story-17.2-service-registry-implementation.md', 'README.md -> ./story-17.4-migration-validator-alembic.md', 'README.md -> ./story-17.6-first-strategy-pair-testing.md', 'README.md -> ./story-17.7-remaining-strategy-pairs.md', 'README.md -> ./story-17.8-cli-validation-sample-docs.md', 'README.md -> ../../epics/epic-16-database-consolidation.md', 'README.md -> ../../epics/epic-16-database-consolidation.md', 'README.md -> ../../database/README.md', 'README.md -> ../../getting-started/installation.md'])
FAILED tests/unit/strategies/contextual/test_cost_tracker.py::test_budget_alert - AssertionError: assert 'Cost alert' in ''
 +  where '' = <_pytest.logging.LogCaptureFixture object at 0x749d3639c950>.text
===== 2 failed, 1683 passed, 19 skipped, 69 warnings in 144.41s (0:02:24) ======

========================================
Test run completed at 2025-12-18 12:44:50
========================================
