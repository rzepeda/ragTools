[1/197] FAILED: tests/benchmarks/test_contextual_performance.py
  Tests: 7 (P:5 F:2 S:0)
----------------------------------------
============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.1, pluggy-1.6.0 -- /mnt/MCPProyects/ragTools/venv/bin/python3
cachedir: .pytest_cache
rootdir: /mnt/MCPProyects/ragTools
configfile: pytest.ini (WARNING: ignoring pytest config in pyproject.toml!)
plugins: anyio-4.12.0, cov-7.0.0, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 6 items

tests/benchmarks/test_contextual_performance.py::test_batch_processing_throughput PASSED [ 16%]
tests/benchmarks/test_contextual_performance.py::test_parallel_vs_sequential_performance PASSED [ 33%]
tests/benchmarks/test_contextual_performance.py::test_large_document_processing_time PASSED [ 50%]
tests/benchmarks/test_contextual_performance.py::test_batch_size_impact FAILED [ 66%]
tests/benchmarks/test_contextual_performance.py::test_cost_tracker_performance PASSED [ 83%]
tests/benchmarks/test_contextual_performance.py::test_context_generation_latency PASSED [100%]

=================================== FAILURES ===================================
____________________________ test_batch_size_impact ____________________________
tests/benchmarks/test_contextual_performance.py:175: in test_batch_size_impact
    assert results[20] <= results[5] * 1.5  # Allow some variance
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   assert 0.36823296546936035 <= (0.1571652889251709 * 1.5)
---------------------------- Captured stderr setup -----------------------------
DEBUG:asyncio:Using selector: EpollSelector
------------------------------ Captured log setup ------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
----------------------------- Captured stdout call -----------------------------
Batch size 5: 0.16s
Batch size 10: 0.13s
Batch size 20: 0.37s
Batch size 50: 0.13s
----------------------------- Captured stderr call -----------------------------
INFO:rag_factory.strategies.contextual.batch_processor:Processing 100 chunks in batches of 5
INFO:rag_factory.strategies.contextual.batch_processor:Created 20 batches
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_0 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_1 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_2 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_3 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_4 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_5 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_6 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_7 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_8 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_9 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_10 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_11 returned without context (context was None)
INFO:rag_factory.strategies.contextual.batch_processor:Batch processed 5 chunks out of 5
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_12 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_13 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_14 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_15 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_16 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_17 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_18 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_19 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_20 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_21 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_22 returned without context (context was None)
INFO:rag_factory.strategies.contextual.batch_processor:Batch processed 5 chunks out of 5
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_23 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_24 returned without context (context was None)
INFO:rag_factory.strategies.contextual.batch_processor:Batch processed 5 chunks out of 5
INFO:rag_factory.strategies.contextual.batch_processor:Batch processed 5 chunks out of 5
INFO:rag_factory.strategies.contextual.batch_processor:Batch processed 5 chunks out of 5
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_25 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_26 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_27 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_28 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_29 returned without context (context was None)
INFO:rag_factory.strategies.contextual.batch_processor:Batch processed 5 chunks out of 5
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_30 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_31 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_32 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_33 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_34 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_35 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_36 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_37 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_38 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_39 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_40 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_41 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_42 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_43 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_44 returned without context (context was None)
INFO:rag_factory.strategies.contextual.batch_processor:Batch processed 5 chunks out of 5
INFO:rag_factory.strategies.contextual.batch_processor:Batch processed 5 chunks out of 5
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_45 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_46 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_47 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_48 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_49 returned without context (context was None)
INFO:rag_factory.strategies.contextual.batch_processor:Batch processed 5 chunks out of 5
INFO:rag_factory.strategies.contextual.batch_processor:Batch processed 5 chunks out of 5
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_50 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_51 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_52 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_53 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_54 returned without context (context was None)
INFO:rag_factory.strategies.contextual.batch_processor:Batch processed 5 chunks out of 5
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_55 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_56 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_57 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_58 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_59 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_60 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_61 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_62 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_63 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_64 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_65 returned without context (context was None)
INFO:rag_factory.strategies.contextual.batch_processor:Batch processed 5 chunks out of 5
INFO:rag_factory.strategies.contextual.batch_processor:Batch processed 5 chunks out of 5
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_66 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_67 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_68 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_69 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_70 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_71 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_72 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_73 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_74 returned without context (context was None)
INFO:rag_factory.strategies.contextual.batch_processor:Batch processed 5 chunks out of 5
INFO:rag_factory.strategies.contextual.batch_processor:Batch processed 5 chunks out of 5
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_75 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_76 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_77 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_78 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_79 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_80 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_81 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_82 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_83 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_84 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_85 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_86 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_87 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_88 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_89 returned without context (context was None)
INFO:rag_factory.strategies.contextual.batch_processor:Batch processed 5 chunks out of 5
INFO:rag_factory.strategies.contextual.batch_processor:Batch processed 5 chunks out of 5
INFO:rag_factory.strategies.contextual.batch_processor:Batch processed 5 chunks out of 5
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_90 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_91 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_92 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_93 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_94 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_95 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_96 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_97 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_98 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_99 returned without context (context was None)
INFO:rag_factory.strategies.contextual.batch_processor:Batch processed 5 chunks out of 5
INFO:rag_factory.strategies.contextual.batch_processor:Batch processed 5 chunks out of 5
INFO:rag_factory.strategies.contextual.batch_processor:Processed 100 chunks
INFO:rag_factory.strategies.contextual.batch_processor:Processing 100 chunks in batches of 10
INFO:rag_factory.strategies.contextual.batch_processor:Created 10 batches
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_0 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_1 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_2 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_3 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_4 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_5 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_6 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_7 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_8 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_9 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_10 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_11 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_12 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_13 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_14 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_15 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_16 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_17 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_18 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_19 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_20 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_21 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_22 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_23 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_24 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_25 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_26 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_27 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_28 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_29 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_30 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_31 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_32 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_33 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_34 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_35 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_36 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_37 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_38 returned without context (context was None)
INFO:rag_factory.strategies.contextual.batch_processor:Batch processed 10 chunks out of 10
INFO:rag_factory.strategies.contextual.batch_processor:Batch processed 10 chunks out of 10
INFO:rag_factory.strategies.contextual.batch_processor:Batch processed 10 chunks out of 10
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_39 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_40 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_41 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_42 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_43 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_44 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_45 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_46 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_47 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_48 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_49 returned without context (context was None)
INFO:rag_factory.strategies.contextual.batch_processor:Batch processed 10 chunks out of 10
INFO:rag_factory.strategies.contextual.batch_processor:Batch processed 10 chunks out of 10
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_50 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_51 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_52 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_53 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_54 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_55 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_56 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_57 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_58 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_59 returned without context (context was None)
INFO:rag_factory.strategies.contextual.batch_processor:Batch processed 10 chunks out of 10
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_60 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_61 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_62 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_63 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_64 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_65 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_66 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_67 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_68 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_69 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_70 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_71 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_72 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_73 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_74 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_75 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_76 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_77 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_78 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_79 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_80 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_81 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_82 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_83 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_84 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_85 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_86 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_87 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_88 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_89 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_90 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_91 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_92 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_93 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_94 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_95 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_96 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_97 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_98 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_99 returned without context (context was None)
INFO:rag_factory.strategies.contextual.batch_processor:Batch processed 10 chunks out of 10
INFO:rag_factory.strategies.contextual.batch_processor:Batch processed 10 chunks out of 10
INFO:rag_factory.strategies.contextual.batch_processor:Batch processed 10 chunks out of 10
INFO:rag_factory.strategies.contextual.batch_processor:Batch processed 10 chunks out of 10
INFO:rag_factory.strategies.contextual.batch_processor:Processed 100 chunks
INFO:rag_factory.strategies.contextual.batch_processor:Processing 100 chunks in batches of 20
INFO:rag_factory.strategies.contextual.batch_processor:Created 5 batches
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_0 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_1 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_2 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_3 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_4 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_5 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_6 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_7 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_8 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_9 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_10 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_11 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_12 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_13 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_14 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_15 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_16 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_17 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_18 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_19 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_20 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_21 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_22 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_23 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_24 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_25 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_26 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_27 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_28 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_29 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_30 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_31 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_32 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_33 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_34 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_35 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_36 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_37 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_38 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_39 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_40 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_41 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_42 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_43 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_44 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_45 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_46 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_47 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_48 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_49 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_50 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_51 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_52 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_53 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_54 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_55 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_56 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_57 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_58 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_59 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_60 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_61 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_62 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_63 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_64 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_65 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_66 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_67 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_68 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_69 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_70 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_71 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_72 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_73 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_74 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_75 returned without context (context was None)
INFO:rag_factory.strategies.contextual.batch_processor:Batch processed 20 chunks out of 20
INFO:rag_factory.strategies.contextual.batch_processor:Batch processed 20 chunks out of 20
INFO:rag_factory.strategies.contextual.batch_processor:Batch processed 20 chunks out of 20
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_76 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_77 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_78 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_79 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_80 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_81 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_82 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_83 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_84 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_85 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_86 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_87 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_88 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_89 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_90 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_91 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_92 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_93 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_94 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_95 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_96 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_97 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_98 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_99 returned without context (context was None)
INFO:rag_factory.strategies.contextual.batch_processor:Batch processed 20 chunks out of 20
INFO:rag_factory.strategies.contextual.batch_processor:Batch processed 20 chunks out of 20
INFO:rag_factory.strategies.contextual.batch_processor:Processed 100 chunks
INFO:rag_factory.strategies.contextual.batch_processor:Processing 100 chunks in batches of 50
INFO:rag_factory.strategies.contextual.batch_processor:Created 2 batches
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_0 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_1 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_2 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_3 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_4 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_5 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_6 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_7 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_8 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_9 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_10 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_11 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_12 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_13 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_14 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_15 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_16 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_17 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_18 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_19 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_20 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_21 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_22 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_23 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_24 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_25 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_26 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_27 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_28 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_29 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_30 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_31 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_32 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_33 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_34 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_35 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_36 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_37 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_38 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_39 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_40 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_41 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_42 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_43 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_44 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_45 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_46 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_47 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_48 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_49 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_50 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_51 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_52 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_53 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_54 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_55 returned without context (context was None)
INFO:rag_factory.strategies.contextual.batch_processor:Batch processed 50 chunks out of 50
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_56 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_57 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_58 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_59 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_60 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_61 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_62 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_63 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_64 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_65 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_66 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_67 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_68 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_69 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_70 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_71 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_72 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_73 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_74 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_75 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_76 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_77 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_78 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_79 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_80 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_81 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_82 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_83 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_84 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_85 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_86 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_87 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_88 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_89 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_90 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_91 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_92 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_93 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_94 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_95 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_96 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_97 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_98 returned without context (context was None)
WARNING:rag_factory.strategies.contextual.context_generator:Generated context too short: 13 tokens
WARNING:rag_factory.strategies.contextual.batch_processor:Chunk chunk_99 returned without context (context was None)
INFO:rag_factory.strategies.contextual.batch_processor:Batch processed 50 chunks out of 50
INFO:rag_factory.strategies.contextual.batch_processor:Processed 100 chunks
------------------------------ Captured log call -------------------------------
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:60 Processing 100 chunks in batches of 5
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:89 Created 20 batches
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_0 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_1 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_2 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_3 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_4 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_5 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_6 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_7 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_8 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_9 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_10 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_11 returned without context (context was None)
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:200 Batch processed 5 chunks out of 5
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_12 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_13 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_14 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_15 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_16 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_17 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_18 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_19 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_20 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_21 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_22 returned without context (context was None)
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:200 Batch processed 5 chunks out of 5
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_23 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_24 returned without context (context was None)
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:200 Batch processed 5 chunks out of 5
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:200 Batch processed 5 chunks out of 5
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:200 Batch processed 5 chunks out of 5
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_25 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_26 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_27 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_28 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_29 returned without context (context was None)
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:200 Batch processed 5 chunks out of 5
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_30 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_31 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_32 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_33 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_34 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_35 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_36 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_37 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_38 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_39 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_40 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_41 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_42 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_43 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_44 returned without context (context was None)
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:200 Batch processed 5 chunks out of 5
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:200 Batch processed 5 chunks out of 5
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_45 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_46 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_47 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_48 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_49 returned without context (context was None)
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:200 Batch processed 5 chunks out of 5
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:200 Batch processed 5 chunks out of 5
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_50 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_51 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_52 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_53 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_54 returned without context (context was None)
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:200 Batch processed 5 chunks out of 5
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_55 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_56 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_57 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_58 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_59 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_60 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_61 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_62 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_63 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_64 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_65 returned without context (context was None)
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:200 Batch processed 5 chunks out of 5
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:200 Batch processed 5 chunks out of 5
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_66 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_67 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_68 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_69 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_70 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_71 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_72 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_73 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_74 returned without context (context was None)
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:200 Batch processed 5 chunks out of 5
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:200 Batch processed 5 chunks out of 5
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_75 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_76 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_77 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_78 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_79 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_80 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_81 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_82 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_83 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_84 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_85 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_86 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_87 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_88 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_89 returned without context (context was None)
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:200 Batch processed 5 chunks out of 5
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:200 Batch processed 5 chunks out of 5
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:200 Batch processed 5 chunks out of 5
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_90 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_91 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_92 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_93 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_94 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_95 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_96 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_97 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_98 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_99 returned without context (context was None)
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:200 Batch processed 5 chunks out of 5
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:200 Batch processed 5 chunks out of 5
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:71 Processed 100 chunks
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:60 Processing 100 chunks in batches of 10
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:89 Created 10 batches
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_0 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_1 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_2 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_3 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_4 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_5 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_6 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_7 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_8 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_9 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_10 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_11 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_12 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_13 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_14 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_15 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_16 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_17 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_18 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_19 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_20 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_21 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_22 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_23 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_24 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_25 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_26 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_27 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_28 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_29 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_30 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_31 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_32 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_33 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_34 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_35 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_36 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_37 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_38 returned without context (context was None)
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:200 Batch processed 10 chunks out of 10
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:200 Batch processed 10 chunks out of 10
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:200 Batch processed 10 chunks out of 10
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_39 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_40 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_41 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_42 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_43 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_44 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_45 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_46 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_47 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_48 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_49 returned without context (context was None)
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:200 Batch processed 10 chunks out of 10
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:200 Batch processed 10 chunks out of 10
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_50 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_51 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_52 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_53 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_54 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_55 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_56 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_57 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_58 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_59 returned without context (context was None)
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:200 Batch processed 10 chunks out of 10
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_60 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_61 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_62 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_63 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_64 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_65 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_66 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_67 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_68 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_69 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_70 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_71 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_72 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_73 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_74 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_75 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_76 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_77 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_78 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_79 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_80 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_81 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_82 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_83 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_84 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_85 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_86 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_87 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_88 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_89 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_90 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_91 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_92 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_93 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_94 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_95 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_96 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_97 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_98 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_99 returned without context (context was None)
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:200 Batch processed 10 chunks out of 10
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:200 Batch processed 10 chunks out of 10
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:200 Batch processed 10 chunks out of 10
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:200 Batch processed 10 chunks out of 10
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:71 Processed 100 chunks
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:60 Processing 100 chunks in batches of 20
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:89 Created 5 batches
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_0 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_1 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_2 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_3 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_4 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_5 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_6 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_7 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_8 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_9 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_10 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_11 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_12 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_13 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_14 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_15 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_16 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_17 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_18 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_19 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_20 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_21 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_22 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_23 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_24 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_25 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_26 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_27 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_28 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_29 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_30 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_31 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_32 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_33 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_34 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_35 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_36 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_37 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_38 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_39 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_40 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_41 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_42 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_43 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_44 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_45 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_46 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_47 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_48 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_49 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_50 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_51 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_52 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_53 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_54 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_55 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_56 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_57 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_58 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_59 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_60 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_61 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_62 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_63 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_64 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_65 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_66 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_67 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_68 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_69 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_70 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_71 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_72 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_73 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_74 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_75 returned without context (context was None)
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:200 Batch processed 20 chunks out of 20
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:200 Batch processed 20 chunks out of 20
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:200 Batch processed 20 chunks out of 20
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_76 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_77 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_78 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_79 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_80 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_81 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_82 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_83 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_84 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_85 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_86 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_87 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_88 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_89 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_90 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_91 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_92 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_93 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_94 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_95 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_96 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_97 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_98 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_99 returned without context (context was None)
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:200 Batch processed 20 chunks out of 20
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:200 Batch processed 20 chunks out of 20
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:71 Processed 100 chunks
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:60 Processing 100 chunks in batches of 50
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:89 Created 2 batches
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_0 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_1 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_2 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_3 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_4 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_5 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_6 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_7 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_8 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_9 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_10 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_11 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_12 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_13 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_14 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_15 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_16 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_17 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_18 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_19 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_20 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_21 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_22 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_23 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_24 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_25 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_26 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_27 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_28 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_29 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_30 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_31 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_32 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_33 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_34 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_35 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_36 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_37 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_38 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_39 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_40 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_41 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_42 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_43 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_44 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_45 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_46 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_47 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_48 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_49 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_50 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_51 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_52 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_53 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_54 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_55 returned without context (context was None)
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:200 Batch processed 50 chunks out of 50
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_56 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_57 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_58 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_59 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_60 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_61 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_62 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_63 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_64 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_65 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_66 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_67 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_68 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_69 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_70 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_71 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_72 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_73 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_74 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_75 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_76 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_77 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_78 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_79 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_80 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_81 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_82 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_83 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_84 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_85 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_86 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_87 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_88 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_89 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_90 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_91 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_92 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_93 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_94 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_95 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_96 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_97 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_98 returned without context (context was None)
WARNING  rag_factory.strategies.contextual.context_generator:context_generator.py:83 Generated context too short: 13 tokens
WARNING  rag_factory.strategies.contextual.batch_processor:batch_processor.py:254 Chunk chunk_99 returned without context (context was None)
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:200 Batch processed 50 chunks out of 50
INFO     rag_factory.strategies.contextual.batch_processor:batch_processor.py:71 Processed 100 chunks
=============================== warnings summary ===============================
rag_factory/services/llm/config.py:8
  /mnt/MCPProyects/ragTools/rag_factory/services/llm/config.py:8: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class LLMServiceConfig(BaseModel):

rag_factory/database/config.py:12
  /mnt/MCPProyects/ragTools/rag_factory/database/config.py:12: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DatabaseConfig(BaseSettings):

rag_factory/strategies/contextual/config.py:31
  /mnt/MCPProyects/ragTools/rag_factory/strategies/contextual/config.py:31: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ContextualRetrievalConfig(BaseModel):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.3-final-0 ________________

Name                                                               Stmts   Miss  Cover   Missing
------------------------------------------------------------------------------------------------
rag_factory/__init__.py                                                3      0   100%
rag_factory/__version__.py                                             1      0   100%
rag_factory/cli/__init__.py                                            2      0   100%
rag_factory/cli/commands/__init__.py                                   1      0   100%
rag_factory/cli/commands/benchmark.py                                 96     81    16%   40-53, 64-84, 148-263
rag_factory/cli/commands/check_consistency.py                         43     33    23%   64-120
rag_factory/cli/commands/config.py                                    78     68    13%   26-64, 102-188
rag_factory/cli/commands/index.py                                     65     52    20%   29-39, 93-185
rag_factory/cli/commands/query.py                                     47     36    23%   73-149
rag_factory/cli/commands/repl.py                                     152    130    14%   29-56, 63-108, 112-120, 124-133, 137-155, 159-172, 176-186, 190-207, 211-220, 253-260
rag_factory/cli/commands/strategies.py                                45     36    20%   48-120
rag_factory/cli/commands/validate_e2e.py                              91     69    24%   37-38, 42-142, 145-156
rag_factory/cli/commands/validate_pipeline.py                         70     57    19%   57-156
rag_factory/cli/formatters/__init__.py                                 4      0   100%
rag_factory/cli/formatters/consistency.py                             61     55    10%   21-69, 79-103, 108-138
rag_factory/cli/formatters/output.py                                  20      9    55%   23-24, 43-44, 63-64, 74, 79, 84
rag_factory/cli/formatters/results.py                                 71     62    13%   28-55, 72-99, 116-144, 157-181
rag_factory/cli/formatters/validation.py                              63     53    16%   25-43, 48-56, 65-77, 86-98, 103-129, 134-137
rag_factory/cli/main.py                                               31     10    68%   25-28, 48-49, 76-78, 82
rag_factory/cli/utils/__init__.py                                      3      0   100%
rag_factory/cli/utils/progress.py                                     14      8    43%   34-47, 73-76
rag_factory/cli/utils/validation.py                                   53     42    21%   30-41, 57-77, 93-118, 135
rag_factory/config/__init__.py                                         4      0   100%
rag_factory/config/env_resolver.py                                    52     37    29%   47-54, 70-90, 110, 129-147
rag_factory/config/schemas/__init__.py                                 2      0   100%
rag_factory/config/schemas/version.py                                 10      6    40%   29-38
rag_factory/config/strategy_loader.py                                 54     36    33%   32-41, 45-60, 75-89, 101-104
rag_factory/config/strategy_pair_manager.py                          105     83    21%   40-72, 92-132, 148-198, 210-215, 229, 259-282
rag_factory/config/validator.py                                       93     76    18%   27-30, 34-39, 53-58, 62-74, 111-132, 177-198, 215-235, 247-249, 271-295, 333-354
rag_factory/core/__init__.py                                           4      4     0%   7-23
rag_factory/core/capabilities.py                                      61     16    74%   129, 155, 173-174, 239-253
rag_factory/core/indexing_interface.py                                54     35    35%   55-57, 118-123, 144, 164, 208, 260, 272, 292-313, 341-364
rag_factory/core/pipeline.py                                          49     35    29%   22-24, 33-40, 55-77, 95-96, 105-108, 117-120, 137-146
rag_factory/core/retrieval_interface.py                               38     20    47%   56-58, 112-117, 138, 158, 196, 247, 259, 285-309
rag_factory/database/__init__.py                                       4      0   100%
rag_factory/database/config.py                                        17      0   100%
rag_factory/database/connection.py                                    80     54    32%   40-48, 61-86, 96, 107, 126-137, 150-157, 165-170, 178-183, 196-197, 209-214, 218, 222
rag_factory/database/env_validator.py                                 38     38     0%   7-139
rag_factory/database/models.py                                        85     32    62%   31-34, 37-45, 48-54, 66-69, 72-77, 80-85, 181, 323-325
rag_factory/database/vector_indexing.py                               38     38     0%   7-114
rag_factory/evaluation/__init__.py                                     4      4     0%   29-41
rag_factory/evaluation/analysis/__init__.py                            3      3     0%   8-11
rag_factory/evaluation/analysis/comparison.py                        135    135     0%   8-323
rag_factory/evaluation/analysis/statistics.py                         81     81     0%   8-320
rag_factory/evaluation/benchmarks/__init__.py                          3      3     0%   8-14
rag_factory/evaluation/benchmarks/config.py                           25     25     0%   7-64
rag_factory/evaluation/benchmarks/runner.py                          155    155     0%   8-423
rag_factory/evaluation/datasets/__init__.py                            3      3     0%   8-14
rag_factory/evaluation/datasets/loader.py                             88     88     0%   8-281
rag_factory/evaluation/datasets/schema.py                             52     52     0%   8-160
rag_factory/evaluation/datasets/statistics.py                         65     65     0%   8-226
rag_factory/evaluation/exporters/__init__.py                           4      4     0%   8-12
rag_factory/evaluation/exporters/csv_exporter.py                      52     52     0%   3-124
rag_factory/evaluation/exporters/html_exporter.py                     47     47     0%   3-293
rag_factory/evaluation/exporters/json_exporter.py                     19     19     0%   3-68
rag_factory/evaluation/metrics/__init__.py                             3      3     0%   12-25
rag_factory/evaluation/metrics/base.py                                31     31     0%   8-115
rag_factory/evaluation/metrics/cost.py                                65     65     0%   8-313
rag_factory/evaluation/metrics/performance.py                         42     42     0%   8-202
rag_factory/evaluation/metrics/quality.py                             84     84     0%   8-377
rag_factory/evaluation/metrics/retrieval.py                           77     77     0%   9-401
rag_factory/exceptions.py                                             13      0   100%
rag_factory/factory.py                                               187    137    27%   109-116, 144, 165-170, 202-230, 256-270, 300-324, 347-348, 365, 384, 401, 418, 435, 451-460, 480-502, 528-545, 568-611, 644-699, 703-715
rag_factory/legacy_config.py                                         155    155     0%   22-542
rag_factory/models/__init__.py                                         6      6     0%   3-14
rag_factory/models/embedding/__init__.py                               4      4     0%   3-12
rag_factory/models/embedding/loader.py                               179    179     0%   3-367
rag_factory/models/embedding/models.py                                47     47     0%   3-106
rag_factory/models/embedding/registry.py                             128    128     0%   3-282
rag_factory/models/evaluation/__init__.py                              3      3     0%   3-6
rag_factory/models/evaluation/ab_testing.py                           98     98     0%   3-281
rag_factory/models/evaluation/models.py                               29     29     0%   3-74
rag_factory/observability/__init__.py                                  3      3     0%   3-10
rag_factory/observability/integrations/__init__.py                     1      1     0%   3
rag_factory/observability/integrations/prometheus.py                  47     47     0%   3-229
rag_factory/observability/logging/__init__.py                          2      2     0%   3-5
rag_factory/observability/logging/config.py                           16     16     0%   3-37
rag_factory/observability/logging/filters.py                          41     41     0%   3-103
rag_factory/observability/logging/logger.py                           86     86     0%   3-396
rag_factory/observability/metrics/__init__.py                          2      2     0%   3-9
rag_factory/observability/metrics/collector.py                       143    143     0%   3-459
rag_factory/observability/metrics/cost.py                             39     39     0%   3-221
rag_factory/observability/metrics/performance.py                      64     64     0%   3-196
rag_factory/observability/monitoring/__init__.py                       1      1     0%   3
rag_factory/observability/monitoring/api.py                          101    101     0%   3-328
rag_factory/pipeline.py                                              156    156     0%   34-507
rag_factory/registry/__init__.py                                       4      0   100%
rag_factory/registry/exceptions.py                                     6      0   100%
rag_factory/registry/service_factory.py                               62     49    21%   45-52, 60-63, 68-71, 76-78, 87-105, 118-147, 158-197
rag_factory/registry/service_registry.py                              91     71    22%   43-51, 55-85, 103-156, 164, 178-203, 210-223, 227, 231-232
rag_factory/repositories/__init__.py                                   5      5     0%   20-31
rag_factory/repositories/base.py                                      42     42     0%   7-164
rag_factory/repositories/chunk.py                                    206    206     0%   7-670
rag_factory/repositories/document.py                                  93     93     0%   7-312
rag_factory/repositories/exceptions.py                                18     18     0%   7-77
rag_factory/services/__init__.py                                       4      0   100%
rag_factory/services/api/__init__.py                                   4      4     0%   7-11
rag_factory/services/api/anthropic.py                                 27     27     0%   7-141
rag_factory/services/api/cohere.py                                    30     30     0%   7-113
rag_factory/services/api/openai.py                                    46     46     0%   7-235
rag_factory/services/consistency.py                                   32     24    25%   80-113, 144-170
rag_factory/services/database/__init__.py                              5      0   100%
rag_factory/services/database/database_context.py                    181    159    12%   58-64, 88-106, 123, 140-150, 179-200, 223-240, 256-266, 305-330, 338-339, 343-406, 414-415, 430-510, 516-517, 521-546
rag_factory/services/database/migration_validator.py                  85     63    26%   29-30, 61-69, 81-88, 108-120, 137-141, 152-181, 192-204, 215-222, 234, 246-256, 268-271
rag_factory/services/database/neo4j.py                                54     36    33%   14, 60-71, 79-84, 103-114, 134-150, 172-181, 188-191, 195, 199
rag_factory/services/database/postgres.py                            194    162    16%   17-18, 26-27, 84-121, 131-145, 149-201, 214-269, 292-341, 355-370, 385-409, 420-435, 467-485, 499-522, 527, 538, 575-593, 602-614, 618, 622
rag_factory/services/dependencies.py                                  41     21    49%   96-109, 134-140, 176-180
rag_factory/services/embedding/__init__.py                             4      0   100%
rag_factory/services/embedding/base.py                                31      6    81%   44, 59, 68, 77, 86, 98
rag_factory/services/embedding/cache.py                               43     33    23%   26-32, 43-58, 67-76, 80-82, 90-94
rag_factory/services/embedding/config.py                              29     13    55%   37-43, 50-68, 80
rag_factory/services/embedding/providers/__init__.py                   5      0   100%
rag_factory/services/embedding/providers/cohere.py                    53     36    32%   10-20, 55-75, 90-117, 125, 133, 141, 152-153
rag_factory/services/embedding/providers/local.py                     43     27    37%   8-9, 46-67, 83-109, 117, 125, 133, 146
rag_factory/services/embedding/providers/onnx_local.py               114     93    18%   18-19, 87-177, 193-250, 261-308, 319, 327, 335, 348
rag_factory/services/embedding/providers/openai.py                    51     34    33%   10-20, 53-72, 87-108, 116, 124, 132, 143-144
rag_factory/services/embedding/rate_limiter.py                        20     14    30%   27-37, 45-53
rag_factory/services/embedding/service.py                            100     83    17%   50-62, 79-93, 117-198, 220-222, 233-239, 248-266, 273-275
rag_factory/services/interfaces.py                                    35      0   100%
rag_factory/services/llm/__init__.py                                   5      0   100%
rag_factory/services/llm/base.py                                      43      0   100%
rag_factory/services/llm/config.py                                    23     11    52%   42-57
rag_factory/services/llm/prompt_template.py                           43     24    44%   47-82, 97-100, 111-115
rag_factory/services/llm/providers/__init__.py                        12     12     0%   5-22
rag_factory/services/llm/providers/anthropic.py                       57     57     0%   3-205
rag_factory/services/llm/providers/ollama.py                          55     55     0%   3-196
rag_factory/services/llm/providers/openai.py                          57     57     0%   3-210
rag_factory/services/llm/service.py                                   66     51    23%   32-39, 56-70, 93-129, 154-175, 186, 194-198, 215-216
rag_factory/services/llm/token_counter.py                             27     27     0%   3-72
rag_factory/services/local/__init__.py                                 2      2     0%   7-9
rag_factory/services/local/reranker.py                                32     32     0%   7-116
rag_factory/services/onnx/__init__.py                                  2      2     0%   7-9
rag_factory/services/onnx/embedding.py                                29     29     0%   7-129
rag_factory/services/utils/__init__.py                                 2      0   100%
rag_factory/services/utils/model_converter.py                        104    104     0%   8-291
rag_factory/services/utils/onnx_utils.py                             133    114    14%   22-23, 36-37, 67-123, 142-146, 172-218, 240-274, 291-312, 332-347, 360-378, 392-404
rag_factory/services/utils/reranker_selector.py                       68     68     0%   8-249
rag_factory/strategies/__init__.py                                     2      0   100%
rag_factory/strategies/agentic/__init__.py                             7      7     0%   8-20
rag_factory/strategies/agentic/agent.py                              151    151     0%   8-420
rag_factory/strategies/agentic/config.py                              12     12     0%   5-31
rag_factory/strategies/agentic/frameworks/__init__.py                  1      1     0%   9
rag_factory/strategies/agentic/query_analyzer.py                      89     89     0%   8-278
rag_factory/strategies/agentic/strategy.py                            87     87     0%   8-284
rag_factory/strategies/agentic/tool_implementations.py               135    135     0%   11-511
rag_factory/strategies/agentic/tools.py                               40     40     0%   8-142
rag_factory/strategies/base.py                                        55     13    76%   80-85, 169-178
rag_factory/strategies/chunking/__init__.py                           15     15     0%   28-67
rag_factory/strategies/chunking/base.py                               91     91     0%   3-256
rag_factory/strategies/chunking/docling_chunker.py                    45     45     0%   13-188
rag_factory/strategies/chunking/fixed_size_chunker.py                 74     74     0%   3-204
rag_factory/strategies/chunking/hybrid_chunker.py                     70     70     0%   3-192
rag_factory/strategies/chunking/semantic_chunker.py                  195    195     0%   3-534
rag_factory/strategies/chunking/structural_chunker.py                147    147     0%   3-425
rag_factory/strategies/chunking/utils.py                              89     89     0%   3-264
rag_factory/strategies/contextual/__init__.py                          7      0   100%
rag_factory/strategies/contextual/batch_processor.py                  91     29    68%   124-125, 153-159, 191-196, 226-252, 258-266
rag_factory/strategies/contextual/config.py                           46      0   100%
rag_factory/strategies/contextual/context_generator.py                84     33    61%   60, 64-65, 85-99, 113, 120-121, 125-127, 131-133, 163, 165, 171-172, 224-234
rag_factory/strategies/contextual/cost_tracker.py                     32     11    66%   48-51, 82, 94-99, 111-114, 126
rag_factory/strategies/contextual/prompts.py                          25      9    64%   88, 90, 93-94, 98-101, 104
rag_factory/strategies/contextual/storage.py                          44     35    20%   32-33, 42-45, 54-81, 98-118
rag_factory/strategies/contextual/strategy.py                         78     49    37%   54-67, 75, 83, 107-156, 173, 186, 207-215, 231-262, 278, 284, 289, 298
rag_factory/strategies/fine_tuned/__init__.py                          4      4     0%   1-5
rag_factory/strategies/fine_tuned/ab_testing.py                       78     78     0%   1-134
rag_factory/strategies/fine_tuned/config.py                           11     11     0%   1-30
rag_factory/strategies/fine_tuned/custom_loader.py                    40     40     0%   1-88
rag_factory/strategies/fine_tuned/model_registry.py                  126    126     0%   1-303
rag_factory/strategies/hierarchical/__init__.py                        5      5     0%   8-21
rag_factory/strategies/hierarchical/hierarchy_builder.py              79     79     0%   8-335
rag_factory/strategies/hierarchical/models.py                         58     58     0%   8-137
rag_factory/strategies/hierarchical/parent_retriever.py               89     89     0%   8-278
rag_factory/strategies/hierarchical/strategy.py                       76     76     0%   9-301
rag_factory/strategies/indexing/__init__.py                            6      0   100%
rag_factory/strategies/indexing/context_aware.py                     108     88    19%   31, 43, 63-134, 155-156, 160-170, 182-188, 192-198, 208-237, 241-242
rag_factory/strategies/indexing/hierarchical.py                       90     73    19%   50, 63, 88-134, 156-185, 201-236, 253-278, 292-293
rag_factory/strategies/indexing/in_memory.py                          41     25    39%   54, 65, 93-121, 143, 160, 173, 194-200
rag_factory/strategies/indexing/keyword_indexing.py                   42     42     0%   8-157
rag_factory/strategies/indexing/knowledge_graph_indexing.py           46     33    28%   18, 27, 48-89, 108-129
rag_factory/strategies/indexing/vector_embedding.py                   98     85    13%   25, 35, 55-116, 137-221
rag_factory/strategies/knowledge_graph/__init__.py                     4      4     0%   8-19
rag_factory/strategies/knowledge_graph/config.py                      21     21     0%   8-129
rag_factory/strategies/knowledge_graph/entity_extractor.py            70     70     0%   7-205
rag_factory/strategies/knowledge_graph/graph_store.py                 31     31     0%   8-124
rag_factory/strategies/knowledge_graph/hybrid_retriever.py            56     56     0%   8-164
rag_factory/strategies/knowledge_graph/memory_graph_store.py          97     97     0%   8-196
rag_factory/strategies/knowledge_graph/models.py                      53     53     0%   8-122
rag_factory/strategies/knowledge_graph/relationship_extractor.py      62     62     0%   8-189
rag_factory/strategies/knowledge_graph/strategy.py                    80     80     0%   8-256
rag_factory/strategies/late_chunking/__init__.py                       6      6     0%   8-21
rag_factory/strategies/late_chunking/coherence_analyzer.py            27     27     0%   7-96
rag_factory/strategies/late_chunking/document_embedder.py            104    104     0%   8-318
rag_factory/strategies/late_chunking/embedding_chunker.py            117    117     0%   7-300
rag_factory/strategies/late_chunking/models.py                        62     62     0%   8-100
rag_factory/strategies/late_chunking/strategy.py                      70     70     0%   8-215
rag_factory/strategies/multi_query/__init__.py                         7      7     0%   8-19
rag_factory/strategies/multi_query/config.py                          36     36     0%   3-138
rag_factory/strategies/multi_query/deduplicator.py                    87     87     0%   3-197
rag_factory/strategies/multi_query/parallel_executor.py               52     52     0%   3-163
rag_factory/strategies/multi_query/prompts.py                         10     10     0%   3-84
rag_factory/strategies/multi_query/ranker.py                          80     80     0%   3-201
rag_factory/strategies/multi_query/strategy.py                        68     68     0%   3-184
rag_factory/strategies/multi_query/variant_generator.py               62     62     0%   3-187
rag_factory/strategies/query_expansion/__init__.py                     8      0   100%
rag_factory/strategies/query_expansion/base.py                        66     10    85%   90, 103, 114-118, 130-133
rag_factory/strategies/query_expansion/cache.py                       52     40    23%   20-22, 38-55, 64-66, 70-73, 81-97, 105-112
rag_factory/strategies/query_expansion/expander_service.py            92     71    23%   36-40, 55-58, 75-148, 159-180, 204-215, 233-234, 242-246, 254, 265-273, 283-284
rag_factory/strategies/query_expansion/hyde_expander.py               19     12    37%   25-27, 41-65
rag_factory/strategies/query_expansion/llm_expander.py                25     16    36%   23-25, 39-71, 99
rag_factory/strategies/query_expansion/metrics.py                     66     30    55%   44-45, 53-57, 76-109, 130, 134, 146-152, 160
rag_factory/strategies/query_expansion/prompts.py                     13      7    46%   16, 28-56, 68-107
rag_factory/strategies/reranking/__init__.py                           7      7     0%   8-21
rag_factory/strategies/reranking/base.py                              68     68     0%   8-130
rag_factory/strategies/reranking/bge_reranker.py                      51     51     0%   8-151
rag_factory/strategies/reranking/cache.py                             48     48     0%   8-138
rag_factory/strategies/reranking/cohere_reranker.py                   34     34     0%   8-119
rag_factory/strategies/reranking/cosine_reranker.py                   62     62     0%   8-249
rag_factory/strategies/reranking/cross_encoder_reranker.py            40     40     0%   8-124
rag_factory/strategies/reranking/metrics.py                           67     67     0%   8-264
rag_factory/strategies/reranking/reranker_service.py                 115    115     0%   8-310
rag_factory/strategies/retrieval/__init__.py                           6      0   100%
rag_factory/strategies/retrieval/keyword_retriever.py                 56     41    27%   41, 52, 71-113, 126-133, 153-172
rag_factory/strategies/retrieval/knowledge_graph_retriever.py         22      9    59%   19, 27, 48-70
rag_factory/strategies/retrieval/multi_query_retriever.py             22      9    59%   19, 26, 44-66
rag_factory/strategies/retrieval/query_expansion_retriever.py         24      9    62%   20, 27, 45-67
rag_factory/strategies/retrieval/semantic_retriever.py                23     12    48%   23, 32, 61-94
rag_factory/strategies/self_reflective/__init__.py                     6      6     0%   3-16
rag_factory/strategies/self_reflective/config.py                      20     20     0%   3-42
rag_factory/strategies/self_reflective/grader.py                      80     80     0%   3-266
rag_factory/strategies/self_reflective/models.py                      48     48     0%   3-109
rag_factory/strategies/self_reflective/refiner.py                     69     69     0%   3-228
rag_factory/strategies/self_reflective/strategy.py                    92     92     0%   3-269
rag_factory/utils/__init__.py                                          3      0   100%
rag_factory/utils/token_counter.py                                    45     30    33%   36-40, 52-62, 74-82, 86, 90, 105-106, 124-135, 153-158
rag_factory/utils/tokenization.py                                     95     73    23%   36-40, 53-64, 87-114, 126-129, 141-144, 156, 175-190, 209-228, 241-243, 251-252, 270-271, 292-293, 314-315
------------------------------------------------------------------------------------------------
TOTAL                                                              12324  10654    14%
=========================== short test summary info ============================
FAILED tests/benchmarks/test_contextual_performance.py::test_batch_size_impact - assert 0.36823296546936035 <= (0.1571652889251709 * 1.5)
=================== 1 failed, 5 passed, 3 warnings in 7.42s ====================

[2/197] PASSED: tests/benchmarks/test_late_chunking_performance.py
  Tests: 8 (P:8 F:0 S:0)
[3/197] ALL_SKIPPED: tests/benchmarks/test_model_comparison_performance.py
  Tests: 6 (P:0 F:0 S:6)
[4/197] PASSED: tests/integration/cli/test_benchmark_integration.py
  Tests: 1 (P:1 F:0 S:0)
[5/197] PASSED: tests/integration/cli/test_config_validation_integration.py
  Tests: 2 (P:2 F:0 S:0)
[6/197] PASSED: tests/integration/cli/test_index_query_flow.py
  Tests: 11 (P:11 F:0 S:0)
[7/197] PASSED: tests/integration/config/test_config_integration.py
  Tests: 9 (P:9 F:0 S:0)
[8/197] PASSED: tests/integration/database/test_database_integration.py
  Tests: 14 (P:13 F:0 S:1)
[9/197] PASSED: tests/integration/database/test_migration_integration.py
  Tests: 4 (P:4 F:0 S:0)
[10/197] PASSED: tests/integration/database/test_migration_validator_integration.py
  Tests: 15 (P:15 F:0 S:0)
[11/197] PASSED: tests/integration/database/test_multi_context_isolation.py
  Tests: 10 (P:2 F:0 S:8)
[12/197] ALL_SKIPPED: tests/integration/documentation/test_documentation_integration.py
  Tests: 6 (P:0 F:0 S:6)
[13/197] PASSED: tests/integration/evaluation/test_evaluation_integration.py
  Tests: 7 (P:7 F:0 S:0)
[14/197] PASSED: tests/integration/models/test_fine_tuned_embeddings_integration.py
  Tests: 6 (P:6 F:0 S:0)
[15/197] PASSED: tests/integration/observability/test_monitoring_integration.py
  Tests: 11 (P:11 F:0 S:0)
[16/197] FAILED: tests/integration_real/test_database_real.py
  Tests: 9 (P:7 F:2 S:0)
----------------------------------------
============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.1, pluggy-1.6.0 -- /mnt/MCPProyects/ragTools/venv/bin/python3
cachedir: .pytest_cache
rootdir: /mnt/MCPProyects/ragTools
configfile: pytest.ini (WARNING: ignoring pytest config in pyproject.toml!)
plugins: anyio-4.12.0, cov-7.0.0, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 8 items

tests/integration_real/test_database_real.py::test_postgres_connection PASSED [ 12%]
tests/integration_real/test_database_real.py::test_table_creation PASSED [ 25%]
tests/integration_real/test_database_real.py::test_store_and_retrieve_chunks PASSED [ 37%]
tests/integration_real/test_database_real.py::test_vector_similarity_search FAILED [ 50%]
tests/integration_real/test_database_real.py::test_batch_embedding_and_storage PASSED [ 62%]
tests/integration_real/test_database_real.py::test_chunk_metadata_persistence PASSED [ 75%]
tests/integration_real/test_database_real.py::test_database_context_table_mapping PASSED [ 87%]
tests/integration_real/test_database_real.py::test_connection_pooling PASSED [100%]

=================================== FAILURES ===================================
________________________ test_vector_similarity_search _________________________
tests/integration_real/test_database_real.py:114: in test_vector_similarity_search
    assert len(results) == 2
E   AssertionError: assert 1 == 2
E    +  where 1 = len([<Chunk(id=similarity_test_0, doc_id=None, index=None, embedding=yes, text='The quick brown fox jumps over the lazy dog')>])
---------------------------- Captured stderr setup -----------------------------
DEBUG:asyncio:Using selector: EpollSelector
INFO:tests.integration_real.conftest:[FIXTURE] Creating PostgresqlDatabaseService
INFO:rag_factory.services.database.postgres:Initialized PostgreSQL service for 192.168.56.1:5432/rag_test
INFO:tests.integration_real.conftest:[FIXTURE] Getting pool for cleanup
INFO:rag_factory.services.database.postgres:[_ensure_table] Starting table setup for test_chunks_real
INFO:rag_factory.services.database.postgres:[_ensure_table] Acquiring connection from pool
INFO:rag_factory.services.database.postgres:[_ensure_table] Connection acquired, enabling pgvector extension
INFO:rag_factory.services.database.postgres:[_ensure_table] pgvector extension enabled
INFO:rag_factory.services.database.postgres:[_ensure_table] Creating table test_chunks_real
INFO:rag_factory.services.database.postgres:[_ensure_table] Table created/verified
INFO:rag_factory.services.database.postgres:[_ensure_table] Checking if embedding column exists
INFO:rag_factory.services.database.postgres:[_ensure_table] Embedding column exists: True
INFO:rag_factory.services.database.postgres:[_ensure_table] Creating ivfflat index
INFO:rag_factory.services.database.postgres:[_ensure_table] Index created/verified
INFO:rag_factory.services.database.postgres:Ensured table test_chunks_real exists
INFO:tests.integration_real.conftest:[FIXTURE] Pool acquired, truncating table
INFO:tests.integration_real.conftest:[FIXTURE] Table truncated successfully
INFO:tests.integration_real.conftest:[FIXTURE] Yielding service to test
INFO:rag_factory.services.embedding.providers.onnx_local:Loading ONNX model: Xenova/all-MiniLM-L6-v2
INFO:rag_factory.services.utils.onnx_utils:Using model from EMBEDDING_MODEL_NAME env: Xenova/all-MiniLM-L6-v2
INFO:rag_factory.services.utils.onnx_utils:Using cached ONNX model: models/embeddings/Xenova_all-MiniLM-L6-v2/onnx/model.onnx
INFO:rag_factory.services.utils.onnx_utils:Created ONNX session with providers: ['CPUExecutionProvider']
INFO:rag_factory.services.utils.onnx_utils:Model has 3 inputs and 1 outputs
DEBUG:rag_factory.services.utils.onnx_utils:  Input: input_ids, shape: ['batch_size', 'sequence_length'], type: tensor(int64)
DEBUG:rag_factory.services.utils.onnx_utils:  Input: attention_mask, shape: ['batch_size', 'sequence_length'], type: tensor(int64)
DEBUG:rag_factory.services.utils.onnx_utils:  Input: token_type_ids, shape: ['batch_size', 'sequence_length'], type: tensor(int64)
DEBUG:rag_factory.services.utils.onnx_utils:  Output: last_hidden_state, shape: ['batch_size', 'sequence_length', 384], type: tensor(float)
INFO:rag_factory.services.utils.onnx_utils:Model validation passed
INFO:rag_factory.services.embedding.providers.onnx_local:Loaded tokenizer from models/embeddings/Xenova_all-MiniLM-L6-v2/tokenizer.json
INFO:rag_factory.services.embedding.providers.onnx_local:Loaded ONNX model Xenova/all-MiniLM-L6-v2 with 384 dimensions
------------------------------ Captured log setup ------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
INFO     tests.integration_real.conftest:conftest.py:166 [FIXTURE] Creating PostgresqlDatabaseService
INFO     rag_factory.services.database.postgres:postgres.py:121 Initialized PostgreSQL service for 192.168.56.1:5432/rag_test
INFO     tests.integration_real.conftest:conftest.py:179 [FIXTURE] Getting pool for cleanup
INFO     rag_factory.services.database.postgres:postgres.py:149 [_ensure_table] Starting table setup for test_chunks_real
INFO     rag_factory.services.database.postgres:postgres.py:150 [_ensure_table] Acquiring connection from pool
INFO     rag_factory.services.database.postgres:postgres.py:152 [_ensure_table] Connection acquired, enabling pgvector extension
INFO     rag_factory.services.database.postgres:postgres.py:155 [_ensure_table] pgvector extension enabled
INFO     rag_factory.services.database.postgres:postgres.py:158 [_ensure_table] Creating table test_chunks_real
INFO     rag_factory.services.database.postgres:postgres.py:169 [_ensure_table] Table created/verified
INFO     rag_factory.services.database.postgres:postgres.py:172 [_ensure_table] Checking if embedding column exists
INFO     rag_factory.services.database.postgres:postgres.py:184 [_ensure_table] Embedding column exists: True
INFO     rag_factory.services.database.postgres:postgres.py:192 [_ensure_table] Creating ivfflat index
INFO     rag_factory.services.database.postgres:postgres.py:199 [_ensure_table] Index created/verified
INFO     rag_factory.services.database.postgres:postgres.py:201 Ensured table test_chunks_real exists
INFO     tests.integration_real.conftest:conftest.py:181 [FIXTURE] Pool acquired, truncating table
INFO     tests.integration_real.conftest:conftest.py:185 [FIXTURE] Table truncated successfully
INFO     tests.integration_real.conftest:conftest.py:192 [FIXTURE] Yielding service to test
INFO     rag_factory.services.embedding.providers.onnx_local:onnx_local.py:111 Loading ONNX model: Xenova/all-MiniLM-L6-v2
INFO     rag_factory.services.utils.onnx_utils:onnx_utils.py:90 Using model from EMBEDDING_MODEL_NAME env: Xenova/all-MiniLM-L6-v2
INFO     rag_factory.services.utils.onnx_utils:onnx_utils.py:113 Using cached ONNX model: models/embeddings/Xenova_all-MiniLM-L6-v2/onnx/model.onnx
INFO     rag_factory.services.utils.onnx_utils:onnx_utils.py:211 Created ONNX session with providers: ['CPUExecutionProvider']
INFO     rag_factory.services.utils.onnx_utils:onnx_utils.py:243 Model has 3 inputs and 1 outputs
DEBUG    rag_factory.services.utils.onnx_utils:onnx_utils.py:247   Input: input_ids, shape: ['batch_size', 'sequence_length'], type: tensor(int64)
DEBUG    rag_factory.services.utils.onnx_utils:onnx_utils.py:247   Input: attention_mask, shape: ['batch_size', 'sequence_length'], type: tensor(int64)
DEBUG    rag_factory.services.utils.onnx_utils:onnx_utils.py:247   Input: token_type_ids, shape: ['batch_size', 'sequence_length'], type: tensor(int64)
DEBUG    rag_factory.services.utils.onnx_utils:onnx_utils.py:251   Output: last_hidden_state, shape: ['batch_size', 'sequence_length', 384], type: tensor(float)
INFO     rag_factory.services.utils.onnx_utils:onnx_utils.py:273 Model validation passed
INFO     rag_factory.services.embedding.providers.onnx_local:onnx_local.py:168 Loaded tokenizer from models/embeddings/Xenova_all-MiniLM-L6-v2/tokenizer.json
INFO     rag_factory.services.embedding.providers.onnx_local:onnx_local.py:177 Loaded ONNX model Xenova/all-MiniLM-L6-v2 with 384 dimensions
----------------------------- Captured stderr call -----------------------------
DEBUG:rag_factory.services.database.postgres:Storing chunk similarity_test_0: embedding dims=384, first 3 values=[0.0343538336455822, 0.07440994679927826, 0.05604083091020584]
DEBUG:rag_factory.services.database.postgres:Storing chunk similarity_test_1: embedding dims=384, first 3 values=[0.0010620492976158857, 0.06840494275093079, 0.06369533389806747]
DEBUG:rag_factory.services.database.postgres:Storing chunk similarity_test_2: embedding dims=384, first 3 values=[0.027595646679401398, 0.1246952936053276, 0.04242276772856712]
DEBUG:rag_factory.services.database.postgres:Stored 3 chunks
DEBUG:rag_factory.services.database.postgres:Searching with embedding dims=384, first 3 values=[0.007651947438716888, 0.07867687195539474, 0.05970418080687523]
DEBUG:rag_factory.services.database.postgres:Found 3 chunks with embeddings in database
DEBUG:rag_factory.services.database.postgres:Found 1 similar chunks
------------------------------ Captured log call -------------------------------
DEBUG    rag_factory.services.database.postgres:postgres.py:251 Storing chunk similarity_test_0: embedding dims=384, first 3 values=[0.0343538336455822, 0.07440994679927826, 0.05604083091020584]
DEBUG    rag_factory.services.database.postgres:postgres.py:251 Storing chunk similarity_test_1: embedding dims=384, first 3 values=[0.0010620492976158857, 0.06840494275093079, 0.06369533389806747]
DEBUG    rag_factory.services.database.postgres:postgres.py:251 Storing chunk similarity_test_2: embedding dims=384, first 3 values=[0.027595646679401398, 0.1246952936053276, 0.04242276772856712]
DEBUG    rag_factory.services.database.postgres:postgres.py:269 Stored 3 chunks
DEBUG    rag_factory.services.database.postgres:postgres.py:298 Searching with embedding dims=384, first 3 values=[0.007651947438716888, 0.07867687195539474, 0.05970418080687523]
DEBUG    rag_factory.services.database.postgres:postgres.py:303 Found 3 chunks with embeddings in database
DEBUG    rag_factory.services.database.postgres:postgres.py:340 Found 1 similar chunks
--------------------------- Captured stderr teardown ---------------------------
INFO:tests.integration_real.conftest:[FIXTURE] Test completed, starting cleanup
INFO:tests.integration_real.conftest:[FIXTURE] Pool acquired for cleanup
INFO:tests.integration_real.conftest:[FIXTURE] Table dropped successfully
INFO:tests.integration_real.conftest:[FIXTURE] Closing service
INFO:rag_factory.services.database.postgres:Closed PostgreSQL async connection pool
DEBUG:rag_factory.services.database.postgres:Cleared DatabaseContext cache
INFO:tests.integration_real.conftest:[FIXTURE] Service closed
---------------------------- Captured log teardown -----------------------------
INFO     tests.integration_real.conftest:conftest.py:196 [FIXTURE] Test completed, starting cleanup
INFO     tests.integration_real.conftest:conftest.py:199 [FIXTURE] Pool acquired for cleanup
INFO     tests.integration_real.conftest:conftest.py:202 [FIXTURE] Table dropped successfully
INFO     tests.integration_real.conftest:conftest.py:207 [FIXTURE] Closing service
INFO     rag_factory.services.database.postgres:postgres.py:605 Closed PostgreSQL async connection pool
DEBUG    rag_factory.services.database.postgres:postgres.py:614 Cleared DatabaseContext cache
INFO     tests.integration_real.conftest:conftest.py:209 [FIXTURE] Service closed
=============================== warnings summary ===============================
rag_factory/services/llm/config.py:8
  /mnt/MCPProyects/ragTools/rag_factory/services/llm/config.py:8: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class LLMServiceConfig(BaseModel):

rag_factory/database/config.py:12
  /mnt/MCPProyects/ragTools/rag_factory/database/config.py:12: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DatabaseConfig(BaseSettings):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.3-final-0 ________________

Name                                                               Stmts   Miss  Cover   Missing
------------------------------------------------------------------------------------------------
rag_factory/__init__.py                                                3      0   100%
rag_factory/__version__.py                                             1      0   100%
rag_factory/cli/__init__.py                                            2      0   100%
rag_factory/cli/commands/__init__.py                                   1      0   100%
rag_factory/cli/commands/benchmark.py                                 96     81    16%   40-53, 64-84, 148-263
rag_factory/cli/commands/check_consistency.py                         43     33    23%   64-120
rag_factory/cli/commands/config.py                                    78     68    13%   26-64, 102-188
rag_factory/cli/commands/index.py                                     65     52    20%   29-39, 93-185
rag_factory/cli/commands/query.py                                     47     36    23%   73-149
rag_factory/cli/commands/repl.py                                     152    130    14%   29-56, 63-108, 112-120, 124-133, 137-155, 159-172, 176-186, 190-207, 211-220, 253-260
rag_factory/cli/commands/strategies.py                                45     36    20%   48-120
rag_factory/cli/commands/validate_e2e.py                              91     69    24%   37-38, 42-142, 145-156
rag_factory/cli/commands/validate_pipeline.py                         70     57    19%   57-156
rag_factory/cli/formatters/__init__.py                                 4      0   100%
rag_factory/cli/formatters/consistency.py                             61     55    10%   21-69, 79-103, 108-138
rag_factory/cli/formatters/output.py                                  20      9    55%   23-24, 43-44, 63-64, 74, 79, 84
rag_factory/cli/formatters/results.py                                 71     62    13%   28-55, 72-99, 116-144, 157-181
rag_factory/cli/formatters/validation.py                              63     53    16%   25-43, 48-56, 65-77, 86-98, 103-129, 134-137
rag_factory/cli/main.py                                               31     10    68%   25-28, 48-49, 76-78, 82
rag_factory/cli/utils/__init__.py                                      3      0   100%
rag_factory/cli/utils/progress.py                                     14      8    43%   34-47, 73-76
rag_factory/cli/utils/validation.py                                   53     42    21%   30-41, 57-77, 93-118, 135
rag_factory/config/__init__.py                                         4      0   100%
rag_factory/config/env_resolver.py                                    52     37    29%   47-54, 70-90, 110, 129-147
rag_factory/config/schemas/__init__.py                                 2      0   100%
rag_factory/config/schemas/version.py                                 10      6    40%   29-38
rag_factory/config/strategy_loader.py                                 54     36    33%   32-41, 45-60, 75-89, 101-104
rag_factory/config/strategy_pair_manager.py                          105     83    21%   40-72, 92-132, 148-198, 210-215, 229, 259-282
rag_factory/config/validator.py                                       93     76    18%   27-30, 34-39, 53-58, 62-74, 111-132, 177-198, 215-235, 247-249, 271-295, 333-354
rag_factory/core/__init__.py                                           4      4     0%   7-23
rag_factory/core/capabilities.py                                      61     16    74%   129, 155, 173-174, 239-253
rag_factory/core/indexing_interface.py                                54     35    35%   55-57, 118-123, 144, 164, 208, 260, 272, 292-313, 341-364
rag_factory/core/pipeline.py                                          49     35    29%   22-24, 33-40, 55-77, 95-96, 105-108, 117-120, 137-146
rag_factory/core/retrieval_interface.py                               38     20    47%   56-58, 112-117, 138, 158, 196, 247, 259, 285-309
rag_factory/database/__init__.py                                       4      0   100%
rag_factory/database/config.py                                        17      0   100%
rag_factory/database/connection.py                                    80     54    32%   40-48, 61-86, 96, 107, 126-137, 150-157, 165-170, 178-183, 196-197, 209-214, 218, 222
rag_factory/database/env_validator.py                                 38     38     0%   7-139
rag_factory/database/models.py                                        85     29    66%   31-34, 37-45, 48-54, 66-69, 72-77, 80-85, 181
rag_factory/database/vector_indexing.py                               38     38     0%   7-114
rag_factory/evaluation/__init__.py                                     4      4     0%   29-41
rag_factory/evaluation/analysis/__init__.py                            3      3     0%   8-11
rag_factory/evaluation/analysis/comparison.py                        135    135     0%   8-323
rag_factory/evaluation/analysis/statistics.py                         81     81     0%   8-320
rag_factory/evaluation/benchmarks/__init__.py                          3      3     0%   8-14
rag_factory/evaluation/benchmarks/config.py                           25     25     0%   7-64
rag_factory/evaluation/benchmarks/runner.py                          155    155     0%   8-423
rag_factory/evaluation/datasets/__init__.py                            3      3     0%   8-14
rag_factory/evaluation/datasets/loader.py                             88     88     0%   8-281
rag_factory/evaluation/datasets/schema.py                             52     52     0%   8-160
rag_factory/evaluation/datasets/statistics.py                         65     65     0%   8-226
rag_factory/evaluation/exporters/__init__.py                           4      4     0%   8-12
rag_factory/evaluation/exporters/csv_exporter.py                      52     52     0%   3-124
rag_factory/evaluation/exporters/html_exporter.py                     47     47     0%   3-293
rag_factory/evaluation/exporters/json_exporter.py                     19     19     0%   3-68
rag_factory/evaluation/metrics/__init__.py                             3      3     0%   12-25
rag_factory/evaluation/metrics/base.py                                31     31     0%   8-115
rag_factory/evaluation/metrics/cost.py                                65     65     0%   8-313
rag_factory/evaluation/metrics/performance.py                         42     42     0%   8-202
rag_factory/evaluation/metrics/quality.py                             84     84     0%   8-377
rag_factory/evaluation/metrics/retrieval.py                           77     77     0%   9-401
rag_factory/exceptions.py                                             13      0   100%
rag_factory/factory.py                                               187    137    27%   109-116, 144, 165-170, 202-230, 256-270, 300-324, 347-348, 365, 384, 401, 418, 435, 451-460, 480-502, 528-545, 568-611, 644-699, 703-715
rag_factory/legacy_config.py                                         155    155     0%   22-542
rag_factory/models/__init__.py                                         6      6     0%   3-14
rag_factory/models/embedding/__init__.py                               4      4     0%   3-12
rag_factory/models/embedding/loader.py                               179    179     0%   3-367
rag_factory/models/embedding/models.py                                47     47     0%   3-106
rag_factory/models/embedding/registry.py                             128    128     0%   3-282
rag_factory/models/evaluation/__init__.py                              3      3     0%   3-6
rag_factory/models/evaluation/ab_testing.py                           98     98     0%   3-281
rag_factory/models/evaluation/models.py                               29     29     0%   3-74
rag_factory/observability/__init__.py                                  3      3     0%   3-10
rag_factory/observability/integrations/__init__.py                     1      1     0%   3
rag_factory/observability/integrations/prometheus.py                  47     47     0%   3-229
rag_factory/observability/logging/__init__.py                          2      2     0%   3-5
rag_factory/observability/logging/config.py                           16     16     0%   3-37
rag_factory/observability/logging/filters.py                          41     41     0%   3-103
rag_factory/observability/logging/logger.py                           86     86     0%   3-396
rag_factory/observability/metrics/__init__.py                          2      2     0%   3-9
rag_factory/observability/metrics/collector.py                       143    143     0%   3-459
rag_factory/observability/metrics/cost.py                             39     39     0%   3-221
rag_factory/observability/metrics/performance.py                      64     64     0%   3-196
rag_factory/observability/monitoring/__init__.py                       1      1     0%   3
rag_factory/observability/monitoring/api.py                          101    101     0%   3-328
rag_factory/pipeline.py                                              156    156     0%   34-507
rag_factory/registry/__init__.py                                       4      0   100%
rag_factory/registry/exceptions.py                                     6      0   100%
rag_factory/registry/service_factory.py                               62     49    21%   45-52, 60-63, 68-71, 76-78, 87-105, 118-147, 158-197
rag_factory/registry/service_registry.py                              91     71    22%   43-51, 55-85, 103-156, 164, 178-203, 210-223, 227, 231-232
rag_factory/repositories/__init__.py                                   5      0   100%
rag_factory/repositories/base.py                                      42     21    50%   38, 53, 70, 87, 103, 114-118, 125, 136-139, 159-164
rag_factory/repositories/chunk.py                                    206    180    13%   40-45, 68-76, 90-95, 120-133, 155-171, 187-202, 221-231, 250-261, 287-328, 355-396, 422-474, 489-499, 513-521, 537-543, 557-563, 577-587, 604-626, 639-670
rag_factory/repositories/document.py                                  93     74    20%   41-46, 63-68, 98-118, 140-156, 172-187, 206, 223-233, 247-255, 272-279, 290-293, 307-312
rag_factory/repositories/exceptions.py                                18      7    61%   34-36, 56-59
rag_factory/services/__init__.py                                       4      0   100%
rag_factory/services/api/__init__.py                                   4      4     0%   7-11
rag_factory/services/api/anthropic.py                                 27     27     0%   7-141
rag_factory/services/api/cohere.py                                    30     30     0%   7-113
rag_factory/services/api/openai.py                                    46     46     0%   7-235
rag_factory/services/consistency.py                                   32     24    25%   80-113, 144-170
rag_factory/services/database/__init__.py                              5      0   100%
rag_factory/services/database/database_context.py                    181    153    15%   88-106, 123, 140-150, 179-200, 223-240, 256-266, 305-330, 338-339, 343-406, 414-415, 430-510, 516-517, 521-546
rag_factory/services/database/migration_validator.py                  85     63    26%   29-30, 61-69, 81-88, 108-120, 137-141, 152-181, 192-204, 215-222, 234, 246-256, 268-271
rag_factory/services/database/neo4j.py                                54     36    33%   14, 60-71, 79-84, 103-114, 134-150, 172-181, 188-191, 195, 199
rag_factory/services/database/postgres.py                            194     59    70%   17-18, 26-27, 85, 91-103, 187-189, 215, 225-228, 239, 241, 245-246, 322-325, 355-370, 420-435, 467-485, 500, 527, 538, 591, 618, 622
rag_factory/services/dependencies.py                                  41     21    49%   96-109, 134-140, 176-180
rag_factory/services/embedding/__init__.py                             4      0   100%
rag_factory/services/embedding/base.py                                31      6    81%   44, 59, 68, 77, 86, 98
rag_factory/services/embedding/cache.py                               43     33    23%   26-32, 43-58, 67-76, 80-82, 90-94
rag_factory/services/embedding/config.py                              29     13    55%   37-43, 50-68, 80
rag_factory/services/embedding/providers/__init__.py                   5      0   100%
rag_factory/services/embedding/providers/cohere.py                    53     36    32%   10-20, 55-75, 90-117, 125, 133, 141, 152-153
rag_factory/services/embedding/providers/local.py                     43     27    37%   8-9, 46-67, 83-109, 117, 125, 133, 146
rag_factory/services/embedding/providers/onnx_local.py               114     38    67%   18-19, 90, 114, 139-147, 158, 170-175, 194, 248-250, 273, 289-308, 319, 327, 335, 348
rag_factory/services/embedding/providers/openai.py                    51     34    33%   10-20, 53-72, 87-108, 116, 124, 132, 143-144
rag_factory/services/embedding/rate_limiter.py                        20     14    30%   27-37, 45-53
rag_factory/services/embedding/service.py                            100     83    17%   50-62, 79-93, 117-198, 220-222, 233-239, 248-266, 273-275
rag_factory/services/interfaces.py                                    35      0   100%
rag_factory/services/llm/__init__.py                                   5      0   100%
rag_factory/services/llm/base.py                                      43      0   100%
rag_factory/services/llm/config.py                                    23     11    52%   42-57
rag_factory/services/llm/prompt_template.py                           43     24    44%   47-82, 97-100, 111-115
rag_factory/services/llm/providers/__init__.py                        12     12     0%   5-22
rag_factory/services/llm/providers/anthropic.py                       57     57     0%   3-205
rag_factory/services/llm/providers/ollama.py                          55     55     0%   3-196
rag_factory/services/llm/providers/openai.py                          57     57     0%   3-210
rag_factory/services/llm/service.py                                   66     51    23%   32-39, 56-70, 93-129, 154-175, 186, 194-198, 215-216
rag_factory/services/llm/token_counter.py                             27     27     0%   3-72
rag_factory/services/local/__init__.py                                 2      2     0%   7-9
rag_factory/services/local/reranker.py                                32     32     0%   7-116
rag_factory/services/onnx/__init__.py                                  2      2     0%   7-9
rag_factory/services/onnx/embedding.py                                29     29     0%   7-129
rag_factory/services/utils/__init__.py                                 2      0   100%
rag_factory/services/utils/model_converter.py                        104    104     0%   8-291
rag_factory/services/utils/onnx_utils.py                             133     42    68%   22-23, 37, 77-84, 96-97, 117-123, 142-146, 175, 189-190, 194, 198-201, 216-218, 258, 265-268, 361-362, 376, 392-404
rag_factory/services/utils/reranker_selector.py                       68     68     0%   8-249
rag_factory/strategies/__init__.py                                     2      0   100%
rag_factory/strategies/agentic/__init__.py                             7      7     0%   8-20
rag_factory/strategies/agentic/agent.py                              151    151     0%   8-420
rag_factory/strategies/agentic/config.py                              12     12     0%   5-31
rag_factory/strategies/agentic/frameworks/__init__.py                  1      1     0%   9
rag_factory/strategies/agentic/query_analyzer.py                      89     89     0%   8-278
rag_factory/strategies/agentic/strategy.py                            87     87     0%   8-284
rag_factory/strategies/agentic/tool_implementations.py               135    135     0%   11-511
rag_factory/strategies/agentic/tools.py                               40     40     0%   8-142
rag_factory/strategies/base.py                                        55     13    76%   80-85, 169-178
rag_factory/strategies/chunking/__init__.py                           15     15     0%   28-67
rag_factory/strategies/chunking/base.py                               91     91     0%   3-256
rag_factory/strategies/chunking/docling_chunker.py                    45     45     0%   13-188
rag_factory/strategies/chunking/fixed_size_chunker.py                 74     74     0%   3-204
rag_factory/strategies/chunking/hybrid_chunker.py                     70     70     0%   3-192
rag_factory/strategies/chunking/semantic_chunker.py                  195    195     0%   3-534
rag_factory/strategies/chunking/structural_chunker.py                147    147     0%   3-425
rag_factory/strategies/chunking/utils.py                              89     89     0%   3-264
rag_factory/strategies/contextual/__init__.py                          7      7     0%   8-19
rag_factory/strategies/contextual/batch_processor.py                  91     91     0%   8-266
rag_factory/strategies/contextual/config.py                           46     46     0%   8-195
rag_factory/strategies/contextual/context_generator.py                84     84     0%   8-234
rag_factory/strategies/contextual/cost_tracker.py                     32     32     0%   8-126
rag_factory/strategies/contextual/prompts.py                          25     25     0%   8-119
rag_factory/strategies/contextual/storage.py                          44     44     0%   8-118
rag_factory/strategies/contextual/strategy.py                         78     78     0%   8-298
rag_factory/strategies/fine_tuned/__init__.py                          4      4     0%   1-5
rag_factory/strategies/fine_tuned/ab_testing.py                       78     78     0%   1-134
rag_factory/strategies/fine_tuned/config.py                           11     11     0%   1-30
rag_factory/strategies/fine_tuned/custom_loader.py                    40     40     0%   1-88
rag_factory/strategies/fine_tuned/model_registry.py                  126    126     0%   1-303
rag_factory/strategies/hierarchical/__init__.py                        5      5     0%   8-21
rag_factory/strategies/hierarchical/hierarchy_builder.py              79     79     0%   8-335
rag_factory/strategies/hierarchical/models.py                         58     58     0%   8-137
rag_factory/strategies/hierarchical/parent_retriever.py               89     89     0%   8-278
rag_factory/strategies/hierarchical/strategy.py                       76     76     0%   9-301
rag_factory/strategies/indexing/__init__.py                            6      0   100%
rag_factory/strategies/indexing/context_aware.py                     108     88    19%   31, 43, 63-134, 155-156, 160-170, 182-188, 192-198, 208-237, 241-242
rag_factory/strategies/indexing/hierarchical.py                       90     73    19%   50, 63, 88-134, 156-185, 201-236, 253-278, 292-293
rag_factory/strategies/indexing/in_memory.py                          41     25    39%   54, 65, 93-121, 143, 160, 173, 194-200
rag_factory/strategies/indexing/keyword_indexing.py                   42     42     0%   8-157
rag_factory/strategies/indexing/knowledge_graph_indexing.py           46     33    28%   18, 27, 48-89, 108-129
rag_factory/strategies/indexing/vector_embedding.py                   98     85    13%   25, 35, 55-116, 137-221
rag_factory/strategies/knowledge_graph/__init__.py                     4      4     0%   8-19
rag_factory/strategies/knowledge_graph/config.py                      21     21     0%   8-129
rag_factory/strategies/knowledge_graph/entity_extractor.py            70     70     0%   7-205
rag_factory/strategies/knowledge_graph/graph_store.py                 31     31     0%   8-124
rag_factory/strategies/knowledge_graph/hybrid_retriever.py            56     56     0%   8-164
rag_factory/strategies/knowledge_graph/memory_graph_store.py          97     97     0%   8-196
rag_factory/strategies/knowledge_graph/models.py                      53     53     0%   8-122
rag_factory/strategies/knowledge_graph/relationship_extractor.py      62     62     0%   8-189
rag_factory/strategies/knowledge_graph/strategy.py                    80     80     0%   8-256
rag_factory/strategies/late_chunking/__init__.py                       6      6     0%   8-21
rag_factory/strategies/late_chunking/coherence_analyzer.py            27     27     0%   7-96
rag_factory/strategies/late_chunking/document_embedder.py            104    104     0%   8-318
rag_factory/strategies/late_chunking/embedding_chunker.py            117    117     0%   7-300
rag_factory/strategies/late_chunking/models.py                        62     62     0%   8-100
rag_factory/strategies/late_chunking/strategy.py                      70     70     0%   8-215
rag_factory/strategies/multi_query/__init__.py                         7      7     0%   8-19
rag_factory/strategies/multi_query/config.py                          36     36     0%   3-138
rag_factory/strategies/multi_query/deduplicator.py                    87     87     0%   3-197
rag_factory/strategies/multi_query/parallel_executor.py               52     52     0%   3-163
rag_factory/strategies/multi_query/prompts.py                         10     10     0%   3-84
rag_factory/strategies/multi_query/ranker.py                          80     80     0%   3-201
rag_factory/strategies/multi_query/strategy.py                        68     68     0%   3-184
rag_factory/strategies/multi_query/variant_generator.py               62     62     0%   3-187
rag_factory/strategies/query_expansion/__init__.py                     8      0   100%
rag_factory/strategies/query_expansion/base.py                        66     10    85%   90, 103, 114-118, 130-133
rag_factory/strategies/query_expansion/cache.py                       52     40    23%   20-22, 38-55, 64-66, 70-73, 81-97, 105-112
rag_factory/strategies/query_expansion/expander_service.py            92     71    23%   36-40, 55-58, 75-148, 159-180, 204-215, 233-234, 242-246, 254, 265-273, 283-284
rag_factory/strategies/query_expansion/hyde_expander.py               19     12    37%   25-27, 41-65
rag_factory/strategies/query_expansion/llm_expander.py                25     16    36%   23-25, 39-71, 99
rag_factory/strategies/query_expansion/metrics.py                     66     30    55%   44-45, 53-57, 76-109, 130, 134, 146-152, 160
rag_factory/strategies/query_expansion/prompts.py                     13      7    46%   16, 28-56, 68-107
rag_factory/strategies/reranking/__init__.py                           7      7     0%   8-21
rag_factory/strategies/reranking/base.py                              68     68     0%   8-130
rag_factory/strategies/reranking/bge_reranker.py                      51     51     0%   8-151
rag_factory/strategies/reranking/cache.py                             48     48     0%   8-138
rag_factory/strategies/reranking/cohere_reranker.py                   34     34     0%   8-119
rag_factory/strategies/reranking/cosine_reranker.py                   62     62     0%   8-249
rag_factory/strategies/reranking/cross_encoder_reranker.py            40     40     0%   8-124
rag_factory/strategies/reranking/metrics.py                           67     67     0%   8-264
rag_factory/strategies/reranking/reranker_service.py                 115    115     0%   8-310
rag_factory/strategies/retrieval/__init__.py                           6      0   100%
rag_factory/strategies/retrieval/keyword_retriever.py                 56     41    27%   41, 52, 71-113, 126-133, 153-172
rag_factory/strategies/retrieval/knowledge_graph_retriever.py         22      9    59%   19, 27, 48-70
rag_factory/strategies/retrieval/multi_query_retriever.py             22      9    59%   19, 26, 44-66
rag_factory/strategies/retrieval/query_expansion_retriever.py         24      9    62%   20, 27, 45-67
rag_factory/strategies/retrieval/semantic_retriever.py                23     12    48%   23, 32, 61-94
rag_factory/strategies/self_reflective/__init__.py                     6      6     0%   3-16
rag_factory/strategies/self_reflective/config.py                      20     20     0%   3-42
rag_factory/strategies/self_reflective/grader.py                      80     80     0%   3-266
rag_factory/strategies/self_reflective/models.py                      48     48     0%   3-109
rag_factory/strategies/self_reflective/refiner.py                     69     69     0%   3-228
rag_factory/strategies/self_reflective/strategy.py                    92     92     0%   3-269
rag_factory/utils/__init__.py                                          3      0   100%
rag_factory/utils/token_counter.py                                    45     30    33%   36-40, 52-62, 74-82, 86, 90, 105-106, 124-135, 153-158
rag_factory/utils/tokenization.py                                     95     73    23%   36-40, 53-64, 87-114, 126-129, 141-144, 156, 175-190, 209-228, 241-243, 251-252, 270-271, 292-293, 314-315
------------------------------------------------------------------------------------------------
TOTAL                                                              12324  10574    14%
=========================== short test summary info ============================
FAILED tests/integration_real/test_database_real.py::test_vector_similarity_search - AssertionError: assert 1 == 2
 +  where 1 = len([<Chunk(id=similarity_test_0, doc_id=None, index=None, embedding=yes, text='The quick brown fox jumps over the lazy dog')>])
=================== 1 failed, 7 passed, 2 warnings in 17.40s ===================

[17/197] PASSED: tests/integration_real/test_embedding_real.py
  Tests: 11 (P:8 F:0 S:3)
[18/197] FAILED: tests/integration_real/test_end_to_end_real.py
  Tests: 8 (P:6 F:2 S:0)
----------------------------------------
============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.1, pluggy-1.6.0 -- /mnt/MCPProyects/ragTools/venv/bin/python3
cachedir: .pytest_cache
rootdir: /mnt/MCPProyects/ragTools
configfile: pytest.ini (WARNING: ignoring pytest config in pyproject.toml!)
plugins: anyio-4.12.0, cov-7.0.0, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 7 items

tests/integration_real/test_end_to_end_real.py::test_document_indexing_pipeline PASSED [ 14%]
tests/integration_real/test_end_to_end_real.py::test_retrieval_pipeline PASSED [ 28%]
tests/integration_real/test_end_to_end_real.py::test_full_rag_pipeline FAILED [ 42%]
tests/integration_real/test_end_to_end_real.py::test_multiple_document_batches PASSED [ 57%]
tests/integration_real/test_end_to_end_real.py::test_retrieval_with_metadata_filtering PASSED [ 71%]
tests/integration_real/test_end_to_end_real.py::test_large_document_indexing PASSED [ 85%]
tests/integration_real/test_end_to_end_real.py::test_retrieval_accuracy PASSED [100%]

=================================== FAILURES ===================================
____________________________ test_full_rag_pipeline ____________________________
tests/integration_real/test_end_to_end_real.py:186: in test_full_rag_pipeline
    assert "1889" in response.content
E   AssertionError: assert '1889' in 'The given context does not contain information about when the Eiffel Tower was constructed; it solely focuses on Python, which means no answer can be derived from this specific text regarding the construction date of the Eiffel Tower.'
E    +  where 'The given context does not contain information about when the Eiffel Tower was constructed; it solely focuses on Python, which means no answer can be derived from this specific text regarding the construction date of the Eiffel Tower.' = LLMResponse(content='The given context does not contain information about when the Eiffel Tower was constructed; it solely focuses on Python, which means no answer can be derived from this specific text regarding the construction date of the Eiffel Tower.', model='phi-4-mini-instruct', provider='openai', prompt_tokens=56, completion_tokens=42, total_tokens=98, cost=0.0, latency=3.2801105976104736, metadata={'finish_reason': 'stop'}).content
---------------------------- Captured stderr setup -----------------------------
DEBUG:asyncio:Using selector: EpollSelector
INFO:tests.integration_real.conftest:[FIXTURE] Creating PostgresqlDatabaseService
INFO:rag_factory.services.database.postgres:Initialized PostgreSQL service for 192.168.56.1:5432/rag_test
INFO:tests.integration_real.conftest:[FIXTURE] Getting pool for cleanup
INFO:rag_factory.services.database.postgres:[_ensure_table] Starting table setup for test_chunks_real
INFO:rag_factory.services.database.postgres:[_ensure_table] Acquiring connection from pool
INFO:rag_factory.services.database.postgres:[_ensure_table] Connection acquired, enabling pgvector extension
INFO:rag_factory.services.database.postgres:[_ensure_table] pgvector extension enabled
INFO:rag_factory.services.database.postgres:[_ensure_table] Creating table test_chunks_real
INFO:rag_factory.services.database.postgres:[_ensure_table] Table created/verified
INFO:rag_factory.services.database.postgres:[_ensure_table] Checking if embedding column exists
INFO:rag_factory.services.database.postgres:[_ensure_table] Embedding column exists: True
INFO:rag_factory.services.database.postgres:[_ensure_table] Creating ivfflat index
INFO:rag_factory.services.database.postgres:[_ensure_table] Index created/verified
INFO:rag_factory.services.database.postgres:Ensured table test_chunks_real exists
INFO:tests.integration_real.conftest:[FIXTURE] Pool acquired, truncating table
INFO:tests.integration_real.conftest:[FIXTURE] Table truncated successfully
INFO:tests.integration_real.conftest:[FIXTURE] Yielding service to test
INFO:rag_factory.services.embedding.providers.onnx_local:Loading ONNX model: Xenova/all-MiniLM-L6-v2
INFO:rag_factory.services.utils.onnx_utils:Using model from EMBEDDING_MODEL_NAME env: Xenova/all-MiniLM-L6-v2
INFO:rag_factory.services.utils.onnx_utils:Using cached ONNX model: models/embeddings/Xenova_all-MiniLM-L6-v2/onnx/model.onnx
INFO:rag_factory.services.utils.onnx_utils:Created ONNX session with providers: ['CPUExecutionProvider']
INFO:rag_factory.services.utils.onnx_utils:Model has 3 inputs and 1 outputs
DEBUG:rag_factory.services.utils.onnx_utils:  Input: input_ids, shape: ['batch_size', 'sequence_length'], type: tensor(int64)
DEBUG:rag_factory.services.utils.onnx_utils:  Input: attention_mask, shape: ['batch_size', 'sequence_length'], type: tensor(int64)
DEBUG:rag_factory.services.utils.onnx_utils:  Input: token_type_ids, shape: ['batch_size', 'sequence_length'], type: tensor(int64)
DEBUG:rag_factory.services.utils.onnx_utils:  Output: last_hidden_state, shape: ['batch_size', 'sequence_length', 384], type: tensor(float)
INFO:rag_factory.services.utils.onnx_utils:Model validation passed
INFO:rag_factory.services.embedding.providers.onnx_local:Loaded tokenizer from models/embeddings/Xenova_all-MiniLM-L6-v2/tokenizer.json
INFO:rag_factory.services.embedding.providers.onnx_local:Loaded ONNX model Xenova/all-MiniLM-L6-v2 with 384 dimensions
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): 192.168.56.1:1234
DEBUG:urllib3.connectionpool:http://192.168.56.1:1234 "GET /v1/models HTTP/1.1" 200 1082
------------------------------ Captured log setup ------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
INFO     tests.integration_real.conftest:conftest.py:166 [FIXTURE] Creating PostgresqlDatabaseService
INFO     rag_factory.services.database.postgres:postgres.py:121 Initialized PostgreSQL service for 192.168.56.1:5432/rag_test
INFO     tests.integration_real.conftest:conftest.py:179 [FIXTURE] Getting pool for cleanup
INFO     rag_factory.services.database.postgres:postgres.py:149 [_ensure_table] Starting table setup for test_chunks_real
INFO     rag_factory.services.database.postgres:postgres.py:150 [_ensure_table] Acquiring connection from pool
INFO     rag_factory.services.database.postgres:postgres.py:152 [_ensure_table] Connection acquired, enabling pgvector extension
INFO     rag_factory.services.database.postgres:postgres.py:155 [_ensure_table] pgvector extension enabled
INFO     rag_factory.services.database.postgres:postgres.py:158 [_ensure_table] Creating table test_chunks_real
INFO     rag_factory.services.database.postgres:postgres.py:169 [_ensure_table] Table created/verified
INFO     rag_factory.services.database.postgres:postgres.py:172 [_ensure_table] Checking if embedding column exists
INFO     rag_factory.services.database.postgres:postgres.py:184 [_ensure_table] Embedding column exists: True
INFO     rag_factory.services.database.postgres:postgres.py:192 [_ensure_table] Creating ivfflat index
INFO     rag_factory.services.database.postgres:postgres.py:199 [_ensure_table] Index created/verified
INFO     rag_factory.services.database.postgres:postgres.py:201 Ensured table test_chunks_real exists
INFO     tests.integration_real.conftest:conftest.py:181 [FIXTURE] Pool acquired, truncating table
INFO     tests.integration_real.conftest:conftest.py:185 [FIXTURE] Table truncated successfully
INFO     tests.integration_real.conftest:conftest.py:192 [FIXTURE] Yielding service to test
INFO     rag_factory.services.embedding.providers.onnx_local:onnx_local.py:111 Loading ONNX model: Xenova/all-MiniLM-L6-v2
INFO     rag_factory.services.utils.onnx_utils:onnx_utils.py:90 Using model from EMBEDDING_MODEL_NAME env: Xenova/all-MiniLM-L6-v2
INFO     rag_factory.services.utils.onnx_utils:onnx_utils.py:113 Using cached ONNX model: models/embeddings/Xenova_all-MiniLM-L6-v2/onnx/model.onnx
INFO     rag_factory.services.utils.onnx_utils:onnx_utils.py:211 Created ONNX session with providers: ['CPUExecutionProvider']
INFO     rag_factory.services.utils.onnx_utils:onnx_utils.py:243 Model has 3 inputs and 1 outputs
DEBUG    rag_factory.services.utils.onnx_utils:onnx_utils.py:247   Input: input_ids, shape: ['batch_size', 'sequence_length'], type: tensor(int64)
DEBUG    rag_factory.services.utils.onnx_utils:onnx_utils.py:247   Input: attention_mask, shape: ['batch_size', 'sequence_length'], type: tensor(int64)
DEBUG    rag_factory.services.utils.onnx_utils:onnx_utils.py:247   Input: token_type_ids, shape: ['batch_size', 'sequence_length'], type: tensor(int64)
DEBUG    rag_factory.services.utils.onnx_utils:onnx_utils.py:251   Output: last_hidden_state, shape: ['batch_size', 'sequence_length', 384], type: tensor(float)
INFO     rag_factory.services.utils.onnx_utils:onnx_utils.py:273 Model validation passed
INFO     rag_factory.services.embedding.providers.onnx_local:onnx_local.py:168 Loaded tokenizer from models/embeddings/Xenova_all-MiniLM-L6-v2/tokenizer.json
INFO     rag_factory.services.embedding.providers.onnx_local:onnx_local.py:177 Loaded ONNX model Xenova/all-MiniLM-L6-v2 with 384 dimensions
DEBUG    urllib3.connectionpool:connectionpool.py:241 Starting new HTTP connection (1): 192.168.56.1:1234
DEBUG    urllib3.connectionpool:connectionpool.py:544 http://192.168.56.1:1234 "GET /v1/models HTTP/1.1" 200 1082
----------------------------- Captured stderr call -----------------------------
INFO:rag_factory.strategies.indexing.vector_embedding:Starting VectorEmbeddingIndexing.process with 2 documents
DEBUG:rag_factory.strategies.indexing.vector_embedding:Configuration: batch_size=32, chunk_size=200, overlap=50
INFO:rag_factory.strategies.indexing.vector_embedding:Using embedding service: AsyncEmbeddingWrapper
INFO:rag_factory.strategies.indexing.vector_embedding:Starting document chunking...
DEBUG:rag_factory.strategies.indexing.vector_embedding:_chunk_documents called with 2 documents, chunk_size=200, overlap=50
DEBUG:rag_factory.strategies.indexing.vector_embedding:Processing document 1/2: doc_id='eiffel_doc', text_length=112
DEBUG:rag_factory.strategies.indexing.vector_embedding:Document eiffel_doc fits in single chunk (length=112 <= 200)
DEBUG:rag_factory.strategies.indexing.vector_embedding:Processing document 2/2: doc_id='python_doc', text_length=128
DEBUG:rag_factory.strategies.indexing.vector_embedding:Document python_doc fits in single chunk (length=128 <= 200)
DEBUG:rag_factory.strategies.indexing.vector_embedding:_chunk_documents complete: total 2 chunks created
INFO:rag_factory.strategies.indexing.vector_embedding:Document chunking complete: created 2 chunks from 2 documents
INFO:rag_factory.strategies.indexing.vector_embedding:Starting embedding generation for 2 chunks in batches of 32...
DEBUG:rag_factory.strategies.indexing.vector_embedding:Processing batch 1/1 with 2 texts
DEBUG:rag_factory.strategies.indexing.vector_embedding:Batch 1/1 complete: generated 2 embeddings
INFO:rag_factory.strategies.indexing.vector_embedding:Embedding generation complete: created 2 embeddings
INFO:rag_factory.strategies.indexing.vector_embedding:Adding embeddings to chunks...
INFO:rag_factory.strategies.indexing.vector_embedding:Storing 2 chunks to database...
DEBUG:rag_factory.services.database.postgres:Storing chunk eiffel_doc_0: embedding dims=384, first 3 values=[0.054607685655355453, 0.10627976804971695, 0.011374696157872677]
DEBUG:rag_factory.services.database.postgres:Storing chunk python_doc_0: embedding dims=384, first 3 values=[0.038421668112277985, 0.10197843611240387, 0.02736414037644863]
DEBUG:rag_factory.services.database.postgres:Stored 2 chunks
INFO:rag_factory.strategies.indexing.vector_embedding:Database storage complete
INFO:rag_factory.strategies.indexing.vector_embedding:Indexing complete - Documents: 2, Chunks: 2, Embedding dimension: 384
DEBUG:rag_factory.services.database.postgres:Searching with embedding dims=384, first 3 values=[0.02967029996216297, 0.12840107083320618, 0.025954896584153175]
DEBUG:rag_factory.services.database.postgres:Found 2 chunks with embeddings in database
DEBUG:rag_factory.services.database.postgres:Found 1 similar chunks
INFO:rag_factory.services.llm.service:Sending request with 65 prompt tokens
DEBUG:openai._base_client:Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-4c0472a1-ac77-4b03-93ae-fdc73bc58441', 'json_data': {'messages': [{'role': 'system', 'content': 'Answer the question based only on the provided context. Be concise.'}, {'role': 'user', 'content': 'Context:\nPython is a high-level programming language created by Guido van Rossum in 1991. It is known for its simplicity and readability.\n\nQuestion: When was the Eiffel Tower built?'}], 'model': 'phi-4-mini-instruct', 'max_tokens': 1000, 'temperature': 0.7}}
DEBUG:openai._base_client:Sending HTTP Request: POST http://192.168.56.1:1234/v1/chat/completions
DEBUG:httpcore.connection:connect_tcp.started host='192.168.56.1' port=1234 local_address=None timeout=5.0 socket_options=None
DEBUG:httpcore.connection:connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7b2711df1b50>
DEBUG:httpcore.http11:send_request_headers.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_headers.complete
DEBUG:httpcore.http11:send_request_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_body.complete
DEBUG:httpcore.http11:receive_response_headers.started request=<Request [b'POST']>
DEBUG:httpcore.http11:receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'X-Powered-By', b'Express'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'768'), (b'ETag', b'W/"300-db+N9g+KozIp8FczkIt0UtjnYJc"'), (b'Date', b'Fri, 19 Dec 2025 00:13:05 GMT'), (b'Connection', b'keep-alive'), (b'Keep-Alive', b'timeout=5')])
INFO:httpx:HTTP Request: POST http://192.168.56.1:1234/v1/chat/completions "HTTP/1.1 200 OK"
DEBUG:httpcore.http11:receive_response_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:receive_response_body.complete
DEBUG:httpcore.http11:response_closed.started
DEBUG:httpcore.http11:response_closed.complete
DEBUG:openai._base_client:HTTP Response: POST http://192.168.56.1:1234/v1/chat/completions "200 OK" Headers({'x-powered-by': 'Express', 'content-type': 'application/json; charset=utf-8', 'content-length': '768', 'etag': 'W/"300-db+N9g+KozIp8FczkIt0UtjnYJc"', 'date': 'Fri, 19 Dec 2025 00:13:05 GMT', 'connection': 'keep-alive', 'keep-alive': 'timeout=5'})
DEBUG:openai._base_client:request_id: None
INFO:rag_factory.services.llm.service:Completed in 3.28s, 98 tokens, $0.000000
------------------------------ Captured log call -------------------------------
INFO     rag_factory.strategies.indexing.vector_embedding:vector_embedding.py:55 Starting VectorEmbeddingIndexing.process with 2 documents
DEBUG    rag_factory.strategies.indexing.vector_embedding:vector_embedding.py:61 Configuration: batch_size=32, chunk_size=200, overlap=50
INFO     rag_factory.strategies.indexing.vector_embedding:vector_embedding.py:67 Using embedding service: AsyncEmbeddingWrapper
INFO     rag_factory.strategies.indexing.vector_embedding:vector_embedding.py:70 Starting document chunking...
DEBUG    rag_factory.strategies.indexing.vector_embedding:vector_embedding.py:137 _chunk_documents called with 2 documents, chunk_size=200, overlap=50
DEBUG    rag_factory.strategies.indexing.vector_embedding:vector_embedding.py:146 Processing document 1/2: doc_id='eiffel_doc', text_length=112
DEBUG    rag_factory.strategies.indexing.vector_embedding:vector_embedding.py:158 Document eiffel_doc fits in single chunk (length=112 <= 200)
DEBUG    rag_factory.strategies.indexing.vector_embedding:vector_embedding.py:146 Processing document 2/2: doc_id='python_doc', text_length=128
DEBUG    rag_factory.strategies.indexing.vector_embedding:vector_embedding.py:158 Document python_doc fits in single chunk (length=128 <= 200)
DEBUG    rag_factory.strategies.indexing.vector_embedding:vector_embedding.py:220 _chunk_documents complete: total 2 chunks created
INFO     rag_factory.strategies.indexing.vector_embedding:vector_embedding.py:72 Document chunking complete: created 2 chunks from 2 documents
INFO     rag_factory.strategies.indexing.vector_embedding:vector_embedding.py:85 Starting embedding generation for 2 chunks in batches of 32...
DEBUG    rag_factory.strategies.indexing.vector_embedding:vector_embedding.py:94 Processing batch 1/1 with 2 texts
DEBUG    rag_factory.strategies.indexing.vector_embedding:vector_embedding.py:100 Batch 1/1 complete: generated 2 embeddings
INFO     rag_factory.strategies.indexing.vector_embedding:vector_embedding.py:102 Embedding generation complete: created 2 embeddings
INFO     rag_factory.strategies.indexing.vector_embedding:vector_embedding.py:105 Adding embeddings to chunks...
INFO     rag_factory.strategies.indexing.vector_embedding:vector_embedding.py:109 Storing 2 chunks to database...
DEBUG    rag_factory.services.database.postgres:postgres.py:251 Storing chunk eiffel_doc_0: embedding dims=384, first 3 values=[0.054607685655355453, 0.10627976804971695, 0.011374696157872677]
DEBUG    rag_factory.services.database.postgres:postgres.py:251 Storing chunk python_doc_0: embedding dims=384, first 3 values=[0.038421668112277985, 0.10197843611240387, 0.02736414037644863]
DEBUG    rag_factory.services.database.postgres:postgres.py:269 Stored 2 chunks
INFO     rag_factory.strategies.indexing.vector_embedding:vector_embedding.py:111 Database storage complete
INFO     rag_factory.strategies.indexing.vector_embedding:vector_embedding.py:114 Indexing complete - Documents: 2, Chunks: 2, Embedding dimension: 384
DEBUG    rag_factory.services.database.postgres:postgres.py:298 Searching with embedding dims=384, first 3 values=[0.02967029996216297, 0.12840107083320618, 0.025954896584153175]
DEBUG    rag_factory.services.database.postgres:postgres.py:303 Found 2 chunks with embeddings in database
DEBUG    rag_factory.services.database.postgres:postgres.py:340 Found 1 similar chunks
INFO     rag_factory.services.llm.service:service.py:104 Sending request with 65 prompt tokens
DEBUG    openai._base_client:_base_client.py:482 Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-4c0472a1-ac77-4b03-93ae-fdc73bc58441', 'json_data': {'messages': [{'role': 'system', 'content': 'Answer the question based only on the provided context. Be concise.'}, {'role': 'user', 'content': 'Context:\nPython is a high-level programming language created by Guido van Rossum in 1991. It is known for its simplicity and readability.\n\nQuestion: When was the Eiffel Tower built?'}], 'model': 'phi-4-mini-instruct', 'max_tokens': 1000, 'temperature': 0.7}}
DEBUG    openai._base_client:_base_client.py:978 Sending HTTP Request: POST http://192.168.56.1:1234/v1/chat/completions
DEBUG    httpcore.connection:_trace.py:47 connect_tcp.started host='192.168.56.1' port=1234 local_address=None timeout=5.0 socket_options=None
DEBUG    httpcore.connection:_trace.py:47 connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7b2711df1b50>
DEBUG    httpcore.http11:_trace.py:47 send_request_headers.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 send_request_headers.complete
DEBUG    httpcore.http11:_trace.py:47 send_request_body.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 send_request_body.complete
DEBUG    httpcore.http11:_trace.py:47 receive_response_headers.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'X-Powered-By', b'Express'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'768'), (b'ETag', b'W/"300-db+N9g+KozIp8FczkIt0UtjnYJc"'), (b'Date', b'Fri, 19 Dec 2025 00:13:05 GMT'), (b'Connection', b'keep-alive'), (b'Keep-Alive', b'timeout=5')])
INFO     httpx:_client.py:1025 HTTP Request: POST http://192.168.56.1:1234/v1/chat/completions "HTTP/1.1 200 OK"
DEBUG    httpcore.http11:_trace.py:47 receive_response_body.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 receive_response_body.complete
DEBUG    httpcore.http11:_trace.py:47 response_closed.started
DEBUG    httpcore.http11:_trace.py:47 response_closed.complete
DEBUG    openai._base_client:_base_client.py:1016 HTTP Response: POST http://192.168.56.1:1234/v1/chat/completions "200 OK" Headers({'x-powered-by': 'Express', 'content-type': 'application/json; charset=utf-8', 'content-length': '768', 'etag': 'W/"300-db+N9g+KozIp8FczkIt0UtjnYJc"', 'date': 'Fri, 19 Dec 2025 00:13:05 GMT', 'connection': 'keep-alive', 'keep-alive': 'timeout=5'})
DEBUG    openai._base_client:_base_client.py:1024 request_id: None
INFO     rag_factory.services.llm.service:service.py:119 Completed in 3.28s, 98 tokens, $0.000000
--------------------------- Captured stderr teardown ---------------------------
INFO:tests.integration_real.conftest:[FIXTURE] Test completed, starting cleanup
INFO:tests.integration_real.conftest:[FIXTURE] Pool acquired for cleanup
INFO:tests.integration_real.conftest:[FIXTURE] Table dropped successfully
INFO:tests.integration_real.conftest:[FIXTURE] Closing service
INFO:rag_factory.services.database.postgres:Closed PostgreSQL async connection pool
DEBUG:rag_factory.services.database.postgres:Cleared DatabaseContext cache
INFO:tests.integration_real.conftest:[FIXTURE] Service closed
---------------------------- Captured log teardown -----------------------------
INFO     tests.integration_real.conftest:conftest.py:196 [FIXTURE] Test completed, starting cleanup
INFO     tests.integration_real.conftest:conftest.py:199 [FIXTURE] Pool acquired for cleanup
INFO     tests.integration_real.conftest:conftest.py:202 [FIXTURE] Table dropped successfully
INFO     tests.integration_real.conftest:conftest.py:207 [FIXTURE] Closing service
INFO     rag_factory.services.database.postgres:postgres.py:605 Closed PostgreSQL async connection pool
DEBUG    rag_factory.services.database.postgres:postgres.py:614 Cleared DatabaseContext cache
INFO     tests.integration_real.conftest:conftest.py:209 [FIXTURE] Service closed
=============================== warnings summary ===============================
rag_factory/services/llm/config.py:8
  /mnt/MCPProyects/ragTools/rag_factory/services/llm/config.py:8: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class LLMServiceConfig(BaseModel):

rag_factory/database/config.py:12
  /mnt/MCPProyects/ragTools/rag_factory/database/config.py:12: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DatabaseConfig(BaseSettings):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.3-final-0 ________________

Name                                                               Stmts   Miss  Cover   Missing
------------------------------------------------------------------------------------------------
rag_factory/__init__.py                                                3      0   100%
rag_factory/__version__.py                                             1      0   100%
rag_factory/cli/__init__.py                                            2      0   100%
rag_factory/cli/commands/__init__.py                                   1      0   100%
rag_factory/cli/commands/benchmark.py                                 96     81    16%   40-53, 64-84, 148-263
rag_factory/cli/commands/check_consistency.py                         43     33    23%   64-120
rag_factory/cli/commands/config.py                                    78     68    13%   26-64, 102-188
rag_factory/cli/commands/index.py                                     65     52    20%   29-39, 93-185
rag_factory/cli/commands/query.py                                     47     36    23%   73-149
rag_factory/cli/commands/repl.py                                     152    130    14%   29-56, 63-108, 112-120, 124-133, 137-155, 159-172, 176-186, 190-207, 211-220, 253-260
rag_factory/cli/commands/strategies.py                                45     36    20%   48-120
rag_factory/cli/commands/validate_e2e.py                              91     69    24%   37-38, 42-142, 145-156
rag_factory/cli/commands/validate_pipeline.py                         70     57    19%   57-156
rag_factory/cli/formatters/__init__.py                                 4      0   100%
rag_factory/cli/formatters/consistency.py                             61     55    10%   21-69, 79-103, 108-138
rag_factory/cli/formatters/output.py                                  20      9    55%   23-24, 43-44, 63-64, 74, 79, 84
rag_factory/cli/formatters/results.py                                 71     62    13%   28-55, 72-99, 116-144, 157-181
rag_factory/cli/formatters/validation.py                              63     53    16%   25-43, 48-56, 65-77, 86-98, 103-129, 134-137
rag_factory/cli/main.py                                               31     10    68%   25-28, 48-49, 76-78, 82
rag_factory/cli/utils/__init__.py                                      3      0   100%
rag_factory/cli/utils/progress.py                                     14      8    43%   34-47, 73-76
rag_factory/cli/utils/validation.py                                   53     42    21%   30-41, 57-77, 93-118, 135
rag_factory/config/__init__.py                                         4      0   100%
rag_factory/config/env_resolver.py                                    52     37    29%   47-54, 70-90, 110, 129-147
rag_factory/config/schemas/__init__.py                                 2      0   100%
rag_factory/config/schemas/version.py                                 10      6    40%   29-38
rag_factory/config/strategy_loader.py                                 54     36    33%   32-41, 45-60, 75-89, 101-104
rag_factory/config/strategy_pair_manager.py                          105     83    21%   40-72, 92-132, 148-198, 210-215, 229, 259-282
rag_factory/config/validator.py                                       93     76    18%   27-30, 34-39, 53-58, 62-74, 111-132, 177-198, 215-235, 247-249, 271-295, 333-354
rag_factory/core/__init__.py                                           4      4     0%   7-23
rag_factory/core/capabilities.py                                      61     16    74%   129, 155, 173-174, 239-253
rag_factory/core/indexing_interface.py                                54     28    48%   144, 164, 208, 260, 272, 292-313, 341-364
rag_factory/core/pipeline.py                                          49     35    29%   22-24, 33-40, 55-77, 95-96, 105-108, 117-120, 137-146
rag_factory/core/retrieval_interface.py                               38     13    66%   138, 158, 196, 247, 259, 285-309
rag_factory/database/__init__.py                                       4      0   100%
rag_factory/database/config.py                                        17      0   100%
rag_factory/database/connection.py                                    80     54    32%   40-48, 61-86, 96, 107, 126-137, 150-157, 165-170, 178-183, 196-197, 209-214, 218, 222
rag_factory/database/env_validator.py                                 38     38     0%   7-139
rag_factory/database/models.py                                        85     32    62%   31-34, 37-45, 48-54, 66-69, 72-77, 80-85, 181, 323-325
rag_factory/database/vector_indexing.py                               38     38     0%   7-114
rag_factory/evaluation/__init__.py                                     4      4     0%   29-41
rag_factory/evaluation/analysis/__init__.py                            3      3     0%   8-11
rag_factory/evaluation/analysis/comparison.py                        135    135     0%   8-323
rag_factory/evaluation/analysis/statistics.py                         81     81     0%   8-320
rag_factory/evaluation/benchmarks/__init__.py                          3      3     0%   8-14
rag_factory/evaluation/benchmarks/config.py                           25     25     0%   7-64
rag_factory/evaluation/benchmarks/runner.py                          155    155     0%   8-423
rag_factory/evaluation/datasets/__init__.py                            3      3     0%   8-14
rag_factory/evaluation/datasets/loader.py                             88     88     0%   8-281
rag_factory/evaluation/datasets/schema.py                             52     52     0%   8-160
rag_factory/evaluation/datasets/statistics.py                         65     65     0%   8-226
rag_factory/evaluation/exporters/__init__.py                           4      4     0%   8-12
rag_factory/evaluation/exporters/csv_exporter.py                      52     52     0%   3-124
rag_factory/evaluation/exporters/html_exporter.py                     47     47     0%   3-293
rag_factory/evaluation/exporters/json_exporter.py                     19     19     0%   3-68
rag_factory/evaluation/metrics/__init__.py                             3      3     0%   12-25
rag_factory/evaluation/metrics/base.py                                31     31     0%   8-115
rag_factory/evaluation/metrics/cost.py                                65     65     0%   8-313
rag_factory/evaluation/metrics/performance.py                         42     42     0%   8-202
rag_factory/evaluation/metrics/quality.py                             84     84     0%   8-377
rag_factory/evaluation/metrics/retrieval.py                           77     77     0%   9-401
rag_factory/exceptions.py                                             13      0   100%
rag_factory/factory.py                                               187    137    27%   109-116, 144, 165-170, 202-230, 256-270, 300-324, 347-348, 365, 384, 401, 418, 435, 451-460, 480-502, 528-545, 568-611, 644-699, 703-715
rag_factory/legacy_config.py                                         155    155     0%   22-542
rag_factory/models/__init__.py                                         6      6     0%   3-14
rag_factory/models/embedding/__init__.py                               4      4     0%   3-12
rag_factory/models/embedding/loader.py                               179    179     0%   3-367
rag_factory/models/embedding/models.py                                47     47     0%   3-106
rag_factory/models/embedding/registry.py                             128    128     0%   3-282
rag_factory/models/evaluation/__init__.py                              3      3     0%   3-6
rag_factory/models/evaluation/ab_testing.py                           98     98     0%   3-281
rag_factory/models/evaluation/models.py                               29     29     0%   3-74
rag_factory/observability/__init__.py                                  3      3     0%   3-10
rag_factory/observability/integrations/__init__.py                     1      1     0%   3
rag_factory/observability/integrations/prometheus.py                  47     47     0%   3-229
rag_factory/observability/logging/__init__.py                          2      2     0%   3-5
rag_factory/observability/logging/config.py                           16     16     0%   3-37
rag_factory/observability/logging/filters.py                          41     41     0%   3-103
rag_factory/observability/logging/logger.py                           86     86     0%   3-396
rag_factory/observability/metrics/__init__.py                          2      2     0%   3-9
rag_factory/observability/metrics/collector.py                       143    143     0%   3-459
rag_factory/observability/metrics/cost.py                             39     39     0%   3-221
rag_factory/observability/metrics/performance.py                      64     64     0%   3-196
rag_factory/observability/monitoring/__init__.py                       1      1     0%   3
rag_factory/observability/monitoring/api.py                          101    101     0%   3-328
rag_factory/pipeline.py                                              156    156     0%   34-507
rag_factory/registry/__init__.py                                       4      0   100%
rag_factory/registry/exceptions.py                                     6      0   100%
rag_factory/registry/service_factory.py                               62     49    21%   45-52, 60-63, 68-71, 76-78, 87-105, 118-147, 158-197
rag_factory/registry/service_registry.py                              91     71    22%   43-51, 55-85, 103-156, 164, 178-203, 210-223, 227, 231-232
rag_factory/repositories/__init__.py                                   5      0   100%
rag_factory/repositories/base.py                                      42     21    50%   38, 53, 70, 87, 103, 114-118, 125, 136-139, 159-164
rag_factory/repositories/chunk.py                                    206    180    13%   40-45, 68-76, 90-95, 120-133, 155-171, 187-202, 221-231, 250-261, 287-328, 355-396, 422-474, 489-499, 513-521, 537-543, 557-563, 577-587, 604-626, 639-670
rag_factory/repositories/document.py                                  93     74    20%   41-46, 63-68, 98-118, 140-156, 172-187, 206, 223-233, 247-255, 272-279, 290-293, 307-312
rag_factory/repositories/exceptions.py                                18      7    61%   34-36, 56-59
rag_factory/services/__init__.py                                       4      0   100%
rag_factory/services/api/__init__.py                                   4      4     0%   7-11
rag_factory/services/api/anthropic.py                                 27     27     0%   7-141
rag_factory/services/api/cohere.py                                    30     30     0%   7-113
rag_factory/services/api/openai.py                                    46     46     0%   7-235
rag_factory/services/consistency.py                                   32     24    25%   80-113, 144-170
rag_factory/services/database/__init__.py                              5      0   100%
rag_factory/services/database/database_context.py                    181    159    12%   58-64, 88-106, 123, 140-150, 179-200, 223-240, 256-266, 305-330, 338-339, 343-406, 414-415, 430-510, 516-517, 521-546
rag_factory/services/database/migration_validator.py                  85     63    26%   29-30, 61-69, 81-88, 108-120, 137-141, 152-181, 192-204, 215-222, 234, 246-256, 268-271
rag_factory/services/database/neo4j.py                                54     36    33%   14, 60-71, 79-84, 103-114, 134-150, 172-181, 188-191, 195, 199
rag_factory/services/database/postgres.py                            194     73    62%   17-18, 26-27, 85, 91-103, 187-189, 215, 239, 241, 245-246, 322-325, 355-370, 420-435, 467-485, 499-522, 527, 538, 575-593, 609-611, 618, 622
rag_factory/services/dependencies.py                                  41     12    71%   99, 101, 103, 105, 107, 134-140, 179-180
rag_factory/services/embedding/__init__.py                             4      0   100%
rag_factory/services/embedding/base.py                                31      6    81%   44, 59, 68, 77, 86, 98
rag_factory/services/embedding/cache.py                               43     33    23%   26-32, 43-58, 67-76, 80-82, 90-94
rag_factory/services/embedding/config.py                              29     13    55%   37-43, 50-68, 80
rag_factory/services/embedding/providers/__init__.py                   5      0   100%
rag_factory/services/embedding/providers/cohere.py                    53     36    32%   10-20, 55-75, 90-117, 125, 133, 141, 152-153
rag_factory/services/embedding/providers/local.py                     43     27    37%   8-9, 46-67, 83-109, 117, 125, 133, 146
rag_factory/services/embedding/providers/onnx_local.py               114     37    68%   18-19, 90, 114, 139-147, 158, 170-175, 194, 248-250, 273, 289-308, 327, 335, 348
rag_factory/services/embedding/providers/openai.py                    51     34    33%   10-20, 53-72, 87-108, 116, 124, 132, 143-144
rag_factory/services/embedding/rate_limiter.py                        20      3    85%   32, 50-51
rag_factory/services/embedding/service.py                            100     83    17%   50-62, 79-93, 117-198, 220-222, 233-239, 248-266, 273-275
rag_factory/services/interfaces.py                                    35      0   100%
rag_factory/services/llm/__init__.py                                   5      0   100%
rag_factory/services/llm/base.py                                      43      0   100%
rag_factory/services/llm/config.py                                    23      7    70%   46-48, 51-53, 57
rag_factory/services/llm/prompt_template.py                           43     24    44%   47-82, 97-100, 111-115
rag_factory/services/llm/providers/__init__.py                        12     10    17%   10-22
rag_factory/services/llm/providers/anthropic.py                       57     42    26%   44-50, 64-97, 120-147, 171-172, 184-189, 197, 205
rag_factory/services/llm/providers/ollama.py                          55     42    24%   22-24, 37-67, 93-122, 142-143, 157, 165, 174, 185-196
rag_factory/services/llm/providers/openai.py                          57     20    65%   56, 62, 101-105, 133-158, 189-194, 202, 210
rag_factory/services/llm/service.py                                   66     25    62%   68, 94, 127-129, 154-175, 186, 194-198, 215-216
rag_factory/services/llm/token_counter.py                             27      4    85%   56-57, 71-72
rag_factory/services/local/__init__.py                                 2      2     0%   7-9
rag_factory/services/local/reranker.py                                32     32     0%   7-116
rag_factory/services/onnx/__init__.py                                  2      2     0%   7-9
rag_factory/services/onnx/embedding.py                                29     29     0%   7-129
rag_factory/services/utils/__init__.py                                 2      0   100%
rag_factory/services/utils/model_converter.py                        104    104     0%   8-291
rag_factory/services/utils/onnx_utils.py                             133     42    68%   22-23, 37, 77-84, 96-97, 117-123, 142-146, 175, 189-190, 194, 198-201, 216-218, 258, 265-268, 361-362, 376, 392-404
rag_factory/services/utils/reranker_selector.py                       68     68     0%   8-249
rag_factory/strategies/__init__.py                                     2      0   100%
rag_factory/strategies/agentic/__init__.py                             7      7     0%   8-20
rag_factory/strategies/agentic/agent.py                              151    151     0%   8-420
rag_factory/strategies/agentic/config.py                              12     12     0%   5-31
rag_factory/strategies/agentic/frameworks/__init__.py                  1      1     0%   9
rag_factory/strategies/agentic/query_analyzer.py                      89     89     0%   8-278
rag_factory/strategies/agentic/strategy.py                            87     87     0%   8-284
rag_factory/strategies/agentic/tool_implementations.py               135    135     0%   11-511
rag_factory/strategies/agentic/tools.py                               40     40     0%   8-142
rag_factory/strategies/base.py                                        55     10    82%   81, 83, 85, 169-178
rag_factory/strategies/chunking/__init__.py                           15     15     0%   28-67
rag_factory/strategies/chunking/base.py                               91     91     0%   3-256
rag_factory/strategies/chunking/docling_chunker.py                    45     45     0%   13-188
rag_factory/strategies/chunking/fixed_size_chunker.py                 74     74     0%   3-204
rag_factory/strategies/chunking/hybrid_chunker.py                     70     70     0%   3-192
rag_factory/strategies/chunking/semantic_chunker.py                  195    195     0%   3-534
rag_factory/strategies/chunking/structural_chunker.py                147    147     0%   3-425
rag_factory/strategies/chunking/utils.py                              89     89     0%   3-264
rag_factory/strategies/contextual/__init__.py                          7      7     0%   8-19
rag_factory/strategies/contextual/batch_processor.py                  91     91     0%   8-266
rag_factory/strategies/contextual/config.py                           46     46     0%   8-195
rag_factory/strategies/contextual/context_generator.py                84     84     0%   8-234
rag_factory/strategies/contextual/cost_tracker.py                     32     32     0%   8-126
rag_factory/strategies/contextual/prompts.py                          25     25     0%   8-119
rag_factory/strategies/contextual/storage.py                          44     44     0%   8-118
rag_factory/strategies/contextual/strategy.py                         78     78     0%   8-298
rag_factory/strategies/fine_tuned/__init__.py                          4      4     0%   1-5
rag_factory/strategies/fine_tuned/ab_testing.py                       78     78     0%   1-134
rag_factory/strategies/fine_tuned/config.py                           11     11     0%   1-30
rag_factory/strategies/fine_tuned/custom_loader.py                    40     40     0%   1-88
rag_factory/strategies/fine_tuned/model_registry.py                  126    126     0%   1-303
rag_factory/strategies/hierarchical/__init__.py                        5      5     0%   8-21
rag_factory/strategies/hierarchical/hierarchy_builder.py              79     79     0%   8-335
rag_factory/strategies/hierarchical/models.py                         58     58     0%   8-137
rag_factory/strategies/hierarchical/parent_retriever.py               89     89     0%   8-278
rag_factory/strategies/hierarchical/strategy.py                       76     76     0%   9-301
rag_factory/strategies/indexing/__init__.py                            6      0   100%
rag_factory/strategies/indexing/context_aware.py                     108     88    19%   31, 43, 63-134, 155-156, 160-170, 182-188, 192-198, 208-237, 241-242
rag_factory/strategies/indexing/hierarchical.py                       90     73    19%   50, 63, 88-134, 156-185, 201-236, 253-278, 292-293
rag_factory/strategies/indexing/in_memory.py                          41     25    39%   54, 65, 93-121, 143, 160, 173, 194-200
rag_factory/strategies/indexing/keyword_indexing.py                   42     42     0%   8-157
rag_factory/strategies/indexing/knowledge_graph_indexing.py           46     33    28%   18, 27, 48-89, 108-129
rag_factory/strategies/indexing/vector_embedding.py                   98      9    91%   64-65, 76-77, 149-150, 174-175, 213
rag_factory/strategies/knowledge_graph/__init__.py                     4      4     0%   8-19
rag_factory/strategies/knowledge_graph/config.py                      21     21     0%   8-129
rag_factory/strategies/knowledge_graph/entity_extractor.py            70     70     0%   7-205
rag_factory/strategies/knowledge_graph/graph_store.py                 31     31     0%   8-124
rag_factory/strategies/knowledge_graph/hybrid_retriever.py            56     56     0%   8-164
rag_factory/strategies/knowledge_graph/memory_graph_store.py          97     97     0%   8-196
rag_factory/strategies/knowledge_graph/models.py                      53     53     0%   8-122
rag_factory/strategies/knowledge_graph/relationship_extractor.py      62     62     0%   8-189
rag_factory/strategies/knowledge_graph/strategy.py                    80     80     0%   8-256
rag_factory/strategies/late_chunking/__init__.py                       6      6     0%   8-21
rag_factory/strategies/late_chunking/coherence_analyzer.py            27     27     0%   7-96
rag_factory/strategies/late_chunking/document_embedder.py            104    104     0%   8-318
rag_factory/strategies/late_chunking/embedding_chunker.py            117    117     0%   7-300
rag_factory/strategies/late_chunking/models.py                        62     62     0%   8-100
rag_factory/strategies/late_chunking/strategy.py                      70     70     0%   8-215
rag_factory/strategies/multi_query/__init__.py                         7      7     0%   8-19
rag_factory/strategies/multi_query/config.py                          36     36     0%   3-138
rag_factory/strategies/multi_query/deduplicator.py                    87     87     0%   3-197
rag_factory/strategies/multi_query/parallel_executor.py               52     52     0%   3-163
rag_factory/strategies/multi_query/prompts.py                         10     10     0%   3-84
rag_factory/strategies/multi_query/ranker.py                          80     80     0%   3-201
rag_factory/strategies/multi_query/strategy.py                        68     68     0%   3-184
rag_factory/strategies/multi_query/variant_generator.py               62     62     0%   3-187
rag_factory/strategies/query_expansion/__init__.py                     8      0   100%
rag_factory/strategies/query_expansion/base.py                        66     10    85%   90, 103, 114-118, 130-133
rag_factory/strategies/query_expansion/cache.py                       52     40    23%   20-22, 38-55, 64-66, 70-73, 81-97, 105-112
rag_factory/strategies/query_expansion/expander_service.py            92     71    23%   36-40, 55-58, 75-148, 159-180, 204-215, 233-234, 242-246, 254, 265-273, 283-284
rag_factory/strategies/query_expansion/hyde_expander.py               19     12    37%   25-27, 41-65
rag_factory/strategies/query_expansion/llm_expander.py                25     16    36%   23-25, 39-71, 99
rag_factory/strategies/query_expansion/metrics.py                     66     30    55%   44-45, 53-57, 76-109, 130, 134, 146-152, 160
rag_factory/strategies/query_expansion/prompts.py                     13      7    46%   16, 28-56, 68-107
rag_factory/strategies/reranking/__init__.py                           7      7     0%   8-21
rag_factory/strategies/reranking/base.py                              68     68     0%   8-130
rag_factory/strategies/reranking/bge_reranker.py                      51     51     0%   8-151
rag_factory/strategies/reranking/cache.py                             48     48     0%   8-138
rag_factory/strategies/reranking/cohere_reranker.py                   34     34     0%   8-119
rag_factory/strategies/reranking/cosine_reranker.py                   62     62     0%   8-249
rag_factory/strategies/reranking/cross_encoder_reranker.py            40     40     0%   8-124
rag_factory/strategies/reranking/metrics.py                           67     67     0%   8-264
rag_factory/strategies/reranking/reranker_service.py                 115    115     0%   8-310
rag_factory/strategies/retrieval/__init__.py                           6      0   100%
rag_factory/strategies/retrieval/keyword_retriever.py                 56     41    27%   41, 52, 71-113, 126-133, 153-172
rag_factory/strategies/retrieval/knowledge_graph_retriever.py         22      9    59%   19, 27, 48-70
rag_factory/strategies/retrieval/multi_query_retriever.py             22      9    59%   19, 26, 44-66
rag_factory/strategies/retrieval/query_expansion_retriever.py         24      9    62%   20, 27, 45-67
rag_factory/strategies/retrieval/semantic_retriever.py                23      2    91%   23, 77
rag_factory/strategies/self_reflective/__init__.py                     6      6     0%   3-16
rag_factory/strategies/self_reflective/config.py                      20     20     0%   3-42
rag_factory/strategies/self_reflective/grader.py                      80     80     0%   3-266
rag_factory/strategies/self_reflective/models.py                      48     48     0%   3-109
rag_factory/strategies/self_reflective/refiner.py                     69     69     0%   3-228
rag_factory/strategies/self_reflective/strategy.py                    92     92     0%   3-269
rag_factory/utils/__init__.py                                          3      0   100%
rag_factory/utils/token_counter.py                                    45     30    33%   36-40, 52-62, 74-82, 86, 90, 105-106, 124-135, 153-158
rag_factory/utils/tokenization.py                                     95     73    23%   36-40, 53-64, 87-114, 126-129, 141-144, 156, 175-190, 209-228, 241-243, 251-252, 270-271, 292-293, 314-315
------------------------------------------------------------------------------------------------
TOTAL                                                              12324  10353    16%
=========================== short test summary info ============================
FAILED tests/integration_real/test_end_to_end_real.py::test_full_rag_pipeline - AssertionError: assert '1889' in 'The given context does not contain information about when the Eiffel Tower was constructed; it solely focuses on Python, which means no answer can be derived from this specific text regarding the construction date of the Eiffel Tower.'
 +  where 'The given context does not contain information about when the Eiffel Tower was constructed; it solely focuses on Python, which means no answer can be derived from this specific text regarding the construction date of the Eiffel Tower.' = LLMResponse(content='The given context does not contain information about when the Eiffel Tower was constructed; it solely focuses on Python, which means no answer can be derived from this specific text regarding the construction date of the Eiffel Tower.', model='phi-4-mini-instruct', provider='openai', prompt_tokens=56, completion_tokens=42, total_tokens=98, cost=0.0, latency=3.2801105976104736, metadata={'finish_reason': 'stop'}).content
============= 1 failed, 6 passed, 2 warnings in 133.49s (0:02:13) ==============

[19/197] PASSED: tests/integration_real/test_llm_real.py
  Tests: 10 (P:10 F:0 S:0)
[20/197] ALL_SKIPPED: tests/integration_real/test_neo4j_real.py
  Tests: 9 (P:0 F:0 S:9)
[21/197] PASSED: tests/integration/registry/test_registry_integration.py
  Tests: 16 (P:16 F:0 S:0)
[22/197] PASSED: tests/integration/repositories/test_repository_integration.py
  Tests: 19 (P:19 F:0 S:0)
[23/197] PASSED: tests/integration/services/test_embedding_integration.py
  Tests: 8 (P:6 F:0 S:2)
[24/197] PASSED: tests/integration/services/test_fine_tuned_onnx_integration.py
  Tests: 1 (P:1 F:0 S:0)
[25/197] PASSED: tests/integration/services/test_llm_integration.py
  Tests: 8 (P:1 F:0 S:7)
[26/197] PASSED: tests/integration/services/test_lm_studio_connection.py
  Tests: 2 (P:2 F:0 S:0)
[27/197] PASSED: tests/integration/services/test_onnx_embeddings_integration.py
  Tests: 10 (P:10 F:0 S:0)
[28/197] PASSED: tests/integration/services/test_service_implementations.py
  Tests: 19 (P:18 F:0 S:1)
[29/197] FAILED: tests/integration/services/test_service_integration.py
  Tests: 3 (P:1 F:2 S:0)
----------------------------------------
============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.1, pluggy-1.6.0 -- /mnt/MCPProyects/ragTools/venv/bin/python3
cachedir: .pytest_cache
rootdir: /mnt/MCPProyects/ragTools
configfile: pytest.ini (WARNING: ignoring pytest config in pyproject.toml!)
plugins: anyio-4.12.0, cov-7.0.0, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 2 items

tests/integration/services/test_service_integration.py::test_rag_workflow FAILED [ 50%]
tests/integration/services/test_service_integration.py::test_embedding_database_consistency PASSED [100%]

=================================== FAILURES ===================================
______________________________ test_rag_workflow _______________________________
tests/integration/services/test_service_integration.py:136: in test_rag_workflow
    assert results[0]["text"] == text
           ^^^^^^^^^^^^^^^^^^
E   TypeError: 'Chunk' object is not subscriptable
---------------------------- Captured stderr setup -----------------------------
INFO:rag_factory.services.database.postgres:Initialized PostgreSQL service for localhost:5432/test_db
DEBUG:asyncio:Using selector: EpollSelector
DEBUG:asyncio:Using selector: EpollSelector
------------------------------ Captured log setup ------------------------------
INFO     rag_factory.services.database.postgres:postgres.py:121 Initialized PostgreSQL service for localhost:5432/test_db
DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
----------------------------- Captured stderr call -----------------------------
DEBUG:rag_factory.services.database.postgres:Storing chunk doc1: embedding dims=3, first 3 values=[0.1, 0.2, 0.3]
DEBUG:rag_factory.services.database.postgres:Stored 1 chunks
DEBUG:rag_factory.services.database.postgres:Searching with embedding dims=3, first 3 values=[0.1, 0.2, 0.3]
DEBUG:rag_factory.services.database.postgres:Found <AsyncMock name='mock.__aenter__().fetchval()' id='128229460048400'> chunks with embeddings in database
DEBUG:rag_factory.services.database.postgres:Found 1 similar chunks
------------------------------ Captured log call -------------------------------
DEBUG    rag_factory.services.database.postgres:postgres.py:251 Storing chunk doc1: embedding dims=3, first 3 values=[0.1, 0.2, 0.3]
DEBUG    rag_factory.services.database.postgres:postgres.py:269 Stored 1 chunks
DEBUG    rag_factory.services.database.postgres:postgres.py:298 Searching with embedding dims=3, first 3 values=[0.1, 0.2, 0.3]
DEBUG    rag_factory.services.database.postgres:postgres.py:303 Found <AsyncMock name='mock.__aenter__().fetchval()' id='128229460048400'> chunks with embeddings in database
DEBUG    rag_factory.services.database.postgres:postgres.py:340 Found 1 similar chunks
=============================== warnings summary ===============================
rag_factory/services/llm/config.py:8
  /mnt/MCPProyects/ragTools/rag_factory/services/llm/config.py:8: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class LLMServiceConfig(BaseModel):

rag_factory/database/config.py:12
  /mnt/MCPProyects/ragTools/rag_factory/database/config.py:12: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DatabaseConfig(BaseSettings):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.3-final-0 ________________

Name                                                               Stmts   Miss  Cover   Missing
------------------------------------------------------------------------------------------------
rag_factory/__init__.py                                                3      0   100%
rag_factory/__version__.py                                             1      0   100%
rag_factory/cli/__init__.py                                            2      0   100%
rag_factory/cli/commands/__init__.py                                   1      0   100%
rag_factory/cli/commands/benchmark.py                                 96     81    16%   40-53, 64-84, 148-263
rag_factory/cli/commands/check_consistency.py                         43     33    23%   64-120
rag_factory/cli/commands/config.py                                    78     68    13%   26-64, 102-188
rag_factory/cli/commands/index.py                                     65     52    20%   29-39, 93-185
rag_factory/cli/commands/query.py                                     47     36    23%   73-149
rag_factory/cli/commands/repl.py                                     152    130    14%   29-56, 63-108, 112-120, 124-133, 137-155, 159-172, 176-186, 190-207, 211-220, 253-260
rag_factory/cli/commands/strategies.py                                45     36    20%   48-120
rag_factory/cli/commands/validate_e2e.py                              91     69    24%   37-38, 42-142, 145-156
rag_factory/cli/commands/validate_pipeline.py                         70     57    19%   57-156
rag_factory/cli/formatters/__init__.py                                 4      0   100%
rag_factory/cli/formatters/consistency.py                             61     55    10%   21-69, 79-103, 108-138
rag_factory/cli/formatters/output.py                                  20      9    55%   23-24, 43-44, 63-64, 74, 79, 84
rag_factory/cli/formatters/results.py                                 71     62    13%   28-55, 72-99, 116-144, 157-181
rag_factory/cli/formatters/validation.py                              63     53    16%   25-43, 48-56, 65-77, 86-98, 103-129, 134-137
rag_factory/cli/main.py                                               31     10    68%   25-28, 48-49, 76-78, 82
rag_factory/cli/utils/__init__.py                                      3      0   100%
rag_factory/cli/utils/progress.py                                     14      8    43%   34-47, 73-76
rag_factory/cli/utils/validation.py                                   53     42    21%   30-41, 57-77, 93-118, 135
rag_factory/config/__init__.py                                         4      0   100%
rag_factory/config/env_resolver.py                                    52     37    29%   47-54, 70-90, 110, 129-147
rag_factory/config/schemas/__init__.py                                 2      0   100%
rag_factory/config/schemas/version.py                                 10      6    40%   29-38
rag_factory/config/strategy_loader.py                                 54     36    33%   32-41, 45-60, 75-89, 101-104
rag_factory/config/strategy_pair_manager.py                          105     83    21%   40-72, 92-132, 148-198, 210-215, 229, 259-282
rag_factory/config/validator.py                                       93     76    18%   27-30, 34-39, 53-58, 62-74, 111-132, 177-198, 215-235, 247-249, 271-295, 333-354
rag_factory/core/__init__.py                                           4      4     0%   7-23
rag_factory/core/capabilities.py                                      61     16    74%   129, 155, 173-174, 239-253
rag_factory/core/indexing_interface.py                                54     35    35%   55-57, 118-123, 144, 164, 208, 260, 272, 292-313, 341-364
rag_factory/core/pipeline.py                                          49     35    29%   22-24, 33-40, 55-77, 95-96, 105-108, 117-120, 137-146
rag_factory/core/retrieval_interface.py                               38     20    47%   56-58, 112-117, 138, 158, 196, 247, 259, 285-309
rag_factory/database/__init__.py                                       4      0   100%
rag_factory/database/config.py                                        17      0   100%
rag_factory/database/connection.py                                    80     54    32%   40-48, 61-86, 96, 107, 126-137, 150-157, 165-170, 178-183, 196-197, 209-214, 218, 222
rag_factory/database/env_validator.py                                 38     38     0%   7-139
rag_factory/database/models.py                                        85     32    62%   31-34, 37-45, 48-54, 66-69, 72-77, 80-85, 181, 323-325
rag_factory/database/vector_indexing.py                               38     38     0%   7-114
rag_factory/evaluation/__init__.py                                     4      4     0%   29-41
rag_factory/evaluation/analysis/__init__.py                            3      3     0%   8-11
rag_factory/evaluation/analysis/comparison.py                        135    135     0%   8-323
rag_factory/evaluation/analysis/statistics.py                         81     81     0%   8-320
rag_factory/evaluation/benchmarks/__init__.py                          3      3     0%   8-14
rag_factory/evaluation/benchmarks/config.py                           25     25     0%   7-64
rag_factory/evaluation/benchmarks/runner.py                          155    155     0%   8-423
rag_factory/evaluation/datasets/__init__.py                            3      3     0%   8-14
rag_factory/evaluation/datasets/loader.py                             88     88     0%   8-281
rag_factory/evaluation/datasets/schema.py                             52     52     0%   8-160
rag_factory/evaluation/datasets/statistics.py                         65     65     0%   8-226
rag_factory/evaluation/exporters/__init__.py                           4      4     0%   8-12
rag_factory/evaluation/exporters/csv_exporter.py                      52     52     0%   3-124
rag_factory/evaluation/exporters/html_exporter.py                     47     47     0%   3-293
rag_factory/evaluation/exporters/json_exporter.py                     19     19     0%   3-68
rag_factory/evaluation/metrics/__init__.py                             3      3     0%   12-25
rag_factory/evaluation/metrics/base.py                                31     31     0%   8-115
rag_factory/evaluation/metrics/cost.py                                65     65     0%   8-313
rag_factory/evaluation/metrics/performance.py                         42     42     0%   8-202
rag_factory/evaluation/metrics/quality.py                             84     84     0%   8-377
rag_factory/evaluation/metrics/retrieval.py                           77     77     0%   9-401
rag_factory/exceptions.py                                             13      0   100%
rag_factory/factory.py                                               187    137    27%   109-116, 144, 165-170, 202-230, 256-270, 300-324, 347-348, 365, 384, 401, 418, 435, 451-460, 480-502, 528-545, 568-611, 644-699, 703-715
rag_factory/legacy_config.py                                         155    155     0%   22-542
rag_factory/models/__init__.py                                         6      6     0%   3-14
rag_factory/models/embedding/__init__.py                               4      4     0%   3-12
rag_factory/models/embedding/loader.py                               179    179     0%   3-367
rag_factory/models/embedding/models.py                                47     47     0%   3-106
rag_factory/models/embedding/registry.py                             128    128     0%   3-282
rag_factory/models/evaluation/__init__.py                              3      3     0%   3-6
rag_factory/models/evaluation/ab_testing.py                           98     98     0%   3-281
rag_factory/models/evaluation/models.py                               29     29     0%   3-74
rag_factory/observability/__init__.py                                  3      3     0%   3-10
rag_factory/observability/integrations/__init__.py                     1      1     0%   3
rag_factory/observability/integrations/prometheus.py                  47     47     0%   3-229
rag_factory/observability/logging/__init__.py                          2      2     0%   3-5
rag_factory/observability/logging/config.py                           16     16     0%   3-37
rag_factory/observability/logging/filters.py                          41     41     0%   3-103
rag_factory/observability/logging/logger.py                           86     86     0%   3-396
rag_factory/observability/metrics/__init__.py                          2      2     0%   3-9
rag_factory/observability/metrics/collector.py                       143    143     0%   3-459
rag_factory/observability/metrics/cost.py                             39     39     0%   3-221
rag_factory/observability/metrics/performance.py                      64     64     0%   3-196
rag_factory/observability/monitoring/__init__.py                       1      1     0%   3
rag_factory/observability/monitoring/api.py                          101    101     0%   3-328
rag_factory/pipeline.py                                              156    156     0%   34-507
rag_factory/registry/__init__.py                                       4      0   100%
rag_factory/registry/exceptions.py                                     6      0   100%
rag_factory/registry/service_factory.py                               62     49    21%   45-52, 60-63, 68-71, 76-78, 87-105, 118-147, 158-197
rag_factory/registry/service_registry.py                              91     71    22%   43-51, 55-85, 103-156, 164, 178-203, 210-223, 227, 231-232
rag_factory/repositories/__init__.py                                   5      0   100%
rag_factory/repositories/base.py                                      42     21    50%   38, 53, 70, 87, 103, 114-118, 125, 136-139, 159-164
rag_factory/repositories/chunk.py                                    206    180    13%   40-45, 68-76, 90-95, 120-133, 155-171, 187-202, 221-231, 250-261, 287-328, 355-396, 422-474, 489-499, 513-521, 537-543, 557-563, 577-587, 604-626, 639-670
rag_factory/repositories/document.py                                  93     74    20%   41-46, 63-68, 98-118, 140-156, 172-187, 206, 223-233, 247-255, 272-279, 290-293, 307-312
rag_factory/repositories/exceptions.py                                18      7    61%   34-36, 56-59
rag_factory/services/__init__.py                                       4      0   100%
rag_factory/services/api/__init__.py                                   4      4     0%   7-11
rag_factory/services/api/anthropic.py                                 27     27     0%   7-141
rag_factory/services/api/cohere.py                                    30     30     0%   7-113
rag_factory/services/api/openai.py                                    46     46     0%   7-235
rag_factory/services/consistency.py                                   32     24    25%   80-113, 144-170
rag_factory/services/database/__init__.py                              5      0   100%
rag_factory/services/database/database_context.py                    181    159    12%   58-64, 88-106, 123, 140-150, 179-200, 223-240, 256-266, 305-330, 338-339, 343-406, 414-415, 430-510, 516-517, 521-546
rag_factory/services/database/migration_validator.py                  85     63    26%   29-30, 61-69, 81-88, 108-120, 137-141, 152-181, 192-204, 215-222, 234, 246-256, 268-271
rag_factory/services/database/neo4j.py                                54     36    33%   14, 60-71, 79-84, 103-114, 134-150, 172-181, 188-191, 195, 199
rag_factory/services/database/postgres.py                            194    113    42%   17-18, 26-27, 85, 91-103, 132-143, 149-201, 215, 231-235, 239, 241, 245-246, 322-325, 355-370, 385-409, 420-435, 467-485, 499-522, 527, 538, 575-593, 602-614, 618, 622
rag_factory/services/dependencies.py                                  41     21    49%   96-109, 134-140, 176-180
rag_factory/services/embedding/__init__.py                             4      0   100%
rag_factory/services/embedding/base.py                                31      6    81%   44, 59, 68, 77, 86, 98
rag_factory/services/embedding/cache.py                               43     33    23%   26-32, 43-58, 67-76, 80-82, 90-94
rag_factory/services/embedding/config.py                              29      7    76%   43, 56-68, 80
rag_factory/services/embedding/providers/__init__.py                   5      0   100%
rag_factory/services/embedding/providers/cohere.py                    53     36    32%   10-20, 55-75, 90-117, 125, 133, 141, 152-153
rag_factory/services/embedding/providers/local.py                     43     27    37%   8-9, 46-67, 83-109, 117, 125, 133, 146
rag_factory/services/embedding/providers/onnx_local.py               114     93    18%   18-19, 87-177, 193-250, 261-308, 319, 327, 335, 348
rag_factory/services/embedding/providers/openai.py                    51     34    33%   10-20, 53-72, 87-108, 116, 124, 132, 143-144
rag_factory/services/embedding/rate_limiter.py                        20     14    30%   27-37, 45-53
rag_factory/services/embedding/service.py                            100     36    64%   88, 118, 129-141, 155, 171-179, 191-192, 220-222, 248-266, 273-275
rag_factory/services/interfaces.py                                    35      0   100%
rag_factory/services/llm/__init__.py                                   5      0   100%
rag_factory/services/llm/base.py                                      43      0   100%
rag_factory/services/llm/config.py                                    23      4    83%   48, 51-53
rag_factory/services/llm/prompt_template.py                           43     24    44%   47-82, 97-100, 111-115
rag_factory/services/llm/providers/__init__.py                        12     10    17%   10-22
rag_factory/services/llm/providers/anthropic.py                       57     42    26%   44-50, 64-97, 120-147, 171-172, 184-189, 197, 205
rag_factory/services/llm/providers/ollama.py                          55     42    24%   22-24, 37-67, 93-122, 142-143, 157, 165, 174, 185-196
rag_factory/services/llm/providers/openai.py                          57     41    28%   50-62, 76-110, 133-158, 173, 186-194, 202, 210
rag_factory/services/llm/service.py                                   66     40    39%   68, 93-129, 154-175, 186, 194-198, 215-216
rag_factory/services/llm/token_counter.py                             27     17    37%   22-41, 56-57, 71-72
rag_factory/services/local/__init__.py                                 2      2     0%   7-9
rag_factory/services/local/reranker.py                                32     32     0%   7-116
rag_factory/services/onnx/__init__.py                                  2      2     0%   7-9
rag_factory/services/onnx/embedding.py                                29     29     0%   7-129
rag_factory/services/utils/__init__.py                                 2      0   100%
rag_factory/services/utils/model_converter.py                        104    104     0%   8-291
rag_factory/services/utils/onnx_utils.py                             133    114    14%   22-23, 36-37, 67-123, 142-146, 172-218, 240-274, 291-312, 332-347, 360-378, 392-404
rag_factory/services/utils/reranker_selector.py                       68     68     0%   8-249
rag_factory/strategies/__init__.py                                     2      0   100%
rag_factory/strategies/agentic/__init__.py                             7      7     0%   8-20
rag_factory/strategies/agentic/agent.py                              151    151     0%   8-420
rag_factory/strategies/agentic/config.py                              12     12     0%   5-31
rag_factory/strategies/agentic/frameworks/__init__.py                  1      1     0%   9
rag_factory/strategies/agentic/query_analyzer.py                      89     89     0%   8-278
rag_factory/strategies/agentic/strategy.py                            87     87     0%   8-284
rag_factory/strategies/agentic/tool_implementations.py               135    135     0%   11-511
rag_factory/strategies/agentic/tools.py                               40     40     0%   8-142
rag_factory/strategies/base.py                                        55     13    76%   80-85, 169-178
rag_factory/strategies/chunking/__init__.py                           15     15     0%   28-67
rag_factory/strategies/chunking/base.py                               91     91     0%   3-256
rag_factory/strategies/chunking/docling_chunker.py                    45     45     0%   13-188
rag_factory/strategies/chunking/fixed_size_chunker.py                 74     74     0%   3-204
rag_factory/strategies/chunking/hybrid_chunker.py                     70     70     0%   3-192
rag_factory/strategies/chunking/semantic_chunker.py                  195    195     0%   3-534
rag_factory/strategies/chunking/structural_chunker.py                147    147     0%   3-425
rag_factory/strategies/chunking/utils.py                              89     89     0%   3-264
rag_factory/strategies/contextual/__init__.py                          7      7     0%   8-19
rag_factory/strategies/contextual/batch_processor.py                  91     91     0%   8-266
rag_factory/strategies/contextual/config.py                           46     46     0%   8-195
rag_factory/strategies/contextual/context_generator.py                84     84     0%   8-234
rag_factory/strategies/contextual/cost_tracker.py                     32     32     0%   8-126
rag_factory/strategies/contextual/prompts.py                          25     25     0%   8-119
rag_factory/strategies/contextual/storage.py                          44     44     0%   8-118
rag_factory/strategies/contextual/strategy.py                         78     78     0%   8-298
rag_factory/strategies/fine_tuned/__init__.py                          4      4     0%   1-5
rag_factory/strategies/fine_tuned/ab_testing.py                       78     78     0%   1-134
rag_factory/strategies/fine_tuned/config.py                           11     11     0%   1-30
rag_factory/strategies/fine_tuned/custom_loader.py                    40     40     0%   1-88
rag_factory/strategies/fine_tuned/model_registry.py                  126    126     0%   1-303
rag_factory/strategies/hierarchical/__init__.py                        5      5     0%   8-21
rag_factory/strategies/hierarchical/hierarchy_builder.py              79     79     0%   8-335
rag_factory/strategies/hierarchical/models.py                         58     58     0%   8-137
rag_factory/strategies/hierarchical/parent_retriever.py               89     89     0%   8-278
rag_factory/strategies/hierarchical/strategy.py                       76     76     0%   9-301
rag_factory/strategies/indexing/__init__.py                            6      0   100%
rag_factory/strategies/indexing/context_aware.py                     108     88    19%   31, 43, 63-134, 155-156, 160-170, 182-188, 192-198, 208-237, 241-242
rag_factory/strategies/indexing/hierarchical.py                       90     73    19%   50, 63, 88-134, 156-185, 201-236, 253-278, 292-293
rag_factory/strategies/indexing/in_memory.py                          41     25    39%   54, 65, 93-121, 143, 160, 173, 194-200
rag_factory/strategies/indexing/keyword_indexing.py                   42     42     0%   8-157
rag_factory/strategies/indexing/knowledge_graph_indexing.py           46     33    28%   18, 27, 48-89, 108-129
rag_factory/strategies/indexing/vector_embedding.py                   98     85    13%   25, 35, 55-116, 137-221
rag_factory/strategies/knowledge_graph/__init__.py                     4      4     0%   8-19
rag_factory/strategies/knowledge_graph/config.py                      21     21     0%   8-129
rag_factory/strategies/knowledge_graph/entity_extractor.py            70     70     0%   7-205
rag_factory/strategies/knowledge_graph/graph_store.py                 31     31     0%   8-124
rag_factory/strategies/knowledge_graph/hybrid_retriever.py            56     56     0%   8-164
rag_factory/strategies/knowledge_graph/memory_graph_store.py          97     97     0%   8-196
rag_factory/strategies/knowledge_graph/models.py                      53     53     0%   8-122
rag_factory/strategies/knowledge_graph/relationship_extractor.py      62     62     0%   8-189
rag_factory/strategies/knowledge_graph/strategy.py                    80     80     0%   8-256
rag_factory/strategies/late_chunking/__init__.py                       6      6     0%   8-21
rag_factory/strategies/late_chunking/coherence_analyzer.py            27     27     0%   7-96
rag_factory/strategies/late_chunking/document_embedder.py            104    104     0%   8-318
rag_factory/strategies/late_chunking/embedding_chunker.py            117    117     0%   7-300
rag_factory/strategies/late_chunking/models.py                        62     62     0%   8-100
rag_factory/strategies/late_chunking/strategy.py                      70     70     0%   8-215
rag_factory/strategies/multi_query/__init__.py                         7      7     0%   8-19
rag_factory/strategies/multi_query/config.py                          36     36     0%   3-138
rag_factory/strategies/multi_query/deduplicator.py                    87     87     0%   3-197
rag_factory/strategies/multi_query/parallel_executor.py               52     52     0%   3-163
rag_factory/strategies/multi_query/prompts.py                         10     10     0%   3-84
rag_factory/strategies/multi_query/ranker.py                          80     80     0%   3-201
rag_factory/strategies/multi_query/strategy.py                        68     68     0%   3-184
rag_factory/strategies/multi_query/variant_generator.py               62     62     0%   3-187
rag_factory/strategies/query_expansion/__init__.py                     8      0   100%
rag_factory/strategies/query_expansion/base.py                        66     10    85%   90, 103, 114-118, 130-133
rag_factory/strategies/query_expansion/cache.py                       52     40    23%   20-22, 38-55, 64-66, 70-73, 81-97, 105-112
rag_factory/strategies/query_expansion/expander_service.py            92     71    23%   36-40, 55-58, 75-148, 159-180, 204-215, 233-234, 242-246, 254, 265-273, 283-284
rag_factory/strategies/query_expansion/hyde_expander.py               19     12    37%   25-27, 41-65
rag_factory/strategies/query_expansion/llm_expander.py                25     16    36%   23-25, 39-71, 99
rag_factory/strategies/query_expansion/metrics.py                     66     30    55%   44-45, 53-57, 76-109, 130, 134, 146-152, 160
rag_factory/strategies/query_expansion/prompts.py                     13      7    46%   16, 28-56, 68-107
rag_factory/strategies/reranking/__init__.py                           7      7     0%   8-21
rag_factory/strategies/reranking/base.py                              68     68     0%   8-130
rag_factory/strategies/reranking/bge_reranker.py                      51     51     0%   8-151
rag_factory/strategies/reranking/cache.py                             48     48     0%   8-138
rag_factory/strategies/reranking/cohere_reranker.py                   34     34     0%   8-119
rag_factory/strategies/reranking/cosine_reranker.py                   62     62     0%   8-249
rag_factory/strategies/reranking/cross_encoder_reranker.py            40     40     0%   8-124
rag_factory/strategies/reranking/metrics.py                           67     67     0%   8-264
rag_factory/strategies/reranking/reranker_service.py                 115    115     0%   8-310
rag_factory/strategies/retrieval/__init__.py                           6      0   100%
rag_factory/strategies/retrieval/keyword_retriever.py                 56     41    27%   41, 52, 71-113, 126-133, 153-172
rag_factory/strategies/retrieval/knowledge_graph_retriever.py         22      9    59%   19, 27, 48-70
rag_factory/strategies/retrieval/multi_query_retriever.py             22      9    59%   19, 26, 44-66
rag_factory/strategies/retrieval/query_expansion_retriever.py         24      9    62%   20, 27, 45-67
rag_factory/strategies/retrieval/semantic_retriever.py                23     12    48%   23, 32, 61-94
rag_factory/strategies/self_reflective/__init__.py                     6      6     0%   3-16
rag_factory/strategies/self_reflective/config.py                      20     20     0%   3-42
rag_factory/strategies/self_reflective/grader.py                      80     80     0%   3-266
rag_factory/strategies/self_reflective/models.py                      48     48     0%   3-109
rag_factory/strategies/self_reflective/refiner.py                     69     69     0%   3-228
rag_factory/strategies/self_reflective/strategy.py                    92     92     0%   3-269
rag_factory/utils/__init__.py                                          3      0   100%
rag_factory/utils/token_counter.py                                    45     30    33%   36-40, 52-62, 74-82, 86, 90, 105-106, 124-135, 153-158
rag_factory/utils/tokenization.py                                     95     73    23%   36-40, 53-64, 87-114, 126-129, 141-144, 156, 175-190, 209-228, 241-243, 251-252, 270-271, 292-293, 314-315
------------------------------------------------------------------------------------------------
TOTAL                                                              12324  10637    14%
=========================== short test summary info ============================
FAILED tests/integration/services/test_service_integration.py::test_rag_workflow - TypeError: 'Chunk' object is not subscriptable
=================== 1 failed, 1 passed, 2 warnings in 6.23s ====================

[30/197] PASSED: tests/integration/strategies/test_base_integration.py
  Tests: 5 (P:5 F:0 S:0)
[31/197] PASSED: tests/integration/strategies/test_chunking_integration.py
  Tests: 12 (P:12 F:0 S:0)
[32/197] PASSED: tests/integration/strategies/test_contextual_integration.py
  Tests: 6 (P:6 F:0 S:0)
[33/197] PASSED: tests/integration/strategies/test_hierarchical_indexing.py
  Tests: 14 (P:14 F:0 S:0)
[34/197] PASSED: tests/integration/strategies/test_hierarchical_integration.py
  Tests: 4 (P:4 F:0 S:0)
[35/197] PASSED: tests/integration/strategies/test_in_memory_indexing.py
  Tests: 12 (P:12 F:0 S:0)
[36/197] PASSED: tests/integration/strategies/test_keyword_indexing.py
  Tests: 6 (P:6 F:0 S:0)
[37/197] PASSED: tests/integration/strategies/test_knowledge_graph_integration.py
  Tests: 4 (P:4 F:0 S:0)
[38/197] PASSED: tests/integration/strategies/test_late_chunking_integration.py
  Tests: 9 (P:9 F:0 S:0)
[39/197] PASSED: tests/integration/strategies/test_multi_query_integration.py
  Tests: 9 (P:9 F:0 S:0)
[40/197] PASSED: tests/integration/strategies/test_query_expansion_integration.py
  Tests: 11 (P:11 F:0 S:0)
[41/197] PASSED: tests/integration/strategies/test_reranking_integration.py
  Tests: 9 (P:8 F:0 S:1)
[42/197] PASSED: tests/integration/strategies/test_self_reflective_integration.py
  Tests: 4 (P:4 F:0 S:0)
[43/197] PASSED: tests/integration/strategies/test_vector_embedding_indexing.py
  Tests: 5 (P:5 F:0 S:0)
[44/197] PASSED: tests/integration/test_agentic_rag_pair.py
  Tests: 1 (P:1 F:0 S:0)
[45/197] PASSED: tests/integration/test_config_integration.py
  Tests: 8 (P:8 F:0 S:0)
[46/197] PASSED: tests/integration/test_context_aware_chunking_pair.py
  Tests: 1 (P:1 F:0 S:0)
[47/197] PASSED: tests/integration/test_contextual_retrieval_pair.py
  Tests: 1 (P:1 F:0 S:0)
[48/197] PASSED: tests/integration/test_factory_consistency.py
  Tests: 8 (P:8 F:0 S:0)
[49/197] PASSED: tests/integration/test_factory_integration.py
  Tests: 11 (P:11 F:0 S:0)
[50/197] PASSED: tests/integration/test_fine_tuned_embeddings_pair.py
  Tests: 1 (P:1 F:0 S:0)
[51/197] PASSED: tests/integration/test_hierarchical_rag_pair.py
  Tests: 1 (P:1 F:0 S:0)
[52/197] PASSED: tests/integration/test_hybrid_search_pair.py
  Tests: 1 (P:1 F:0 S:0)
[53/197] PASSED: tests/integration/test_keyword_pair.py
  Tests: 1 (P:1 F:0 S:0)
[54/197] PASSED: tests/integration/test_knowledge_graph_pair.py
  Tests: 1 (P:1 F:0 S:0)
[55/197] PASSED: tests/integration/test_late_chunking_pair.py
  Tests: 1 (P:1 F:0 S:0)
[56/197] PASSED: tests/integration/test_multi_query_pair.py
  Tests: 1 (P:1 F:0 S:0)
[57/197] PASSED: tests/integration/test_package_integration.py
  Tests: 4 (P:3 F:0 S:1)
[58/197] PASSED: tests/integration/test_pipeline_integration.py
  Tests: 7 (P:7 F:0 S:0)
[59/197] PASSED: tests/integration/test_query_expansion_pair.py
  Tests: 1 (P:1 F:0 S:0)
[60/197] PASSED: tests/integration/test_reranking_pair.py
  Tests: 1 (P:1 F:0 S:0)
[61/197] PASSED: tests/integration/test_self_reflective_pair.py
  Tests: 1 (P:1 F:0 S:0)
[62/197] PASSED: tests/integration/test_semantic_api_pair.py
  Tests: 1 (P:1 F:0 S:0)
[63/197] PASSED: tests/integration/test_semantic_local_pair.py
  Tests: 1 (P:1 F:0 S:0)
[64/197] PASSED: tests/integration/test_tokenization_integration.py
  Tests: 16 (P:16 F:0 S:0)
[65/197] PASSED: tests/mocks/test_standalone.py
  Tests: 6 (P:6 F:0 S:0)
[66/197] FAILED: tests/test_mock_registry.py
  Tests: 0 (P:0 F:0 S:0)
----------------------------------------
============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.1, pluggy-1.6.0 -- /mnt/MCPProyects/ragTools/venv/bin/python3
cachedir: .pytest_cache
rootdir: /mnt/MCPProyects/ragTools
configfile: pytest.ini (WARNING: ignoring pytest config in pyproject.toml!)
plugins: anyio-4.12.0, cov-7.0.0, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 0 items

=============================== warnings summary ===============================
rag_factory/services/llm/config.py:8
  /mnt/MCPProyects/ragTools/rag_factory/services/llm/config.py:8: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class LLMServiceConfig(BaseModel):

rag_factory/database/config.py:12
  /mnt/MCPProyects/ragTools/rag_factory/database/config.py:12: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DatabaseConfig(BaseSettings):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.3-final-0 ________________

Name                                                               Stmts   Miss  Cover   Missing
------------------------------------------------------------------------------------------------
rag_factory/__init__.py                                                3      0   100%
rag_factory/__version__.py                                             1      0   100%
rag_factory/cli/__init__.py                                            2      0   100%
rag_factory/cli/commands/__init__.py                                   1      0   100%
rag_factory/cli/commands/benchmark.py                                 96     81    16%   40-53, 64-84, 148-263
rag_factory/cli/commands/check_consistency.py                         43     33    23%   64-120
rag_factory/cli/commands/config.py                                    78     68    13%   26-64, 102-188
rag_factory/cli/commands/index.py                                     65     52    20%   29-39, 93-185
rag_factory/cli/commands/query.py                                     47     36    23%   73-149
rag_factory/cli/commands/repl.py                                     152    130    14%   29-56, 63-108, 112-120, 124-133, 137-155, 159-172, 176-186, 190-207, 211-220, 253-260
rag_factory/cli/commands/strategies.py                                45     36    20%   48-120
rag_factory/cli/commands/validate_e2e.py                              91     69    24%   37-38, 42-142, 145-156
rag_factory/cli/commands/validate_pipeline.py                         70     57    19%   57-156
rag_factory/cli/formatters/__init__.py                                 4      0   100%
rag_factory/cli/formatters/consistency.py                             61     55    10%   21-69, 79-103, 108-138
rag_factory/cli/formatters/output.py                                  20      9    55%   23-24, 43-44, 63-64, 74, 79, 84
rag_factory/cli/formatters/results.py                                 71     62    13%   28-55, 72-99, 116-144, 157-181
rag_factory/cli/formatters/validation.py                              63     53    16%   25-43, 48-56, 65-77, 86-98, 103-129, 134-137
rag_factory/cli/main.py                                               31     10    68%   25-28, 48-49, 76-78, 82
rag_factory/cli/utils/__init__.py                                      3      0   100%
rag_factory/cli/utils/progress.py                                     14      8    43%   34-47, 73-76
rag_factory/cli/utils/validation.py                                   53     42    21%   30-41, 57-77, 93-118, 135
rag_factory/config/__init__.py                                         4      0   100%
rag_factory/config/env_resolver.py                                    52     37    29%   47-54, 70-90, 110, 129-147
rag_factory/config/schemas/__init__.py                                 2      0   100%
rag_factory/config/schemas/version.py                                 10      6    40%   29-38
rag_factory/config/strategy_loader.py                                 54     36    33%   32-41, 45-60, 75-89, 101-104
rag_factory/config/strategy_pair_manager.py                          105     83    21%   40-72, 92-132, 148-198, 210-215, 229, 259-282
rag_factory/config/validator.py                                       93     76    18%   27-30, 34-39, 53-58, 62-74, 111-132, 177-198, 215-235, 247-249, 271-295, 333-354
rag_factory/core/__init__.py                                           4      4     0%   7-23
rag_factory/core/capabilities.py                                      61     16    74%   129, 155, 173-174, 239-253
rag_factory/core/indexing_interface.py                                54     35    35%   55-57, 118-123, 144, 164, 208, 260, 272, 292-313, 341-364
rag_factory/core/pipeline.py                                          49     35    29%   22-24, 33-40, 55-77, 95-96, 105-108, 117-120, 137-146
rag_factory/core/retrieval_interface.py                               38     20    47%   56-58, 112-117, 138, 158, 196, 247, 259, 285-309
rag_factory/database/__init__.py                                       4      0   100%
rag_factory/database/config.py                                        17      0   100%
rag_factory/database/connection.py                                    80     54    32%   40-48, 61-86, 96, 107, 126-137, 150-157, 165-170, 178-183, 196-197, 209-214, 218, 222
rag_factory/database/env_validator.py                                 38     38     0%   7-139
rag_factory/database/models.py                                        85     32    62%   31-34, 37-45, 48-54, 66-69, 72-77, 80-85, 181, 323-325
rag_factory/database/vector_indexing.py                               38     38     0%   7-114
rag_factory/evaluation/__init__.py                                     4      4     0%   29-41
rag_factory/evaluation/analysis/__init__.py                            3      3     0%   8-11
rag_factory/evaluation/analysis/comparison.py                        135    135     0%   8-323
rag_factory/evaluation/analysis/statistics.py                         81     81     0%   8-320
rag_factory/evaluation/benchmarks/__init__.py                          3      3     0%   8-14
rag_factory/evaluation/benchmarks/config.py                           25     25     0%   7-64
rag_factory/evaluation/benchmarks/runner.py                          155    155     0%   8-423
rag_factory/evaluation/datasets/__init__.py                            3      3     0%   8-14
rag_factory/evaluation/datasets/loader.py                             88     88     0%   8-281
rag_factory/evaluation/datasets/schema.py                             52     52     0%   8-160
rag_factory/evaluation/datasets/statistics.py                         65     65     0%   8-226
rag_factory/evaluation/exporters/__init__.py                           4      4     0%   8-12
rag_factory/evaluation/exporters/csv_exporter.py                      52     52     0%   3-124
rag_factory/evaluation/exporters/html_exporter.py                     47     47     0%   3-293
rag_factory/evaluation/exporters/json_exporter.py                     19     19     0%   3-68
rag_factory/evaluation/metrics/__init__.py                             3      3     0%   12-25
rag_factory/evaluation/metrics/base.py                                31     31     0%   8-115
rag_factory/evaluation/metrics/cost.py                                65     65     0%   8-313
rag_factory/evaluation/metrics/performance.py                         42     42     0%   8-202
rag_factory/evaluation/metrics/quality.py                             84     84     0%   8-377
rag_factory/evaluation/metrics/retrieval.py                           77     77     0%   9-401
rag_factory/exceptions.py                                             13      0   100%
rag_factory/factory.py                                               187    137    27%   109-116, 144, 165-170, 202-230, 256-270, 300-324, 347-348, 365, 384, 401, 418, 435, 451-460, 480-502, 528-545, 568-611, 644-699, 703-715
rag_factory/legacy_config.py                                         155    155     0%   22-542
rag_factory/models/__init__.py                                         6      6     0%   3-14
rag_factory/models/embedding/__init__.py                               4      4     0%   3-12
rag_factory/models/embedding/loader.py                               179    179     0%   3-367
rag_factory/models/embedding/models.py                                47     47     0%   3-106
rag_factory/models/embedding/registry.py                             128    128     0%   3-282
rag_factory/models/evaluation/__init__.py                              3      3     0%   3-6
rag_factory/models/evaluation/ab_testing.py                           98     98     0%   3-281
rag_factory/models/evaluation/models.py                               29     29     0%   3-74
rag_factory/observability/__init__.py                                  3      3     0%   3-10
rag_factory/observability/integrations/__init__.py                     1      1     0%   3
rag_factory/observability/integrations/prometheus.py                  47     47     0%   3-229
rag_factory/observability/logging/__init__.py                          2      2     0%   3-5
rag_factory/observability/logging/config.py                           16     16     0%   3-37
rag_factory/observability/logging/filters.py                          41     41     0%   3-103
rag_factory/observability/logging/logger.py                           86     86     0%   3-396
rag_factory/observability/metrics/__init__.py                          2      2     0%   3-9
rag_factory/observability/metrics/collector.py                       143    143     0%   3-459
rag_factory/observability/metrics/cost.py                             39     39     0%   3-221
rag_factory/observability/metrics/performance.py                      64     64     0%   3-196
rag_factory/observability/monitoring/__init__.py                       1      1     0%   3
rag_factory/observability/monitoring/api.py                          101    101     0%   3-328
rag_factory/pipeline.py                                              156    156     0%   34-507
rag_factory/registry/__init__.py                                       4      0   100%
rag_factory/registry/exceptions.py                                     6      0   100%
rag_factory/registry/service_factory.py                               62     49    21%   45-52, 60-63, 68-71, 76-78, 87-105, 118-147, 158-197
rag_factory/registry/service_registry.py                              91     71    22%   43-51, 55-85, 103-156, 164, 178-203, 210-223, 227, 231-232
rag_factory/repositories/__init__.py                                   5      5     0%   20-31
rag_factory/repositories/base.py                                      42     42     0%   7-164
rag_factory/repositories/chunk.py                                    206    206     0%   7-670
rag_factory/repositories/document.py                                  93     93     0%   7-312
rag_factory/repositories/exceptions.py                                18     18     0%   7-77
rag_factory/services/__init__.py                                       4      0   100%
rag_factory/services/api/__init__.py                                   4      4     0%   7-11
rag_factory/services/api/anthropic.py                                 27     27     0%   7-141
rag_factory/services/api/cohere.py                                    30     30     0%   7-113
rag_factory/services/api/openai.py                                    46     46     0%   7-235
rag_factory/services/consistency.py                                   32     24    25%   80-113, 144-170
rag_factory/services/database/__init__.py                              5      0   100%
rag_factory/services/database/database_context.py                    181    159    12%   58-64, 88-106, 123, 140-150, 179-200, 223-240, 256-266, 305-330, 338-339, 343-406, 414-415, 430-510, 516-517, 521-546
rag_factory/services/database/migration_validator.py                  85     63    26%   29-30, 61-69, 81-88, 108-120, 137-141, 152-181, 192-204, 215-222, 234, 246-256, 268-271
rag_factory/services/database/neo4j.py                                54     36    33%   14, 60-71, 79-84, 103-114, 134-150, 172-181, 188-191, 195, 199
rag_factory/services/database/postgres.py                            194    162    16%   17-18, 26-27, 84-121, 131-145, 149-201, 214-269, 292-341, 355-370, 385-409, 420-435, 467-485, 499-522, 527, 538, 575-593, 602-614, 618, 622
rag_factory/services/dependencies.py                                  41     21    49%   96-109, 134-140, 176-180
rag_factory/services/embedding/__init__.py                             4      0   100%
rag_factory/services/embedding/base.py                                31      6    81%   44, 59, 68, 77, 86, 98
rag_factory/services/embedding/cache.py                               43     33    23%   26-32, 43-58, 67-76, 80-82, 90-94
rag_factory/services/embedding/config.py                              29     13    55%   37-43, 50-68, 80
rag_factory/services/embedding/providers/__init__.py                   5      0   100%
rag_factory/services/embedding/providers/cohere.py                    53     36    32%   10-20, 55-75, 90-117, 125, 133, 141, 152-153
rag_factory/services/embedding/providers/local.py                     43     27    37%   8-9, 46-67, 83-109, 117, 125, 133, 146
rag_factory/services/embedding/providers/onnx_local.py               114     93    18%   18-19, 87-177, 193-250, 261-308, 319, 327, 335, 348
rag_factory/services/embedding/providers/openai.py                    51     34    33%   10-20, 53-72, 87-108, 116, 124, 132, 143-144
rag_factory/services/embedding/rate_limiter.py                        20     14    30%   27-37, 45-53
rag_factory/services/embedding/service.py                            100     83    17%   50-62, 79-93, 117-198, 220-222, 233-239, 248-266, 273-275
rag_factory/services/interfaces.py                                    35      0   100%
rag_factory/services/llm/__init__.py                                   5      0   100%
rag_factory/services/llm/base.py                                      43      0   100%
rag_factory/services/llm/config.py                                    23     11    52%   42-57
rag_factory/services/llm/prompt_template.py                           43     24    44%   47-82, 97-100, 111-115
rag_factory/services/llm/providers/__init__.py                        12     12     0%   5-22
rag_factory/services/llm/providers/anthropic.py                       57     57     0%   3-205
rag_factory/services/llm/providers/ollama.py                          55     55     0%   3-196
rag_factory/services/llm/providers/openai.py                          57     57     0%   3-210
rag_factory/services/llm/service.py                                   66     51    23%   32-39, 56-70, 93-129, 154-175, 186, 194-198, 215-216
rag_factory/services/llm/token_counter.py                             27     27     0%   3-72
rag_factory/services/local/__init__.py                                 2      2     0%   7-9
rag_factory/services/local/reranker.py                                32     32     0%   7-116
rag_factory/services/onnx/__init__.py                                  2      2     0%   7-9
rag_factory/services/onnx/embedding.py                                29     29     0%   7-129
rag_factory/services/utils/__init__.py                                 2      0   100%
rag_factory/services/utils/model_converter.py                        104    104     0%   8-291
rag_factory/services/utils/onnx_utils.py                             133    114    14%   22-23, 36-37, 67-123, 142-146, 172-218, 240-274, 291-312, 332-347, 360-378, 392-404
rag_factory/services/utils/reranker_selector.py                       68     68     0%   8-249
rag_factory/strategies/__init__.py                                     2      0   100%
rag_factory/strategies/agentic/__init__.py                             7      7     0%   8-20
rag_factory/strategies/agentic/agent.py                              151    151     0%   8-420
rag_factory/strategies/agentic/config.py                              12     12     0%   5-31
rag_factory/strategies/agentic/frameworks/__init__.py                  1      1     0%   9
rag_factory/strategies/agentic/query_analyzer.py                      89     89     0%   8-278
rag_factory/strategies/agentic/strategy.py                            87     87     0%   8-284
rag_factory/strategies/agentic/tool_implementations.py               135    135     0%   11-511
rag_factory/strategies/agentic/tools.py                               40     40     0%   8-142
rag_factory/strategies/base.py                                        55     13    76%   80-85, 169-178
rag_factory/strategies/chunking/__init__.py                           15     15     0%   28-67
rag_factory/strategies/chunking/base.py                               91     91     0%   3-256
rag_factory/strategies/chunking/docling_chunker.py                    45     45     0%   13-188
rag_factory/strategies/chunking/fixed_size_chunker.py                 74     74     0%   3-204
rag_factory/strategies/chunking/hybrid_chunker.py                     70     70     0%   3-192
rag_factory/strategies/chunking/semantic_chunker.py                  195    195     0%   3-534
rag_factory/strategies/chunking/structural_chunker.py                147    147     0%   3-425
rag_factory/strategies/chunking/utils.py                              89     89     0%   3-264
rag_factory/strategies/contextual/__init__.py                          7      7     0%   8-19
rag_factory/strategies/contextual/batch_processor.py                  91     91     0%   8-266
rag_factory/strategies/contextual/config.py                           46     46     0%   8-195
rag_factory/strategies/contextual/context_generator.py                84     84     0%   8-234
rag_factory/strategies/contextual/cost_tracker.py                     32     32     0%   8-126
rag_factory/strategies/contextual/prompts.py                          25     25     0%   8-119
rag_factory/strategies/contextual/storage.py                          44     44     0%   8-118
rag_factory/strategies/contextual/strategy.py                         78     78     0%   8-298
rag_factory/strategies/fine_tuned/__init__.py                          4      4     0%   1-5
rag_factory/strategies/fine_tuned/ab_testing.py                       78     78     0%   1-134
rag_factory/strategies/fine_tuned/config.py                           11     11     0%   1-30
rag_factory/strategies/fine_tuned/custom_loader.py                    40     40     0%   1-88
rag_factory/strategies/fine_tuned/model_registry.py                  126    126     0%   1-303
rag_factory/strategies/hierarchical/__init__.py                        5      5     0%   8-21
rag_factory/strategies/hierarchical/hierarchy_builder.py              79     79     0%   8-335
rag_factory/strategies/hierarchical/models.py                         58     58     0%   8-137
rag_factory/strategies/hierarchical/parent_retriever.py               89     89     0%   8-278
rag_factory/strategies/hierarchical/strategy.py                       76     76     0%   9-301
rag_factory/strategies/indexing/__init__.py                            6      0   100%
rag_factory/strategies/indexing/context_aware.py                     108     88    19%   31, 43, 63-134, 155-156, 160-170, 182-188, 192-198, 208-237, 241-242
rag_factory/strategies/indexing/hierarchical.py                       90     73    19%   50, 63, 88-134, 156-185, 201-236, 253-278, 292-293
rag_factory/strategies/indexing/in_memory.py                          41     25    39%   54, 65, 93-121, 143, 160, 173, 194-200
rag_factory/strategies/indexing/keyword_indexing.py                   42     42     0%   8-157
rag_factory/strategies/indexing/knowledge_graph_indexing.py           46     33    28%   18, 27, 48-89, 108-129
rag_factory/strategies/indexing/vector_embedding.py                   98     85    13%   25, 35, 55-116, 137-221
rag_factory/strategies/knowledge_graph/__init__.py                     4      4     0%   8-19
rag_factory/strategies/knowledge_graph/config.py                      21     21     0%   8-129
rag_factory/strategies/knowledge_graph/entity_extractor.py            70     70     0%   7-205
rag_factory/strategies/knowledge_graph/graph_store.py                 31     31     0%   8-124
rag_factory/strategies/knowledge_graph/hybrid_retriever.py            56     56     0%   8-164
rag_factory/strategies/knowledge_graph/memory_graph_store.py          97     97     0%   8-196
rag_factory/strategies/knowledge_graph/models.py                      53     53     0%   8-122
rag_factory/strategies/knowledge_graph/relationship_extractor.py      62     62     0%   8-189
rag_factory/strategies/knowledge_graph/strategy.py                    80     80     0%   8-256
rag_factory/strategies/late_chunking/__init__.py                       6      6     0%   8-21
rag_factory/strategies/late_chunking/coherence_analyzer.py            27     27     0%   7-96
rag_factory/strategies/late_chunking/document_embedder.py            104    104     0%   8-318
rag_factory/strategies/late_chunking/embedding_chunker.py            117    117     0%   7-300
rag_factory/strategies/late_chunking/models.py                        62     62     0%   8-100
rag_factory/strategies/late_chunking/strategy.py                      70     70     0%   8-215
rag_factory/strategies/multi_query/__init__.py                         7      7     0%   8-19
rag_factory/strategies/multi_query/config.py                          36     36     0%   3-138
rag_factory/strategies/multi_query/deduplicator.py                    87     87     0%   3-197
rag_factory/strategies/multi_query/parallel_executor.py               52     52     0%   3-163
rag_factory/strategies/multi_query/prompts.py                         10     10     0%   3-84
rag_factory/strategies/multi_query/ranker.py                          80     80     0%   3-201
rag_factory/strategies/multi_query/strategy.py                        68     68     0%   3-184
rag_factory/strategies/multi_query/variant_generator.py               62     62     0%   3-187
rag_factory/strategies/query_expansion/__init__.py                     8      0   100%
rag_factory/strategies/query_expansion/base.py                        66     10    85%   90, 103, 114-118, 130-133
rag_factory/strategies/query_expansion/cache.py                       52     40    23%   20-22, 38-55, 64-66, 70-73, 81-97, 105-112
rag_factory/strategies/query_expansion/expander_service.py            92     71    23%   36-40, 55-58, 75-148, 159-180, 204-215, 233-234, 242-246, 254, 265-273, 283-284
rag_factory/strategies/query_expansion/hyde_expander.py               19     12    37%   25-27, 41-65
rag_factory/strategies/query_expansion/llm_expander.py                25     16    36%   23-25, 39-71, 99
rag_factory/strategies/query_expansion/metrics.py                     66     30    55%   44-45, 53-57, 76-109, 130, 134, 146-152, 160
rag_factory/strategies/query_expansion/prompts.py                     13      7    46%   16, 28-56, 68-107
rag_factory/strategies/reranking/__init__.py                           7      7     0%   8-21
rag_factory/strategies/reranking/base.py                              68     68     0%   8-130
rag_factory/strategies/reranking/bge_reranker.py                      51     51     0%   8-151
rag_factory/strategies/reranking/cache.py                             48     48     0%   8-138
rag_factory/strategies/reranking/cohere_reranker.py                   34     34     0%   8-119
rag_factory/strategies/reranking/cosine_reranker.py                   62     62     0%   8-249
rag_factory/strategies/reranking/cross_encoder_reranker.py            40     40     0%   8-124
rag_factory/strategies/reranking/metrics.py                           67     67     0%   8-264
rag_factory/strategies/reranking/reranker_service.py                 115    115     0%   8-310
rag_factory/strategies/retrieval/__init__.py                           6      0   100%
rag_factory/strategies/retrieval/keyword_retriever.py                 56     41    27%   41, 52, 71-113, 126-133, 153-172
rag_factory/strategies/retrieval/knowledge_graph_retriever.py         22      9    59%   19, 27, 48-70
rag_factory/strategies/retrieval/multi_query_retriever.py             22      9    59%   19, 26, 44-66
rag_factory/strategies/retrieval/query_expansion_retriever.py         24      9    62%   20, 27, 45-67
rag_factory/strategies/retrieval/semantic_retriever.py                23     12    48%   23, 32, 61-94
rag_factory/strategies/self_reflective/__init__.py                     6      6     0%   3-16
rag_factory/strategies/self_reflective/config.py                      20     20     0%   3-42
rag_factory/strategies/self_reflective/grader.py                      80     80     0%   3-266
rag_factory/strategies/self_reflective/models.py                      48     48     0%   3-109
rag_factory/strategies/self_reflective/refiner.py                     69     69     0%   3-228
rag_factory/strategies/self_reflective/strategy.py                    92     92     0%   3-269
rag_factory/utils/__init__.py                                          3      0   100%
rag_factory/utils/token_counter.py                                    45     30    33%   36-40, 52-62, 74-82, 86, 90, 105-106, 124-135, 153-158
rag_factory/utils/tokenization.py                                     95     73    23%   36-40, 53-64, 87-114, 126-129, 141-144, 156, 175-190, 209-228, 241-243, 251-252, 270-271, 292-293, 314-315
------------------------------------------------------------------------------------------------
TOTAL                                                              12324  10895    12%
============================= 2 warnings in 3.49s ==============================

[67/197] PASSED: tests/unit/cli/test_benchmark_command.py
  Tests: 5 (P:5 F:0 S:0)
[68/197] PASSED: tests/unit/cli/test_check_consistency_command.py
  Tests: 11 (P:11 F:0 S:0)
[69/197] PASSED: tests/unit/cli/test_config_validation_command.py
  Tests: 6 (P:6 F:0 S:0)
[70/197] PASSED: tests/unit/cli/test_consistency_formatter.py
  Tests: 10 (P:10 F:0 S:0)
[71/197] PASSED: tests/unit/cli/test_formatters.py
  Tests: 19 (P:19 F:0 S:0)
[72/197] PASSED: tests/unit/cli/test_index_command.py
  Tests: 5 (P:5 F:0 S:0)
[73/197] PASSED: tests/unit/cli/test_list_strategies_command.py
  Tests: 5 (P:5 F:0 S:0)
[74/197] PASSED: tests/unit/cli/test_query_command.py
  Tests: 5 (P:5 F:0 S:0)
[75/197] PASSED: tests/unit/cli/test_repl_command.py
  Tests: 4 (P:4 F:0 S:0)
[76/197] PASSED: tests/unit/cli/test_validate_pipeline_command.py
  Tests: 8 (P:8 F:0 S:0)
[77/197] PASSED: tests/unit/cli/test_validation_formatter.py
  Tests: 14 (P:14 F:0 S:0)
[78/197] PASSED: tests/unit/cli/test_validation.py
  Tests: 17 (P:17 F:0 S:0)
[79/197] PASSED: tests/unit/config/test_env_resolver.py
  Tests: 24 (P:24 F:0 S:0)
[80/197] PASSED: tests/unit/config/test_env_validator.py
  Tests: 19 (P:19 F:0 S:0)
[81/197] PASSED: tests/unit/config/test_schemas.py
  Tests: 18 (P:18 F:0 S:0)
[82/197] PASSED: tests/unit/config/test_strategy_loader.py
  Tests: 6 (P:6 F:0 S:0)
[83/197] PASSED: tests/unit/config/test_strategy_pair_manager.py
  Tests: 4 (P:4 F:0 S:0)
[84/197] PASSED: tests/unit/config/test_validator.py
  Tests: 23 (P:23 F:0 S:0)
[85/197] PASSED: tests/unit/core/test_capabilities.py
  Tests: 19 (P:19 F:0 S:0)
[86/197] PASSED: tests/unit/core/test_factory_validation.py
  Tests: 7 (P:7 F:0 S:0)
[87/197] PASSED: tests/unit/core/test_indexing_interface.py
  Tests: 27 (P:27 F:0 S:0)
[88/197] PASSED: tests/unit/core/test_pipeline.py
  Tests: 9 (P:9 F:0 S:0)
[89/197] PASSED: tests/unit/core/test_retrieval_interface.py
  Tests: 14 (P:14 F:0 S:0)
[90/197] PASSED: tests/unit/database/test_batch_operations.py
  Tests: 2 (P:2 F:0 S:0)
[91/197] PASSED: tests/unit/database/test_connection.py
  Tests: 14 (P:14 F:0 S:0)
[92/197] PASSED: tests/unit/database/test_migrations.py
  Tests: 7 (P:7 F:0 S:0)
[93/197] PASSED: tests/unit/database/test_models.py
  Tests: 21 (P:21 F:0 S:0)
[94/197] FAILED: tests/unit/database/test_pgvector.py
  Tests: 4 (P:2 F:2 S:0)
----------------------------------------
============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.1, pluggy-1.6.0 -- /mnt/MCPProyects/ragTools/venv/bin/python3
cachedir: .pytest_cache
rootdir: /mnt/MCPProyects/ragTools
configfile: pytest.ini (WARNING: ignoring pytest config in pyproject.toml!)
plugins: anyio-4.12.0, cov-7.0.0, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 3 items

tests/unit/database/test_pgvector.py::TestPgVectorIntegration::test_cosine_similarity_search FAILED [ 33%]
tests/unit/database/test_pgvector.py::TestPgVectorIntegration::test_vector_storage_format PASSED [ 66%]
tests/unit/database/test_pgvector.py::TestPgVectorIntegration::test_empty_chunks_storage PASSED [100%]

=================================== FAILURES ===================================
____________ TestPgVectorIntegration.test_cosine_similarity_search _____________
tests/unit/database/test_pgvector.py:57: in test_cosine_similarity_search
    assert results[0]["chunk_id"] == 'doc_0'
           ^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: 'Chunk' object is not subscriptable
---------------------------- Captured stderr setup -----------------------------
DEBUG:asyncio:Using selector: EpollSelector
DEBUG:asyncio:Using selector: EpollSelector
------------------------------ Captured log setup ------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
----------------------------- Captured stderr call -----------------------------
INFO:rag_factory.services.database.postgres:Initialized PostgreSQL service for localhost:5432/rag_db
DEBUG:rag_factory.services.database.postgres:Searching with embedding dims=3, first 3 values=[1.0, 0.0, 0.0]
DEBUG:rag_factory.services.database.postgres:Found <AsyncMock name='mock.acquire().__aenter__().fetchval()' id='129565985535280'> chunks with embeddings in database
DEBUG:rag_factory.services.database.postgres:Found 2 similar chunks
------------------------------ Captured log call -------------------------------
INFO     rag_factory.services.database.postgres:postgres.py:121 Initialized PostgreSQL service for localhost:5432/rag_db
DEBUG    rag_factory.services.database.postgres:postgres.py:298 Searching with embedding dims=3, first 3 values=[1.0, 0.0, 0.0]
DEBUG    rag_factory.services.database.postgres:postgres.py:303 Found <AsyncMock name='mock.acquire().__aenter__().fetchval()' id='129565985535280'> chunks with embeddings in database
DEBUG    rag_factory.services.database.postgres:postgres.py:340 Found 2 similar chunks
=============================== warnings summary ===============================
rag_factory/services/llm/config.py:8
  /mnt/MCPProyects/ragTools/rag_factory/services/llm/config.py:8: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class LLMServiceConfig(BaseModel):

rag_factory/database/config.py:12
  /mnt/MCPProyects/ragTools/rag_factory/database/config.py:12: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DatabaseConfig(BaseSettings):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.3-final-0 ________________

Name                                                               Stmts   Miss  Cover   Missing
------------------------------------------------------------------------------------------------
rag_factory/__init__.py                                                3      0   100%
rag_factory/__version__.py                                             1      0   100%
rag_factory/cli/__init__.py                                            2      0   100%
rag_factory/cli/commands/__init__.py                                   1      0   100%
rag_factory/cli/commands/benchmark.py                                 96     81    16%   40-53, 64-84, 148-263
rag_factory/cli/commands/check_consistency.py                         43     33    23%   64-120
rag_factory/cli/commands/config.py                                    78     68    13%   26-64, 102-188
rag_factory/cli/commands/index.py                                     65     52    20%   29-39, 93-185
rag_factory/cli/commands/query.py                                     47     36    23%   73-149
rag_factory/cli/commands/repl.py                                     152    130    14%   29-56, 63-108, 112-120, 124-133, 137-155, 159-172, 176-186, 190-207, 211-220, 253-260
rag_factory/cli/commands/strategies.py                                45     36    20%   48-120
rag_factory/cli/commands/validate_e2e.py                              91     69    24%   37-38, 42-142, 145-156
rag_factory/cli/commands/validate_pipeline.py                         70     57    19%   57-156
rag_factory/cli/formatters/__init__.py                                 4      0   100%
rag_factory/cli/formatters/consistency.py                             61     55    10%   21-69, 79-103, 108-138
rag_factory/cli/formatters/output.py                                  20      9    55%   23-24, 43-44, 63-64, 74, 79, 84
rag_factory/cli/formatters/results.py                                 71     62    13%   28-55, 72-99, 116-144, 157-181
rag_factory/cli/formatters/validation.py                              63     53    16%   25-43, 48-56, 65-77, 86-98, 103-129, 134-137
rag_factory/cli/main.py                                               31     10    68%   25-28, 48-49, 76-78, 82
rag_factory/cli/utils/__init__.py                                      3      0   100%
rag_factory/cli/utils/progress.py                                     14      8    43%   34-47, 73-76
rag_factory/cli/utils/validation.py                                   53     42    21%   30-41, 57-77, 93-118, 135
rag_factory/config/__init__.py                                         4      0   100%
rag_factory/config/env_resolver.py                                    52     37    29%   47-54, 70-90, 110, 129-147
rag_factory/config/schemas/__init__.py                                 2      0   100%
rag_factory/config/schemas/version.py                                 10      6    40%   29-38
rag_factory/config/strategy_loader.py                                 54     36    33%   32-41, 45-60, 75-89, 101-104
rag_factory/config/strategy_pair_manager.py                          105     83    21%   40-72, 92-132, 148-198, 210-215, 229, 259-282
rag_factory/config/validator.py                                       93     76    18%   27-30, 34-39, 53-58, 62-74, 111-132, 177-198, 215-235, 247-249, 271-295, 333-354
rag_factory/core/__init__.py                                           4      4     0%   7-23
rag_factory/core/capabilities.py                                      61     16    74%   129, 155, 173-174, 239-253
rag_factory/core/indexing_interface.py                                54     35    35%   55-57, 118-123, 144, 164, 208, 260, 272, 292-313, 341-364
rag_factory/core/pipeline.py                                          49     35    29%   22-24, 33-40, 55-77, 95-96, 105-108, 117-120, 137-146
rag_factory/core/retrieval_interface.py                               38     20    47%   56-58, 112-117, 138, 158, 196, 247, 259, 285-309
rag_factory/database/__init__.py                                       4      0   100%
rag_factory/database/config.py                                        17      0   100%
rag_factory/database/connection.py                                    80     54    32%   40-48, 61-86, 96, 107, 126-137, 150-157, 165-170, 178-183, 196-197, 209-214, 218, 222
rag_factory/database/env_validator.py                                 38     38     0%   7-139
rag_factory/database/models.py                                        85     32    62%   31-34, 37-45, 48-54, 66-69, 72-77, 80-85, 181, 323-325
rag_factory/database/vector_indexing.py                               38     38     0%   7-114
rag_factory/evaluation/__init__.py                                     4      4     0%   29-41
rag_factory/evaluation/analysis/__init__.py                            3      3     0%   8-11
rag_factory/evaluation/analysis/comparison.py                        135    135     0%   8-323
rag_factory/evaluation/analysis/statistics.py                         81     81     0%   8-320
rag_factory/evaluation/benchmarks/__init__.py                          3      3     0%   8-14
rag_factory/evaluation/benchmarks/config.py                           25     25     0%   7-64
rag_factory/evaluation/benchmarks/runner.py                          155    155     0%   8-423
rag_factory/evaluation/datasets/__init__.py                            3      3     0%   8-14
rag_factory/evaluation/datasets/loader.py                             88     88     0%   8-281
rag_factory/evaluation/datasets/schema.py                             52     52     0%   8-160
rag_factory/evaluation/datasets/statistics.py                         65     65     0%   8-226
rag_factory/evaluation/exporters/__init__.py                           4      4     0%   8-12
rag_factory/evaluation/exporters/csv_exporter.py                      52     52     0%   3-124
rag_factory/evaluation/exporters/html_exporter.py                     47     47     0%   3-293
rag_factory/evaluation/exporters/json_exporter.py                     19     19     0%   3-68
rag_factory/evaluation/metrics/__init__.py                             3      3     0%   12-25
rag_factory/evaluation/metrics/base.py                                31     31     0%   8-115
rag_factory/evaluation/metrics/cost.py                                65     65     0%   8-313
rag_factory/evaluation/metrics/performance.py                         42     42     0%   8-202
rag_factory/evaluation/metrics/quality.py                             84     84     0%   8-377
rag_factory/evaluation/metrics/retrieval.py                           77     77     0%   9-401
rag_factory/exceptions.py                                             13      0   100%
rag_factory/factory.py                                               187    137    27%   109-116, 144, 165-170, 202-230, 256-270, 300-324, 347-348, 365, 384, 401, 418, 435, 451-460, 480-502, 528-545, 568-611, 644-699, 703-715
rag_factory/legacy_config.py                                         155    155     0%   22-542
rag_factory/models/__init__.py                                         6      6     0%   3-14
rag_factory/models/embedding/__init__.py                               4      4     0%   3-12
rag_factory/models/embedding/loader.py                               179    179     0%   3-367
rag_factory/models/embedding/models.py                                47     47     0%   3-106
rag_factory/models/embedding/registry.py                             128    128     0%   3-282
rag_factory/models/evaluation/__init__.py                              3      3     0%   3-6
rag_factory/models/evaluation/ab_testing.py                           98     98     0%   3-281
rag_factory/models/evaluation/models.py                               29     29     0%   3-74
rag_factory/observability/__init__.py                                  3      3     0%   3-10
rag_factory/observability/integrations/__init__.py                     1      1     0%   3
rag_factory/observability/integrations/prometheus.py                  47     47     0%   3-229
rag_factory/observability/logging/__init__.py                          2      2     0%   3-5
rag_factory/observability/logging/config.py                           16     16     0%   3-37
rag_factory/observability/logging/filters.py                          41     41     0%   3-103
rag_factory/observability/logging/logger.py                           86     86     0%   3-396
rag_factory/observability/metrics/__init__.py                          2      2     0%   3-9
rag_factory/observability/metrics/collector.py                       143    143     0%   3-459
rag_factory/observability/metrics/cost.py                             39     39     0%   3-221
rag_factory/observability/metrics/performance.py                      64     64     0%   3-196
rag_factory/observability/monitoring/__init__.py                       1      1     0%   3
rag_factory/observability/monitoring/api.py                          101    101     0%   3-328
rag_factory/pipeline.py                                              156    156     0%   34-507
rag_factory/registry/__init__.py                                       4      0   100%
rag_factory/registry/exceptions.py                                     6      0   100%
rag_factory/registry/service_factory.py                               62     49    21%   45-52, 60-63, 68-71, 76-78, 87-105, 118-147, 158-197
rag_factory/registry/service_registry.py                              91     71    22%   43-51, 55-85, 103-156, 164, 178-203, 210-223, 227, 231-232
rag_factory/repositories/__init__.py                                   5      0   100%
rag_factory/repositories/base.py                                      42     21    50%   38, 53, 70, 87, 103, 114-118, 125, 136-139, 159-164
rag_factory/repositories/chunk.py                                    206    180    13%   40-45, 68-76, 90-95, 120-133, 155-171, 187-202, 221-231, 250-261, 287-328, 355-396, 422-474, 489-499, 513-521, 537-543, 557-563, 577-587, 604-626, 639-670
rag_factory/repositories/document.py                                  93     74    20%   41-46, 63-68, 98-118, 140-156, 172-187, 206, 223-233, 247-255, 272-279, 290-293, 307-312
rag_factory/repositories/exceptions.py                                18      7    61%   34-36, 56-59
rag_factory/services/__init__.py                                       4      0   100%
rag_factory/services/api/__init__.py                                   4      4     0%   7-11
rag_factory/services/api/anthropic.py                                 27     27     0%   7-141
rag_factory/services/api/cohere.py                                    30     30     0%   7-113
rag_factory/services/api/openai.py                                    46     46     0%   7-235
rag_factory/services/consistency.py                                   32     24    25%   80-113, 144-170
rag_factory/services/database/__init__.py                              5      0   100%
rag_factory/services/database/database_context.py                    181    159    12%   58-64, 88-106, 123, 140-150, 179-200, 223-240, 256-266, 305-330, 338-339, 343-406, 414-415, 430-510, 516-517, 521-546
rag_factory/services/database/migration_validator.py                  85     63    26%   29-30, 61-69, 81-88, 108-120, 137-141, 152-181, 192-204, 215-222, 234, 246-256, 268-271
rag_factory/services/database/neo4j.py                                54     36    33%   14, 60-71, 79-84, 103-114, 134-150, 172-181, 188-191, 195, 199
rag_factory/services/database/postgres.py                            194    112    42%   17-18, 26-27, 85, 91-103, 132-143, 149-201, 231-235, 239, 241, 245-246, 322-325, 355-370, 385-409, 420-435, 467-485, 499-522, 527, 538, 575-593, 602-614, 618, 622
rag_factory/services/dependencies.py                                  41     21    49%   96-109, 134-140, 176-180
rag_factory/services/embedding/__init__.py                             4      0   100%
rag_factory/services/embedding/base.py                                31      6    81%   44, 59, 68, 77, 86, 98
rag_factory/services/embedding/cache.py                               43     33    23%   26-32, 43-58, 67-76, 80-82, 90-94
rag_factory/services/embedding/config.py                              29     13    55%   37-43, 50-68, 80
rag_factory/services/embedding/providers/__init__.py                   5      0   100%
rag_factory/services/embedding/providers/cohere.py                    53     36    32%   10-20, 55-75, 90-117, 125, 133, 141, 152-153
rag_factory/services/embedding/providers/local.py                     43     27    37%   8-9, 46-67, 83-109, 117, 125, 133, 146
rag_factory/services/embedding/providers/onnx_local.py               114     93    18%   18-19, 87-177, 193-250, 261-308, 319, 327, 335, 348
rag_factory/services/embedding/providers/openai.py                    51     34    33%   10-20, 53-72, 87-108, 116, 124, 132, 143-144
rag_factory/services/embedding/rate_limiter.py                        20     14    30%   27-37, 45-53
rag_factory/services/embedding/service.py                            100     83    17%   50-62, 79-93, 117-198, 220-222, 233-239, 248-266, 273-275
rag_factory/services/interfaces.py                                    35      0   100%
rag_factory/services/llm/__init__.py                                   5      0   100%
rag_factory/services/llm/base.py                                      43      0   100%
rag_factory/services/llm/config.py                                    23     11    52%   42-57
rag_factory/services/llm/prompt_template.py                           43     24    44%   47-82, 97-100, 111-115
rag_factory/services/llm/providers/__init__.py                        12     12     0%   5-22
rag_factory/services/llm/providers/anthropic.py                       57     57     0%   3-205
rag_factory/services/llm/providers/ollama.py                          55     55     0%   3-196
rag_factory/services/llm/providers/openai.py                          57     57     0%   3-210
rag_factory/services/llm/service.py                                   66     51    23%   32-39, 56-70, 93-129, 154-175, 186, 194-198, 215-216
rag_factory/services/llm/token_counter.py                             27     27     0%   3-72
rag_factory/services/local/__init__.py                                 2      2     0%   7-9
rag_factory/services/local/reranker.py                                32     32     0%   7-116
rag_factory/services/onnx/__init__.py                                  2      2     0%   7-9
rag_factory/services/onnx/embedding.py                                29     29     0%   7-129
rag_factory/services/utils/__init__.py                                 2      0   100%
rag_factory/services/utils/model_converter.py                        104    104     0%   8-291
rag_factory/services/utils/onnx_utils.py                             133    114    14%   22-23, 36-37, 67-123, 142-146, 172-218, 240-274, 291-312, 332-347, 360-378, 392-404
rag_factory/services/utils/reranker_selector.py                       68     68     0%   8-249
rag_factory/strategies/__init__.py                                     2      0   100%
rag_factory/strategies/agentic/__init__.py                             7      7     0%   8-20
rag_factory/strategies/agentic/agent.py                              151    151     0%   8-420
rag_factory/strategies/agentic/config.py                              12     12     0%   5-31
rag_factory/strategies/agentic/frameworks/__init__.py                  1      1     0%   9
rag_factory/strategies/agentic/query_analyzer.py                      89     89     0%   8-278
rag_factory/strategies/agentic/strategy.py                            87     87     0%   8-284
rag_factory/strategies/agentic/tool_implementations.py               135    135     0%   11-511
rag_factory/strategies/agentic/tools.py                               40     40     0%   8-142
rag_factory/strategies/base.py                                        55     13    76%   80-85, 169-178
rag_factory/strategies/chunking/__init__.py                           15     15     0%   28-67
rag_factory/strategies/chunking/base.py                               91     91     0%   3-256
rag_factory/strategies/chunking/docling_chunker.py                    45     45     0%   13-188
rag_factory/strategies/chunking/fixed_size_chunker.py                 74     74     0%   3-204
rag_factory/strategies/chunking/hybrid_chunker.py                     70     70     0%   3-192
rag_factory/strategies/chunking/semantic_chunker.py                  195    195     0%   3-534
rag_factory/strategies/chunking/structural_chunker.py                147    147     0%   3-425
rag_factory/strategies/chunking/utils.py                              89     89     0%   3-264
rag_factory/strategies/contextual/__init__.py                          7      7     0%   8-19
rag_factory/strategies/contextual/batch_processor.py                  91     91     0%   8-266
rag_factory/strategies/contextual/config.py                           46     46     0%   8-195
rag_factory/strategies/contextual/context_generator.py                84     84     0%   8-234
rag_factory/strategies/contextual/cost_tracker.py                     32     32     0%   8-126
rag_factory/strategies/contextual/prompts.py                          25     25     0%   8-119
rag_factory/strategies/contextual/storage.py                          44     44     0%   8-118
rag_factory/strategies/contextual/strategy.py                         78     78     0%   8-298
rag_factory/strategies/fine_tuned/__init__.py                          4      4     0%   1-5
rag_factory/strategies/fine_tuned/ab_testing.py                       78     78     0%   1-134
rag_factory/strategies/fine_tuned/config.py                           11     11     0%   1-30
rag_factory/strategies/fine_tuned/custom_loader.py                    40     40     0%   1-88
rag_factory/strategies/fine_tuned/model_registry.py                  126    126     0%   1-303
rag_factory/strategies/hierarchical/__init__.py                        5      5     0%   8-21
rag_factory/strategies/hierarchical/hierarchy_builder.py              79     79     0%   8-335
rag_factory/strategies/hierarchical/models.py                         58     58     0%   8-137
rag_factory/strategies/hierarchical/parent_retriever.py               89     89     0%   8-278
rag_factory/strategies/hierarchical/strategy.py                       76     76     0%   9-301
rag_factory/strategies/indexing/__init__.py                            6      0   100%
rag_factory/strategies/indexing/context_aware.py                     108     88    19%   31, 43, 63-134, 155-156, 160-170, 182-188, 192-198, 208-237, 241-242
rag_factory/strategies/indexing/hierarchical.py                       90     73    19%   50, 63, 88-134, 156-185, 201-236, 253-278, 292-293
rag_factory/strategies/indexing/in_memory.py                          41     25    39%   54, 65, 93-121, 143, 160, 173, 194-200
rag_factory/strategies/indexing/keyword_indexing.py                   42     42     0%   8-157
rag_factory/strategies/indexing/knowledge_graph_indexing.py           46     33    28%   18, 27, 48-89, 108-129
rag_factory/strategies/indexing/vector_embedding.py                   98     85    13%   25, 35, 55-116, 137-221
rag_factory/strategies/knowledge_graph/__init__.py                     4      4     0%   8-19
rag_factory/strategies/knowledge_graph/config.py                      21     21     0%   8-129
rag_factory/strategies/knowledge_graph/entity_extractor.py            70     70     0%   7-205
rag_factory/strategies/knowledge_graph/graph_store.py                 31     31     0%   8-124
rag_factory/strategies/knowledge_graph/hybrid_retriever.py            56     56     0%   8-164
rag_factory/strategies/knowledge_graph/memory_graph_store.py          97     97     0%   8-196
rag_factory/strategies/knowledge_graph/models.py                      53     53     0%   8-122
rag_factory/strategies/knowledge_graph/relationship_extractor.py      62     62     0%   8-189
rag_factory/strategies/knowledge_graph/strategy.py                    80     80     0%   8-256
rag_factory/strategies/late_chunking/__init__.py                       6      6     0%   8-21
rag_factory/strategies/late_chunking/coherence_analyzer.py            27     27     0%   7-96
rag_factory/strategies/late_chunking/document_embedder.py            104    104     0%   8-318
rag_factory/strategies/late_chunking/embedding_chunker.py            117    117     0%   7-300
rag_factory/strategies/late_chunking/models.py                        62     62     0%   8-100
rag_factory/strategies/late_chunking/strategy.py                      70     70     0%   8-215
rag_factory/strategies/multi_query/__init__.py                         7      7     0%   8-19
rag_factory/strategies/multi_query/config.py                          36     36     0%   3-138
rag_factory/strategies/multi_query/deduplicator.py                    87     87     0%   3-197
rag_factory/strategies/multi_query/parallel_executor.py               52     52     0%   3-163
rag_factory/strategies/multi_query/prompts.py                         10     10     0%   3-84
rag_factory/strategies/multi_query/ranker.py                          80     80     0%   3-201
rag_factory/strategies/multi_query/strategy.py                        68     68     0%   3-184
rag_factory/strategies/multi_query/variant_generator.py               62     62     0%   3-187
rag_factory/strategies/query_expansion/__init__.py                     8      0   100%
rag_factory/strategies/query_expansion/base.py                        66     10    85%   90, 103, 114-118, 130-133
rag_factory/strategies/query_expansion/cache.py                       52     40    23%   20-22, 38-55, 64-66, 70-73, 81-97, 105-112
rag_factory/strategies/query_expansion/expander_service.py            92     71    23%   36-40, 55-58, 75-148, 159-180, 204-215, 233-234, 242-246, 254, 265-273, 283-284
rag_factory/strategies/query_expansion/hyde_expander.py               19     12    37%   25-27, 41-65
rag_factory/strategies/query_expansion/llm_expander.py                25     16    36%   23-25, 39-71, 99
rag_factory/strategies/query_expansion/metrics.py                     66     30    55%   44-45, 53-57, 76-109, 130, 134, 146-152, 160
rag_factory/strategies/query_expansion/prompts.py                     13      7    46%   16, 28-56, 68-107
rag_factory/strategies/reranking/__init__.py                           7      7     0%   8-21
rag_factory/strategies/reranking/base.py                              68     68     0%   8-130
rag_factory/strategies/reranking/bge_reranker.py                      51     51     0%   8-151
rag_factory/strategies/reranking/cache.py                             48     48     0%   8-138
rag_factory/strategies/reranking/cohere_reranker.py                   34     34     0%   8-119
rag_factory/strategies/reranking/cosine_reranker.py                   62     62     0%   8-249
rag_factory/strategies/reranking/cross_encoder_reranker.py            40     40     0%   8-124
rag_factory/strategies/reranking/metrics.py                           67     67     0%   8-264
rag_factory/strategies/reranking/reranker_service.py                 115    115     0%   8-310
rag_factory/strategies/retrieval/__init__.py                           6      0   100%
rag_factory/strategies/retrieval/keyword_retriever.py                 56     41    27%   41, 52, 71-113, 126-133, 153-172
rag_factory/strategies/retrieval/knowledge_graph_retriever.py         22      9    59%   19, 27, 48-70
rag_factory/strategies/retrieval/multi_query_retriever.py             22      9    59%   19, 26, 44-66
rag_factory/strategies/retrieval/query_expansion_retriever.py         24      9    62%   20, 27, 45-67
rag_factory/strategies/retrieval/semantic_retriever.py                23     12    48%   23, 32, 61-94
rag_factory/strategies/self_reflective/__init__.py                     6      6     0%   3-16
rag_factory/strategies/self_reflective/config.py                      20     20     0%   3-42
rag_factory/strategies/self_reflective/grader.py                      80     80     0%   3-266
rag_factory/strategies/self_reflective/models.py                      48     48     0%   3-109
rag_factory/strategies/self_reflective/refiner.py                     69     69     0%   3-228
rag_factory/strategies/self_reflective/strategy.py                    92     92     0%   3-269
rag_factory/utils/__init__.py                                          3      0   100%
rag_factory/utils/token_counter.py                                    45     30    33%   36-40, 52-62, 74-82, 86, 90, 105-106, 124-135, 153-158
rag_factory/utils/tokenization.py                                     95     73    23%   36-40, 53-64, 87-114, 126-129, 141-144, 156, 175-190, 209-228, 241-243, 251-252, 270-271, 292-293, 314-315
------------------------------------------------------------------------------------------------
TOTAL                                                              12324  10763    13%
=========================== short test summary info ============================
FAILED tests/unit/database/test_pgvector.py::TestPgVectorIntegration::test_cosine_similarity_search - TypeError: 'Chunk' object is not subscriptable
=================== 1 failed, 2 passed, 2 warnings in 4.13s ====================

[95/197] PASSED: tests/unit/database/test_vector_indexing.py
  Tests: 4 (P:4 F:0 S:0)
[96/197] PASSED: tests/unit/documentation/test_code_examples.py
  Tests: 5 (P:4 F:0 S:1)
[97/197] PASSED: tests/unit/documentation/test_documentation_completeness.py
  Tests: 8 (P:8 F:0 S:0)
[98/197] PASSED: tests/unit/documentation/test_links.py
  Tests: 4 (P:3 F:0 S:1)
[99/197] PASSED: tests/unit/evaluation/test_benchmark_suite.py
  Tests: 15 (P:15 F:0 S:0)
[100/197] PASSED: tests/unit/evaluation/test_comparison.py
  Tests: 14 (P:14 F:0 S:0)
[101/197] PASSED: tests/unit/evaluation/test_dataset_loader.py
  Tests: 14 (P:14 F:0 S:0)
[102/197] PASSED: tests/unit/evaluation/test_export.py
  Tests: 12 (P:12 F:0 S:0)
[103/197] PASSED: tests/unit/evaluation/test_retrieval_metrics.py
  Tests: 22 (P:22 F:0 S:0)
[104/197] PASSED: tests/unit/evaluation/test_statistical_testing.py
  Tests: 21 (P:21 F:0 S:0)
[105/197] PASSED: tests/unit/examples/test_examples_imports.py
  Tests: 7 (P:7 F:0 S:0)
[106/197] PASSED: tests/unit/examples/test_examples_syntax.py
  Tests: 8 (P:8 F:0 S:0)
[107/197] PASSED: tests/unit/examples/test_requirements.py
  Tests: 8 (P:8 F:0 S:0)
[108/197] PASSED: tests/unit/mocks/test_mock_builders.py
  Tests: 12 (P:12 F:0 S:0)
[109/197] PASSED: tests/unit/models/embedding/test_registry.py
  Tests: 22 (P:22 F:0 S:0)
[110/197] PASSED: tests/unit/models/evaluation/test_ab_testing.py
  Tests: 17 (P:17 F:0 S:0)
[111/197] PASSED: tests/unit/observability/test_cost_calculator.py
  Tests: 17 (P:17 F:0 S:0)
[112/197] PASSED: tests/unit/observability/test_filters.py
  Tests: 20 (P:20 F:0 S:0)
[113/197] PASSED: tests/unit/observability/test_logger.py
  Tests: 20 (P:20 F:0 S:0)
[114/197] PASSED: tests/unit/observability/test_metrics_collector.py
  Tests: 28 (P:28 F:0 S:0)
[115/197] PASSED: tests/unit/observability/test_performance_monitor.py
  Tests: 13 (P:13 F:0 S:0)
[116/197] PASSED: tests/unit/registry/test_exceptions.py
  Tests: 3 (P:3 F:0 S:0)
[117/197] PASSED: tests/unit/registry/test_service_factory.py
  Tests: 26 (P:26 F:0 S:0)
[118/197] PASSED: tests/unit/registry/test_service_registry.py
  Tests: 26 (P:26 F:0 S:0)
[119/197] PASSED: tests/unit/registry/test_threading.py
  Tests: 9 (P:9 F:0 S:0)
[120/197] PASSED: tests/unit/repositories/test_chunk_repository.py
  Tests: 32 (P:32 F:0 S:0)
[121/197] PASSED: tests/unit/repositories/test_document_repository.py
  Tests: 25 (P:25 F:0 S:0)
[122/197] PASSED: tests/unit/repositories/test_exceptions.py
  Tests: 12 (P:12 F:0 S:0)
[123/197] PASSED: tests/unit/services/database/test_database_context_crud.py
  Tests: 15 (P:15 F:0 S:0)
[124/197] PASSED: tests/unit/services/database/test_database_context.py
  Tests: 11 (P:11 F:0 S:0)
[125/197] PASSED: tests/unit/services/database/test_database_context_vector.py
  Tests: 8 (P:2 F:0 S:6)
[126/197] PASSED: tests/unit/services/database/test_migration_validator.py
  Tests: 23 (P:23 F:0 S:0)
[127/197] PASSED: tests/unit/services/database/test_postgres_service_context.py
  Tests: 17 (P:17 F:0 S:0)
[128/197] PASSED: tests/unit/services/embeddings/test_onnx_local.py
  Tests: 14 (P:14 F:0 S:0)
[129/197] PASSED: tests/unit/services/embedding/test_cache.py
  Tests: 10 (P:10 F:0 S:0)
[130/197] PASSED: tests/unit/services/embedding/test_onnx_local_provider.py
  Tests: 10 (P:10 F:0 S:0)
[131/197] PASSED: tests/unit/services/embedding/test_openai_provider.py
  Tests: 9 (P:9 F:0 S:0)
[132/197] PASSED: tests/unit/services/embedding/test_rate_limiter.py
  Tests: 7 (P:7 F:0 S:0)
[133/197] PASSED: tests/unit/services/embedding/test_service.py
  Tests: 14 (P:14 F:0 S:0)
[134/197] PASSED: tests/unit/services/llm/test_anthropic_provider.py
  Tests: 10 (P:10 F:0 S:0)
[135/197] PASSED: tests/unit/services/llm/test_ollama_provider.py
  Tests: 10 (P:10 F:0 S:0)
[136/197] PASSED: tests/unit/services/llm/test_openai_provider.py
  Tests: 10 (P:10 F:0 S:0)
[137/197] PASSED: tests/unit/services/llm/test_prompt_template.py
  Tests: 13 (P:13 F:0 S:0)
[138/197] PASSED: tests/unit/services/llm/test_service.py
  Tests: 14 (P:14 F:0 S:0)
[139/197] PASSED: tests/unit/services/test_consistency.py
  Tests: 16 (P:16 F:0 S:0)
[140/197] FAILED: tests/unit/services/test_database_service.py
  Tests: 11 (P:9 F:2 S:0)
----------------------------------------
============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.1, pluggy-1.6.0 -- /mnt/MCPProyects/ragTools/venv/bin/python3
cachedir: .pytest_cache
rootdir: /mnt/MCPProyects/ragTools
configfile: pytest.ini (WARNING: ignoring pytest config in pyproject.toml!)
plugins: anyio-4.12.0, cov-7.0.0, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 10 items

tests/unit/services/test_database_service.py::test_service_initialization PASSED [ 10%]
tests/unit/services/test_database_service.py::test_ensure_table PASSED   [ 20%]
tests/unit/services/test_database_service.py::test_store_chunks PASSED   [ 30%]
tests/unit/services/test_database_service.py::test_store_empty_chunks PASSED [ 40%]
tests/unit/services/test_database_service.py::test_search_chunks FAILED  [ 50%]
tests/unit/services/test_database_service.py::test_get_chunk PASSED      [ 60%]
tests/unit/services/test_database_service.py::test_get_chunk_not_found PASSED [ 70%]
tests/unit/services/test_database_service.py::test_get_chunks_for_documents PASSED [ 80%]
tests/unit/services/test_database_service.py::test_close PASSED          [ 90%]
tests/unit/services/test_database_service.py::test_context_manager PASSED [100%]

=================================== FAILURES ===================================
______________________________ test_search_chunks ______________________________
tests/unit/services/test_database_service.py:135: in test_search_chunks
    assert results[0]["chunk_id"] == "1"
           ^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: 'Chunk' object is not subscriptable
---------------------------- Captured stderr setup -----------------------------
INFO:rag_factory.services.database.postgres:Initialized PostgreSQL service for localhost:5432/test_db
DEBUG:asyncio:Using selector: EpollSelector
------------------------------ Captured log setup ------------------------------
INFO     rag_factory.services.database.postgres:postgres.py:121 Initialized PostgreSQL service for localhost:5432/test_db
DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
----------------------------- Captured stderr call -----------------------------
DEBUG:rag_factory.services.database.postgres:Searching with embedding dims=3, first 3 values=[0.1, 0.2, 0.3]
DEBUG:rag_factory.services.database.postgres:Found <AsyncMock name='mock.fetchval()' id='128066341837840'> chunks with embeddings in database
DEBUG:rag_factory.services.database.postgres:Found 1 similar chunks
------------------------------ Captured log call -------------------------------
DEBUG    rag_factory.services.database.postgres:postgres.py:298 Searching with embedding dims=3, first 3 values=[0.1, 0.2, 0.3]
DEBUG    rag_factory.services.database.postgres:postgres.py:303 Found <AsyncMock name='mock.fetchval()' id='128066341837840'> chunks with embeddings in database
DEBUG    rag_factory.services.database.postgres:postgres.py:340 Found 1 similar chunks
=============================== warnings summary ===============================
rag_factory/services/llm/config.py:8
  /mnt/MCPProyects/ragTools/rag_factory/services/llm/config.py:8: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class LLMServiceConfig(BaseModel):

rag_factory/database/config.py:12
  /mnt/MCPProyects/ragTools/rag_factory/database/config.py:12: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DatabaseConfig(BaseSettings):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.3-final-0 ________________

Name                                                               Stmts   Miss  Cover   Missing
------------------------------------------------------------------------------------------------
rag_factory/__init__.py                                                3      0   100%
rag_factory/__version__.py                                             1      0   100%
rag_factory/cli/__init__.py                                            2      0   100%
rag_factory/cli/commands/__init__.py                                   1      0   100%
rag_factory/cli/commands/benchmark.py                                 96     81    16%   40-53, 64-84, 148-263
rag_factory/cli/commands/check_consistency.py                         43     33    23%   64-120
rag_factory/cli/commands/config.py                                    78     68    13%   26-64, 102-188
rag_factory/cli/commands/index.py                                     65     52    20%   29-39, 93-185
rag_factory/cli/commands/query.py                                     47     36    23%   73-149
rag_factory/cli/commands/repl.py                                     152    130    14%   29-56, 63-108, 112-120, 124-133, 137-155, 159-172, 176-186, 190-207, 211-220, 253-260
rag_factory/cli/commands/strategies.py                                45     36    20%   48-120
rag_factory/cli/commands/validate_e2e.py                              91     69    24%   37-38, 42-142, 145-156
rag_factory/cli/commands/validate_pipeline.py                         70     57    19%   57-156
rag_factory/cli/formatters/__init__.py                                 4      0   100%
rag_factory/cli/formatters/consistency.py                             61     55    10%   21-69, 79-103, 108-138
rag_factory/cli/formatters/output.py                                  20      9    55%   23-24, 43-44, 63-64, 74, 79, 84
rag_factory/cli/formatters/results.py                                 71     62    13%   28-55, 72-99, 116-144, 157-181
rag_factory/cli/formatters/validation.py                              63     53    16%   25-43, 48-56, 65-77, 86-98, 103-129, 134-137
rag_factory/cli/main.py                                               31     10    68%   25-28, 48-49, 76-78, 82
rag_factory/cli/utils/__init__.py                                      3      0   100%
rag_factory/cli/utils/progress.py                                     14      8    43%   34-47, 73-76
rag_factory/cli/utils/validation.py                                   53     42    21%   30-41, 57-77, 93-118, 135
rag_factory/config/__init__.py                                         4      0   100%
rag_factory/config/env_resolver.py                                    52     37    29%   47-54, 70-90, 110, 129-147
rag_factory/config/schemas/__init__.py                                 2      0   100%
rag_factory/config/schemas/version.py                                 10      6    40%   29-38
rag_factory/config/strategy_loader.py                                 54     36    33%   32-41, 45-60, 75-89, 101-104
rag_factory/config/strategy_pair_manager.py                          105     83    21%   40-72, 92-132, 148-198, 210-215, 229, 259-282
rag_factory/config/validator.py                                       93     76    18%   27-30, 34-39, 53-58, 62-74, 111-132, 177-198, 215-235, 247-249, 271-295, 333-354
rag_factory/core/__init__.py                                           4      4     0%   7-23
rag_factory/core/capabilities.py                                      61     16    74%   129, 155, 173-174, 239-253
rag_factory/core/indexing_interface.py                                54     35    35%   55-57, 118-123, 144, 164, 208, 260, 272, 292-313, 341-364
rag_factory/core/pipeline.py                                          49     35    29%   22-24, 33-40, 55-77, 95-96, 105-108, 117-120, 137-146
rag_factory/core/retrieval_interface.py                               38     20    47%   56-58, 112-117, 138, 158, 196, 247, 259, 285-309
rag_factory/database/__init__.py                                       4      0   100%
rag_factory/database/config.py                                        17      0   100%
rag_factory/database/connection.py                                    80     54    32%   40-48, 61-86, 96, 107, 126-137, 150-157, 165-170, 178-183, 196-197, 209-214, 218, 222
rag_factory/database/env_validator.py                                 38     38     0%   7-139
rag_factory/database/models.py                                        85     32    62%   31-34, 37-45, 48-54, 66-69, 72-77, 80-85, 181, 323-325
rag_factory/database/vector_indexing.py                               38     38     0%   7-114
rag_factory/evaluation/__init__.py                                     4      4     0%   29-41
rag_factory/evaluation/analysis/__init__.py                            3      3     0%   8-11
rag_factory/evaluation/analysis/comparison.py                        135    135     0%   8-323
rag_factory/evaluation/analysis/statistics.py                         81     81     0%   8-320
rag_factory/evaluation/benchmarks/__init__.py                          3      3     0%   8-14
rag_factory/evaluation/benchmarks/config.py                           25     25     0%   7-64
rag_factory/evaluation/benchmarks/runner.py                          155    155     0%   8-423
rag_factory/evaluation/datasets/__init__.py                            3      3     0%   8-14
rag_factory/evaluation/datasets/loader.py                             88     88     0%   8-281
rag_factory/evaluation/datasets/schema.py                             52     52     0%   8-160
rag_factory/evaluation/datasets/statistics.py                         65     65     0%   8-226
rag_factory/evaluation/exporters/__init__.py                           4      4     0%   8-12
rag_factory/evaluation/exporters/csv_exporter.py                      52     52     0%   3-124
rag_factory/evaluation/exporters/html_exporter.py                     47     47     0%   3-293
rag_factory/evaluation/exporters/json_exporter.py                     19     19     0%   3-68
rag_factory/evaluation/metrics/__init__.py                             3      3     0%   12-25
rag_factory/evaluation/metrics/base.py                                31     31     0%   8-115
rag_factory/evaluation/metrics/cost.py                                65     65     0%   8-313
rag_factory/evaluation/metrics/performance.py                         42     42     0%   8-202
rag_factory/evaluation/metrics/quality.py                             84     84     0%   8-377
rag_factory/evaluation/metrics/retrieval.py                           77     77     0%   9-401
rag_factory/exceptions.py                                             13      0   100%
rag_factory/factory.py                                               187    137    27%   109-116, 144, 165-170, 202-230, 256-270, 300-324, 347-348, 365, 384, 401, 418, 435, 451-460, 480-502, 528-545, 568-611, 644-699, 703-715
rag_factory/legacy_config.py                                         155    155     0%   22-542
rag_factory/models/__init__.py                                         6      6     0%   3-14
rag_factory/models/embedding/__init__.py                               4      4     0%   3-12
rag_factory/models/embedding/loader.py                               179    179     0%   3-367
rag_factory/models/embedding/models.py                                47     47     0%   3-106
rag_factory/models/embedding/registry.py                             128    128     0%   3-282
rag_factory/models/evaluation/__init__.py                              3      3     0%   3-6
rag_factory/models/evaluation/ab_testing.py                           98     98     0%   3-281
rag_factory/models/evaluation/models.py                               29     29     0%   3-74
rag_factory/observability/__init__.py                                  3      3     0%   3-10
rag_factory/observability/integrations/__init__.py                     1      1     0%   3
rag_factory/observability/integrations/prometheus.py                  47     47     0%   3-229
rag_factory/observability/logging/__init__.py                          2      2     0%   3-5
rag_factory/observability/logging/config.py                           16     16     0%   3-37
rag_factory/observability/logging/filters.py                          41     41     0%   3-103
rag_factory/observability/logging/logger.py                           86     86     0%   3-396
rag_factory/observability/metrics/__init__.py                          2      2     0%   3-9
rag_factory/observability/metrics/collector.py                       143    143     0%   3-459
rag_factory/observability/metrics/cost.py                             39     39     0%   3-221
rag_factory/observability/metrics/performance.py                      64     64     0%   3-196
rag_factory/observability/monitoring/__init__.py                       1      1     0%   3
rag_factory/observability/monitoring/api.py                          101    101     0%   3-328
rag_factory/pipeline.py                                              156    156     0%   34-507
rag_factory/registry/__init__.py                                       4      0   100%
rag_factory/registry/exceptions.py                                     6      0   100%
rag_factory/registry/service_factory.py                               62     49    21%   45-52, 60-63, 68-71, 76-78, 87-105, 118-147, 158-197
rag_factory/registry/service_registry.py                              91     71    22%   43-51, 55-85, 103-156, 164, 178-203, 210-223, 227, 231-232
rag_factory/repositories/__init__.py                                   5      0   100%
rag_factory/repositories/base.py                                      42     21    50%   38, 53, 70, 87, 103, 114-118, 125, 136-139, 159-164
rag_factory/repositories/chunk.py                                    206    180    13%   40-45, 68-76, 90-95, 120-133, 155-171, 187-202, 221-231, 250-261, 287-328, 355-396, 422-474, 489-499, 513-521, 537-543, 557-563, 577-587, 604-626, 639-670
rag_factory/repositories/document.py                                  93     74    20%   41-46, 63-68, 98-118, 140-156, 172-187, 206, 223-233, 247-255, 272-279, 290-293, 307-312
rag_factory/repositories/exceptions.py                                18      7    61%   34-36, 56-59
rag_factory/services/__init__.py                                       4      0   100%
rag_factory/services/api/__init__.py                                   4      4     0%   7-11
rag_factory/services/api/anthropic.py                                 27     27     0%   7-141
rag_factory/services/api/cohere.py                                    30     30     0%   7-113
rag_factory/services/api/openai.py                                    46     46     0%   7-235
rag_factory/services/consistency.py                                   32     24    25%   80-113, 144-170
rag_factory/services/database/__init__.py                              5      0   100%
rag_factory/services/database/database_context.py                    181    159    12%   58-64, 88-106, 123, 140-150, 179-200, 223-240, 256-266, 305-330, 338-339, 343-406, 414-415, 430-510, 516-517, 521-546
rag_factory/services/database/migration_validator.py                  85     63    26%   29-30, 61-69, 81-88, 108-120, 137-141, 152-181, 192-204, 215-222, 234, 246-256, 268-271
rag_factory/services/database/neo4j.py                                54     36    33%   14, 60-71, 79-84, 103-114, 134-150, 172-181, 188-191, 195, 199
rag_factory/services/database/postgres.py                            194     73    62%   17-18, 26-27, 85, 91-103, 187-189, 231-235, 239, 241, 245-246, 322-325, 385-409, 421, 467-485, 499-522, 527, 538, 575-593, 609-611
rag_factory/services/dependencies.py                                  41     21    49%   96-109, 134-140, 176-180
rag_factory/services/embedding/__init__.py                             4      0   100%
rag_factory/services/embedding/base.py                                31      6    81%   44, 59, 68, 77, 86, 98
rag_factory/services/embedding/cache.py                               43     33    23%   26-32, 43-58, 67-76, 80-82, 90-94
rag_factory/services/embedding/config.py                              29     13    55%   37-43, 50-68, 80
rag_factory/services/embedding/providers/__init__.py                   5      0   100%
rag_factory/services/embedding/providers/cohere.py                    53     36    32%   10-20, 55-75, 90-117, 125, 133, 141, 152-153
rag_factory/services/embedding/providers/local.py                     43     27    37%   8-9, 46-67, 83-109, 117, 125, 133, 146
rag_factory/services/embedding/providers/onnx_local.py               114     93    18%   18-19, 87-177, 193-250, 261-308, 319, 327, 335, 348
rag_factory/services/embedding/providers/openai.py                    51     34    33%   10-20, 53-72, 87-108, 116, 124, 132, 143-144
rag_factory/services/embedding/rate_limiter.py                        20     14    30%   27-37, 45-53
rag_factory/services/embedding/service.py                            100     83    17%   50-62, 79-93, 117-198, 220-222, 233-239, 248-266, 273-275
rag_factory/services/interfaces.py                                    35      0   100%
rag_factory/services/llm/__init__.py                                   5      0   100%
rag_factory/services/llm/base.py                                      43      0   100%
rag_factory/services/llm/config.py                                    23     11    52%   42-57
rag_factory/services/llm/prompt_template.py                           43     24    44%   47-82, 97-100, 111-115
rag_factory/services/llm/providers/__init__.py                        12     12     0%   5-22
rag_factory/services/llm/providers/anthropic.py                       57     57     0%   3-205
rag_factory/services/llm/providers/ollama.py                          55     55     0%   3-196
rag_factory/services/llm/providers/openai.py                          57     57     0%   3-210
rag_factory/services/llm/service.py                                   66     51    23%   32-39, 56-70, 93-129, 154-175, 186, 194-198, 215-216
rag_factory/services/llm/token_counter.py                             27     27     0%   3-72
rag_factory/services/local/__init__.py                                 2      2     0%   7-9
rag_factory/services/local/reranker.py                                32     32     0%   7-116
rag_factory/services/onnx/__init__.py                                  2      2     0%   7-9
rag_factory/services/onnx/embedding.py                                29     29     0%   7-129
rag_factory/services/utils/__init__.py                                 2      0   100%
rag_factory/services/utils/model_converter.py                        104    104     0%   8-291
rag_factory/services/utils/onnx_utils.py                             133    114    14%   22-23, 36-37, 67-123, 142-146, 172-218, 240-274, 291-312, 332-347, 360-378, 392-404
rag_factory/services/utils/reranker_selector.py                       68     68     0%   8-249
rag_factory/strategies/__init__.py                                     2      0   100%
rag_factory/strategies/agentic/__init__.py                             7      7     0%   8-20
rag_factory/strategies/agentic/agent.py                              151    151     0%   8-420
rag_factory/strategies/agentic/config.py                              12     12     0%   5-31
rag_factory/strategies/agentic/frameworks/__init__.py                  1      1     0%   9
rag_factory/strategies/agentic/query_analyzer.py                      89     89     0%   8-278
rag_factory/strategies/agentic/strategy.py                            87     87     0%   8-284
rag_factory/strategies/agentic/tool_implementations.py               135    135     0%   11-511
rag_factory/strategies/agentic/tools.py                               40     40     0%   8-142
rag_factory/strategies/base.py                                        55     13    76%   80-85, 169-178
rag_factory/strategies/chunking/__init__.py                           15     15     0%   28-67
rag_factory/strategies/chunking/base.py                               91     91     0%   3-256
rag_factory/strategies/chunking/docling_chunker.py                    45     45     0%   13-188
rag_factory/strategies/chunking/fixed_size_chunker.py                 74     74     0%   3-204
rag_factory/strategies/chunking/hybrid_chunker.py                     70     70     0%   3-192
rag_factory/strategies/chunking/semantic_chunker.py                  195    195     0%   3-534
rag_factory/strategies/chunking/structural_chunker.py                147    147     0%   3-425
rag_factory/strategies/chunking/utils.py                              89     89     0%   3-264
rag_factory/strategies/contextual/__init__.py                          7      7     0%   8-19
rag_factory/strategies/contextual/batch_processor.py                  91     91     0%   8-266
rag_factory/strategies/contextual/config.py                           46     46     0%   8-195
rag_factory/strategies/contextual/context_generator.py                84     84     0%   8-234
rag_factory/strategies/contextual/cost_tracker.py                     32     32     0%   8-126
rag_factory/strategies/contextual/prompts.py                          25     25     0%   8-119
rag_factory/strategies/contextual/storage.py                          44     44     0%   8-118
rag_factory/strategies/contextual/strategy.py                         78     78     0%   8-298
rag_factory/strategies/fine_tuned/__init__.py                          4      4     0%   1-5
rag_factory/strategies/fine_tuned/ab_testing.py                       78     78     0%   1-134
rag_factory/strategies/fine_tuned/config.py                           11     11     0%   1-30
rag_factory/strategies/fine_tuned/custom_loader.py                    40     40     0%   1-88
rag_factory/strategies/fine_tuned/model_registry.py                  126    126     0%   1-303
rag_factory/strategies/hierarchical/__init__.py                        5      5     0%   8-21
rag_factory/strategies/hierarchical/hierarchy_builder.py              79     79     0%   8-335
rag_factory/strategies/hierarchical/models.py                         58     58     0%   8-137
rag_factory/strategies/hierarchical/parent_retriever.py               89     89     0%   8-278
rag_factory/strategies/hierarchical/strategy.py                       76     76     0%   9-301
rag_factory/strategies/indexing/__init__.py                            6      0   100%
rag_factory/strategies/indexing/context_aware.py                     108     88    19%   31, 43, 63-134, 155-156, 160-170, 182-188, 192-198, 208-237, 241-242
rag_factory/strategies/indexing/hierarchical.py                       90     73    19%   50, 63, 88-134, 156-185, 201-236, 253-278, 292-293
rag_factory/strategies/indexing/in_memory.py                          41     25    39%   54, 65, 93-121, 143, 160, 173, 194-200
rag_factory/strategies/indexing/keyword_indexing.py                   42     42     0%   8-157
rag_factory/strategies/indexing/knowledge_graph_indexing.py           46     33    28%   18, 27, 48-89, 108-129
rag_factory/strategies/indexing/vector_embedding.py                   98     85    13%   25, 35, 55-116, 137-221
rag_factory/strategies/knowledge_graph/__init__.py                     4      4     0%   8-19
rag_factory/strategies/knowledge_graph/config.py                      21     21     0%   8-129
rag_factory/strategies/knowledge_graph/entity_extractor.py            70     70     0%   7-205
rag_factory/strategies/knowledge_graph/graph_store.py                 31     31     0%   8-124
rag_factory/strategies/knowledge_graph/hybrid_retriever.py            56     56     0%   8-164
rag_factory/strategies/knowledge_graph/memory_graph_store.py          97     97     0%   8-196
rag_factory/strategies/knowledge_graph/models.py                      53     53     0%   8-122
rag_factory/strategies/knowledge_graph/relationship_extractor.py      62     62     0%   8-189
rag_factory/strategies/knowledge_graph/strategy.py                    80     80     0%   8-256
rag_factory/strategies/late_chunking/__init__.py                       6      6     0%   8-21
rag_factory/strategies/late_chunking/coherence_analyzer.py            27     27     0%   7-96
rag_factory/strategies/late_chunking/document_embedder.py            104    104     0%   8-318
rag_factory/strategies/late_chunking/embedding_chunker.py            117    117     0%   7-300
rag_factory/strategies/late_chunking/models.py                        62     62     0%   8-100
rag_factory/strategies/late_chunking/strategy.py                      70     70     0%   8-215
rag_factory/strategies/multi_query/__init__.py                         7      7     0%   8-19
rag_factory/strategies/multi_query/config.py                          36     36     0%   3-138
rag_factory/strategies/multi_query/deduplicator.py                    87     87     0%   3-197
rag_factory/strategies/multi_query/parallel_executor.py               52     52     0%   3-163
rag_factory/strategies/multi_query/prompts.py                         10     10     0%   3-84
rag_factory/strategies/multi_query/ranker.py                          80     80     0%   3-201
rag_factory/strategies/multi_query/strategy.py                        68     68     0%   3-184
rag_factory/strategies/multi_query/variant_generator.py               62     62     0%   3-187
rag_factory/strategies/query_expansion/__init__.py                     8      0   100%
rag_factory/strategies/query_expansion/base.py                        66     10    85%   90, 103, 114-118, 130-133
rag_factory/strategies/query_expansion/cache.py                       52     40    23%   20-22, 38-55, 64-66, 70-73, 81-97, 105-112
rag_factory/strategies/query_expansion/expander_service.py            92     71    23%   36-40, 55-58, 75-148, 159-180, 204-215, 233-234, 242-246, 254, 265-273, 283-284
rag_factory/strategies/query_expansion/hyde_expander.py               19     12    37%   25-27, 41-65
rag_factory/strategies/query_expansion/llm_expander.py                25     16    36%   23-25, 39-71, 99
rag_factory/strategies/query_expansion/metrics.py                     66     30    55%   44-45, 53-57, 76-109, 130, 134, 146-152, 160
rag_factory/strategies/query_expansion/prompts.py                     13      7    46%   16, 28-56, 68-107
rag_factory/strategies/reranking/__init__.py                           7      7     0%   8-21
rag_factory/strategies/reranking/base.py                              68     68     0%   8-130
rag_factory/strategies/reranking/bge_reranker.py                      51     51     0%   8-151
rag_factory/strategies/reranking/cache.py                             48     48     0%   8-138
rag_factory/strategies/reranking/cohere_reranker.py                   34     34     0%   8-119
rag_factory/strategies/reranking/cosine_reranker.py                   62     62     0%   8-249
rag_factory/strategies/reranking/cross_encoder_reranker.py            40     40     0%   8-124
rag_factory/strategies/reranking/metrics.py                           67     67     0%   8-264
rag_factory/strategies/reranking/reranker_service.py                 115    115     0%   8-310
rag_factory/strategies/retrieval/__init__.py                           6      0   100%
rag_factory/strategies/retrieval/keyword_retriever.py                 56     41    27%   41, 52, 71-113, 126-133, 153-172
rag_factory/strategies/retrieval/knowledge_graph_retriever.py         22      9    59%   19, 27, 48-70
rag_factory/strategies/retrieval/multi_query_retriever.py             22      9    59%   19, 26, 44-66
rag_factory/strategies/retrieval/query_expansion_retriever.py         24      9    62%   20, 27, 45-67
rag_factory/strategies/retrieval/semantic_retriever.py                23     12    48%   23, 32, 61-94
rag_factory/strategies/self_reflective/__init__.py                     6      6     0%   3-16
rag_factory/strategies/self_reflective/config.py                      20     20     0%   3-42
rag_factory/strategies/self_reflective/grader.py                      80     80     0%   3-266
rag_factory/strategies/self_reflective/models.py                      48     48     0%   3-109
rag_factory/strategies/self_reflective/refiner.py                     69     69     0%   3-228
rag_factory/strategies/self_reflective/strategy.py                    92     92     0%   3-269
rag_factory/utils/__init__.py                                          3      0   100%
rag_factory/utils/token_counter.py                                    45     30    33%   36-40, 52-62, 74-82, 86, 90, 105-106, 124-135, 153-158
rag_factory/utils/tokenization.py                                     95     73    23%   36-40, 53-64, 87-114, 126-129, 141-144, 156, 175-190, 209-228, 241-243, 251-252, 270-271, 292-293, 314-315
------------------------------------------------------------------------------------------------
TOTAL                                                              12324  10724    13%
=========================== short test summary info ============================
FAILED tests/unit/services/test_database_service.py::test_search_chunks - TypeError: 'Chunk' object is not subscriptable
=================== 1 failed, 9 passed, 2 warnings in 4.51s ====================

[141/197] PASSED: tests/unit/services/test_dependencies.py
  Tests: 17 (P:17 F:0 S:0)
[142/197] PASSED: tests/unit/services/test_graph_interface.py
  Tests: 6 (P:6 F:0 S:0)
[143/197] PASSED: tests/unit/services/test_interfaces.py
  Tests: 21 (P:21 F:0 S:0)
[144/197] PASSED: tests/unit/services/test_reranking_interface.py
  Tests: 4 (P:4 F:0 S:0)
[145/197] PASSED: tests/unit/services/utils/test_onnx_utils.py
  Tests: 17 (P:17 F:0 S:0)
[146/197] PASSED: tests/unit/strategies/agentic/test_agent.py
  Tests: 16 (P:16 F:0 S:0)
[147/197] PASSED: tests/unit/strategies/agentic/test_query_analyzer.py
  Tests: 16 (P:16 F:0 S:0)
[148/197] PASSED: tests/unit/strategies/agentic/test_strategy.py
  Tests: 11 (P:11 F:0 S:0)
[149/197] PASSED: tests/unit/strategies/agentic/test_tools.py
  Tests: 11 (P:11 F:0 S:0)
[150/197] PASSED: tests/unit/strategies/chunking/test_docling_chunker.py
  Tests: 6 (P:4 F:0 S:2)
[151/197] PASSED: tests/unit/strategies/chunking/test_fixed_size_chunker.py
  Tests: 13 (P:13 F:0 S:0)
[152/197] PASSED: tests/unit/strategies/chunking/test_hybrid_chunker.py
  Tests: 12 (P:12 F:0 S:0)
[153/197] PASSED: tests/unit/strategies/chunking/test_semantic_chunker.py
  Tests: 14 (P:14 F:0 S:0)
[154/197] PASSED: tests/unit/strategies/chunking/test_structural_chunker.py
  Tests: 15 (P:15 F:0 S:0)
[155/197] PASSED: tests/unit/strategies/contextual/test_batch_processor.py
  Tests: 7 (P:7 F:0 S:0)
[156/197] PASSED: tests/unit/strategies/contextual/test_context_generator.py
  Tests: 9 (P:9 F:0 S:0)
[157/197] PASSED: tests/unit/strategies/contextual/test_cost_tracker.py
  Tests: 9 (P:9 F:0 S:0)
[158/197] PASSED: tests/unit/strategies/contextual/test_storage.py
  Tests: 8 (P:8 F:0 S:0)
[159/197] PASSED: tests/unit/strategies/fine_tuned/test_ab_testing.py
  Tests: 3 (P:3 F:0 S:0)
[160/197] PASSED: tests/unit/strategies/fine_tuned/test_custom_loader.py
  Tests: 3 (P:3 F:0 S:0)
[161/197] PASSED: tests/unit/strategies/fine_tuned/test_model_registry.py
  Tests: 5 (P:5 F:0 S:0)
[162/197] PASSED: tests/unit/strategies/hierarchical/test_hierarchy_builder.py
  Tests: 14 (P:14 F:0 S:0)
[163/197] PASSED: tests/unit/strategies/hierarchical/test_parent_retriever.py
  Tests: 8 (P:8 F:0 S:0)
[164/197] PASSED: tests/unit/strategies/indexing/test_context_aware.py
  Tests: 9 (P:9 F:0 S:0)
[165/197] PASSED: tests/unit/strategies/knowledge_graph/test_entity_extractor.py
  Tests: 6 (P:6 F:0 S:0)
[166/197] PASSED: tests/unit/strategies/knowledge_graph/test_hybrid_retriever.py
  Tests: 7 (P:7 F:0 S:0)
[167/197] PASSED: tests/unit/strategies/knowledge_graph/test_memory_graph_store.py
  Tests: 8 (P:8 F:0 S:0)
[168/197] PASSED: tests/unit/strategies/late_chunking/test_coherence_analyzer.py
  Tests: 7 (P:7 F:0 S:0)
[169/197] PASSED: tests/unit/strategies/late_chunking/test_document_embedder.py
  Tests: 13 (P:13 F:0 S:0)
[170/197] PASSED: tests/unit/strategies/late_chunking/test_embedding_chunker.py
  Tests: 12 (P:12 F:0 S:0)
[171/197] PASSED: tests/unit/strategies/multi_query/test_deduplicator.py
  Tests: 7 (P:7 F:0 S:0)
[172/197] PASSED: tests/unit/strategies/multi_query/test_parallel_executor.py
  Tests: 6 (P:6 F:0 S:0)
[173/197] PASSED: tests/unit/strategies/multi_query/test_ranker.py
  Tests: 7 (P:7 F:0 S:0)
[174/197] PASSED: tests/unit/strategies/multi_query/test_variant_generator.py
  Tests: 7 (P:7 F:0 S:0)
[175/197] PASSED: tests/unit/strategies/query_expansion/test_base.py
  Tests: 13 (P:13 F:0 S:0)
[176/197] PASSED: tests/unit/strategies/query_expansion/test_expander_service.py
  Tests: 15 (P:15 F:0 S:0)
[177/197] PASSED: tests/unit/strategies/query_expansion/test_llm_expander.py
  Tests: 11 (P:11 F:0 S:0)
[178/197] PASSED: tests/unit/strategies/query_expansion/test_prompts.py
  Tests: 12 (P:12 F:0 S:0)
[179/197] PASSED: tests/unit/strategies/reranking/test_base.py
  Tests: 14 (P:14 F:0 S:0)
[180/197] PASSED: tests/unit/strategies/reranking/test_cache.py
  Tests: 13 (P:13 F:0 S:0)
[181/197] PASSED: tests/unit/strategies/reranking/test_cosine_reranker.py
  Tests: 17 (P:17 F:0 S:0)
[182/197] PASSED: tests/unit/strategies/reranking/test_cross_encoder_reranker.py
  Tests: 10 (P:1 F:0 S:9)
[183/197] PASSED: tests/unit/strategies/reranking/test_metrics.py
  Tests: 36 (P:36 F:0 S:0)
[184/197] PASSED: tests/unit/strategies/reranking/test_reranker_selector.py
  Tests: 21 (P:21 F:0 S:0)
[185/197] PASSED: tests/unit/strategies/reranking/test_reranker_service.py
  Tests: 16 (P:16 F:0 S:0)
[186/197] PASSED: tests/unit/strategies/self_reflective/test_grader.py
  Tests: 8 (P:8 F:0 S:0)
[187/197] PASSED: tests/unit/strategies/self_reflective/test_refiner.py
  Tests: 8 (P:8 F:0 S:0)
[188/197] PASSED: tests/unit/strategies/self_reflective/test_strategy.py
  Tests: 8 (P:8 F:0 S:0)
[189/197] PASSED: tests/unit/strategies/test_base.py
  Tests: 16 (P:16 F:0 S:0)
[190/197] PASSED: tests/unit/strategies/test_base_strategy_di.py
  Tests: 10 (P:10 F:0 S:0)
[191/197] PASSED: tests/unit/test_config.py
  Tests: 38 (P:38 F:0 S:0)
[192/197] PASSED: tests/unit/test_factory_di.py
  Tests: 22 (P:22 F:0 S:0)
[193/197] PASSED: tests/unit/test_factory.py
  Tests: 29 (P:29 F:0 S:0)
[194/197] PASSED: tests/unit/test_package.py
  Tests: 12 (P:12 F:0 S:0)
[195/197] PASSED: tests/unit/test_pipeline.py
  Tests: 24 (P:24 F:0 S:0)
[196/197] PASSED: tests/unit/utils/test_token_counter.py
  Tests: 21 (P:21 F:0 S:0)
[197/197] PASSED: tests/unit/utils/test_tokenization.py
  Tests: 25 (P:25 F:0 S:0)
