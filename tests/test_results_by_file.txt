[1/206] PASSED: tests/benchmarks/test_contextual_performance.py
  Tests: 6 (P:6 F:0 S:0)
[2/206] PASSED: tests/benchmarks/test_late_chunking_performance.py
  Tests: 8 (P:8 F:0 S:0)
[3/206] ALL_SKIPPED: tests/benchmarks/test_model_comparison_performance.py
  Tests: 6 (P:0 F:0 S:6)
[4/206] PASSED: tests/integration/cli/test_benchmark_integration.py
  Tests: 1 (P:1 F:0 S:0)
[5/206] PASSED: tests/integration/cli/test_config_validation_integration.py
  Tests: 2 (P:2 F:0 S:0)
[6/206] PASSED: tests/integration/cli/test_index_query_flow.py
  Tests: 11 (P:11 F:0 S:0)
[7/206] PASSED: tests/integration/config/test_config_integration.py
  Tests: 9 (P:9 F:0 S:0)
[8/206] PASSED: tests/integration/database/test_database_integration.py
  Tests: 14 (P:13 F:0 S:1)
[9/206] FAILED: tests/integration/database/test_migration_integration.py
  Tests: 8 (P:0 F:8 S:0)
----------------------------------------
============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.1, pluggy-1.6.0 -- /mnt/MCPProyects/ragTools/venv/bin/python3
cachedir: .pytest_cache
rootdir: /mnt/MCPProyects/ragTools
configfile: pytest.ini (WARNING: ignoring pytest config in pyproject.toml!)
plugins: anyio-4.12.0, cov-7.0.0, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 4 items

tests/integration/database/test_migration_integration.py::TestMigrationIntegration::test_real_migration_execution FAILED [ 25%]
tests/integration/database/test_migration_integration.py::TestMigrationIntegration::test_migration_with_existing_data FAILED [ 50%]
tests/integration/database/test_migration_integration.py::TestMigrationIntegration::test_rollback_functionality FAILED [ 75%]
tests/integration/database/test_migration_integration.py::TestMigrationIntegration::test_pgvector_extension_installed FAILED [100%]

=================================== FAILURES ===================================
____________ TestMigrationIntegration.test_real_migration_execution ____________
venv/lib/python3.12/site-packages/alembic/script/base.py:251: in _catch_revision_errors
    yield
venv/lib/python3.12/site-packages/alembic/script/base.py:459: in _upgrade_revs
    for script in reversed(list(revs))
                           ^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:813: in iterate_revisions
    revisions, heads = fn(
venv/lib/python3.12/site-packages/alembic/script/revision.py:1438: in _collect_upgrade_revisions
    for rev in self._parse_upgrade_target(
venv/lib/python3.12/site-packages/alembic/script/revision.py:1229: in _parse_upgrade_target
    return self.get_revisions(target)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:545: in get_revisions
    resolved_id, branch_label = self._resolve_revision_number(id_)
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:777: in _resolve_revision_number
    current_head = self.get_current_head(branch_label)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:509: in get_current_head
    raise MultipleHeads(
E   alembic.script.revision.MultipleHeads: Multiple heads are present for given argument 'head'; context_aware_schema, contextual_schema, finetuned_schema, hierarchical_schema, keyword_schema, knowledge_graph_schema, late_chunking_schema, multi_query_schema, query_expansion_schema, reranking_schema, self_reflective_schema, semantic_api_schema

The above exception was the direct cause of the following exception:
tests/integration/database/test_migration_integration.py:32: in test_real_migration_execution
    command.upgrade(alembic_config, "head")
venv/lib/python3.12/site-packages/alembic/command.py:403: in upgrade
    script.run_env()
venv/lib/python3.12/site-packages/alembic/script/base.py:583: in run_env
    util.load_python_file(self.dir, "env.py")
venv/lib/python3.12/site-packages/alembic/util/pyfiles.py:95: in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/util/pyfiles.py:113: in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap_external>:995: in exec_module
    ???
<frozen importlib._bootstrap>:488: in _call_with_frames_removed
    ???
migrations/env.py:93: in <module>
    run_migrations_online()
migrations/env.py:87: in run_migrations_online
    context.run_migrations()
<string>:8: in run_migrations
    ???
venv/lib/python3.12/site-packages/alembic/runtime/environment.py:948: in run_migrations
    self.get_context().run_migrations(**kw)
venv/lib/python3.12/site-packages/alembic/runtime/migration.py:615: in run_migrations
    for step in self._migrations_fn(heads, self):
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/command.py:392: in upgrade
    return script._upgrade_revs(revision, rev)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/base.py:447: in _upgrade_revs
    with self._catch_revision_errors(
/usr/lib/python3.12/contextlib.py:158: in __exit__
    self.gen.throw(value)
venv/lib/python3.12/site-packages/alembic/script/base.py:277: in _catch_revision_errors
    raise util.CommandError(multiple_heads) from mh
E   alembic.util.exc.CommandError: Multiple head revisions are present for given argument 'head'; please specify a specific target revision, '<branchname>@head' to narrow to a specific head, or 'heads' for all heads
---------------------------- Captured stderr setup -----------------------------
DEBUG:asyncio:Using selector: EpollSelector
DEBUG:asyncio:Using selector: EpollSelector
------------------------------ Captured log setup ------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
----------------------------- Captured stderr call -----------------------------
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
INFO  [alembic.runtime.migration] Running downgrade agentic_schema -> semantic_local_schema, agentic_schema
INFO  [alembic.runtime.migration] Running downgrade semantic_local_schema -> 002, Create semantic local tables
INFO  [alembic.runtime.migration] Running downgrade 002 -> 001, Add hierarchy support to chunks table
INFO  [alembic.runtime.migration] Running downgrade 001 -> , Initial schema with documents and chunks tables
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
__________ TestMigrationIntegration.test_migration_with_existing_data __________
venv/lib/python3.12/site-packages/alembic/script/base.py:251: in _catch_revision_errors
    yield
venv/lib/python3.12/site-packages/alembic/script/base.py:459: in _upgrade_revs
    for script in reversed(list(revs))
                           ^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:813: in iterate_revisions
    revisions, heads = fn(
venv/lib/python3.12/site-packages/alembic/script/revision.py:1438: in _collect_upgrade_revisions
    for rev in self._parse_upgrade_target(
venv/lib/python3.12/site-packages/alembic/script/revision.py:1229: in _parse_upgrade_target
    return self.get_revisions(target)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:545: in get_revisions
    resolved_id, branch_label = self._resolve_revision_number(id_)
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:777: in _resolve_revision_number
    current_head = self.get_current_head(branch_label)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:509: in get_current_head
    raise MultipleHeads(
E   alembic.script.revision.MultipleHeads: Multiple heads are present for given argument 'head'; context_aware_schema, contextual_schema, finetuned_schema, hierarchical_schema, keyword_schema, knowledge_graph_schema, late_chunking_schema, multi_query_schema, query_expansion_schema, reranking_schema, self_reflective_schema, semantic_api_schema

The above exception was the direct cause of the following exception:
tests/integration/database/test_migration_integration.py:64: in test_migration_with_existing_data
    command.upgrade(alembic_config, "head")
venv/lib/python3.12/site-packages/alembic/command.py:403: in upgrade
    script.run_env()
venv/lib/python3.12/site-packages/alembic/script/base.py:583: in run_env
    util.load_python_file(self.dir, "env.py")
venv/lib/python3.12/site-packages/alembic/util/pyfiles.py:95: in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/util/pyfiles.py:113: in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap_external>:995: in exec_module
    ???
<frozen importlib._bootstrap>:488: in _call_with_frames_removed
    ???
migrations/env.py:93: in <module>
    run_migrations_online()
migrations/env.py:87: in run_migrations_online
    context.run_migrations()
<string>:8: in run_migrations
    ???
venv/lib/python3.12/site-packages/alembic/runtime/environment.py:948: in run_migrations
    self.get_context().run_migrations(**kw)
venv/lib/python3.12/site-packages/alembic/runtime/migration.py:615: in run_migrations
    for step in self._migrations_fn(heads, self):
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/command.py:392: in upgrade
    return script._upgrade_revs(revision, rev)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/base.py:447: in _upgrade_revs
    with self._catch_revision_errors(
/usr/lib/python3.12/contextlib.py:158: in __exit__
    self.gen.throw(value)
venv/lib/python3.12/site-packages/alembic/script/base.py:277: in _catch_revision_errors
    raise util.CommandError(multiple_heads) from mh
E   alembic.util.exc.CommandError: Multiple head revisions are present for given argument 'head'; please specify a specific target revision, '<branchname>@head' to narrow to a specific head, or 'heads' for all heads
----------------------------- Captured stderr call -----------------------------
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
INFO  [alembic.runtime.migration] Running upgrade  -> 001, Initial schema with documents and chunks tables
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
_____________ TestMigrationIntegration.test_rollback_functionality _____________
venv/lib/python3.12/site-packages/alembic/script/base.py:251: in _catch_revision_errors
    yield
venv/lib/python3.12/site-packages/alembic/script/base.py:459: in _upgrade_revs
    for script in reversed(list(revs))
                           ^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:813: in iterate_revisions
    revisions, heads = fn(
venv/lib/python3.12/site-packages/alembic/script/revision.py:1438: in _collect_upgrade_revisions
    for rev in self._parse_upgrade_target(
venv/lib/python3.12/site-packages/alembic/script/revision.py:1229: in _parse_upgrade_target
    return self.get_revisions(target)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:545: in get_revisions
    resolved_id, branch_label = self._resolve_revision_number(id_)
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:777: in _resolve_revision_number
    current_head = self.get_current_head(branch_label)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:509: in get_current_head
    raise MultipleHeads(
E   alembic.script.revision.MultipleHeads: Multiple heads are present for given argument 'head'; context_aware_schema, contextual_schema, finetuned_schema, hierarchical_schema, keyword_schema, knowledge_graph_schema, late_chunking_schema, multi_query_schema, query_expansion_schema, reranking_schema, self_reflective_schema, semantic_api_schema

The above exception was the direct cause of the following exception:
tests/integration/database/test_migration_integration.py:82: in test_rollback_functionality
    command.upgrade(alembic_config, "head")
venv/lib/python3.12/site-packages/alembic/command.py:403: in upgrade
    script.run_env()
venv/lib/python3.12/site-packages/alembic/script/base.py:583: in run_env
    util.load_python_file(self.dir, "env.py")
venv/lib/python3.12/site-packages/alembic/util/pyfiles.py:95: in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/util/pyfiles.py:113: in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap_external>:995: in exec_module
    ???
<frozen importlib._bootstrap>:488: in _call_with_frames_removed
    ???
migrations/env.py:93: in <module>
    run_migrations_online()
migrations/env.py:87: in run_migrations_online
    context.run_migrations()
<string>:8: in run_migrations
    ???
venv/lib/python3.12/site-packages/alembic/runtime/environment.py:948: in run_migrations
    self.get_context().run_migrations(**kw)
venv/lib/python3.12/site-packages/alembic/runtime/migration.py:615: in run_migrations
    for step in self._migrations_fn(heads, self):
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/command.py:392: in upgrade
    return script._upgrade_revs(revision, rev)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/base.py:447: in _upgrade_revs
    with self._catch_revision_errors(
/usr/lib/python3.12/contextlib.py:158: in __exit__
    self.gen.throw(value)
venv/lib/python3.12/site-packages/alembic/script/base.py:277: in _catch_revision_errors
    raise util.CommandError(multiple_heads) from mh
E   alembic.util.exc.CommandError: Multiple head revisions are present for given argument 'head'; please specify a specific target revision, '<branchname>@head' to narrow to a specific head, or 'heads' for all heads
----------------------------- Captured stderr call -----------------------------
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
INFO  [alembic.runtime.migration] Running downgrade 001 -> , Initial schema with documents and chunks tables
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
__________ TestMigrationIntegration.test_pgvector_extension_installed __________
venv/lib/python3.12/site-packages/alembic/script/base.py:251: in _catch_revision_errors
    yield
venv/lib/python3.12/site-packages/alembic/script/base.py:459: in _upgrade_revs
    for script in reversed(list(revs))
                           ^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:813: in iterate_revisions
    revisions, heads = fn(
venv/lib/python3.12/site-packages/alembic/script/revision.py:1438: in _collect_upgrade_revisions
    for rev in self._parse_upgrade_target(
venv/lib/python3.12/site-packages/alembic/script/revision.py:1229: in _parse_upgrade_target
    return self.get_revisions(target)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:545: in get_revisions
    resolved_id, branch_label = self._resolve_revision_number(id_)
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:777: in _resolve_revision_number
    current_head = self.get_current_head(branch_label)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:509: in get_current_head
    raise MultipleHeads(
E   alembic.script.revision.MultipleHeads: Multiple heads are present for given argument 'head'; context_aware_schema, contextual_schema, finetuned_schema, hierarchical_schema, keyword_schema, knowledge_graph_schema, late_chunking_schema, multi_query_schema, query_expansion_schema, reranking_schema, self_reflective_schema, semantic_api_schema

The above exception was the direct cause of the following exception:
tests/integration/database/test_migration_integration.py:114: in test_pgvector_extension_installed
    command.upgrade(alembic_config, "head")
venv/lib/python3.12/site-packages/alembic/command.py:403: in upgrade
    script.run_env()
venv/lib/python3.12/site-packages/alembic/script/base.py:583: in run_env
    util.load_python_file(self.dir, "env.py")
venv/lib/python3.12/site-packages/alembic/util/pyfiles.py:95: in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/util/pyfiles.py:113: in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap_external>:995: in exec_module
    ???
<frozen importlib._bootstrap>:488: in _call_with_frames_removed
    ???
migrations/env.py:93: in <module>
    run_migrations_online()
migrations/env.py:87: in run_migrations_online
    context.run_migrations()
<string>:8: in run_migrations
    ???
venv/lib/python3.12/site-packages/alembic/runtime/environment.py:948: in run_migrations
    self.get_context().run_migrations(**kw)
venv/lib/python3.12/site-packages/alembic/runtime/migration.py:615: in run_migrations
    for step in self._migrations_fn(heads, self):
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/command.py:392: in upgrade
    return script._upgrade_revs(revision, rev)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/base.py:447: in _upgrade_revs
    with self._catch_revision_errors(
/usr/lib/python3.12/contextlib.py:158: in __exit__
    self.gen.throw(value)
venv/lib/python3.12/site-packages/alembic/script/base.py:277: in _catch_revision_errors
    raise util.CommandError(multiple_heads) from mh
E   alembic.util.exc.CommandError: Multiple head revisions are present for given argument 'head'; please specify a specific target revision, '<branchname>@head' to narrow to a specific head, or 'heads' for all heads
----------------------------- Captured stderr call -----------------------------
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
=============================== warnings summary ===============================
rag_factory/services/llm/config.py:8
  /mnt/MCPProyects/ragTools/rag_factory/services/llm/config.py:8: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class LLMServiceConfig(BaseModel):

rag_factory/database/config.py:12
  /mnt/MCPProyects/ragTools/rag_factory/database/config.py:12: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DatabaseConfig(BaseSettings):

rag_factory/strategies/agentic/config.py:9
  /mnt/MCPProyects/ragTools/rag_factory/strategies/agentic/config.py:9: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class AgenticStrategyConfig(BaseModel):

rag_factory/strategies/late_chunking/models.py:21
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:21: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class TokenEmbedding(BaseModel):

rag_factory/strategies/late_chunking/models.py:34
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:34: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DocumentEmbedding(BaseModel):

rag_factory/strategies/late_chunking/models.py:49
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:49: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class EmbeddingChunk(BaseModel):

rag_factory/strategies/contextual/config.py:31
  /mnt/MCPProyects/ragTools/rag_factory/strategies/contextual/config.py:31: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ContextualRetrievalConfig(BaseModel):

rag_factory/strategies/fine_tuned/config.py:6
  /mnt/MCPProyects/ragTools/rag_factory/strategies/fine_tuned/config.py:6: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class FineTunedConfig(BaseSettings):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.3-final-0 ________________

Name                                                               Stmts   Miss  Cover   Missing
------------------------------------------------------------------------------------------------
rag_factory/__init__.py                                                7      2    71%   18-19
rag_factory/__version__.py                                             1      0   100%
rag_factory/cli/__init__.py                                            2      0   100%
rag_factory/cli/commands/__init__.py                                   1      0   100%
rag_factory/cli/commands/benchmark.py                                 96     81    16%   40-53, 64-84, 148-263
rag_factory/cli/commands/check_consistency.py                         43     33    23%   64-120
rag_factory/cli/commands/config.py                                    78     68    13%   26-64, 102-188
rag_factory/cli/commands/gui.py                                       25     17    32%   61-91
rag_factory/cli/commands/index.py                                     65     52    20%   29-39, 93-185
rag_factory/cli/commands/query.py                                     47     36    23%   73-149
rag_factory/cli/commands/repl.py                                     152    130    14%   29-56, 63-108, 112-120, 124-133, 137-155, 159-172, 176-186, 190-207, 211-220, 253-260
rag_factory/cli/commands/strategies.py                                45     36    20%   48-120
rag_factory/cli/commands/validate_e2e.py                              91     69    24%   37-38, 42-142, 145-156
rag_factory/cli/commands/validate_pipeline.py                         70     57    19%   57-156
rag_factory/cli/formatters/__init__.py                                 4      0   100%
rag_factory/cli/formatters/consistency.py                             61     55    10%   21-69, 79-103, 108-138
rag_factory/cli/formatters/output.py                                  20      9    55%   23-24, 43-44, 63-64, 74, 79, 84
rag_factory/cli/formatters/results.py                                 71     62    13%   28-55, 72-99, 116-144, 157-181
rag_factory/cli/formatters/validation.py                              63     53    16%   25-43, 48-56, 65-77, 86-98, 103-129, 134-137
rag_factory/cli/main.py                                               32     10    69%   25-28, 48-49, 79-81, 85
rag_factory/cli/utils/__init__.py                                      3      0   100%
rag_factory/cli/utils/progress.py                                     14      8    43%   34-47, 73-76
rag_factory/cli/utils/validation.py                                   53     42    21%   30-41, 57-77, 93-118, 135
rag_factory/config/__init__.py                                         4      0   100%
rag_factory/config/env_resolver.py                                    52     37    29%   47-54, 70-90, 110, 129-147
rag_factory/config/schemas/__init__.py                                 2      0   100%
rag_factory/config/schemas/version.py                                 10      6    40%   29-38
rag_factory/config/strategy_loader.py                                 54     36    33%   32-41, 45-60, 75-89, 101-104
rag_factory/config/strategy_pair_manager.py                          105     83    21%   40-72, 92-132, 148-198, 210-215, 229, 259-282
rag_factory/config/validator.py                                       93     76    18%   27-30, 34-39, 53-58, 62-74, 111-132, 177-198, 215-235, 247-249, 271-295, 333-354
rag_factory/core/__init__.py                                           4      4     0%   7-23
rag_factory/core/capabilities.py                                      61     16    74%   129, 155, 173-174, 239-253
rag_factory/core/indexing_interface.py                                54     35    35%   55-57, 118-123, 144, 164, 208, 260, 272, 292-313, 341-364
rag_factory/core/pipeline.py                                          49     35    29%   22-24, 33-40, 55-77, 95-96, 105-108, 117-120, 137-146
rag_factory/core/retrieval_interface.py                               38     20    47%   56-58, 112-117, 138, 158, 196, 247, 259, 285-309
rag_factory/database/__init__.py                                       4      0   100%
rag_factory/database/config.py                                        17      0   100%
rag_factory/database/connection.py                                    80     54    32%   40-48, 61-86, 96, 107, 126-137, 150-157, 165-170, 178-183, 196-197, 209-214, 218, 222
rag_factory/database/env_validator.py                                 38     18    53%   46-54, 66-77, 86-88, 118, 126, 139
rag_factory/database/models.py                                        85     32    62%   31-34, 37-45, 48-54, 66-69, 72-77, 80-85, 181, 323-325
rag_factory/database/vector_indexing.py                               38     38     0%   7-114
rag_factory/evaluation/__init__.py                                     4      4     0%   29-41
rag_factory/evaluation/analysis/__init__.py                            3      3     0%   8-11
rag_factory/evaluation/analysis/comparison.py                        135    135     0%   8-323
rag_factory/evaluation/analysis/statistics.py                         81     81     0%   8-320
rag_factory/evaluation/benchmarks/__init__.py                          3      3     0%   8-14
rag_factory/evaluation/benchmarks/config.py                           25     25     0%   7-64
rag_factory/evaluation/benchmarks/runner.py                          155    155     0%   8-423
rag_factory/evaluation/datasets/__init__.py                            3      3     0%   8-14
rag_factory/evaluation/datasets/loader.py                             88     88     0%   8-281
rag_factory/evaluation/datasets/schema.py                             52     52     0%   8-160
rag_factory/evaluation/datasets/statistics.py                         65     65     0%   8-226
rag_factory/evaluation/exporters/__init__.py                           4      4     0%   8-12
rag_factory/evaluation/exporters/csv_exporter.py                      52     52     0%   3-124
rag_factory/evaluation/exporters/html_exporter.py                     47     47     0%   3-293
rag_factory/evaluation/exporters/json_exporter.py                     19     19     0%   3-68
rag_factory/evaluation/metrics/__init__.py                             3      3     0%   12-25
rag_factory/evaluation/metrics/base.py                                31     31     0%   8-115
rag_factory/evaluation/metrics/cost.py                                65     65     0%   8-313
rag_factory/evaluation/metrics/performance.py                         42     42     0%   8-202
rag_factory/evaluation/metrics/quality.py                             84     84     0%   8-377
rag_factory/evaluation/metrics/retrieval.py                           77     77     0%   9-401
rag_factory/exceptions.py                                             13      0   100%
rag_factory/factory.py                                               187    137    27%   109-116, 144, 165-170, 202-230, 256-270, 300-324, 347-348, 365, 384, 401, 418, 435, 451-460, 480-502, 528-545, 568-611, 644-699, 703-715
rag_factory/gui/__init__.py                                            2      0   100%
rag_factory/gui/components/__init__.py                                 3      0   100%
rag_factory/gui/components/scrolled_text.py                           64     52    19%   53-62, 80-114, 122, 131-142, 151-164, 168, 176, 184-199
rag_factory/gui/components/status_bar.py                              62     49    21%   40-59, 64-113, 122-137, 146-152, 161, 168, 172-184, 192-196
rag_factory/gui/main_window.py                                       701    640     9%   64-109, 113-128, 137-164, 168-194, 205-263, 268-293, 297-321, 330-390, 398-422, 435-469, 482-500, 513-551, 564-602, 615-673, 686-690, 694-732, 736-738, 746-789, 806-817, 826-858, 862-879, 885-895, 899-970, 974-1062, 1072-1074, 1082-1084, 1088-1164, 1177-1234, 1244-1246, 1254-1258, 1262-1319, 1324-1371, 1375-1394, 1398, 1411-1487, 1491-1549, 1554-1571, 1575-1582, 1587-1600, 1605-1614, 1618
rag_factory/gui/utils/__init__.py                                      3      0   100%
rag_factory/gui/utils/formatters.py                                   57     49    14%   27-30, 50-90, 110-118, 134-137, 155-165
rag_factory/gui/utils/threading.py                                    32     25    22%   44-73, 96-99, 124-129
rag_factory/legacy_config.py                                         155    155     0%   22-542
rag_factory/models/__init__.py                                         6      6     0%   3-14
rag_factory/models/embedding/__init__.py                               4      4     0%   3-12
rag_factory/models/embedding/loader.py                               179    179     0%   3-367
rag_factory/models/embedding/models.py                                47     47     0%   3-106
rag_factory/models/embedding/registry.py                             128    128     0%   3-282
rag_factory/models/evaluation/__init__.py                              3      3     0%   3-6
rag_factory/models/evaluation/ab_testing.py                           98     98     0%   3-281
rag_factory/models/evaluation/models.py                               29     29     0%   3-74
rag_factory/observability/__init__.py                                  3      3     0%   3-10
rag_factory/observability/integrations/__init__.py                     1      1     0%   3
rag_factory/observability/integrations/prometheus.py                  47     47     0%   3-229
rag_factory/observability/logging/__init__.py                          2      2     0%   3-5
rag_factory/observability/logging/config.py                           16     16     0%   3-37
rag_factory/observability/logging/filters.py                          41     41     0%   3-103
rag_factory/observability/logging/logger.py                           86     86     0%   3-396
rag_factory/observability/metrics/__init__.py                          2      2     0%   3-9
rag_factory/observability/metrics/collector.py                       143    143     0%   3-459
rag_factory/observability/metrics/cost.py                             39     39     0%   3-221
rag_factory/observability/metrics/performance.py                      64     64     0%   3-196
rag_factory/observability/monitoring/__init__.py                       1      1     0%   3
rag_factory/observability/monitoring/api.py                          101    101     0%   3-328
rag_factory/pipeline.py                                              156    156     0%   34-507
rag_factory/registry/__init__.py                                       4      0   100%
rag_factory/registry/exceptions.py                                     6      0   100%
rag_factory/registry/service_factory.py                               84     69    18%   45-54, 62-65, 70-73, 78-80, 84-86, 95-127, 136-165, 176-215, 229-255
rag_factory/registry/service_registry.py                              91     71    22%   43-51, 55-85, 103-156, 164, 178-203, 210-223, 227, 231-232
rag_factory/repositories/__init__.py                                   5      0   100%
rag_factory/repositories/base.py                                      42     21    50%   38, 53, 70, 87, 103, 114-118, 125, 136-139, 159-164
rag_factory/repositories/chunk.py                                    206    180    13%   40-45, 68-76, 90-95, 120-133, 155-171, 187-202, 221-231, 250-261, 287-328, 355-396, 422-474, 489-499, 513-521, 537-543, 557-563, 577-587, 604-626, 639-670
rag_factory/repositories/document.py                                  93     74    20%   41-46, 63-68, 98-118, 140-156, 172-187, 206, 223-233, 247-255, 272-279, 290-293, 307-312
rag_factory/repositories/exceptions.py                                18      7    61%   34-36, 56-59
rag_factory/services/__init__.py                                       4      0   100%
rag_factory/services/api/__init__.py                                   4      4     0%   7-11
rag_factory/services/api/anthropic.py                                 27     27     0%   7-141
rag_factory/services/api/cohere.py                                    30     30     0%   7-113
rag_factory/services/api/openai.py                                    46     46     0%   7-235
rag_factory/services/consistency.py                                   32     24    25%   80-113, 144-170
rag_factory/services/database/__init__.py                              5      0   100%
rag_factory/services/database/database_context.py                    181    159    12%   58-64, 88-106, 123, 140-150, 179-200, 223-240, 256-266, 305-330, 338-339, 343-406, 414-415, 430-510, 516-517, 521-546
rag_factory/services/database/migration_validator.py                  96     74    23%   29-30, 61-69, 81-88, 109-131, 148-152, 163-192, 204-219, 230-237, 249, 261-271, 283-286
rag_factory/services/database/neo4j.py                                54     38    30%   15-17, 60-71, 79-84, 103-114, 134-150, 172-181, 188-191, 195, 199
rag_factory/services/database/postgres.py                            195    163    16%   17-18, 26-27, 84-121, 131-145, 149-201, 214-269, 292-346, 360-375, 390-414, 425-440, 472-490, 504-527, 532, 543, 580-598, 607-619, 623, 627
rag_factory/services/dependencies.py                                  41     21    49%   96-109, 134-140, 176-180
rag_factory/services/embedding/__init__.py                             4      0   100%
rag_factory/services/embedding/base.py                                31      6    81%   44, 59, 68, 77, 86, 98
rag_factory/services/embedding/cache.py                               43     33    23%   26-32, 43-58, 67-76, 80-82, 90-94
rag_factory/services/embedding/config.py                              29     13    55%   37-43, 50-68, 80
rag_factory/services/embedding/providers/__init__.py                   5      0   100%
rag_factory/services/embedding/providers/cohere.py                    53     36    32%   10-20, 55-75, 90-117, 125, 133, 141, 152-153
rag_factory/services/embedding/providers/local.py                     43     27    37%   8-9, 46-67, 83-109, 117, 125, 133, 146
rag_factory/services/embedding/providers/onnx_local.py               114     93    18%   18-19, 87-177, 193-250, 261-308, 319, 327, 335, 348
rag_factory/services/embedding/providers/openai.py                    51     34    33%   10-20, 53-72, 87-108, 116, 124, 132, 143-144
rag_factory/services/embedding/rate_limiter.py                        20     14    30%   27-37, 45-53
rag_factory/services/embedding/service.py                            100     83    17%   50-62, 79-93, 117-198, 220-222, 233-239, 248-266, 273-275
rag_factory/services/interfaces.py                                    35      0   100%
rag_factory/services/llm/__init__.py                                   5      0   100%
rag_factory/services/llm/base.py                                      43      0   100%
rag_factory/services/llm/config.py                                    23     11    52%   42-57
rag_factory/services/llm/prompt_template.py                           43     24    44%   47-82, 97-100, 111-115
rag_factory/services/llm/providers/__init__.py                        12     12     0%   5-22
rag_factory/services/llm/providers/anthropic.py                       57     57     0%   3-205
rag_factory/services/llm/providers/ollama.py                          55     55     0%   3-196
rag_factory/services/llm/providers/openai.py                          57     57     0%   3-210
rag_factory/services/llm/service.py                                   66     51    23%   32-39, 56-70, 93-129, 154-175, 186, 194-198, 215-216
rag_factory/services/llm/token_counter.py                             27     27     0%   3-72
rag_factory/services/local/__init__.py                                 2      2     0%   7-9
rag_factory/services/local/reranker.py                                32     32     0%   7-116
rag_factory/services/onnx/__init__.py                                  2      2     0%   7-9
rag_factory/services/onnx/embedding.py                                29     29     0%   7-129
rag_factory/services/utils/__init__.py                                 2      0   100%
rag_factory/services/utils/model_converter.py                        104    104     0%   8-291
rag_factory/services/utils/onnx_utils.py                             133    114    14%   22-23, 36-37, 67-123, 142-146, 172-218, 240-274, 291-312, 332-347, 360-378, 392-404
rag_factory/services/utils/reranker_selector.py                       68     68     0%   8-249
rag_factory/strategies/__init__.py                                     2      0   100%
rag_factory/strategies/agentic/__init__.py                             7      0   100%
rag_factory/strategies/agentic/agent.py                              151    130    14%   31-36, 45, 57, 66-90, 109-111, 123-161, 190-214, 230-265, 276-293, 310-331, 339-346, 357-368, 381-420
rag_factory/strategies/agentic/config.py                              12      0   100%
rag_factory/strategies/agentic/frameworks/__init__.py                  1      1     0%   9
rag_factory/strategies/agentic/query_analyzer.py                      89     65    27%   50-55, 67, 79-90, 109-125, 137-147, 159-178, 196-214, 225-260, 278
rag_factory/strategies/agentic/strategy.py                            87     60    31%   50-63, 76, 84, 94-132, 144, 156, 169, 182-222, 234-258, 267, 276, 284
rag_factory/strategies/agentic/tool_implementations.py               135     91    33%   36-37, 41, 45, 52, 86-129, 148-149, 153, 157, 164, 182-247, 266-267, 271, 275, 282, 329-373, 392-393, 397, 401, 407, 446-511
rag_factory/strategies/agentic/tools.py                               40      9    78%   66, 79, 89, 101, 112, 139-142
rag_factory/strategies/auto_register.py                               66     20    70%   13-14, 18-19, 23-24, 28-29, 33-34, 39-40, 46-47, 52-53, 58-59, 79-80
rag_factory/strategies/base.py                                        55     13    76%   80-85, 169-178
rag_factory/strategies/chunking/__init__.py                           15     15     0%   28-67
rag_factory/strategies/chunking/base.py                               91     91     0%   3-256
rag_factory/strategies/chunking/docling_chunker.py                    45     45     0%   13-188
rag_factory/strategies/chunking/fixed_size_chunker.py                 74     74     0%   3-204
rag_factory/strategies/chunking/hybrid_chunker.py                     70     70     0%   3-192
rag_factory/strategies/chunking/semantic_chunker.py                  195    195     0%   3-534
rag_factory/strategies/chunking/structural_chunker.py                147    147     0%   3-425
rag_factory/strategies/chunking/utils.py                              89     89     0%   3-264
rag_factory/strategies/contextual/__init__.py                          7      0   100%
rag_factory/strategies/contextual/batch_processor.py                  91     76    16%   41-43, 60-72, 84-90, 108-128, 145-161, 178-201, 218-266
rag_factory/strategies/contextual/config.py                           46      0   100%
rag_factory/strategies/contextual/context_generator.py                84     70    17%   35-36, 59-99, 112-135, 152-194, 209, 224-234
rag_factory/strategies/contextual/cost_tracker.py                     32     21    34%   31-35, 48-51, 69-82, 94-99, 111-114, 126
rag_factory/strategies/contextual/prompts.py                          25     17    32%   85-106, 119
rag_factory/strategies/contextual/storage.py                          44     35    20%   32-33, 42-45, 54-81, 98-118
rag_factory/strategies/contextual/strategy.py                         78     49    37%   54-67, 75, 83, 107-156, 173, 186, 207-215, 231-262, 278, 284, 289, 298
rag_factory/strategies/fine_tuned/__init__.py                          4      0   100%
rag_factory/strategies/fine_tuned/ab_testing.py                       78     78     0%   1-134
rag_factory/strategies/fine_tuned/config.py                           11      0   100%
rag_factory/strategies/fine_tuned/custom_loader.py                    40     28    30%   17-19, 36-73, 77, 84-88
rag_factory/strategies/fine_tuned/model_registry.py                  126     96    24%   39-50, 80-112, 132-149, 166-178, 182-196, 200-223, 227-240, 249-270, 274-287, 291-303
rag_factory/strategies/hierarchical/__init__.py                        5      5     0%   8-21
rag_factory/strategies/hierarchical/hierarchy_builder.py              79     79     0%   8-335
rag_factory/strategies/hierarchical/models.py                         58     58     0%   8-137
rag_factory/strategies/hierarchical/parent_retriever.py               89     89     0%   8-278
rag_factory/strategies/hierarchical/strategy.py                       76     76     0%   9-301
rag_factory/strategies/indexing/__init__.py                            6      0   100%
rag_factory/strategies/indexing/context_aware.py                     108     88    19%   31, 43, 63-134, 155-156, 160-170, 182-188, 192-198, 208-237, 241-242
rag_factory/strategies/indexing/hierarchical.py                       90     73    19%   50, 63, 88-134, 156-185, 201-236, 253-278, 292-293
rag_factory/strategies/indexing/in_memory.py                          41     25    39%   54, 65, 93-121, 143, 160, 173, 194-200
rag_factory/strategies/indexing/keyword_indexing.py                   42     31    26%   42, 53, 77-157
rag_factory/strategies/indexing/knowledge_graph_indexing.py           46     33    28%   18, 27, 48-89, 108-129
rag_factory/strategies/indexing/vector_embedding.py                   98     85    13%   25, 35, 55-116, 137-221
rag_factory/strategies/knowledge_graph/__init__.py                     4      4     0%   8-19
rag_factory/strategies/knowledge_graph/config.py                      21     21     0%   8-129
rag_factory/strategies/knowledge_graph/entity_extractor.py            70     70     0%   7-205
rag_factory/strategies/knowledge_graph/graph_store.py                 31     31     0%   8-124
rag_factory/strategies/knowledge_graph/hybrid_retriever.py            56     56     0%   8-164
rag_factory/strategies/knowledge_graph/memory_graph_store.py          97     97     0%   8-196
rag_factory/strategies/knowledge_graph/models.py                      53     53     0%   8-122
rag_factory/strategies/knowledge_graph/relationship_extractor.py      62     62     0%   8-189
rag_factory/strategies/knowledge_graph/strategy.py                    80     80     0%   8-256
rag_factory/strategies/late_chunking/__init__.py                       6      0   100%
rag_factory/strategies/late_chunking/coherence_analyzer.py            27     17    37%   20-21, 36-45, 57-65, 82-96
rag_factory/strategies/late_chunking/document_embedder.py            104     89    14%   29-74, 94-184, 202-215, 227-235, 256-279, 296-303, 318
rag_factory/strategies/late_chunking/embedding_chunker.py            117    102    13%   26, 41-61, 68-98, 105-155, 162-182, 191-192, 199-254, 265-289, 293-300
rag_factory/strategies/late_chunking/models.py                        62      0   100%
rag_factory/strategies/late_chunking/strategy.py                      70     46    34%   48-69, 77, 88, 107-122, 140-177, 196-205, 210, 215
rag_factory/strategies/multi_query/__init__.py                         7      7     0%   8-19
rag_factory/strategies/multi_query/config.py                          36     36     0%   3-138
rag_factory/strategies/multi_query/deduplicator.py                    87     87     0%   3-197
rag_factory/strategies/multi_query/parallel_executor.py               52     52     0%   3-163
rag_factory/strategies/multi_query/prompts.py                         10     10     0%   3-84
rag_factory/strategies/multi_query/ranker.py                          80     80     0%   3-201
rag_factory/strategies/multi_query/strategy.py                        68     68     0%   3-184
rag_factory/strategies/multi_query/variant_generator.py               62     62     0%   3-187
rag_factory/strategies/query_expansion/__init__.py                     8      0   100%
rag_factory/strategies/query_expansion/base.py                        66     10    85%   90, 103, 114-118, 130-133
rag_factory/strategies/query_expansion/cache.py                       52     40    23%   20-22, 38-55, 64-66, 70-73, 81-97, 105-112
rag_factory/strategies/query_expansion/expander_service.py            92     71    23%   36-40, 55-58, 75-148, 159-180, 204-215, 233-234, 242-246, 254, 265-273, 283-284
rag_factory/strategies/query_expansion/hyde_expander.py               19     12    37%   25-27, 41-65
rag_factory/strategies/query_expansion/llm_expander.py                25     16    36%   23-25, 39-71, 99
rag_factory/strategies/query_expansion/metrics.py                     66     30    55%   44-45, 53-57, 76-109, 130, 134, 146-152, 160
rag_factory/strategies/query_expansion/prompts.py                     13      7    46%   16, 28-56, 68-107
rag_factory/strategies/reranking/__init__.py                           7      0   100%
rag_factory/strategies/reranking/base.py                              68     16    76%   81, 101, 106, 110-119, 123-130
rag_factory/strategies/reranking/bge_reranker.py                      51     37    27%   14, 53-81, 103-147, 151
rag_factory/strategies/reranking/cache.py                             48     34    29%   32-34, 51-66, 76-77, 81, 90-101, 110-113, 121, 136-138
rag_factory/strategies/reranking/cohere_reranker.py                   34     20    41%   15-16, 55-71, 94-115, 119
rag_factory/strategies/reranking/cosine_reranker.py                   62     47    24%   54-72, 97-139, 158-171, 188, 209-215, 227-230, 242-245, 249
rag_factory/strategies/reranking/cross_encoder_reranker.py            40     27    32%   13-14, 53-76, 98-120, 124
rag_factory/strategies/reranking/metrics.py                           67     67     0%   8-264
rag_factory/strategies/reranking/reranker_service.py                 115     88    23%   56-67, 71-96, 113-225, 235-255, 269, 282-283, 287-292, 296-300, 308-310
rag_factory/strategies/retrieval/__init__.py                           6      0   100%
rag_factory/strategies/retrieval/hybrid_retriever.py                  51     37    27%   32, 39, 51-102, 110-144
rag_factory/strategies/retrieval/keyword_retriever.py                 56     41    27%   41, 52, 71-113, 126-133, 153-172
rag_factory/strategies/retrieval/knowledge_graph_retriever.py         22      9    59%   19, 27, 48-70
rag_factory/strategies/retrieval/multi_query_retriever.py             22      9    59%   19, 26, 44-66
rag_factory/strategies/retrieval/query_expansion_retriever.py         24      9    62%   20, 27, 45-67
rag_factory/strategies/retrieval/semantic_retriever.py                23     12    48%   23, 32, 61-94
rag_factory/strategies/self_reflective/__init__.py                     6      0   100%
rag_factory/strategies/self_reflective/config.py                      20      8    60%   29-42
rag_factory/strategies/self_reflective/grader.py                      80     65    19%   29-35, 51-67, 83-109, 135-171, 187-258, 266
rag_factory/strategies/self_reflective/models.py                      48      0   100%
rag_factory/strategies/self_reflective/refiner.py                     69     56    19%   28-30, 53-96, 113-143, 161-193, 208-228
rag_factory/strategies/self_reflective/strategy.py                    92     74    20%   38-53, 71-181, 192-206, 229-259, 264, 269
rag_factory/utils/__init__.py                                          3      0   100%
rag_factory/utils/token_counter.py                                    45     30    33%   36-40, 52-62, 74-82, 86, 90, 105-106, 124-135, 153-158
rag_factory/utils/tokenization.py                                     95     73    23%   36-40, 53-64, 87-114, 126-129, 141-144, 156, 175-190, 209-228, 241-243, 251-252, 270-271, 292-293, 314-315
------------------------------------------------------------------------------------------------
TOTAL                                                              13429  10945    18%
=========================== short test summary info ============================
FAILED tests/integration/database/test_migration_integration.py::TestMigrationIntegration::test_real_migration_execution - alembic.util.exc.CommandError: Multiple head revisions are present for given argument 'head'; please specify a specific target revision, '<branchname>@head' to narrow to a specific head, or 'heads' for all heads
FAILED tests/integration/database/test_migration_integration.py::TestMigrationIntegration::test_migration_with_existing_data - alembic.util.exc.CommandError: Multiple head revisions are present for given argument 'head'; please specify a specific target revision, '<branchname>@head' to narrow to a specific head, or 'heads' for all heads
FAILED tests/integration/database/test_migration_integration.py::TestMigrationIntegration::test_rollback_functionality - alembic.util.exc.CommandError: Multiple head revisions are present for given argument 'head'; please specify a specific target revision, '<branchname>@head' to narrow to a specific head, or 'heads' for all heads
FAILED tests/integration/database/test_migration_integration.py::TestMigrationIntegration::test_pgvector_extension_installed - alembic.util.exc.CommandError: Multiple head revisions are present for given argument 'head'; please specify a specific target revision, '<branchname>@head' to narrow to a specific head, or 'heads' for all heads
======================== 4 failed, 8 warnings in 10.33s ========================

[10/206] FAILED: tests/integration/database/test_migration_validator_integration.py
  Tests: 26 (P:4 F:22 S:0)
----------------------------------------
============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.1, pluggy-1.6.0 -- /mnt/MCPProyects/ragTools/venv/bin/python3
cachedir: .pytest_cache
rootdir: /mnt/MCPProyects/ragTools
configfile: pytest.ini (WARNING: ignoring pytest config in pyproject.toml!)
plugins: anyio-4.12.0, cov-7.0.0, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 15 items

tests/integration/database/test_migration_validator_integration.py::TestMigrationValidatorIntegration::test_validate_with_no_migrations PASSED [  6%]
tests/integration/database/test_migration_validator_integration.py::TestMigrationValidatorIntegration::test_validate_with_partial_migrations PASSED [ 13%]
tests/integration/database/test_migration_validator_integration.py::TestMigrationValidatorIntegration::test_validate_with_all_migrations FAILED [ 20%]
tests/integration/database/test_migration_validator_integration.py::TestMigrationValidatorIntegration::test_validate_or_raise_success FAILED [ 26%]
tests/integration/database/test_migration_validator_integration.py::TestMigrationValidatorIntegration::test_validate_or_raise_failure PASSED [ 33%]
tests/integration/database/test_migration_validator_integration.py::TestMigrationValidatorIntegration::test_get_current_revision FAILED [ 40%]
tests/integration/database/test_migration_validator_integration.py::TestMigrationValidatorIntegration::test_get_all_revisions FAILED [ 46%]
tests/integration/database/test_migration_validator_integration.py::TestMigrationValidatorIntegration::test_is_at_head FAILED [ 53%]
tests/integration/database/test_migration_validator_integration.py::TestMigrationValidatorIntegration::test_error_message_details PASSED [ 60%]
tests/integration/database/test_migration_validator_integration.py::TestMigrationValidatorIntegration::test_validate_single_migration FAILED [ 66%]
tests/integration/database/test_migration_validator_integration.py::TestMigrationValidatorIntegration::test_validate_nonexistent_migration FAILED [ 73%]
tests/integration/database/test_migration_validator_integration.py::TestMigrationValidatorIntegration::test_validate_after_downgrade FAILED [ 80%]
tests/integration/database/test_migration_validator_integration.py::TestMigrationValidatorIntegration::test_multiple_validators_same_database FAILED [ 86%]
tests/integration/database/test_migration_validator_integration.py::TestMigrationValidatorEdgeCases::test_validator_with_auto_discovered_config FAILED [ 93%]
tests/integration/database/test_migration_validator_integration.py::TestMigrationValidatorEdgeCases::test_validate_empty_requirements FAILED [100%]

=================================== FAILURES ===================================
_____ TestMigrationValidatorIntegration.test_validate_with_all_migrations ______
venv/lib/python3.12/site-packages/alembic/script/base.py:251: in _catch_revision_errors
    yield
venv/lib/python3.12/site-packages/alembic/script/base.py:459: in _upgrade_revs
    for script in reversed(list(revs))
                           ^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:813: in iterate_revisions
    revisions, heads = fn(
venv/lib/python3.12/site-packages/alembic/script/revision.py:1438: in _collect_upgrade_revisions
    for rev in self._parse_upgrade_target(
venv/lib/python3.12/site-packages/alembic/script/revision.py:1229: in _parse_upgrade_target
    return self.get_revisions(target)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:545: in get_revisions
    resolved_id, branch_label = self._resolve_revision_number(id_)
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:777: in _resolve_revision_number
    current_head = self.get_current_head(branch_label)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:509: in get_current_head
    raise MultipleHeads(
E   alembic.script.revision.MultipleHeads: Multiple heads are present for given argument 'head'; context_aware_schema, contextual_schema, finetuned_schema, hierarchical_schema, keyword_schema, knowledge_graph_schema, late_chunking_schema, multi_query_schema, query_expansion_schema, reranking_schema, self_reflective_schema, semantic_api_schema

The above exception was the direct cause of the following exception:
tests/integration/database/test_migration_validator_integration.py:105: in test_validate_with_all_migrations
    command.upgrade(alembic_config, "head")
venv/lib/python3.12/site-packages/alembic/command.py:403: in upgrade
    script.run_env()
venv/lib/python3.12/site-packages/alembic/script/base.py:583: in run_env
    util.load_python_file(self.dir, "env.py")
venv/lib/python3.12/site-packages/alembic/util/pyfiles.py:95: in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/util/pyfiles.py:113: in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap_external>:995: in exec_module
    ???
<frozen importlib._bootstrap>:488: in _call_with_frames_removed
    ???
migrations/env.py:93: in <module>
    run_migrations_online()
migrations/env.py:87: in run_migrations_online
    context.run_migrations()
<string>:8: in run_migrations
    ???
venv/lib/python3.12/site-packages/alembic/runtime/environment.py:948: in run_migrations
    self.get_context().run_migrations(**kw)
venv/lib/python3.12/site-packages/alembic/runtime/migration.py:615: in run_migrations
    for step in self._migrations_fn(heads, self):
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/command.py:392: in upgrade
    return script._upgrade_revs(revision, rev)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/base.py:447: in _upgrade_revs
    with self._catch_revision_errors(
/usr/lib/python3.12/contextlib.py:158: in __exit__
    self.gen.throw(value)
venv/lib/python3.12/site-packages/alembic/script/base.py:277: in _catch_revision_errors
    raise util.CommandError(multiple_heads) from mh
E   alembic.util.exc.CommandError: Multiple head revisions are present for given argument 'head'; please specify a specific target revision, '<branchname>@head' to narrow to a specific head, or 'heads' for all heads
----------------------------- Captured stderr call -----------------------------
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
_______ TestMigrationValidatorIntegration.test_validate_or_raise_success _______
venv/lib/python3.12/site-packages/alembic/script/base.py:251: in _catch_revision_errors
    yield
venv/lib/python3.12/site-packages/alembic/script/base.py:459: in _upgrade_revs
    for script in reversed(list(revs))
                           ^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:813: in iterate_revisions
    revisions, heads = fn(
venv/lib/python3.12/site-packages/alembic/script/revision.py:1438: in _collect_upgrade_revisions
    for rev in self._parse_upgrade_target(
venv/lib/python3.12/site-packages/alembic/script/revision.py:1229: in _parse_upgrade_target
    return self.get_revisions(target)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:545: in get_revisions
    resolved_id, branch_label = self._resolve_revision_number(id_)
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:777: in _resolve_revision_number
    current_head = self.get_current_head(branch_label)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:509: in get_current_head
    raise MultipleHeads(
E   alembic.script.revision.MultipleHeads: Multiple heads are present for given argument 'head'; context_aware_schema, contextual_schema, finetuned_schema, hierarchical_schema, keyword_schema, knowledge_graph_schema, late_chunking_schema, multi_query_schema, query_expansion_schema, reranking_schema, self_reflective_schema, semantic_api_schema

The above exception was the direct cause of the following exception:
tests/integration/database/test_migration_validator_integration.py:121: in test_validate_or_raise_success
    command.upgrade(alembic_config, "head")
venv/lib/python3.12/site-packages/alembic/command.py:403: in upgrade
    script.run_env()
venv/lib/python3.12/site-packages/alembic/script/base.py:583: in run_env
    util.load_python_file(self.dir, "env.py")
venv/lib/python3.12/site-packages/alembic/util/pyfiles.py:95: in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/util/pyfiles.py:113: in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap_external>:995: in exec_module
    ???
<frozen importlib._bootstrap>:488: in _call_with_frames_removed
    ???
migrations/env.py:93: in <module>
    run_migrations_online()
migrations/env.py:87: in run_migrations_online
    context.run_migrations()
<string>:8: in run_migrations
    ???
venv/lib/python3.12/site-packages/alembic/runtime/environment.py:948: in run_migrations
    self.get_context().run_migrations(**kw)
venv/lib/python3.12/site-packages/alembic/runtime/migration.py:615: in run_migrations
    for step in self._migrations_fn(heads, self):
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/command.py:392: in upgrade
    return script._upgrade_revs(revision, rev)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/base.py:447: in _upgrade_revs
    with self._catch_revision_errors(
/usr/lib/python3.12/contextlib.py:158: in __exit__
    self.gen.throw(value)
venv/lib/python3.12/site-packages/alembic/script/base.py:277: in _catch_revision_errors
    raise util.CommandError(multiple_heads) from mh
E   alembic.util.exc.CommandError: Multiple head revisions are present for given argument 'head'; please specify a specific target revision, '<branchname>@head' to narrow to a specific head, or 'heads' for all heads
----------------------------- Captured stderr call -----------------------------
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
_________ TestMigrationValidatorIntegration.test_get_current_revision __________
venv/lib/python3.12/site-packages/alembic/script/base.py:251: in _catch_revision_errors
    yield
venv/lib/python3.12/site-packages/alembic/script/base.py:459: in _upgrade_revs
    for script in reversed(list(revs))
                           ^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:813: in iterate_revisions
    revisions, heads = fn(
venv/lib/python3.12/site-packages/alembic/script/revision.py:1438: in _collect_upgrade_revisions
    for rev in self._parse_upgrade_target(
venv/lib/python3.12/site-packages/alembic/script/revision.py:1229: in _parse_upgrade_target
    return self.get_revisions(target)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:545: in get_revisions
    resolved_id, branch_label = self._resolve_revision_number(id_)
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:777: in _resolve_revision_number
    current_head = self.get_current_head(branch_label)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:509: in get_current_head
    raise MultipleHeads(
E   alembic.script.revision.MultipleHeads: Multiple heads are present for given argument 'head'; context_aware_schema, contextual_schema, finetuned_schema, hierarchical_schema, keyword_schema, knowledge_graph_schema, late_chunking_schema, multi_query_schema, query_expansion_schema, reranking_schema, self_reflective_schema, semantic_api_schema

The above exception was the direct cause of the following exception:
tests/integration/database/test_migration_validator_integration.py:165: in test_get_current_revision
    command.upgrade(alembic_config, "head")
venv/lib/python3.12/site-packages/alembic/command.py:403: in upgrade
    script.run_env()
venv/lib/python3.12/site-packages/alembic/script/base.py:583: in run_env
    util.load_python_file(self.dir, "env.py")
venv/lib/python3.12/site-packages/alembic/util/pyfiles.py:95: in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/util/pyfiles.py:113: in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap_external>:995: in exec_module
    ???
<frozen importlib._bootstrap>:488: in _call_with_frames_removed
    ???
migrations/env.py:93: in <module>
    run_migrations_online()
migrations/env.py:87: in run_migrations_online
    context.run_migrations()
<string>:8: in run_migrations
    ???
venv/lib/python3.12/site-packages/alembic/runtime/environment.py:948: in run_migrations
    self.get_context().run_migrations(**kw)
venv/lib/python3.12/site-packages/alembic/runtime/migration.py:615: in run_migrations
    for step in self._migrations_fn(heads, self):
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/command.py:392: in upgrade
    return script._upgrade_revs(revision, rev)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/base.py:447: in _upgrade_revs
    with self._catch_revision_errors(
/usr/lib/python3.12/contextlib.py:158: in __exit__
    self.gen.throw(value)
venv/lib/python3.12/site-packages/alembic/script/base.py:277: in _catch_revision_errors
    raise util.CommandError(multiple_heads) from mh
E   alembic.util.exc.CommandError: Multiple head revisions are present for given argument 'head'; please specify a specific target revision, '<branchname>@head' to narrow to a specific head, or 'heads' for all heads
----------------------------- Captured stderr call -----------------------------
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
INFO  [alembic.runtime.migration] Running upgrade  -> 001, Initial schema with documents and chunks tables
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
___________ TestMigrationValidatorIntegration.test_get_all_revisions ___________
venv/lib/python3.12/site-packages/alembic/script/base.py:251: in _catch_revision_errors
    yield
venv/lib/python3.12/site-packages/alembic/script/base.py:398: in get_current_head
    return self.revision_map.get_current_head()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:509: in get_current_head
    raise MultipleHeads(
E   alembic.script.revision.MultipleHeads: Multiple heads are present for given argument 'head'; context_aware_schema, contextual_schema, finetuned_schema, hierarchical_schema, keyword_schema, knowledge_graph_schema, late_chunking_schema, multi_query_schema, query_expansion_schema, reranking_schema, self_reflective_schema, semantic_api_schema

The above exception was the direct cause of the following exception:
tests/integration/database/test_migration_validator_integration.py:173: in test_get_all_revisions
    all_revisions = validator.get_all_revisions()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
rag_factory/services/database/migration_validator.py:264: in get_all_revisions
    head = self.script_dir.get_current_head()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/base.py:391: in get_current_head
    with self._catch_revision_errors(
/usr/lib/python3.12/contextlib.py:158: in __exit__
    self.gen.throw(value)
venv/lib/python3.12/site-packages/alembic/script/base.py:277: in _catch_revision_errors
    raise util.CommandError(multiple_heads) from mh
E   alembic.util.exc.CommandError: The script directory has multiple heads (due to branching).Please use get_heads(), or merge the branches using alembic merge.
______________ TestMigrationValidatorIntegration.test_is_at_head _______________
venv/lib/python3.12/site-packages/alembic/script/base.py:251: in _catch_revision_errors
    yield
venv/lib/python3.12/site-packages/alembic/script/base.py:398: in get_current_head
    return self.revision_map.get_current_head()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:509: in get_current_head
    raise MultipleHeads(
E   alembic.script.revision.MultipleHeads: Multiple heads are present for given argument 'head'; context_aware_schema, contextual_schema, finetuned_schema, hierarchical_schema, keyword_schema, knowledge_graph_schema, late_chunking_schema, multi_query_schema, query_expansion_schema, reranking_schema, self_reflective_schema, semantic_api_schema

The above exception was the direct cause of the following exception:
tests/integration/database/test_migration_validator_integration.py:196: in test_is_at_head
    assert validator.is_at_head() is False
           ^^^^^^^^^^^^^^^^^^^^^^
rag_factory/services/database/migration_validator.py:284: in is_at_head
    head = self.script_dir.get_current_head()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/base.py:391: in get_current_head
    with self._catch_revision_errors(
/usr/lib/python3.12/contextlib.py:158: in __exit__
    self.gen.throw(value)
venv/lib/python3.12/site-packages/alembic/script/base.py:277: in _catch_revision_errors
    raise util.CommandError(multiple_heads) from mh
E   alembic.util.exc.CommandError: The script directory has multiple heads (due to branching).Please use get_heads(), or merge the branches using alembic merge.
----------------------------- Captured stderr call -----------------------------
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
INFO  [alembic.runtime.migration] Running downgrade 001 -> , Initial schema with documents and chunks tables
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
_______ TestMigrationValidatorIntegration.test_validate_single_migration _______
venv/lib/python3.12/site-packages/alembic/script/base.py:251: in _catch_revision_errors
    yield
venv/lib/python3.12/site-packages/alembic/script/base.py:459: in _upgrade_revs
    for script in reversed(list(revs))
                           ^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:813: in iterate_revisions
    revisions, heads = fn(
venv/lib/python3.12/site-packages/alembic/script/revision.py:1438: in _collect_upgrade_revisions
    for rev in self._parse_upgrade_target(
venv/lib/python3.12/site-packages/alembic/script/revision.py:1229: in _parse_upgrade_target
    return self.get_revisions(target)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:545: in get_revisions
    resolved_id, branch_label = self._resolve_revision_number(id_)
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:777: in _resolve_revision_number
    current_head = self.get_current_head(branch_label)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:509: in get_current_head
    raise MultipleHeads(
E   alembic.script.revision.MultipleHeads: Multiple heads are present for given argument 'head'; context_aware_schema, contextual_schema, finetuned_schema, hierarchical_schema, keyword_schema, knowledge_graph_schema, late_chunking_schema, multi_query_schema, query_expansion_schema, reranking_schema, self_reflective_schema, semantic_api_schema

The above exception was the direct cause of the following exception:
tests/integration/database/test_migration_validator_integration.py:240: in test_validate_single_migration
    command.upgrade(alembic_config, "head")
venv/lib/python3.12/site-packages/alembic/command.py:403: in upgrade
    script.run_env()
venv/lib/python3.12/site-packages/alembic/script/base.py:583: in run_env
    util.load_python_file(self.dir, "env.py")
venv/lib/python3.12/site-packages/alembic/util/pyfiles.py:95: in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/util/pyfiles.py:113: in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap_external>:995: in exec_module
    ???
<frozen importlib._bootstrap>:488: in _call_with_frames_removed
    ???
migrations/env.py:93: in <module>
    run_migrations_online()
migrations/env.py:87: in run_migrations_online
    context.run_migrations()
<string>:8: in run_migrations
    ???
venv/lib/python3.12/site-packages/alembic/runtime/environment.py:948: in run_migrations
    self.get_context().run_migrations(**kw)
venv/lib/python3.12/site-packages/alembic/runtime/migration.py:615: in run_migrations
    for step in self._migrations_fn(heads, self):
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/command.py:392: in upgrade
    return script._upgrade_revs(revision, rev)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/base.py:447: in _upgrade_revs
    with self._catch_revision_errors(
/usr/lib/python3.12/contextlib.py:158: in __exit__
    self.gen.throw(value)
venv/lib/python3.12/site-packages/alembic/script/base.py:277: in _catch_revision_errors
    raise util.CommandError(multiple_heads) from mh
E   alembic.util.exc.CommandError: Multiple head revisions are present for given argument 'head'; please specify a specific target revision, '<branchname>@head' to narrow to a specific head, or 'heads' for all heads
----------------------------- Captured stderr call -----------------------------
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
____ TestMigrationValidatorIntegration.test_validate_nonexistent_migration _____
venv/lib/python3.12/site-packages/alembic/script/base.py:251: in _catch_revision_errors
    yield
venv/lib/python3.12/site-packages/alembic/script/base.py:459: in _upgrade_revs
    for script in reversed(list(revs))
                           ^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:813: in iterate_revisions
    revisions, heads = fn(
venv/lib/python3.12/site-packages/alembic/script/revision.py:1438: in _collect_upgrade_revisions
    for rev in self._parse_upgrade_target(
venv/lib/python3.12/site-packages/alembic/script/revision.py:1229: in _parse_upgrade_target
    return self.get_revisions(target)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:545: in get_revisions
    resolved_id, branch_label = self._resolve_revision_number(id_)
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:777: in _resolve_revision_number
    current_head = self.get_current_head(branch_label)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:509: in get_current_head
    raise MultipleHeads(
E   alembic.script.revision.MultipleHeads: Multiple heads are present for given argument 'head'; context_aware_schema, contextual_schema, finetuned_schema, hierarchical_schema, keyword_schema, knowledge_graph_schema, late_chunking_schema, multi_query_schema, query_expansion_schema, reranking_schema, self_reflective_schema, semantic_api_schema

The above exception was the direct cause of the following exception:
tests/integration/database/test_migration_validator_integration.py:256: in test_validate_nonexistent_migration
    command.upgrade(alembic_config, "head")
venv/lib/python3.12/site-packages/alembic/command.py:403: in upgrade
    script.run_env()
venv/lib/python3.12/site-packages/alembic/script/base.py:583: in run_env
    util.load_python_file(self.dir, "env.py")
venv/lib/python3.12/site-packages/alembic/util/pyfiles.py:95: in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/util/pyfiles.py:113: in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap_external>:995: in exec_module
    ???
<frozen importlib._bootstrap>:488: in _call_with_frames_removed
    ???
migrations/env.py:93: in <module>
    run_migrations_online()
migrations/env.py:87: in run_migrations_online
    context.run_migrations()
<string>:8: in run_migrations
    ???
venv/lib/python3.12/site-packages/alembic/runtime/environment.py:948: in run_migrations
    self.get_context().run_migrations(**kw)
venv/lib/python3.12/site-packages/alembic/runtime/migration.py:615: in run_migrations
    for step in self._migrations_fn(heads, self):
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/command.py:392: in upgrade
    return script._upgrade_revs(revision, rev)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/base.py:447: in _upgrade_revs
    with self._catch_revision_errors(
/usr/lib/python3.12/contextlib.py:158: in __exit__
    self.gen.throw(value)
venv/lib/python3.12/site-packages/alembic/script/base.py:277: in _catch_revision_errors
    raise util.CommandError(multiple_heads) from mh
E   alembic.util.exc.CommandError: Multiple head revisions are present for given argument 'head'; please specify a specific target revision, '<branchname>@head' to narrow to a specific head, or 'heads' for all heads
----------------------------- Captured stderr call -----------------------------
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
_______ TestMigrationValidatorIntegration.test_validate_after_downgrade ________
venv/lib/python3.12/site-packages/alembic/script/base.py:251: in _catch_revision_errors
    yield
venv/lib/python3.12/site-packages/alembic/script/base.py:459: in _upgrade_revs
    for script in reversed(list(revs))
                           ^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:813: in iterate_revisions
    revisions, heads = fn(
venv/lib/python3.12/site-packages/alembic/script/revision.py:1438: in _collect_upgrade_revisions
    for rev in self._parse_upgrade_target(
venv/lib/python3.12/site-packages/alembic/script/revision.py:1229: in _parse_upgrade_target
    return self.get_revisions(target)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:545: in get_revisions
    resolved_id, branch_label = self._resolve_revision_number(id_)
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:777: in _resolve_revision_number
    current_head = self.get_current_head(branch_label)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:509: in get_current_head
    raise MultipleHeads(
E   alembic.script.revision.MultipleHeads: Multiple heads are present for given argument 'head'; context_aware_schema, contextual_schema, finetuned_schema, hierarchical_schema, keyword_schema, knowledge_graph_schema, late_chunking_schema, multi_query_schema, query_expansion_schema, reranking_schema, self_reflective_schema, semantic_api_schema

The above exception was the direct cause of the following exception:
tests/integration/database/test_migration_validator_integration.py:272: in test_validate_after_downgrade
    command.upgrade(alembic_config, "head")
venv/lib/python3.12/site-packages/alembic/command.py:403: in upgrade
    script.run_env()
venv/lib/python3.12/site-packages/alembic/script/base.py:583: in run_env
    util.load_python_file(self.dir, "env.py")
venv/lib/python3.12/site-packages/alembic/util/pyfiles.py:95: in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/util/pyfiles.py:113: in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap_external>:995: in exec_module
    ???
<frozen importlib._bootstrap>:488: in _call_with_frames_removed
    ???
migrations/env.py:93: in <module>
    run_migrations_online()
migrations/env.py:87: in run_migrations_online
    context.run_migrations()
<string>:8: in run_migrations
    ???
venv/lib/python3.12/site-packages/alembic/runtime/environment.py:948: in run_migrations
    self.get_context().run_migrations(**kw)
venv/lib/python3.12/site-packages/alembic/runtime/migration.py:615: in run_migrations
    for step in self._migrations_fn(heads, self):
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/command.py:392: in upgrade
    return script._upgrade_revs(revision, rev)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/base.py:447: in _upgrade_revs
    with self._catch_revision_errors(
/usr/lib/python3.12/contextlib.py:158: in __exit__
    self.gen.throw(value)
venv/lib/python3.12/site-packages/alembic/script/base.py:277: in _catch_revision_errors
    raise util.CommandError(multiple_heads) from mh
E   alembic.util.exc.CommandError: Multiple head revisions are present for given argument 'head'; please specify a specific target revision, '<branchname>@head' to narrow to a specific head, or 'heads' for all heads
----------------------------- Captured stderr call -----------------------------
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
___ TestMigrationValidatorIntegration.test_multiple_validators_same_database ___
venv/lib/python3.12/site-packages/alembic/script/base.py:251: in _catch_revision_errors
    yield
venv/lib/python3.12/site-packages/alembic/script/base.py:459: in _upgrade_revs
    for script in reversed(list(revs))
                           ^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:813: in iterate_revisions
    revisions, heads = fn(
venv/lib/python3.12/site-packages/alembic/script/revision.py:1438: in _collect_upgrade_revisions
    for rev in self._parse_upgrade_target(
venv/lib/python3.12/site-packages/alembic/script/revision.py:1229: in _parse_upgrade_target
    return self.get_revisions(target)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:545: in get_revisions
    resolved_id, branch_label = self._resolve_revision_number(id_)
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:777: in _resolve_revision_number
    current_head = self.get_current_head(branch_label)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:509: in get_current_head
    raise MultipleHeads(
E   alembic.script.revision.MultipleHeads: Multiple heads are present for given argument 'head'; context_aware_schema, contextual_schema, finetuned_schema, hierarchical_schema, keyword_schema, knowledge_graph_schema, late_chunking_schema, multi_query_schema, query_expansion_schema, reranking_schema, self_reflective_schema, semantic_api_schema

The above exception was the direct cause of the following exception:
tests/integration/database/test_migration_validator_integration.py:295: in test_multiple_validators_same_database
    command.upgrade(alembic_config, "head")
venv/lib/python3.12/site-packages/alembic/command.py:403: in upgrade
    script.run_env()
venv/lib/python3.12/site-packages/alembic/script/base.py:583: in run_env
    util.load_python_file(self.dir, "env.py")
venv/lib/python3.12/site-packages/alembic/util/pyfiles.py:95: in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/util/pyfiles.py:113: in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap_external>:995: in exec_module
    ???
<frozen importlib._bootstrap>:488: in _call_with_frames_removed
    ???
migrations/env.py:93: in <module>
    run_migrations_online()
migrations/env.py:87: in run_migrations_online
    context.run_migrations()
<string>:8: in run_migrations
    ???
venv/lib/python3.12/site-packages/alembic/runtime/environment.py:948: in run_migrations
    self.get_context().run_migrations(**kw)
venv/lib/python3.12/site-packages/alembic/runtime/migration.py:615: in run_migrations
    for step in self._migrations_fn(heads, self):
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/command.py:392: in upgrade
    return script._upgrade_revs(revision, rev)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/base.py:447: in _upgrade_revs
    with self._catch_revision_errors(
/usr/lib/python3.12/contextlib.py:158: in __exit__
    self.gen.throw(value)
venv/lib/python3.12/site-packages/alembic/script/base.py:277: in _catch_revision_errors
    raise util.CommandError(multiple_heads) from mh
E   alembic.util.exc.CommandError: Multiple head revisions are present for given argument 'head'; please specify a specific target revision, '<branchname>@head' to narrow to a specific head, or 'heads' for all heads
----------------------------- Captured stderr call -----------------------------
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
__ TestMigrationValidatorEdgeCases.test_validator_with_auto_discovered_config __
venv/lib/python3.12/site-packages/alembic/script/base.py:251: in _catch_revision_errors
    yield
venv/lib/python3.12/site-packages/alembic/script/base.py:398: in get_current_head
    return self.revision_map.get_current_head()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:509: in get_current_head
    raise MultipleHeads(
E   alembic.script.revision.MultipleHeads: Multiple heads are present for given argument 'head'; context_aware_schema, contextual_schema, finetuned_schema, hierarchical_schema, keyword_schema, knowledge_graph_schema, late_chunking_schema, multi_query_schema, query_expansion_schema, reranking_schema, self_reflective_schema, semantic_api_schema

The above exception was the direct cause of the following exception:
tests/integration/database/test_migration_validator_integration.py:349: in test_validator_with_auto_discovered_config
    all_revisions = validator.get_all_revisions()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
rag_factory/services/database/migration_validator.py:264: in get_all_revisions
    head = self.script_dir.get_current_head()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/base.py:391: in get_current_head
    with self._catch_revision_errors(
/usr/lib/python3.12/contextlib.py:158: in __exit__
    self.gen.throw(value)
venv/lib/python3.12/site-packages/alembic/script/base.py:277: in _catch_revision_errors
    raise util.CommandError(multiple_heads) from mh
E   alembic.util.exc.CommandError: The script directory has multiple heads (due to branching).Please use get_heads(), or merge the branches using alembic merge.
_______ TestMigrationValidatorEdgeCases.test_validate_empty_requirements _______
tests/integration/database/test_migration_validator_integration.py:364: in test_validate_empty_requirements
    assert is_valid is True
E   assert False is True
----------------------------- Captured stderr call -----------------------------
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
------------------------------ Captured log call -------------------------------
INFO     alembic.runtime.migration:migration.py:216 Context impl PostgresqlImpl.
INFO     alembic.runtime.migration:migration.py:219 Will assume transactional DDL.
=============================== warnings summary ===============================
rag_factory/services/llm/config.py:8
  /mnt/MCPProyects/ragTools/rag_factory/services/llm/config.py:8: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class LLMServiceConfig(BaseModel):

rag_factory/database/config.py:12
  /mnt/MCPProyects/ragTools/rag_factory/database/config.py:12: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DatabaseConfig(BaseSettings):

rag_factory/strategies/agentic/config.py:9
  /mnt/MCPProyects/ragTools/rag_factory/strategies/agentic/config.py:9: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class AgenticStrategyConfig(BaseModel):

rag_factory/strategies/late_chunking/models.py:21
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:21: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class TokenEmbedding(BaseModel):

rag_factory/strategies/late_chunking/models.py:34
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:34: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DocumentEmbedding(BaseModel):

rag_factory/strategies/late_chunking/models.py:49
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:49: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class EmbeddingChunk(BaseModel):

rag_factory/strategies/contextual/config.py:31
  /mnt/MCPProyects/ragTools/rag_factory/strategies/contextual/config.py:31: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ContextualRetrievalConfig(BaseModel):

rag_factory/strategies/fine_tuned/config.py:6
  /mnt/MCPProyects/ragTools/rag_factory/strategies/fine_tuned/config.py:6: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class FineTunedConfig(BaseSettings):

tests/integration/database/test_migration_validator_integration.py: 13 warnings
  /mnt/MCPProyects/ragTools/tests/integration/database/test_migration_validator_integration.py:50: RuntimeWarning: coroutine 'PostgresqlDatabaseService.close' was never awaited
    service.close()
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/integration/database/test_migration_validator_integration.py::TestMigrationValidatorEdgeCases::test_validator_with_auto_discovered_config
tests/integration/database/test_migration_validator_integration.py::TestMigrationValidatorEdgeCases::test_validate_empty_requirements
  /mnt/MCPProyects/ragTools/tests/integration/database/test_migration_validator_integration.py:336: RuntimeWarning: coroutine 'PostgresqlDatabaseService.close' was never awaited
    service.close()
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.3-final-0 ________________

Name                                                               Stmts   Miss  Cover   Missing
------------------------------------------------------------------------------------------------
rag_factory/__init__.py                                                7      2    71%   18-19
rag_factory/__version__.py                                             1      0   100%
rag_factory/cli/__init__.py                                            2      0   100%
rag_factory/cli/commands/__init__.py                                   1      0   100%
rag_factory/cli/commands/benchmark.py                                 96     81    16%   40-53, 64-84, 148-263
rag_factory/cli/commands/check_consistency.py                         43     33    23%   64-120
rag_factory/cli/commands/config.py                                    78     68    13%   26-64, 102-188
rag_factory/cli/commands/gui.py                                       25     17    32%   61-91
rag_factory/cli/commands/index.py                                     65     52    20%   29-39, 93-185
rag_factory/cli/commands/query.py                                     47     36    23%   73-149
rag_factory/cli/commands/repl.py                                     152    130    14%   29-56, 63-108, 112-120, 124-133, 137-155, 159-172, 176-186, 190-207, 211-220, 253-260
rag_factory/cli/commands/strategies.py                                45     36    20%   48-120
rag_factory/cli/commands/validate_e2e.py                              91     69    24%   37-38, 42-142, 145-156
rag_factory/cli/commands/validate_pipeline.py                         70     57    19%   57-156
rag_factory/cli/formatters/__init__.py                                 4      0   100%
rag_factory/cli/formatters/consistency.py                             61     55    10%   21-69, 79-103, 108-138
rag_factory/cli/formatters/output.py                                  20      9    55%   23-24, 43-44, 63-64, 74, 79, 84
rag_factory/cli/formatters/results.py                                 71     62    13%   28-55, 72-99, 116-144, 157-181
rag_factory/cli/formatters/validation.py                              63     53    16%   25-43, 48-56, 65-77, 86-98, 103-129, 134-137
rag_factory/cli/main.py                                               32     10    69%   25-28, 48-49, 79-81, 85
rag_factory/cli/utils/__init__.py                                      3      0   100%
rag_factory/cli/utils/progress.py                                     14      8    43%   34-47, 73-76
rag_factory/cli/utils/validation.py                                   53     42    21%   30-41, 57-77, 93-118, 135
rag_factory/config/__init__.py                                         4      0   100%
rag_factory/config/env_resolver.py                                    52     37    29%   47-54, 70-90, 110, 129-147
rag_factory/config/schemas/__init__.py                                 2      0   100%
rag_factory/config/schemas/version.py                                 10      6    40%   29-38
rag_factory/config/strategy_loader.py                                 54     36    33%   32-41, 45-60, 75-89, 101-104
rag_factory/config/strategy_pair_manager.py                          105     83    21%   40-72, 92-132, 148-198, 210-215, 229, 259-282
rag_factory/config/validator.py                                       93     76    18%   27-30, 34-39, 53-58, 62-74, 111-132, 177-198, 215-235, 247-249, 271-295, 333-354
rag_factory/core/__init__.py                                           4      4     0%   7-23
rag_factory/core/capabilities.py                                      61     16    74%   129, 155, 173-174, 239-253
rag_factory/core/indexing_interface.py                                54     35    35%   55-57, 118-123, 144, 164, 208, 260, 272, 292-313, 341-364
rag_factory/core/pipeline.py                                          49     35    29%   22-24, 33-40, 55-77, 95-96, 105-108, 117-120, 137-146
rag_factory/core/retrieval_interface.py                               38     20    47%   56-58, 112-117, 138, 158, 196, 247, 259, 285-309
rag_factory/database/__init__.py                                       4      0   100%
rag_factory/database/config.py                                        17      0   100%
rag_factory/database/connection.py                                    80     54    32%   40-48, 61-86, 96, 107, 126-137, 150-157, 165-170, 178-183, 196-197, 209-214, 218, 222
rag_factory/database/env_validator.py                                 38     18    53%   46-54, 66-77, 86-88, 118, 126, 139
rag_factory/database/models.py                                        85     32    62%   31-34, 37-45, 48-54, 66-69, 72-77, 80-85, 181, 323-325
rag_factory/database/vector_indexing.py                               38     38     0%   7-114
rag_factory/evaluation/__init__.py                                     4      4     0%   29-41
rag_factory/evaluation/analysis/__init__.py                            3      3     0%   8-11
rag_factory/evaluation/analysis/comparison.py                        135    135     0%   8-323
rag_factory/evaluation/analysis/statistics.py                         81     81     0%   8-320
rag_factory/evaluation/benchmarks/__init__.py                          3      3     0%   8-14
rag_factory/evaluation/benchmarks/config.py                           25     25     0%   7-64
rag_factory/evaluation/benchmarks/runner.py                          155    155     0%   8-423
rag_factory/evaluation/datasets/__init__.py                            3      3     0%   8-14
rag_factory/evaluation/datasets/loader.py                             88     88     0%   8-281
rag_factory/evaluation/datasets/schema.py                             52     52     0%   8-160
rag_factory/evaluation/datasets/statistics.py                         65     65     0%   8-226
rag_factory/evaluation/exporters/__init__.py                           4      4     0%   8-12
rag_factory/evaluation/exporters/csv_exporter.py                      52     52     0%   3-124
rag_factory/evaluation/exporters/html_exporter.py                     47     47     0%   3-293
rag_factory/evaluation/exporters/json_exporter.py                     19     19     0%   3-68
rag_factory/evaluation/metrics/__init__.py                             3      3     0%   12-25
rag_factory/evaluation/metrics/base.py                                31     31     0%   8-115
rag_factory/evaluation/metrics/cost.py                                65     65     0%   8-313
rag_factory/evaluation/metrics/performance.py                         42     42     0%   8-202
rag_factory/evaluation/metrics/quality.py                             84     84     0%   8-377
rag_factory/evaluation/metrics/retrieval.py                           77     77     0%   9-401
rag_factory/exceptions.py                                             13      0   100%
rag_factory/factory.py                                               187    137    27%   109-116, 144, 165-170, 202-230, 256-270, 300-324, 347-348, 365, 384, 401, 418, 435, 451-460, 480-502, 528-545, 568-611, 644-699, 703-715
rag_factory/gui/__init__.py                                            2      0   100%
rag_factory/gui/components/__init__.py                                 3      0   100%
rag_factory/gui/components/scrolled_text.py                           64     52    19%   53-62, 80-114, 122, 131-142, 151-164, 168, 176, 184-199
rag_factory/gui/components/status_bar.py                              62     49    21%   40-59, 64-113, 122-137, 146-152, 161, 168, 172-184, 192-196
rag_factory/gui/main_window.py                                       701    640     9%   64-109, 113-128, 137-164, 168-194, 205-263, 268-293, 297-321, 330-390, 398-422, 435-469, 482-500, 513-551, 564-602, 615-673, 686-690, 694-732, 736-738, 746-789, 806-817, 826-858, 862-879, 885-895, 899-970, 974-1062, 1072-1074, 1082-1084, 1088-1164, 1177-1234, 1244-1246, 1254-1258, 1262-1319, 1324-1371, 1375-1394, 1398, 1411-1487, 1491-1549, 1554-1571, 1575-1582, 1587-1600, 1605-1614, 1618
rag_factory/gui/utils/__init__.py                                      3      0   100%
rag_factory/gui/utils/formatters.py                                   57     49    14%   27-30, 50-90, 110-118, 134-137, 155-165
rag_factory/gui/utils/threading.py                                    32     25    22%   44-73, 96-99, 124-129
rag_factory/legacy_config.py                                         155    155     0%   22-542
rag_factory/models/__init__.py                                         6      6     0%   3-14
rag_factory/models/embedding/__init__.py                               4      4     0%   3-12
rag_factory/models/embedding/loader.py                               179    179     0%   3-367
rag_factory/models/embedding/models.py                                47     47     0%   3-106
rag_factory/models/embedding/registry.py                             128    128     0%   3-282
rag_factory/models/evaluation/__init__.py                              3      3     0%   3-6
rag_factory/models/evaluation/ab_testing.py                           98     98     0%   3-281
rag_factory/models/evaluation/models.py                               29     29     0%   3-74
rag_factory/observability/__init__.py                                  3      3     0%   3-10
rag_factory/observability/integrations/__init__.py                     1      1     0%   3
rag_factory/observability/integrations/prometheus.py                  47     47     0%   3-229
rag_factory/observability/logging/__init__.py                          2      2     0%   3-5
rag_factory/observability/logging/config.py                           16     16     0%   3-37
rag_factory/observability/logging/filters.py                          41     41     0%   3-103
rag_factory/observability/logging/logger.py                           86     86     0%   3-396
rag_factory/observability/metrics/__init__.py                          2      2     0%   3-9
rag_factory/observability/metrics/collector.py                       143    143     0%   3-459
rag_factory/observability/metrics/cost.py                             39     39     0%   3-221
rag_factory/observability/metrics/performance.py                      64     64     0%   3-196
rag_factory/observability/monitoring/__init__.py                       1      1     0%   3
rag_factory/observability/monitoring/api.py                          101    101     0%   3-328
rag_factory/pipeline.py                                              156    156     0%   34-507
rag_factory/registry/__init__.py                                       4      0   100%
rag_factory/registry/exceptions.py                                     6      0   100%
rag_factory/registry/service_factory.py                               84     69    18%   45-54, 62-65, 70-73, 78-80, 84-86, 95-127, 136-165, 176-215, 229-255
rag_factory/registry/service_registry.py                              91     71    22%   43-51, 55-85, 103-156, 164, 178-203, 210-223, 227, 231-232
rag_factory/repositories/__init__.py                                   5      0   100%
rag_factory/repositories/base.py                                      42     21    50%   38, 53, 70, 87, 103, 114-118, 125, 136-139, 159-164
rag_factory/repositories/chunk.py                                    206    180    13%   40-45, 68-76, 90-95, 120-133, 155-171, 187-202, 221-231, 250-261, 287-328, 355-396, 422-474, 489-499, 513-521, 537-543, 557-563, 577-587, 604-626, 639-670
rag_factory/repositories/document.py                                  93     74    20%   41-46, 63-68, 98-118, 140-156, 172-187, 206, 223-233, 247-255, 272-279, 290-293, 307-312
rag_factory/repositories/exceptions.py                                18      7    61%   34-36, 56-59
rag_factory/services/__init__.py                                       4      0   100%
rag_factory/services/api/__init__.py                                   4      4     0%   7-11
rag_factory/services/api/anthropic.py                                 27     27     0%   7-141
rag_factory/services/api/cohere.py                                    30     30     0%   7-113
rag_factory/services/api/openai.py                                    46     46     0%   7-235
rag_factory/services/consistency.py                                   32     24    25%   80-113, 144-170
rag_factory/services/database/__init__.py                              5      0   100%
rag_factory/services/database/database_context.py                    181    159    12%   58-64, 88-106, 123, 140-150, 179-200, 223-240, 256-266, 305-330, 338-339, 343-406, 414-415, 430-510, 516-517, 521-546
rag_factory/services/database/migration_validator.py                  96     17    82%   88, 113, 120-121, 164, 179-181, 209, 217-219, 265-271, 286
rag_factory/services/database/neo4j.py                                54     38    30%   15-17, 60-71, 79-84, 103-114, 134-150, 172-181, 188-191, 195, 199
rag_factory/services/database/postgres.py                            195    143    27%   17-18, 26-27, 85, 91-103, 131-145, 149-201, 214-269, 292-346, 360-375, 390-414, 425-440, 472-490, 505, 512-525, 580-598, 607-619, 623, 627
rag_factory/services/dependencies.py                                  41     21    49%   96-109, 134-140, 176-180
rag_factory/services/embedding/__init__.py                             4      0   100%
rag_factory/services/embedding/base.py                                31      6    81%   44, 59, 68, 77, 86, 98
rag_factory/services/embedding/cache.py                               43     33    23%   26-32, 43-58, 67-76, 80-82, 90-94
rag_factory/services/embedding/config.py                              29     13    55%   37-43, 50-68, 80
rag_factory/services/embedding/providers/__init__.py                   5      0   100%
rag_factory/services/embedding/providers/cohere.py                    53     36    32%   10-20, 55-75, 90-117, 125, 133, 141, 152-153
rag_factory/services/embedding/providers/local.py                     43     27    37%   8-9, 46-67, 83-109, 117, 125, 133, 146
rag_factory/services/embedding/providers/onnx_local.py               114     93    18%   18-19, 87-177, 193-250, 261-308, 319, 327, 335, 348
rag_factory/services/embedding/providers/openai.py                    51     34    33%   10-20, 53-72, 87-108, 116, 124, 132, 143-144
rag_factory/services/embedding/rate_limiter.py                        20     14    30%   27-37, 45-53
rag_factory/services/embedding/service.py                            100     83    17%   50-62, 79-93, 117-198, 220-222, 233-239, 248-266, 273-275
rag_factory/services/interfaces.py                                    35      0   100%
rag_factory/services/llm/__init__.py                                   5      0   100%
rag_factory/services/llm/base.py                                      43      0   100%
rag_factory/services/llm/config.py                                    23     11    52%   42-57
rag_factory/services/llm/prompt_template.py                           43     24    44%   47-82, 97-100, 111-115
rag_factory/services/llm/providers/__init__.py                        12     12     0%   5-22
rag_factory/services/llm/providers/anthropic.py                       57     57     0%   3-205
rag_factory/services/llm/providers/ollama.py                          55     55     0%   3-196
rag_factory/services/llm/providers/openai.py                          57     57     0%   3-210
rag_factory/services/llm/service.py                                   66     51    23%   32-39, 56-70, 93-129, 154-175, 186, 194-198, 215-216
rag_factory/services/llm/token_counter.py                             27     27     0%   3-72
rag_factory/services/local/__init__.py                                 2      2     0%   7-9
rag_factory/services/local/reranker.py                                32     32     0%   7-116
rag_factory/services/onnx/__init__.py                                  2      2     0%   7-9
rag_factory/services/onnx/embedding.py                                29     29     0%   7-129
rag_factory/services/utils/__init__.py                                 2      0   100%
rag_factory/services/utils/model_converter.py                        104    104     0%   8-291
rag_factory/services/utils/onnx_utils.py                             133    114    14%   22-23, 36-37, 67-123, 142-146, 172-218, 240-274, 291-312, 332-347, 360-378, 392-404
rag_factory/services/utils/reranker_selector.py                       68     68     0%   8-249
rag_factory/strategies/__init__.py                                     2      0   100%
rag_factory/strategies/agentic/__init__.py                             7      0   100%
rag_factory/strategies/agentic/agent.py                              151    130    14%   31-36, 45, 57, 66-90, 109-111, 123-161, 190-214, 230-265, 276-293, 310-331, 339-346, 357-368, 381-420
rag_factory/strategies/agentic/config.py                              12      0   100%
rag_factory/strategies/agentic/frameworks/__init__.py                  1      1     0%   9
rag_factory/strategies/agentic/query_analyzer.py                      89     65    27%   50-55, 67, 79-90, 109-125, 137-147, 159-178, 196-214, 225-260, 278
rag_factory/strategies/agentic/strategy.py                            87     60    31%   50-63, 76, 84, 94-132, 144, 156, 169, 182-222, 234-258, 267, 276, 284
rag_factory/strategies/agentic/tool_implementations.py               135     91    33%   36-37, 41, 45, 52, 86-129, 148-149, 153, 157, 164, 182-247, 266-267, 271, 275, 282, 329-373, 392-393, 397, 401, 407, 446-511
rag_factory/strategies/agentic/tools.py                               40      9    78%   66, 79, 89, 101, 112, 139-142
rag_factory/strategies/auto_register.py                               66     20    70%   13-14, 18-19, 23-24, 28-29, 33-34, 39-40, 46-47, 52-53, 58-59, 79-80
rag_factory/strategies/base.py                                        55     13    76%   80-85, 169-178
rag_factory/strategies/chunking/__init__.py                           15     15     0%   28-67
rag_factory/strategies/chunking/base.py                               91     91     0%   3-256
rag_factory/strategies/chunking/docling_chunker.py                    45     45     0%   13-188
rag_factory/strategies/chunking/fixed_size_chunker.py                 74     74     0%   3-204
rag_factory/strategies/chunking/hybrid_chunker.py                     70     70     0%   3-192
rag_factory/strategies/chunking/semantic_chunker.py                  195    195     0%   3-534
rag_factory/strategies/chunking/structural_chunker.py                147    147     0%   3-425
rag_factory/strategies/chunking/utils.py                              89     89     0%   3-264
rag_factory/strategies/contextual/__init__.py                          7      0   100%
rag_factory/strategies/contextual/batch_processor.py                  91     76    16%   41-43, 60-72, 84-90, 108-128, 145-161, 178-201, 218-266
rag_factory/strategies/contextual/config.py                           46      0   100%
rag_factory/strategies/contextual/context_generator.py                84     70    17%   35-36, 59-99, 112-135, 152-194, 209, 224-234
rag_factory/strategies/contextual/cost_tracker.py                     32     21    34%   31-35, 48-51, 69-82, 94-99, 111-114, 126
rag_factory/strategies/contextual/prompts.py                          25     17    32%   85-106, 119
rag_factory/strategies/contextual/storage.py                          44     35    20%   32-33, 42-45, 54-81, 98-118
rag_factory/strategies/contextual/strategy.py                         78     49    37%   54-67, 75, 83, 107-156, 173, 186, 207-215, 231-262, 278, 284, 289, 298
rag_factory/strategies/fine_tuned/__init__.py                          4      0   100%
rag_factory/strategies/fine_tuned/ab_testing.py                       78     78     0%   1-134
rag_factory/strategies/fine_tuned/config.py                           11      0   100%
rag_factory/strategies/fine_tuned/custom_loader.py                    40     28    30%   17-19, 36-73, 77, 84-88
rag_factory/strategies/fine_tuned/model_registry.py                  126     96    24%   39-50, 80-112, 132-149, 166-178, 182-196, 200-223, 227-240, 249-270, 274-287, 291-303
rag_factory/strategies/hierarchical/__init__.py                        5      5     0%   8-21
rag_factory/strategies/hierarchical/hierarchy_builder.py              79     79     0%   8-335
rag_factory/strategies/hierarchical/models.py                         58     58     0%   8-137
rag_factory/strategies/hierarchical/parent_retriever.py               89     89     0%   8-278
rag_factory/strategies/hierarchical/strategy.py                       76     76     0%   9-301
rag_factory/strategies/indexing/__init__.py                            6      0   100%
rag_factory/strategies/indexing/context_aware.py                     108     88    19%   31, 43, 63-134, 155-156, 160-170, 182-188, 192-198, 208-237, 241-242
rag_factory/strategies/indexing/hierarchical.py                       90     73    19%   50, 63, 88-134, 156-185, 201-236, 253-278, 292-293
rag_factory/strategies/indexing/in_memory.py                          41     25    39%   54, 65, 93-121, 143, 160, 173, 194-200
rag_factory/strategies/indexing/keyword_indexing.py                   42     31    26%   42, 53, 77-157
rag_factory/strategies/indexing/knowledge_graph_indexing.py           46     33    28%   18, 27, 48-89, 108-129
rag_factory/strategies/indexing/vector_embedding.py                   98     85    13%   25, 35, 55-116, 137-221
rag_factory/strategies/knowledge_graph/__init__.py                     4      4     0%   8-19
rag_factory/strategies/knowledge_graph/config.py                      21     21     0%   8-129
rag_factory/strategies/knowledge_graph/entity_extractor.py            70     70     0%   7-205
rag_factory/strategies/knowledge_graph/graph_store.py                 31     31     0%   8-124
rag_factory/strategies/knowledge_graph/hybrid_retriever.py            56     56     0%   8-164
rag_factory/strategies/knowledge_graph/memory_graph_store.py          97     97     0%   8-196
rag_factory/strategies/knowledge_graph/models.py                      53     53     0%   8-122
rag_factory/strategies/knowledge_graph/relationship_extractor.py      62     62     0%   8-189
rag_factory/strategies/knowledge_graph/strategy.py                    80     80     0%   8-256
rag_factory/strategies/late_chunking/__init__.py                       6      0   100%
rag_factory/strategies/late_chunking/coherence_analyzer.py            27     17    37%   20-21, 36-45, 57-65, 82-96
rag_factory/strategies/late_chunking/document_embedder.py            104     89    14%   29-74, 94-184, 202-215, 227-235, 256-279, 296-303, 318
rag_factory/strategies/late_chunking/embedding_chunker.py            117    102    13%   26, 41-61, 68-98, 105-155, 162-182, 191-192, 199-254, 265-289, 293-300
rag_factory/strategies/late_chunking/models.py                        62      0   100%
rag_factory/strategies/late_chunking/strategy.py                      70     46    34%   48-69, 77, 88, 107-122, 140-177, 196-205, 210, 215
rag_factory/strategies/multi_query/__init__.py                         7      7     0%   8-19
rag_factory/strategies/multi_query/config.py                          36     36     0%   3-138
rag_factory/strategies/multi_query/deduplicator.py                    87     87     0%   3-197
rag_factory/strategies/multi_query/parallel_executor.py               52     52     0%   3-163
rag_factory/strategies/multi_query/prompts.py                         10     10     0%   3-84
rag_factory/strategies/multi_query/ranker.py                          80     80     0%   3-201
rag_factory/strategies/multi_query/strategy.py                        68     68     0%   3-184
rag_factory/strategies/multi_query/variant_generator.py               62     62     0%   3-187
rag_factory/strategies/query_expansion/__init__.py                     8      0   100%
rag_factory/strategies/query_expansion/base.py                        66     10    85%   90, 103, 114-118, 130-133
rag_factory/strategies/query_expansion/cache.py                       52     40    23%   20-22, 38-55, 64-66, 70-73, 81-97, 105-112
rag_factory/strategies/query_expansion/expander_service.py            92     71    23%   36-40, 55-58, 75-148, 159-180, 204-215, 233-234, 242-246, 254, 265-273, 283-284
rag_factory/strategies/query_expansion/hyde_expander.py               19     12    37%   25-27, 41-65
rag_factory/strategies/query_expansion/llm_expander.py                25     16    36%   23-25, 39-71, 99
rag_factory/strategies/query_expansion/metrics.py                     66     30    55%   44-45, 53-57, 76-109, 130, 134, 146-152, 160
rag_factory/strategies/query_expansion/prompts.py                     13      7    46%   16, 28-56, 68-107
rag_factory/strategies/reranking/__init__.py                           7      0   100%
rag_factory/strategies/reranking/base.py                              68     16    76%   81, 101, 106, 110-119, 123-130
rag_factory/strategies/reranking/bge_reranker.py                      51     37    27%   14, 53-81, 103-147, 151
rag_factory/strategies/reranking/cache.py                             48     34    29%   32-34, 51-66, 76-77, 81, 90-101, 110-113, 121, 136-138
rag_factory/strategies/reranking/cohere_reranker.py                   34     20    41%   15-16, 55-71, 94-115, 119
rag_factory/strategies/reranking/cosine_reranker.py                   62     47    24%   54-72, 97-139, 158-171, 188, 209-215, 227-230, 242-245, 249
rag_factory/strategies/reranking/cross_encoder_reranker.py            40     27    32%   13-14, 53-76, 98-120, 124
rag_factory/strategies/reranking/metrics.py                           67     67     0%   8-264
rag_factory/strategies/reranking/reranker_service.py                 115     88    23%   56-67, 71-96, 113-225, 235-255, 269, 282-283, 287-292, 296-300, 308-310
rag_factory/strategies/retrieval/__init__.py                           6      0   100%
rag_factory/strategies/retrieval/hybrid_retriever.py                  51     37    27%   32, 39, 51-102, 110-144
rag_factory/strategies/retrieval/keyword_retriever.py                 56     41    27%   41, 52, 71-113, 126-133, 153-172
rag_factory/strategies/retrieval/knowledge_graph_retriever.py         22      9    59%   19, 27, 48-70
rag_factory/strategies/retrieval/multi_query_retriever.py             22      9    59%   19, 26, 44-66
rag_factory/strategies/retrieval/query_expansion_retriever.py         24      9    62%   20, 27, 45-67
rag_factory/strategies/retrieval/semantic_retriever.py                23     12    48%   23, 32, 61-94
rag_factory/strategies/self_reflective/__init__.py                     6      0   100%
rag_factory/strategies/self_reflective/config.py                      20      8    60%   29-42
rag_factory/strategies/self_reflective/grader.py                      80     65    19%   29-35, 51-67, 83-109, 135-171, 187-258, 266
rag_factory/strategies/self_reflective/models.py                      48      0   100%
rag_factory/strategies/self_reflective/refiner.py                     69     56    19%   28-30, 53-96, 113-143, 161-193, 208-228
rag_factory/strategies/self_reflective/strategy.py                    92     74    20%   38-53, 71-181, 192-206, 229-259, 264, 269
rag_factory/utils/__init__.py                                          3      0   100%
rag_factory/utils/token_counter.py                                    45     30    33%   36-40, 52-62, 74-82, 86, 90, 105-106, 124-135, 153-158
rag_factory/utils/tokenization.py                                     95     73    23%   36-40, 53-64, 87-114, 126-129, 141-144, 156, 175-190, 209-228, 241-243, 251-252, 270-271, 292-293, 314-315
------------------------------------------------------------------------------------------------
TOTAL                                                              13429  10868    19%
=========================== short test summary info ============================
FAILED tests/integration/database/test_migration_validator_integration.py::TestMigrationValidatorIntegration::test_validate_with_all_migrations - alembic.util.exc.CommandError: Multiple head revisions are present for given argument 'head'; please specify a specific target revision, '<branchname>@head' to narrow to a specific head, or 'heads' for all heads
FAILED tests/integration/database/test_migration_validator_integration.py::TestMigrationValidatorIntegration::test_validate_or_raise_success - alembic.util.exc.CommandError: Multiple head revisions are present for given argument 'head'; please specify a specific target revision, '<branchname>@head' to narrow to a specific head, or 'heads' for all heads
FAILED tests/integration/database/test_migration_validator_integration.py::TestMigrationValidatorIntegration::test_get_current_revision - alembic.util.exc.CommandError: Multiple head revisions are present for given argument 'head'; please specify a specific target revision, '<branchname>@head' to narrow to a specific head, or 'heads' for all heads
FAILED tests/integration/database/test_migration_validator_integration.py::TestMigrationValidatorIntegration::test_get_all_revisions - alembic.util.exc.CommandError: The script directory has multiple heads (due to branching).Please use get_heads(), or merge the branches using alembic merge.
FAILED tests/integration/database/test_migration_validator_integration.py::TestMigrationValidatorIntegration::test_is_at_head - alembic.util.exc.CommandError: The script directory has multiple heads (due to branching).Please use get_heads(), or merge the branches using alembic merge.
FAILED tests/integration/database/test_migration_validator_integration.py::TestMigrationValidatorIntegration::test_validate_single_migration - alembic.util.exc.CommandError: Multiple head revisions are present for given argument 'head'; please specify a specific target revision, '<branchname>@head' to narrow to a specific head, or 'heads' for all heads
FAILED tests/integration/database/test_migration_validator_integration.py::TestMigrationValidatorIntegration::test_validate_nonexistent_migration - alembic.util.exc.CommandError: Multiple head revisions are present for given argument 'head'; please specify a specific target revision, '<branchname>@head' to narrow to a specific head, or 'heads' for all heads
FAILED tests/integration/database/test_migration_validator_integration.py::TestMigrationValidatorIntegration::test_validate_after_downgrade - alembic.util.exc.CommandError: Multiple head revisions are present for given argument 'head'; please specify a specific target revision, '<branchname>@head' to narrow to a specific head, or 'heads' for all heads
FAILED tests/integration/database/test_migration_validator_integration.py::TestMigrationValidatorIntegration::test_multiple_validators_same_database - alembic.util.exc.CommandError: Multiple head revisions are present for given argument 'head'; please specify a specific target revision, '<branchname>@head' to narrow to a specific head, or 'heads' for all heads
FAILED tests/integration/database/test_migration_validator_integration.py::TestMigrationValidatorEdgeCases::test_validator_with_auto_discovered_config - alembic.util.exc.CommandError: The script directory has multiple heads (due to branching).Please use get_heads(), or merge the branches using alembic merge.
FAILED tests/integration/database/test_migration_validator_integration.py::TestMigrationValidatorEdgeCases::test_validate_empty_requirements - assert False is True
================== 11 failed, 4 passed, 23 warnings in 15.77s ==================

[11/206] PASSED: tests/integration/database/test_multi_context_isolation.py
  Tests: 10 (P:2 F:0 S:8)
[12/206] ALL_SKIPPED: tests/integration/documentation/test_documentation_integration.py
  Tests: 6 (P:0 F:0 S:6)
[13/206] PASSED: tests/integration/evaluation/test_evaluation_integration.py
  Tests: 7 (P:7 F:0 S:0)
[14/206] TIMEOUT: tests/integration/gui/test_end_to_end_workflow.py
  Tests: 6 (P:5 F:1 S:0)
----------------------------------------
============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.1, pluggy-1.6.0 -- /mnt/MCPProyects/ragTools/venv/bin/python3
cachedir: .pytest_cache
rootdir: /mnt/MCPProyects/ragTools
configfile: pytest.ini (WARNING: ignoring pytest config in pyproject.toml!)
plugins: anyio-4.12.0, cov-7.0.0, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 8 items

tests/integration/gui/test_end_to_end_workflow.py::TestGUILaunch::test_gui_launches_successfully PASSED [ 12%]
tests/integration/gui/test_end_to_end_workflow.py::TestGUILaunch::test_gui_initializes_components PASSED [ 25%]
tests/integration/gui/test_end_to_end_workflow.py::TestStrategyLoading::test_strategy_loading_workflow FAILED [ 37%]
tests/integration/gui/test_end_to_end_workflow.py::TestEndToEndWorkflow::test_indexing_workflow PASSED [ 50%]
tests/integration/gui/test_end_to_end_workflow.py::TestEndToEndWorkflow::test_retrieval_workflow PASSED [ 62%]
tests/integration/gui/test_end_to_end_workflow.py::TestThreadingSafety::test_concurrent_operations PASSED [ 75%]
tests/integration/gui/test_end_to_end_workflow.py::TestUtilityOperations::test_clear_data_workflow 
[15/206] TIMEOUT: tests/integration/gui/test_gui_launch.py
  Tests: 3 (P:2 F:1 S:0)
----------------------------------------
============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.1, pluggy-1.6.0 -- /mnt/MCPProyects/ragTools/venv/bin/python3
cachedir: .pytest_cache
rootdir: /mnt/MCPProyects/ragTools
configfile: pytest.ini (WARNING: ignoring pytest config in pyproject.toml!)
plugins: anyio-4.12.0, cov-7.0.0, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 8 items

tests/integration/gui/test_gui_launch.py::TestGUILaunch::test_gui_launches_without_error PASSED [ 12%]
tests/integration/gui/test_gui_launch.py::TestGUILaunch::test_gui_window_properties FAILED [ 25%]
tests/integration/gui/test_gui_launch.py::TestGUILaunch::test_gui_loads_strategies PASSED [ 37%]
tests/integration/gui/test_gui_launch.py::TestGUILaunch::test_gui_handles_missing_strategies_dir 
[16/206] PASSED: tests/integration/models/test_fine_tuned_embeddings_integration.py
  Tests: 6 (P:6 F:0 S:0)
[17/206] PASSED: tests/integration/observability/test_monitoring_integration.py
  Tests: 11 (P:11 F:0 S:0)
[18/206] PASSED: tests/integration_real/test_database_real.py
  Tests: 8 (P:8 F:0 S:0)
[19/206] PASSED: tests/integration_real/test_embedding_real.py
  Tests: 11 (P:8 F:0 S:3)
[20/206] PASSED: tests/integration_real/test_end_to_end_real.py
  Tests: 7 (P:7 F:0 S:0)
[21/206] PASSED: tests/integration_real/test_llm_real.py
  Tests: 10 (P:10 F:0 S:0)
[22/206] FAILED: tests/integration_real/test_neo4j_real.py
  Tests: 0 (P:0 F:0 S:0)
----------------------------------------
============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.1, pluggy-1.6.0 -- /mnt/MCPProyects/ragTools/venv/bin/python3
cachedir: .pytest_cache
rootdir: /mnt/MCPProyects/ragTools
configfile: pytest.ini (WARNING: ignoring pytest config in pyproject.toml!)
plugins: anyio-4.12.0, cov-7.0.0, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 9 items

tests/integration_real/test_neo4j_real.py::test_neo4j_connection ERROR   [ 11%]
tests/integration_real/test_neo4j_real.py::test_create_and_retrieve_node ERROR [ 22%]
tests/integration_real/test_neo4j_real.py::test_create_relationship ERROR [ 33%]
tests/integration_real/test_neo4j_real.py::test_graph_traversal ERROR    [ 44%]
tests/integration_real/test_neo4j_real.py::test_entity_storage ERROR     [ 55%]
tests/integration_real/test_neo4j_real.py::test_batch_node_creation ERROR [ 66%]
tests/integration_real/test_neo4j_real.py::test_update_node_properties ERROR [ 77%]
tests/integration_real/test_neo4j_real.py::test_delete_nodes ERROR       [ 88%]
tests/integration_real/test_neo4j_real.py::test_complex_query ERROR      [100%]

==================================== ERRORS ====================================
___________________ ERROR at setup of test_neo4j_connection ____________________
venv/lib/python3.12/site-packages/pytest_asyncio/plugin.py:458: in setup
    return super().setup()
           ^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/pytest_asyncio/plugin.py:743: in pytest_fixture_setup
    hook_result = yield
                  ^^^^^
venv/lib/python3.12/site-packages/pytest_asyncio/plugin.py:313: in _asyncgen_fixture_wrapper
    result = runner.run(setup(), context=context)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.12/asyncio/runners.py:118: in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.12/asyncio/base_events.py:687: in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/pytest_asyncio/plugin.py:309: in setup
    res = await gen_obj.__anext__()
          ^^^^^^^^^^^^^^^^^^^^^^^^^
tests/integration_real/conftest.py:315: in real_neo4j_service
    from rag_factory.services.database.neo4j import Neo4jDatabaseService
E   ImportError: cannot import name 'Neo4jDatabaseService' from 'rag_factory.services.database.neo4j' (/mnt/MCPProyects/ragTools/rag_factory/services/database/neo4j.py)
---------------------------- Captured stderr setup -----------------------------
DEBUG:neo4j.pool:[#0000]  _: <POOL> created, direct address IPv4Address(('192.168.56.1', 7687))
DEBUG:neo4j:[#0000]  _: <WORKSPACE> routing towards fixed database: None
DEBUG:neo4j:[#0000]  _: <WORKSPACE> pinning database: None
DEBUG:neo4j.pool:[#0000]  _: <POOL> acquire direct connection, access_mode='WRITE', database=AcquisitionDatabase(name=None, guessed=False)
DEBUG:neo4j.pool:[#0000]  _: <POOL> trying to hand out new connection
DEBUG:neo4j.io:[#0000]  _: <RESOLVE> in: 192.168.56.1:7687
DEBUG:neo4j.io:[#0000]  _: <RESOLVE> dns resolver out: 192.168.56.1:7687
DEBUG:neo4j.io:[#0000]  C: <OPEN> 192.168.56.1:7687
DEBUG:neo4j.io:[#A226]  C: <MAGIC> 0x6060B017
DEBUG:neo4j.io:[#A226]  C: <HANDSHAKE> 0x000001FF 0x00080805 0x00020404 0x00000003
DEBUG:neo4j.io:[#A226]  S: <HANDSHAKE> 0x00000405
DEBUG:neo4j.io:[#A226]  C: HELLO {'user_agent': 'neo4j-python/6.0.3 Python/3.12.3-final-0 (linux)', 'bolt_agent': {'product': 'neo4j-python/6.0.3', 'platform': 'Linux 6.8.0-60-generic; x86_64', 'language': 'Python/3.12.3-final-0', 'language_details': 'CPython; 3.12.3-final-0 (main, Feb  4 2025 14:48:35) [GCC 13.3.0]'}}
DEBUG:neo4j.io:[#A226]  _: <CONNECTION> client state: CONNECTED > AUTHENTICATION
DEBUG:neo4j.io:[#A226]  C: LOGON {'scheme': 'basic', 'principal': 'neo4j', 'credentials': '*******'}
DEBUG:neo4j.io:[#A226]  _: <CONNECTION> client state: AUTHENTICATION > READY
DEBUG:neo4j.io:[#A226]  S: SUCCESS {'server': 'Neo4j/5.13.0', 'connection_id': 'bolt-147340', 'hints': {'connection.recv_timeout_seconds': 120, 'telemetry.enabled': False}}
DEBUG:neo4j.io:[#A226]  _: <CONNECTION> server state: CONNECTED > AUTHENTICATION
DEBUG:neo4j.io:[#A226]  S: SUCCESS {}
DEBUG:neo4j.io:[#A226]  _: <CONNECTION> server state: AUTHENTICATION > READY
DEBUG:neo4j.io:[#A226]  C: RUN 'RETURN 1' {} {}
DEBUG:neo4j.io:[#A226]  _: <CONNECTION> client state: READY > STREAMING
DEBUG:neo4j.io:[#A226]  C: PULL {'n': 1000}
DEBUG:neo4j.io:[#A226]  S: SUCCESS {'t_first': 18, 'fields': ['1']}
DEBUG:neo4j.io:[#A226]  _: <CONNECTION> server state: READY > STREAMING
DEBUG:neo4j.io:[#A226]  S: RECORD * 1
DEBUG:neo4j.io:[#A226]  S: SUCCESS {'bookmark': 'FB:kcwQ4Cgc6rGGTJqFB5yoS2Vs+QOQ', 'type': 'r', 't_last': 0, 'db': 'neo4j'}
DEBUG:neo4j.io:[#A226]  _: <CONNECTION> server state: STREAMING > READY
DEBUG:neo4j.pool:[#A226]  _: <POOL> released bolt-147340
DEBUG:neo4j.pool:[#0000]  _: <POOL> close
DEBUG:neo4j.io:[#A226]  C: GOODBYE
DEBUG:neo4j.io:[#A226]  C: <CLOSE>
DEBUG:asyncio:Using selector: EpollSelector
DEBUG:asyncio:Using selector: EpollSelector
------------------------------ Captured log setup ------------------------------
DEBUG    neo4j.pool:_pool.py:647 [#0000]  _: <POOL> created, direct address IPv4Address(('192.168.56.1', 7687))
DEBUG    neo4j:workspace.py:215 [#0000]  _: <WORKSPACE> routing towards fixed database: None
DEBUG    neo4j:workspace.py:106 [#0000]  _: <WORKSPACE> pinning database: None
DEBUG    neo4j.pool:_pool.py:672 [#0000]  _: <POOL> acquire direct connection, access_mode='WRITE', database=AcquisitionDatabase(name=None, guessed=False)
DEBUG    neo4j.pool:_pool.py:417 [#0000]  _: <POOL> trying to hand out new connection
DEBUG    neo4j.io:_util.py:226 [#0000]  _: <RESOLVE> in: 192.168.56.1:7687
DEBUG    neo4j.io:_util.py:247 [#0000]  _: <RESOLVE> dns resolver out: 192.168.56.1:7687
DEBUG    neo4j.io:_bolt_socket.py:497 [#0000]  C: <OPEN> 192.168.56.1:7687
DEBUG    neo4j.io:_bolt_socket.py:240 [#A226]  C: <MAGIC> 0x6060B017
DEBUG    neo4j.io:_bolt_socket.py:245 [#A226]  C: <HANDSHAKE> 0x000001FF 0x00080805 0x00020404 0x00000003
DEBUG    neo4j.io:_bolt_socket.py:79 [#A226]  S: <HANDSHAKE> 0x00000405
DEBUG    neo4j.io:_bolt5.py:723 [#A226]  C: HELLO {'user_agent': 'neo4j-python/6.0.3 Python/3.12.3-final-0 (linux)', 'bolt_agent': {'product': 'neo4j-python/6.0.3', 'platform': 'Linux 6.8.0-60-generic; x86_64', 'language': 'Python/3.12.3-final-0', 'language_details': 'CPython; 3.12.3-final-0 (main, Feb  4 2025 14:48:35) [GCC 13.3.0]'}}
DEBUG    neo4j.io:_bolt5.py:97 [#A226]  _: <CONNECTION> client state: CONNECTED > AUTHENTICATION
DEBUG    neo4j.io:_bolt5.py:661 [#A226]  C: LOGON {'scheme': 'basic', 'principal': 'neo4j', 'credentials': '*******'}
DEBUG    neo4j.io:_bolt5.py:97 [#A226]  _: <CONNECTION> client state: AUTHENTICATION > READY
DEBUG    neo4j.io:_bolt5.py:480 [#A226]  S: SUCCESS {'server': 'Neo4j/5.13.0', 'connection_id': 'bolt-147340', 'hints': {'connection.recv_timeout_seconds': 120, 'telemetry.enabled': False}}
DEBUG    neo4j.io:_bolt5.py:86 [#A226]  _: <CONNECTION> server state: CONNECTED > AUTHENTICATION
DEBUG    neo4j.io:_bolt5.py:480 [#A226]  S: SUCCESS {}
DEBUG    neo4j.io:_bolt5.py:86 [#A226]  _: <CONNECTION> server state: AUTHENTICATION > READY
DEBUG    neo4j.io:_bolt5.py:796 [#A226]  C: RUN 'RETURN 1' {} {}
DEBUG    neo4j.io:_bolt5.py:97 [#A226]  _: <CONNECTION> client state: READY > STREAMING
DEBUG    neo4j.io:_bolt5.py:338 [#A226]  C: PULL {'n': 1000}
DEBUG    neo4j.io:_bolt5.py:480 [#A226]  S: SUCCESS {'t_first': 18, 'fields': ['1']}
DEBUG    neo4j.io:_bolt5.py:86 [#A226]  _: <CONNECTION> server state: READY > STREAMING
DEBUG    neo4j.io:_bolt5.py:471 [#A226]  S: RECORD * 1
DEBUG    neo4j.io:_bolt5.py:480 [#A226]  S: SUCCESS {'bookmark': 'FB:kcwQ4Cgc6rGGTJqFB5yoS2Vs+QOQ', 'type': 'r', 't_last': 0, 'db': 'neo4j'}
DEBUG    neo4j.io:_bolt5.py:86 [#A226]  _: <CONNECTION> server state: STREAMING > READY
DEBUG    neo4j.pool:_pool.py:515 [#A226]  _: <POOL> released bolt-147340
DEBUG    neo4j.pool:_pool.py:608 [#0000]  _: <POOL> close
DEBUG    neo4j.io:_bolt5.py:449 [#A226]  C: GOODBYE
DEBUG    neo4j.io:_bolt.py:1005 [#A226]  C: <CLOSE>
DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
_______________ ERROR at setup of test_create_and_retrieve_node ________________
venv/lib/python3.12/site-packages/pytest_asyncio/plugin.py:458: in setup
    return super().setup()
           ^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/pytest_asyncio/plugin.py:743: in pytest_fixture_setup
    hook_result = yield
                  ^^^^^
venv/lib/python3.12/site-packages/pytest_asyncio/plugin.py:313: in _asyncgen_fixture_wrapper
    result = runner.run(setup(), context=context)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.12/asyncio/runners.py:118: in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.12/asyncio/base_events.py:687: in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/pytest_asyncio/plugin.py:309: in setup
    res = await gen_obj.__anext__()
          ^^^^^^^^^^^^^^^^^^^^^^^^^
tests/integration_real/conftest.py:315: in real_neo4j_service
    from rag_factory.services.database.neo4j import Neo4jDatabaseService
E   ImportError: cannot import name 'Neo4jDatabaseService' from 'rag_factory.services.database.neo4j' (/mnt/MCPProyects/ragTools/rag_factory/services/database/neo4j.py)
---------------------------- Captured stderr setup -----------------------------
DEBUG:neo4j.pool:[#0000]  _: <POOL> created, direct address IPv4Address(('192.168.56.1', 7687))
DEBUG:neo4j:[#0000]  _: <WORKSPACE> routing towards fixed database: None
DEBUG:neo4j:[#0000]  _: <WORKSPACE> pinning database: None
DEBUG:neo4j.pool:[#0000]  _: <POOL> acquire direct connection, access_mode='WRITE', database=AcquisitionDatabase(name=None, guessed=False)
DEBUG:neo4j.pool:[#0000]  _: <POOL> trying to hand out new connection
DEBUG:neo4j.io:[#0000]  _: <RESOLVE> in: 192.168.56.1:7687
DEBUG:neo4j.io:[#0000]  _: <RESOLVE> dns resolver out: 192.168.56.1:7687
DEBUG:neo4j.io:[#0000]  C: <OPEN> 192.168.56.1:7687
DEBUG:neo4j.io:[#A230]  C: <MAGIC> 0x6060B017
DEBUG:neo4j.io:[#A230]  C: <HANDSHAKE> 0x000001FF 0x00080805 0x00020404 0x00000003
DEBUG:neo4j.io:[#A230]  S: <HANDSHAKE> 0x00000405
DEBUG:neo4j.io:[#A230]  C: HELLO {'user_agent': 'neo4j-python/6.0.3 Python/3.12.3-final-0 (linux)', 'bolt_agent': {'product': 'neo4j-python/6.0.3', 'platform': 'Linux 6.8.0-60-generic; x86_64', 'language': 'Python/3.12.3-final-0', 'language_details': 'CPython; 3.12.3-final-0 (main, Feb  4 2025 14:48:35) [GCC 13.3.0]'}}
DEBUG:neo4j.io:[#A230]  _: <CONNECTION> client state: CONNECTED > AUTHENTICATION
DEBUG:neo4j.io:[#A230]  C: LOGON {'scheme': 'basic', 'principal': 'neo4j', 'credentials': '*******'}
DEBUG:neo4j.io:[#A230]  _: <CONNECTION> client state: AUTHENTICATION > READY
DEBUG:neo4j.io:[#A230]  S: SUCCESS {'server': 'Neo4j/5.13.0', 'connection_id': 'bolt-147341', 'hints': {'connection.recv_timeout_seconds': 120, 'telemetry.enabled': False}}
DEBUG:neo4j.io:[#A230]  _: <CONNECTION> server state: CONNECTED > AUTHENTICATION
DEBUG:neo4j.io:[#A230]  S: SUCCESS {}
DEBUG:neo4j.io:[#A230]  _: <CONNECTION> server state: AUTHENTICATION > READY
DEBUG:neo4j.io:[#A230]  C: RUN 'RETURN 1' {} {}
DEBUG:neo4j.io:[#A230]  _: <CONNECTION> client state: READY > STREAMING
DEBUG:neo4j.io:[#A230]  C: PULL {'n': 1000}
DEBUG:neo4j.io:[#A230]  S: SUCCESS {'t_first': 4, 'fields': ['1']}
DEBUG:neo4j.io:[#A230]  _: <CONNECTION> server state: READY > STREAMING
DEBUG:neo4j.io:[#A230]  S: RECORD * 1
DEBUG:neo4j.io:[#A230]  S: SUCCESS {'bookmark': 'FB:kcwQ4Cgc6rGGTJqFB5yoS2Vs+QOQ', 'type': 'r', 't_last': 0, 'db': 'neo4j'}
DEBUG:neo4j.io:[#A230]  _: <CONNECTION> server state: STREAMING > READY
DEBUG:neo4j.pool:[#A230]  _: <POOL> released bolt-147341
DEBUG:neo4j.pool:[#0000]  _: <POOL> close
DEBUG:neo4j.io:[#A230]  C: GOODBYE
DEBUG:neo4j.io:[#A230]  C: <CLOSE>
DEBUG:asyncio:Using selector: EpollSelector
------------------------------ Captured log setup ------------------------------
DEBUG    neo4j.pool:_pool.py:647 [#0000]  _: <POOL> created, direct address IPv4Address(('192.168.56.1', 7687))
DEBUG    neo4j:workspace.py:215 [#0000]  _: <WORKSPACE> routing towards fixed database: None
DEBUG    neo4j:workspace.py:106 [#0000]  _: <WORKSPACE> pinning database: None
DEBUG    neo4j.pool:_pool.py:672 [#0000]  _: <POOL> acquire direct connection, access_mode='WRITE', database=AcquisitionDatabase(name=None, guessed=False)
DEBUG    neo4j.pool:_pool.py:417 [#0000]  _: <POOL> trying to hand out new connection
DEBUG    neo4j.io:_util.py:226 [#0000]  _: <RESOLVE> in: 192.168.56.1:7687
DEBUG    neo4j.io:_util.py:247 [#0000]  _: <RESOLVE> dns resolver out: 192.168.56.1:7687
DEBUG    neo4j.io:_bolt_socket.py:497 [#0000]  C: <OPEN> 192.168.56.1:7687
DEBUG    neo4j.io:_bolt_socket.py:240 [#A230]  C: <MAGIC> 0x6060B017
DEBUG    neo4j.io:_bolt_socket.py:245 [#A230]  C: <HANDSHAKE> 0x000001FF 0x00080805 0x00020404 0x00000003
DEBUG    neo4j.io:_bolt_socket.py:79 [#A230]  S: <HANDSHAKE> 0x00000405
DEBUG    neo4j.io:_bolt5.py:723 [#A230]  C: HELLO {'user_agent': 'neo4j-python/6.0.3 Python/3.12.3-final-0 (linux)', 'bolt_agent': {'product': 'neo4j-python/6.0.3', 'platform': 'Linux 6.8.0-60-generic; x86_64', 'language': 'Python/3.12.3-final-0', 'language_details': 'CPython; 3.12.3-final-0 (main, Feb  4 2025 14:48:35) [GCC 13.3.0]'}}
DEBUG    neo4j.io:_bolt5.py:97 [#A230]  _: <CONNECTION> client state: CONNECTED > AUTHENTICATION
DEBUG    neo4j.io:_bolt5.py:661 [#A230]  C: LOGON {'scheme': 'basic', 'principal': 'neo4j', 'credentials': '*******'}
DEBUG    neo4j.io:_bolt5.py:97 [#A230]  _: <CONNECTION> client state: AUTHENTICATION > READY
DEBUG    neo4j.io:_bolt5.py:480 [#A230]  S: SUCCESS {'server': 'Neo4j/5.13.0', 'connection_id': 'bolt-147341', 'hints': {'connection.recv_timeout_seconds': 120, 'telemetry.enabled': False}}
DEBUG    neo4j.io:_bolt5.py:86 [#A230]  _: <CONNECTION> server state: CONNECTED > AUTHENTICATION
DEBUG    neo4j.io:_bolt5.py:480 [#A230]  S: SUCCESS {}
DEBUG    neo4j.io:_bolt5.py:86 [#A230]  _: <CONNECTION> server state: AUTHENTICATION > READY
DEBUG    neo4j.io:_bolt5.py:796 [#A230]  C: RUN 'RETURN 1' {} {}
DEBUG    neo4j.io:_bolt5.py:97 [#A230]  _: <CONNECTION> client state: READY > STREAMING
DEBUG    neo4j.io:_bolt5.py:338 [#A230]  C: PULL {'n': 1000}
DEBUG    neo4j.io:_bolt5.py:480 [#A230]  S: SUCCESS {'t_first': 4, 'fields': ['1']}
DEBUG    neo4j.io:_bolt5.py:86 [#A230]  _: <CONNECTION> server state: READY > STREAMING
DEBUG    neo4j.io:_bolt5.py:471 [#A230]  S: RECORD * 1
DEBUG    neo4j.io:_bolt5.py:480 [#A230]  S: SUCCESS {'bookmark': 'FB:kcwQ4Cgc6rGGTJqFB5yoS2Vs+QOQ', 'type': 'r', 't_last': 0, 'db': 'neo4j'}
DEBUG    neo4j.io:_bolt5.py:86 [#A230]  _: <CONNECTION> server state: STREAMING > READY
DEBUG    neo4j.pool:_pool.py:515 [#A230]  _: <POOL> released bolt-147341
DEBUG    neo4j.pool:_pool.py:608 [#0000]  _: <POOL> close
DEBUG    neo4j.io:_bolt5.py:449 [#A230]  C: GOODBYE
DEBUG    neo4j.io:_bolt.py:1005 [#A230]  C: <CLOSE>
DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
__________________ ERROR at setup of test_create_relationship __________________
venv/lib/python3.12/site-packages/pytest_asyncio/plugin.py:458: in setup
    return super().setup()
           ^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/pytest_asyncio/plugin.py:743: in pytest_fixture_setup
    hook_result = yield
                  ^^^^^
venv/lib/python3.12/site-packages/pytest_asyncio/plugin.py:313: in _asyncgen_fixture_wrapper
    result = runner.run(setup(), context=context)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.12/asyncio/runners.py:118: in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.12/asyncio/base_events.py:687: in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/pytest_asyncio/plugin.py:309: in setup
    res = await gen_obj.__anext__()
          ^^^^^^^^^^^^^^^^^^^^^^^^^
tests/integration_real/conftest.py:315: in real_neo4j_service
    from rag_factory.services.database.neo4j import Neo4jDatabaseService
E   ImportError: cannot import name 'Neo4jDatabaseService' from 'rag_factory.services.database.neo4j' (/mnt/MCPProyects/ragTools/rag_factory/services/database/neo4j.py)
---------------------------- Captured stderr setup -----------------------------
DEBUG:neo4j.pool:[#0000]  _: <POOL> created, direct address IPv4Address(('192.168.56.1', 7687))
DEBUG:neo4j:[#0000]  _: <WORKSPACE> routing towards fixed database: None
DEBUG:neo4j:[#0000]  _: <WORKSPACE> pinning database: None
DEBUG:neo4j.pool:[#0000]  _: <POOL> acquire direct connection, access_mode='WRITE', database=AcquisitionDatabase(name=None, guessed=False)
DEBUG:neo4j.pool:[#0000]  _: <POOL> trying to hand out new connection
DEBUG:neo4j.io:[#0000]  _: <RESOLVE> in: 192.168.56.1:7687
DEBUG:neo4j.io:[#0000]  _: <RESOLVE> dns resolver out: 192.168.56.1:7687
DEBUG:neo4j.io:[#0000]  C: <OPEN> 192.168.56.1:7687
DEBUG:neo4j.io:[#A23A]  C: <MAGIC> 0x6060B017
DEBUG:neo4j.io:[#A23A]  C: <HANDSHAKE> 0x000001FF 0x00080805 0x00020404 0x00000003
DEBUG:neo4j.io:[#A23A]  S: <HANDSHAKE> 0x00000405
DEBUG:neo4j.io:[#A23A]  C: HELLO {'user_agent': 'neo4j-python/6.0.3 Python/3.12.3-final-0 (linux)', 'bolt_agent': {'product': 'neo4j-python/6.0.3', 'platform': 'Linux 6.8.0-60-generic; x86_64', 'language': 'Python/3.12.3-final-0', 'language_details': 'CPython; 3.12.3-final-0 (main, Feb  4 2025 14:48:35) [GCC 13.3.0]'}}
DEBUG:neo4j.io:[#A23A]  _: <CONNECTION> client state: CONNECTED > AUTHENTICATION
DEBUG:neo4j.io:[#A23A]  C: LOGON {'scheme': 'basic', 'principal': 'neo4j', 'credentials': '*******'}
DEBUG:neo4j.io:[#A23A]  _: <CONNECTION> client state: AUTHENTICATION > READY
DEBUG:neo4j.io:[#A23A]  S: SUCCESS {'server': 'Neo4j/5.13.0', 'connection_id': 'bolt-147342', 'hints': {'connection.recv_timeout_seconds': 120, 'telemetry.enabled': False}}
DEBUG:neo4j.io:[#A23A]  _: <CONNECTION> server state: CONNECTED > AUTHENTICATION
DEBUG:neo4j.io:[#A23A]  S: SUCCESS {}
DEBUG:neo4j.io:[#A23A]  _: <CONNECTION> server state: AUTHENTICATION > READY
DEBUG:neo4j.io:[#A23A]  C: RUN 'RETURN 1' {} {}
DEBUG:neo4j.io:[#A23A]  _: <CONNECTION> client state: READY > STREAMING
DEBUG:neo4j.io:[#A23A]  C: PULL {'n': 1000}
DEBUG:neo4j.io:[#A23A]  S: SUCCESS {'t_first': 1, 'fields': ['1']}
DEBUG:neo4j.io:[#A23A]  _: <CONNECTION> server state: READY > STREAMING
DEBUG:neo4j.io:[#A23A]  S: RECORD * 1
DEBUG:neo4j.io:[#A23A]  S: SUCCESS {'bookmark': 'FB:kcwQ4Cgc6rGGTJqFB5yoS2Vs+QOQ', 'type': 'r', 't_last': 0, 'db': 'neo4j'}
DEBUG:neo4j.io:[#A23A]  _: <CONNECTION> server state: STREAMING > READY
DEBUG:neo4j.pool:[#A23A]  _: <POOL> released bolt-147342
DEBUG:neo4j.pool:[#0000]  _: <POOL> close
DEBUG:neo4j.io:[#A23A]  C: GOODBYE
DEBUG:neo4j.io:[#A23A]  C: <CLOSE>
DEBUG:asyncio:Using selector: EpollSelector
------------------------------ Captured log setup ------------------------------
DEBUG    neo4j.pool:_pool.py:647 [#0000]  _: <POOL> created, direct address IPv4Address(('192.168.56.1', 7687))
DEBUG    neo4j:workspace.py:215 [#0000]  _: <WORKSPACE> routing towards fixed database: None
DEBUG    neo4j:workspace.py:106 [#0000]  _: <WORKSPACE> pinning database: None
DEBUG    neo4j.pool:_pool.py:672 [#0000]  _: <POOL> acquire direct connection, access_mode='WRITE', database=AcquisitionDatabase(name=None, guessed=False)
DEBUG    neo4j.pool:_pool.py:417 [#0000]  _: <POOL> trying to hand out new connection
DEBUG    neo4j.io:_util.py:226 [#0000]  _: <RESOLVE> in: 192.168.56.1:7687
DEBUG    neo4j.io:_util.py:247 [#0000]  _: <RESOLVE> dns resolver out: 192.168.56.1:7687
DEBUG    neo4j.io:_bolt_socket.py:497 [#0000]  C: <OPEN> 192.168.56.1:7687
DEBUG    neo4j.io:_bolt_socket.py:240 [#A23A]  C: <MAGIC> 0x6060B017
DEBUG    neo4j.io:_bolt_socket.py:245 [#A23A]  C: <HANDSHAKE> 0x000001FF 0x00080805 0x00020404 0x00000003
DEBUG    neo4j.io:_bolt_socket.py:79 [#A23A]  S: <HANDSHAKE> 0x00000405
DEBUG    neo4j.io:_bolt5.py:723 [#A23A]  C: HELLO {'user_agent': 'neo4j-python/6.0.3 Python/3.12.3-final-0 (linux)', 'bolt_agent': {'product': 'neo4j-python/6.0.3', 'platform': 'Linux 6.8.0-60-generic; x86_64', 'language': 'Python/3.12.3-final-0', 'language_details': 'CPython; 3.12.3-final-0 (main, Feb  4 2025 14:48:35) [GCC 13.3.0]'}}
DEBUG    neo4j.io:_bolt5.py:97 [#A23A]  _: <CONNECTION> client state: CONNECTED > AUTHENTICATION
DEBUG    neo4j.io:_bolt5.py:661 [#A23A]  C: LOGON {'scheme': 'basic', 'principal': 'neo4j', 'credentials': '*******'}
DEBUG    neo4j.io:_bolt5.py:97 [#A23A]  _: <CONNECTION> client state: AUTHENTICATION > READY
DEBUG    neo4j.io:_bolt5.py:480 [#A23A]  S: SUCCESS {'server': 'Neo4j/5.13.0', 'connection_id': 'bolt-147342', 'hints': {'connection.recv_timeout_seconds': 120, 'telemetry.enabled': False}}
DEBUG    neo4j.io:_bolt5.py:86 [#A23A]  _: <CONNECTION> server state: CONNECTED > AUTHENTICATION
DEBUG    neo4j.io:_bolt5.py:480 [#A23A]  S: SUCCESS {}
DEBUG    neo4j.io:_bolt5.py:86 [#A23A]  _: <CONNECTION> server state: AUTHENTICATION > READY
DEBUG    neo4j.io:_bolt5.py:796 [#A23A]  C: RUN 'RETURN 1' {} {}
DEBUG    neo4j.io:_bolt5.py:97 [#A23A]  _: <CONNECTION> client state: READY > STREAMING
DEBUG    neo4j.io:_bolt5.py:338 [#A23A]  C: PULL {'n': 1000}
DEBUG    neo4j.io:_bolt5.py:480 [#A23A]  S: SUCCESS {'t_first': 1, 'fields': ['1']}
DEBUG    neo4j.io:_bolt5.py:86 [#A23A]  _: <CONNECTION> server state: READY > STREAMING
DEBUG    neo4j.io:_bolt5.py:471 [#A23A]  S: RECORD * 1
DEBUG    neo4j.io:_bolt5.py:480 [#A23A]  S: SUCCESS {'bookmark': 'FB:kcwQ4Cgc6rGGTJqFB5yoS2Vs+QOQ', 'type': 'r', 't_last': 0, 'db': 'neo4j'}
DEBUG    neo4j.io:_bolt5.py:86 [#A23A]  _: <CONNECTION> server state: STREAMING > READY
DEBUG    neo4j.pool:_pool.py:515 [#A23A]  _: <POOL> released bolt-147342
DEBUG    neo4j.pool:_pool.py:608 [#0000]  _: <POOL> close
DEBUG    neo4j.io:_bolt5.py:449 [#A23A]  C: GOODBYE
DEBUG    neo4j.io:_bolt.py:1005 [#A23A]  C: <CLOSE>
DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
____________________ ERROR at setup of test_graph_traversal ____________________
venv/lib/python3.12/site-packages/pytest_asyncio/plugin.py:458: in setup
    return super().setup()
           ^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/pytest_asyncio/plugin.py:743: in pytest_fixture_setup
    hook_result = yield
                  ^^^^^
venv/lib/python3.12/site-packages/pytest_asyncio/plugin.py:313: in _asyncgen_fixture_wrapper
    result = runner.run(setup(), context=context)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.12/asyncio/runners.py:118: in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.12/asyncio/base_events.py:687: in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/pytest_asyncio/plugin.py:309: in setup
    res = await gen_obj.__anext__()
          ^^^^^^^^^^^^^^^^^^^^^^^^^
tests/integration_real/conftest.py:315: in real_neo4j_service
    from rag_factory.services.database.neo4j import Neo4jDatabaseService
E   ImportError: cannot import name 'Neo4jDatabaseService' from 'rag_factory.services.database.neo4j' (/mnt/MCPProyects/ragTools/rag_factory/services/database/neo4j.py)
---------------------------- Captured stderr setup -----------------------------
DEBUG:neo4j.pool:[#0000]  _: <POOL> created, direct address IPv4Address(('192.168.56.1', 7687))
DEBUG:neo4j:[#0000]  _: <WORKSPACE> routing towards fixed database: None
DEBUG:neo4j:[#0000]  _: <WORKSPACE> pinning database: None
DEBUG:neo4j.pool:[#0000]  _: <POOL> acquire direct connection, access_mode='WRITE', database=AcquisitionDatabase(name=None, guessed=False)
DEBUG:neo4j.pool:[#0000]  _: <POOL> trying to hand out new connection
DEBUG:neo4j.io:[#0000]  _: <RESOLVE> in: 192.168.56.1:7687
DEBUG:neo4j.io:[#0000]  _: <RESOLVE> dns resolver out: 192.168.56.1:7687
DEBUG:neo4j.io:[#0000]  C: <OPEN> 192.168.56.1:7687
DEBUG:neo4j.io:[#A248]  C: <MAGIC> 0x6060B017
DEBUG:neo4j.io:[#A248]  C: <HANDSHAKE> 0x000001FF 0x00080805 0x00020404 0x00000003
DEBUG:neo4j.io:[#A248]  S: <HANDSHAKE> 0x00000405
DEBUG:neo4j.io:[#A248]  C: HELLO {'user_agent': 'neo4j-python/6.0.3 Python/3.12.3-final-0 (linux)', 'bolt_agent': {'product': 'neo4j-python/6.0.3', 'platform': 'Linux 6.8.0-60-generic; x86_64', 'language': 'Python/3.12.3-final-0', 'language_details': 'CPython; 3.12.3-final-0 (main, Feb  4 2025 14:48:35) [GCC 13.3.0]'}}
DEBUG:neo4j.io:[#A248]  _: <CONNECTION> client state: CONNECTED > AUTHENTICATION
DEBUG:neo4j.io:[#A248]  C: LOGON {'scheme': 'basic', 'principal': 'neo4j', 'credentials': '*******'}
DEBUG:neo4j.io:[#A248]  _: <CONNECTION> client state: AUTHENTICATION > READY
DEBUG:neo4j.io:[#A248]  S: SUCCESS {'server': 'Neo4j/5.13.0', 'connection_id': 'bolt-147343', 'hints': {'connection.recv_timeout_seconds': 120, 'telemetry.enabled': False}}
DEBUG:neo4j.io:[#A248]  _: <CONNECTION> server state: CONNECTED > AUTHENTICATION
DEBUG:neo4j.io:[#A248]  S: SUCCESS {}
DEBUG:neo4j.io:[#A248]  _: <CONNECTION> server state: AUTHENTICATION > READY
DEBUG:neo4j.io:[#A248]  C: RUN 'RETURN 1' {} {}
DEBUG:neo4j.io:[#A248]  _: <CONNECTION> client state: READY > STREAMING
DEBUG:neo4j.io:[#A248]  C: PULL {'n': 1000}
DEBUG:neo4j.io:[#A248]  S: SUCCESS {'t_first': 0, 'fields': ['1']}
DEBUG:neo4j.io:[#A248]  _: <CONNECTION> server state: READY > STREAMING
DEBUG:neo4j.io:[#A248]  S: RECORD * 1
DEBUG:neo4j.io:[#A248]  S: SUCCESS {'bookmark': 'FB:kcwQ4Cgc6rGGTJqFB5yoS2Vs+QOQ', 'type': 'r', 't_last': 0, 'db': 'neo4j'}
DEBUG:neo4j.io:[#A248]  _: <CONNECTION> server state: STREAMING > READY
DEBUG:neo4j.pool:[#A248]  _: <POOL> released bolt-147343
DEBUG:neo4j.pool:[#0000]  _: <POOL> close
DEBUG:neo4j.io:[#A248]  C: GOODBYE
DEBUG:neo4j.io:[#A248]  C: <CLOSE>
DEBUG:asyncio:Using selector: EpollSelector
------------------------------ Captured log setup ------------------------------
DEBUG    neo4j.pool:_pool.py:647 [#0000]  _: <POOL> created, direct address IPv4Address(('192.168.56.1', 7687))
DEBUG    neo4j:workspace.py:215 [#0000]  _: <WORKSPACE> routing towards fixed database: None
DEBUG    neo4j:workspace.py:106 [#0000]  _: <WORKSPACE> pinning database: None
DEBUG    neo4j.pool:_pool.py:672 [#0000]  _: <POOL> acquire direct connection, access_mode='WRITE', database=AcquisitionDatabase(name=None, guessed=False)
DEBUG    neo4j.pool:_pool.py:417 [#0000]  _: <POOL> trying to hand out new connection
DEBUG    neo4j.io:_util.py:226 [#0000]  _: <RESOLVE> in: 192.168.56.1:7687
DEBUG    neo4j.io:_util.py:247 [#0000]  _: <RESOLVE> dns resolver out: 192.168.56.1:7687
DEBUG    neo4j.io:_bolt_socket.py:497 [#0000]  C: <OPEN> 192.168.56.1:7687
DEBUG    neo4j.io:_bolt_socket.py:240 [#A248]  C: <MAGIC> 0x6060B017
DEBUG    neo4j.io:_bolt_socket.py:245 [#A248]  C: <HANDSHAKE> 0x000001FF 0x00080805 0x00020404 0x00000003
DEBUG    neo4j.io:_bolt_socket.py:79 [#A248]  S: <HANDSHAKE> 0x00000405
DEBUG    neo4j.io:_bolt5.py:723 [#A248]  C: HELLO {'user_agent': 'neo4j-python/6.0.3 Python/3.12.3-final-0 (linux)', 'bolt_agent': {'product': 'neo4j-python/6.0.3', 'platform': 'Linux 6.8.0-60-generic; x86_64', 'language': 'Python/3.12.3-final-0', 'language_details': 'CPython; 3.12.3-final-0 (main, Feb  4 2025 14:48:35) [GCC 13.3.0]'}}
DEBUG    neo4j.io:_bolt5.py:97 [#A248]  _: <CONNECTION> client state: CONNECTED > AUTHENTICATION
DEBUG    neo4j.io:_bolt5.py:661 [#A248]  C: LOGON {'scheme': 'basic', 'principal': 'neo4j', 'credentials': '*******'}
DEBUG    neo4j.io:_bolt5.py:97 [#A248]  _: <CONNECTION> client state: AUTHENTICATION > READY
DEBUG    neo4j.io:_bolt5.py:480 [#A248]  S: SUCCESS {'server': 'Neo4j/5.13.0', 'connection_id': 'bolt-147343', 'hints': {'connection.recv_timeout_seconds': 120, 'telemetry.enabled': False}}
DEBUG    neo4j.io:_bolt5.py:86 [#A248]  _: <CONNECTION> server state: CONNECTED > AUTHENTICATION
DEBUG    neo4j.io:_bolt5.py:480 [#A248]  S: SUCCESS {}
DEBUG    neo4j.io:_bolt5.py:86 [#A248]  _: <CONNECTION> server state: AUTHENTICATION > READY
DEBUG    neo4j.io:_bolt5.py:796 [#A248]  C: RUN 'RETURN 1' {} {}
DEBUG    neo4j.io:_bolt5.py:97 [#A248]  _: <CONNECTION> client state: READY > STREAMING
DEBUG    neo4j.io:_bolt5.py:338 [#A248]  C: PULL {'n': 1000}
DEBUG    neo4j.io:_bolt5.py:480 [#A248]  S: SUCCESS {'t_first': 0, 'fields': ['1']}
DEBUG    neo4j.io:_bolt5.py:86 [#A248]  _: <CONNECTION> server state: READY > STREAMING
DEBUG    neo4j.io:_bolt5.py:471 [#A248]  S: RECORD * 1
DEBUG    neo4j.io:_bolt5.py:480 [#A248]  S: SUCCESS {'bookmark': 'FB:kcwQ4Cgc6rGGTJqFB5yoS2Vs+QOQ', 'type': 'r', 't_last': 0, 'db': 'neo4j'}
DEBUG    neo4j.io:_bolt5.py:86 [#A248]  _: <CONNECTION> server state: STREAMING > READY
DEBUG    neo4j.pool:_pool.py:515 [#A248]  _: <POOL> released bolt-147343
DEBUG    neo4j.pool:_pool.py:608 [#0000]  _: <POOL> close
DEBUG    neo4j.io:_bolt5.py:449 [#A248]  C: GOODBYE
DEBUG    neo4j.io:_bolt.py:1005 [#A248]  C: <CLOSE>
DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
____________________ ERROR at setup of test_entity_storage _____________________
venv/lib/python3.12/site-packages/pytest_asyncio/plugin.py:458: in setup
    return super().setup()
           ^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/pytest_asyncio/plugin.py:743: in pytest_fixture_setup
    hook_result = yield
                  ^^^^^
venv/lib/python3.12/site-packages/pytest_asyncio/plugin.py:313: in _asyncgen_fixture_wrapper
    result = runner.run(setup(), context=context)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.12/asyncio/runners.py:118: in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.12/asyncio/base_events.py:687: in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/pytest_asyncio/plugin.py:309: in setup
    res = await gen_obj.__anext__()
          ^^^^^^^^^^^^^^^^^^^^^^^^^
tests/integration_real/conftest.py:315: in real_neo4j_service
    from rag_factory.services.database.neo4j import Neo4jDatabaseService
E   ImportError: cannot import name 'Neo4jDatabaseService' from 'rag_factory.services.database.neo4j' (/mnt/MCPProyects/ragTools/rag_factory/services/database/neo4j.py)
---------------------------- Captured stderr setup -----------------------------
DEBUG:neo4j.pool:[#0000]  _: <POOL> created, direct address IPv4Address(('192.168.56.1', 7687))
DEBUG:neo4j:[#0000]  _: <WORKSPACE> routing towards fixed database: None
DEBUG:neo4j:[#0000]  _: <WORKSPACE> pinning database: None
DEBUG:neo4j.pool:[#0000]  _: <POOL> acquire direct connection, access_mode='WRITE', database=AcquisitionDatabase(name=None, guessed=False)
DEBUG:neo4j.pool:[#0000]  _: <POOL> trying to hand out new connection
DEBUG:neo4j.io:[#0000]  _: <RESOLVE> in: 192.168.56.1:7687
DEBUG:neo4j.io:[#0000]  _: <RESOLVE> dns resolver out: 192.168.56.1:7687
DEBUG:neo4j.io:[#0000]  C: <OPEN> 192.168.56.1:7687
DEBUG:neo4j.io:[#A252]  C: <MAGIC> 0x6060B017
DEBUG:neo4j.io:[#A252]  C: <HANDSHAKE> 0x000001FF 0x00080805 0x00020404 0x00000003
DEBUG:neo4j.io:[#A252]  S: <HANDSHAKE> 0x00000405
DEBUG:neo4j.io:[#A252]  C: HELLO {'user_agent': 'neo4j-python/6.0.3 Python/3.12.3-final-0 (linux)', 'bolt_agent': {'product': 'neo4j-python/6.0.3', 'platform': 'Linux 6.8.0-60-generic; x86_64', 'language': 'Python/3.12.3-final-0', 'language_details': 'CPython; 3.12.3-final-0 (main, Feb  4 2025 14:48:35) [GCC 13.3.0]'}}
DEBUG:neo4j.io:[#A252]  _: <CONNECTION> client state: CONNECTED > AUTHENTICATION
DEBUG:neo4j.io:[#A252]  C: LOGON {'scheme': 'basic', 'principal': 'neo4j', 'credentials': '*******'}
DEBUG:neo4j.io:[#A252]  _: <CONNECTION> client state: AUTHENTICATION > READY
DEBUG:neo4j.io:[#A252]  S: SUCCESS {'server': 'Neo4j/5.13.0', 'connection_id': 'bolt-147344', 'hints': {'connection.recv_timeout_seconds': 120, 'telemetry.enabled': False}}
DEBUG:neo4j.io:[#A252]  _: <CONNECTION> server state: CONNECTED > AUTHENTICATION
DEBUG:neo4j.io:[#A252]  S: SUCCESS {}
DEBUG:neo4j.io:[#A252]  _: <CONNECTION> server state: AUTHENTICATION > READY
DEBUG:neo4j.io:[#A252]  C: RUN 'RETURN 1' {} {}
DEBUG:neo4j.io:[#A252]  _: <CONNECTION> client state: READY > STREAMING
DEBUG:neo4j.io:[#A252]  C: PULL {'n': 1000}
DEBUG:neo4j.io:[#A252]  S: SUCCESS {'t_first': 0, 'fields': ['1']}
DEBUG:neo4j.io:[#A252]  _: <CONNECTION> server state: READY > STREAMING
DEBUG:neo4j.io:[#A252]  S: RECORD * 1
DEBUG:neo4j.io:[#A252]  S: SUCCESS {'bookmark': 'FB:kcwQ4Cgc6rGGTJqFB5yoS2Vs+QOQ', 'type': 'r', 't_last': 0, 'db': 'neo4j'}
DEBUG:neo4j.io:[#A252]  _: <CONNECTION> server state: STREAMING > READY
DEBUG:neo4j.pool:[#A252]  _: <POOL> released bolt-147344
DEBUG:neo4j.pool:[#0000]  _: <POOL> close
DEBUG:neo4j.io:[#A252]  C: GOODBYE
DEBUG:neo4j.io:[#A252]  C: <CLOSE>
DEBUG:asyncio:Using selector: EpollSelector
------------------------------ Captured log setup ------------------------------
DEBUG    neo4j.pool:_pool.py:647 [#0000]  _: <POOL> created, direct address IPv4Address(('192.168.56.1', 7687))
DEBUG    neo4j:workspace.py:215 [#0000]  _: <WORKSPACE> routing towards fixed database: None
DEBUG    neo4j:workspace.py:106 [#0000]  _: <WORKSPACE> pinning database: None
DEBUG    neo4j.pool:_pool.py:672 [#0000]  _: <POOL> acquire direct connection, access_mode='WRITE', database=AcquisitionDatabase(name=None, guessed=False)
DEBUG    neo4j.pool:_pool.py:417 [#0000]  _: <POOL> trying to hand out new connection
DEBUG    neo4j.io:_util.py:226 [#0000]  _: <RESOLVE> in: 192.168.56.1:7687
DEBUG    neo4j.io:_util.py:247 [#0000]  _: <RESOLVE> dns resolver out: 192.168.56.1:7687
DEBUG    neo4j.io:_bolt_socket.py:497 [#0000]  C: <OPEN> 192.168.56.1:7687
DEBUG    neo4j.io:_bolt_socket.py:240 [#A252]  C: <MAGIC> 0x6060B017
DEBUG    neo4j.io:_bolt_socket.py:245 [#A252]  C: <HANDSHAKE> 0x000001FF 0x00080805 0x00020404 0x00000003
DEBUG    neo4j.io:_bolt_socket.py:79 [#A252]  S: <HANDSHAKE> 0x00000405
DEBUG    neo4j.io:_bolt5.py:723 [#A252]  C: HELLO {'user_agent': 'neo4j-python/6.0.3 Python/3.12.3-final-0 (linux)', 'bolt_agent': {'product': 'neo4j-python/6.0.3', 'platform': 'Linux 6.8.0-60-generic; x86_64', 'language': 'Python/3.12.3-final-0', 'language_details': 'CPython; 3.12.3-final-0 (main, Feb  4 2025 14:48:35) [GCC 13.3.0]'}}
DEBUG    neo4j.io:_bolt5.py:97 [#A252]  _: <CONNECTION> client state: CONNECTED > AUTHENTICATION
DEBUG    neo4j.io:_bolt5.py:661 [#A252]  C: LOGON {'scheme': 'basic', 'principal': 'neo4j', 'credentials': '*******'}
DEBUG    neo4j.io:_bolt5.py:97 [#A252]  _: <CONNECTION> client state: AUTHENTICATION > READY
DEBUG    neo4j.io:_bolt5.py:480 [#A252]  S: SUCCESS {'server': 'Neo4j/5.13.0', 'connection_id': 'bolt-147344', 'hints': {'connection.recv_timeout_seconds': 120, 'telemetry.enabled': False}}
DEBUG    neo4j.io:_bolt5.py:86 [#A252]  _: <CONNECTION> server state: CONNECTED > AUTHENTICATION
DEBUG    neo4j.io:_bolt5.py:480 [#A252]  S: SUCCESS {}
DEBUG    neo4j.io:_bolt5.py:86 [#A252]  _: <CONNECTION> server state: AUTHENTICATION > READY
DEBUG    neo4j.io:_bolt5.py:796 [#A252]  C: RUN 'RETURN 1' {} {}
DEBUG    neo4j.io:_bolt5.py:97 [#A252]  _: <CONNECTION> client state: READY > STREAMING
DEBUG    neo4j.io:_bolt5.py:338 [#A252]  C: PULL {'n': 1000}
DEBUG    neo4j.io:_bolt5.py:480 [#A252]  S: SUCCESS {'t_first': 0, 'fields': ['1']}
DEBUG    neo4j.io:_bolt5.py:86 [#A252]  _: <CONNECTION> server state: READY > STREAMING
DEBUG    neo4j.io:_bolt5.py:471 [#A252]  S: RECORD * 1
DEBUG    neo4j.io:_bolt5.py:480 [#A252]  S: SUCCESS {'bookmark': 'FB:kcwQ4Cgc6rGGTJqFB5yoS2Vs+QOQ', 'type': 'r', 't_last': 0, 'db': 'neo4j'}
DEBUG    neo4j.io:_bolt5.py:86 [#A252]  _: <CONNECTION> server state: STREAMING > READY
DEBUG    neo4j.pool:_pool.py:515 [#A252]  _: <POOL> released bolt-147344
DEBUG    neo4j.pool:_pool.py:608 [#0000]  _: <POOL> close
DEBUG    neo4j.io:_bolt5.py:449 [#A252]  C: GOODBYE
DEBUG    neo4j.io:_bolt.py:1005 [#A252]  C: <CLOSE>
DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
__________________ ERROR at setup of test_batch_node_creation __________________
venv/lib/python3.12/site-packages/pytest_asyncio/plugin.py:458: in setup
    return super().setup()
           ^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/pytest_asyncio/plugin.py:743: in pytest_fixture_setup
    hook_result = yield
                  ^^^^^
venv/lib/python3.12/site-packages/pytest_asyncio/plugin.py:313: in _asyncgen_fixture_wrapper
    result = runner.run(setup(), context=context)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.12/asyncio/runners.py:118: in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.12/asyncio/base_events.py:687: in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/pytest_asyncio/plugin.py:309: in setup
    res = await gen_obj.__anext__()
          ^^^^^^^^^^^^^^^^^^^^^^^^^
tests/integration_real/conftest.py:315: in real_neo4j_service
    from rag_factory.services.database.neo4j import Neo4jDatabaseService
E   ImportError: cannot import name 'Neo4jDatabaseService' from 'rag_factory.services.database.neo4j' (/mnt/MCPProyects/ragTools/rag_factory/services/database/neo4j.py)
---------------------------- Captured stderr setup -----------------------------
DEBUG:neo4j.pool:[#0000]  _: <POOL> created, direct address IPv4Address(('192.168.56.1', 7687))
DEBUG:neo4j:[#0000]  _: <WORKSPACE> routing towards fixed database: None
DEBUG:neo4j:[#0000]  _: <WORKSPACE> pinning database: None
DEBUG:neo4j.pool:[#0000]  _: <POOL> acquire direct connection, access_mode='WRITE', database=AcquisitionDatabase(name=None, guessed=False)
DEBUG:neo4j.pool:[#0000]  _: <POOL> trying to hand out new connection
DEBUG:neo4j.io:[#0000]  _: <RESOLVE> in: 192.168.56.1:7687
DEBUG:neo4j.io:[#0000]  _: <RESOLVE> dns resolver out: 192.168.56.1:7687
DEBUG:neo4j.io:[#0000]  C: <OPEN> 192.168.56.1:7687
DEBUG:neo4j.io:[#A260]  C: <MAGIC> 0x6060B017
DEBUG:neo4j.io:[#A260]  C: <HANDSHAKE> 0x000001FF 0x00080805 0x00020404 0x00000003
DEBUG:neo4j.io:[#A260]  S: <HANDSHAKE> 0x00000405
DEBUG:neo4j.io:[#A260]  C: HELLO {'user_agent': 'neo4j-python/6.0.3 Python/3.12.3-final-0 (linux)', 'bolt_agent': {'product': 'neo4j-python/6.0.3', 'platform': 'Linux 6.8.0-60-generic; x86_64', 'language': 'Python/3.12.3-final-0', 'language_details': 'CPython; 3.12.3-final-0 (main, Feb  4 2025 14:48:35) [GCC 13.3.0]'}}
DEBUG:neo4j.io:[#A260]  _: <CONNECTION> client state: CONNECTED > AUTHENTICATION
DEBUG:neo4j.io:[#A260]  C: LOGON {'scheme': 'basic', 'principal': 'neo4j', 'credentials': '*******'}
DEBUG:neo4j.io:[#A260]  _: <CONNECTION> client state: AUTHENTICATION > READY
DEBUG:neo4j.io:[#A260]  S: SUCCESS {'server': 'Neo4j/5.13.0', 'connection_id': 'bolt-147345', 'hints': {'connection.recv_timeout_seconds': 120, 'telemetry.enabled': False}}
DEBUG:neo4j.io:[#A260]  _: <CONNECTION> server state: CONNECTED > AUTHENTICATION
DEBUG:neo4j.io:[#A260]  S: SUCCESS {}
DEBUG:neo4j.io:[#A260]  _: <CONNECTION> server state: AUTHENTICATION > READY
DEBUG:neo4j.io:[#A260]  C: RUN 'RETURN 1' {} {}
DEBUG:neo4j.io:[#A260]  _: <CONNECTION> client state: READY > STREAMING
DEBUG:neo4j.io:[#A260]  C: PULL {'n': 1000}
DEBUG:neo4j.io:[#A260]  S: SUCCESS {'t_first': 0, 'fields': ['1']}
DEBUG:neo4j.io:[#A260]  _: <CONNECTION> server state: READY > STREAMING
DEBUG:neo4j.io:[#A260]  S: RECORD * 1
DEBUG:neo4j.io:[#A260]  S: SUCCESS {'bookmark': 'FB:kcwQ4Cgc6rGGTJqFB5yoS2Vs+QOQ', 'type': 'r', 't_last': 0, 'db': 'neo4j'}
DEBUG:neo4j.io:[#A260]  _: <CONNECTION> server state: STREAMING > READY
DEBUG:neo4j.pool:[#A260]  _: <POOL> released bolt-147345
DEBUG:neo4j.pool:[#0000]  _: <POOL> close
DEBUG:neo4j.io:[#A260]  C: GOODBYE
DEBUG:neo4j.io:[#A260]  C: <CLOSE>
DEBUG:asyncio:Using selector: EpollSelector
------------------------------ Captured log setup ------------------------------
DEBUG    neo4j.pool:_pool.py:647 [#0000]  _: <POOL> created, direct address IPv4Address(('192.168.56.1', 7687))
DEBUG    neo4j:workspace.py:215 [#0000]  _: <WORKSPACE> routing towards fixed database: None
DEBUG    neo4j:workspace.py:106 [#0000]  _: <WORKSPACE> pinning database: None
DEBUG    neo4j.pool:_pool.py:672 [#0000]  _: <POOL> acquire direct connection, access_mode='WRITE', database=AcquisitionDatabase(name=None, guessed=False)
DEBUG    neo4j.pool:_pool.py:417 [#0000]  _: <POOL> trying to hand out new connection
DEBUG    neo4j.io:_util.py:226 [#0000]  _: <RESOLVE> in: 192.168.56.1:7687
DEBUG    neo4j.io:_util.py:247 [#0000]  _: <RESOLVE> dns resolver out: 192.168.56.1:7687
DEBUG    neo4j.io:_bolt_socket.py:497 [#0000]  C: <OPEN> 192.168.56.1:7687
DEBUG    neo4j.io:_bolt_socket.py:240 [#A260]  C: <MAGIC> 0x6060B017
DEBUG    neo4j.io:_bolt_socket.py:245 [#A260]  C: <HANDSHAKE> 0x000001FF 0x00080805 0x00020404 0x00000003
DEBUG    neo4j.io:_bolt_socket.py:79 [#A260]  S: <HANDSHAKE> 0x00000405
DEBUG    neo4j.io:_bolt5.py:723 [#A260]  C: HELLO {'user_agent': 'neo4j-python/6.0.3 Python/3.12.3-final-0 (linux)', 'bolt_agent': {'product': 'neo4j-python/6.0.3', 'platform': 'Linux 6.8.0-60-generic; x86_64', 'language': 'Python/3.12.3-final-0', 'language_details': 'CPython; 3.12.3-final-0 (main, Feb  4 2025 14:48:35) [GCC 13.3.0]'}}
DEBUG    neo4j.io:_bolt5.py:97 [#A260]  _: <CONNECTION> client state: CONNECTED > AUTHENTICATION
DEBUG    neo4j.io:_bolt5.py:661 [#A260]  C: LOGON {'scheme': 'basic', 'principal': 'neo4j', 'credentials': '*******'}
DEBUG    neo4j.io:_bolt5.py:97 [#A260]  _: <CONNECTION> client state: AUTHENTICATION > READY
DEBUG    neo4j.io:_bolt5.py:480 [#A260]  S: SUCCESS {'server': 'Neo4j/5.13.0', 'connection_id': 'bolt-147345', 'hints': {'connection.recv_timeout_seconds': 120, 'telemetry.enabled': False}}
DEBUG    neo4j.io:_bolt5.py:86 [#A260]  _: <CONNECTION> server state: CONNECTED > AUTHENTICATION
DEBUG    neo4j.io:_bolt5.py:480 [#A260]  S: SUCCESS {}
DEBUG    neo4j.io:_bolt5.py:86 [#A260]  _: <CONNECTION> server state: AUTHENTICATION > READY
DEBUG    neo4j.io:_bolt5.py:796 [#A260]  C: RUN 'RETURN 1' {} {}
DEBUG    neo4j.io:_bolt5.py:97 [#A260]  _: <CONNECTION> client state: READY > STREAMING
DEBUG    neo4j.io:_bolt5.py:338 [#A260]  C: PULL {'n': 1000}
DEBUG    neo4j.io:_bolt5.py:480 [#A260]  S: SUCCESS {'t_first': 0, 'fields': ['1']}
DEBUG    neo4j.io:_bolt5.py:86 [#A260]  _: <CONNECTION> server state: READY > STREAMING
DEBUG    neo4j.io:_bolt5.py:471 [#A260]  S: RECORD * 1
DEBUG    neo4j.io:_bolt5.py:480 [#A260]  S: SUCCESS {'bookmark': 'FB:kcwQ4Cgc6rGGTJqFB5yoS2Vs+QOQ', 'type': 'r', 't_last': 0, 'db': 'neo4j'}
DEBUG    neo4j.io:_bolt5.py:86 [#A260]  _: <CONNECTION> server state: STREAMING > READY
DEBUG    neo4j.pool:_pool.py:515 [#A260]  _: <POOL> released bolt-147345
DEBUG    neo4j.pool:_pool.py:608 [#0000]  _: <POOL> close
DEBUG    neo4j.io:_bolt5.py:449 [#A260]  C: GOODBYE
DEBUG    neo4j.io:_bolt.py:1005 [#A260]  C: <CLOSE>
DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
________________ ERROR at setup of test_update_node_properties _________________
venv/lib/python3.12/site-packages/pytest_asyncio/plugin.py:458: in setup
    return super().setup()
           ^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/pytest_asyncio/plugin.py:743: in pytest_fixture_setup
    hook_result = yield
                  ^^^^^
venv/lib/python3.12/site-packages/pytest_asyncio/plugin.py:313: in _asyncgen_fixture_wrapper
    result = runner.run(setup(), context=context)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.12/asyncio/runners.py:118: in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.12/asyncio/base_events.py:687: in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/pytest_asyncio/plugin.py:309: in setup
    res = await gen_obj.__anext__()
          ^^^^^^^^^^^^^^^^^^^^^^^^^
tests/integration_real/conftest.py:315: in real_neo4j_service
    from rag_factory.services.database.neo4j import Neo4jDatabaseService
E   ImportError: cannot import name 'Neo4jDatabaseService' from 'rag_factory.services.database.neo4j' (/mnt/MCPProyects/ragTools/rag_factory/services/database/neo4j.py)
---------------------------- Captured stderr setup -----------------------------
DEBUG:neo4j.pool:[#0000]  _: <POOL> created, direct address IPv4Address(('192.168.56.1', 7687))
DEBUG:neo4j:[#0000]  _: <WORKSPACE> routing towards fixed database: None
DEBUG:neo4j:[#0000]  _: <WORKSPACE> pinning database: None
DEBUG:neo4j.pool:[#0000]  _: <POOL> acquire direct connection, access_mode='WRITE', database=AcquisitionDatabase(name=None, guessed=False)
DEBUG:neo4j.pool:[#0000]  _: <POOL> trying to hand out new connection
DEBUG:neo4j.io:[#0000]  _: <RESOLVE> in: 192.168.56.1:7687
DEBUG:neo4j.io:[#0000]  _: <RESOLVE> dns resolver out: 192.168.56.1:7687
DEBUG:neo4j.io:[#0000]  C: <OPEN> 192.168.56.1:7687
DEBUG:neo4j.io:[#A262]  C: <MAGIC> 0x6060B017
DEBUG:neo4j.io:[#A262]  C: <HANDSHAKE> 0x000001FF 0x00080805 0x00020404 0x00000003
DEBUG:neo4j.io:[#A262]  S: <HANDSHAKE> 0x00000405
DEBUG:neo4j.io:[#A262]  C: HELLO {'user_agent': 'neo4j-python/6.0.3 Python/3.12.3-final-0 (linux)', 'bolt_agent': {'product': 'neo4j-python/6.0.3', 'platform': 'Linux 6.8.0-60-generic; x86_64', 'language': 'Python/3.12.3-final-0', 'language_details': 'CPython; 3.12.3-final-0 (main, Feb  4 2025 14:48:35) [GCC 13.3.0]'}}
DEBUG:neo4j.io:[#A262]  _: <CONNECTION> client state: CONNECTED > AUTHENTICATION
DEBUG:neo4j.io:[#A262]  C: LOGON {'scheme': 'basic', 'principal': 'neo4j', 'credentials': '*******'}
DEBUG:neo4j.io:[#A262]  _: <CONNECTION> client state: AUTHENTICATION > READY
DEBUG:neo4j.io:[#A262]  S: SUCCESS {'server': 'Neo4j/5.13.0', 'connection_id': 'bolt-147346', 'hints': {'connection.recv_timeout_seconds': 120, 'telemetry.enabled': False}}
DEBUG:neo4j.io:[#A262]  _: <CONNECTION> server state: CONNECTED > AUTHENTICATION
DEBUG:neo4j.io:[#A262]  S: SUCCESS {}
DEBUG:neo4j.io:[#A262]  _: <CONNECTION> server state: AUTHENTICATION > READY
DEBUG:neo4j.io:[#A262]  C: RUN 'RETURN 1' {} {}
DEBUG:neo4j.io:[#A262]  _: <CONNECTION> client state: READY > STREAMING
DEBUG:neo4j.io:[#A262]  C: PULL {'n': 1000}
DEBUG:neo4j.io:[#A262]  S: SUCCESS {'t_first': 0, 'fields': ['1']}
DEBUG:neo4j.io:[#A262]  _: <CONNECTION> server state: READY > STREAMING
DEBUG:neo4j.io:[#A262]  S: RECORD * 1
DEBUG:neo4j.io:[#A262]  S: SUCCESS {'bookmark': 'FB:kcwQ4Cgc6rGGTJqFB5yoS2Vs+QOQ', 'type': 'r', 't_last': 0, 'db': 'neo4j'}
DEBUG:neo4j.io:[#A262]  _: <CONNECTION> server state: STREAMING > READY
DEBUG:neo4j.pool:[#A262]  _: <POOL> released bolt-147346
DEBUG:neo4j.pool:[#0000]  _: <POOL> close
DEBUG:neo4j.io:[#A262]  C: GOODBYE
DEBUG:neo4j.io:[#A262]  C: <CLOSE>
DEBUG:asyncio:Using selector: EpollSelector
------------------------------ Captured log setup ------------------------------
DEBUG    neo4j.pool:_pool.py:647 [#0000]  _: <POOL> created, direct address IPv4Address(('192.168.56.1', 7687))
DEBUG    neo4j:workspace.py:215 [#0000]  _: <WORKSPACE> routing towards fixed database: None
DEBUG    neo4j:workspace.py:106 [#0000]  _: <WORKSPACE> pinning database: None
DEBUG    neo4j.pool:_pool.py:672 [#0000]  _: <POOL> acquire direct connection, access_mode='WRITE', database=AcquisitionDatabase(name=None, guessed=False)
DEBUG    neo4j.pool:_pool.py:417 [#0000]  _: <POOL> trying to hand out new connection
DEBUG    neo4j.io:_util.py:226 [#0000]  _: <RESOLVE> in: 192.168.56.1:7687
DEBUG    neo4j.io:_util.py:247 [#0000]  _: <RESOLVE> dns resolver out: 192.168.56.1:7687
DEBUG    neo4j.io:_bolt_socket.py:497 [#0000]  C: <OPEN> 192.168.56.1:7687
DEBUG    neo4j.io:_bolt_socket.py:240 [#A262]  C: <MAGIC> 0x6060B017
DEBUG    neo4j.io:_bolt_socket.py:245 [#A262]  C: <HANDSHAKE> 0x000001FF 0x00080805 0x00020404 0x00000003
DEBUG    neo4j.io:_bolt_socket.py:79 [#A262]  S: <HANDSHAKE> 0x00000405
DEBUG    neo4j.io:_bolt5.py:723 [#A262]  C: HELLO {'user_agent': 'neo4j-python/6.0.3 Python/3.12.3-final-0 (linux)', 'bolt_agent': {'product': 'neo4j-python/6.0.3', 'platform': 'Linux 6.8.0-60-generic; x86_64', 'language': 'Python/3.12.3-final-0', 'language_details': 'CPython; 3.12.3-final-0 (main, Feb  4 2025 14:48:35) [GCC 13.3.0]'}}
DEBUG    neo4j.io:_bolt5.py:97 [#A262]  _: <CONNECTION> client state: CONNECTED > AUTHENTICATION
DEBUG    neo4j.io:_bolt5.py:661 [#A262]  C: LOGON {'scheme': 'basic', 'principal': 'neo4j', 'credentials': '*******'}
DEBUG    neo4j.io:_bolt5.py:97 [#A262]  _: <CONNECTION> client state: AUTHENTICATION > READY
DEBUG    neo4j.io:_bolt5.py:480 [#A262]  S: SUCCESS {'server': 'Neo4j/5.13.0', 'connection_id': 'bolt-147346', 'hints': {'connection.recv_timeout_seconds': 120, 'telemetry.enabled': False}}
DEBUG    neo4j.io:_bolt5.py:86 [#A262]  _: <CONNECTION> server state: CONNECTED > AUTHENTICATION
DEBUG    neo4j.io:_bolt5.py:480 [#A262]  S: SUCCESS {}
DEBUG    neo4j.io:_bolt5.py:86 [#A262]  _: <CONNECTION> server state: AUTHENTICATION > READY
DEBUG    neo4j.io:_bolt5.py:796 [#A262]  C: RUN 'RETURN 1' {} {}
DEBUG    neo4j.io:_bolt5.py:97 [#A262]  _: <CONNECTION> client state: READY > STREAMING
DEBUG    neo4j.io:_bolt5.py:338 [#A262]  C: PULL {'n': 1000}
DEBUG    neo4j.io:_bolt5.py:480 [#A262]  S: SUCCESS {'t_first': 0, 'fields': ['1']}
DEBUG    neo4j.io:_bolt5.py:86 [#A262]  _: <CONNECTION> server state: READY > STREAMING
DEBUG    neo4j.io:_bolt5.py:471 [#A262]  S: RECORD * 1
DEBUG    neo4j.io:_bolt5.py:480 [#A262]  S: SUCCESS {'bookmark': 'FB:kcwQ4Cgc6rGGTJqFB5yoS2Vs+QOQ', 'type': 'r', 't_last': 0, 'db': 'neo4j'}
DEBUG    neo4j.io:_bolt5.py:86 [#A262]  _: <CONNECTION> server state: STREAMING > READY
DEBUG    neo4j.pool:_pool.py:515 [#A262]  _: <POOL> released bolt-147346
DEBUG    neo4j.pool:_pool.py:608 [#0000]  _: <POOL> close
DEBUG    neo4j.io:_bolt5.py:449 [#A262]  C: GOODBYE
DEBUG    neo4j.io:_bolt.py:1005 [#A262]  C: <CLOSE>
DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
_____________________ ERROR at setup of test_delete_nodes ______________________
venv/lib/python3.12/site-packages/pytest_asyncio/plugin.py:458: in setup
    return super().setup()
           ^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/pytest_asyncio/plugin.py:743: in pytest_fixture_setup
    hook_result = yield
                  ^^^^^
venv/lib/python3.12/site-packages/pytest_asyncio/plugin.py:313: in _asyncgen_fixture_wrapper
    result = runner.run(setup(), context=context)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.12/asyncio/runners.py:118: in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.12/asyncio/base_events.py:687: in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/pytest_asyncio/plugin.py:309: in setup
    res = await gen_obj.__anext__()
          ^^^^^^^^^^^^^^^^^^^^^^^^^
tests/integration_real/conftest.py:315: in real_neo4j_service
    from rag_factory.services.database.neo4j import Neo4jDatabaseService
E   ImportError: cannot import name 'Neo4jDatabaseService' from 'rag_factory.services.database.neo4j' (/mnt/MCPProyects/ragTools/rag_factory/services/database/neo4j.py)
---------------------------- Captured stderr setup -----------------------------
DEBUG:neo4j.pool:[#0000]  _: <POOL> created, direct address IPv4Address(('192.168.56.1', 7687))
DEBUG:neo4j:[#0000]  _: <WORKSPACE> routing towards fixed database: None
DEBUG:neo4j:[#0000]  _: <WORKSPACE> pinning database: None
DEBUG:neo4j.pool:[#0000]  _: <POOL> acquire direct connection, access_mode='WRITE', database=AcquisitionDatabase(name=None, guessed=False)
DEBUG:neo4j.pool:[#0000]  _: <POOL> trying to hand out new connection
DEBUG:neo4j.io:[#0000]  _: <RESOLVE> in: 192.168.56.1:7687
DEBUG:neo4j.io:[#0000]  _: <RESOLVE> dns resolver out: 192.168.56.1:7687
DEBUG:neo4j.io:[#0000]  C: <OPEN> 192.168.56.1:7687
DEBUG:neo4j.io:[#A266]  C: <MAGIC> 0x6060B017
DEBUG:neo4j.io:[#A266]  C: <HANDSHAKE> 0x000001FF 0x00080805 0x00020404 0x00000003
DEBUG:neo4j.io:[#A266]  S: <HANDSHAKE> 0x00000405
DEBUG:neo4j.io:[#A266]  C: HELLO {'user_agent': 'neo4j-python/6.0.3 Python/3.12.3-final-0 (linux)', 'bolt_agent': {'product': 'neo4j-python/6.0.3', 'platform': 'Linux 6.8.0-60-generic; x86_64', 'language': 'Python/3.12.3-final-0', 'language_details': 'CPython; 3.12.3-final-0 (main, Feb  4 2025 14:48:35) [GCC 13.3.0]'}}
DEBUG:neo4j.io:[#A266]  _: <CONNECTION> client state: CONNECTED > AUTHENTICATION
DEBUG:neo4j.io:[#A266]  C: LOGON {'scheme': 'basic', 'principal': 'neo4j', 'credentials': '*******'}
DEBUG:neo4j.io:[#A266]  _: <CONNECTION> client state: AUTHENTICATION > READY
DEBUG:neo4j.io:[#A266]  S: SUCCESS {'server': 'Neo4j/5.13.0', 'connection_id': 'bolt-147347', 'hints': {'connection.recv_timeout_seconds': 120, 'telemetry.enabled': False}}
DEBUG:neo4j.io:[#A266]  _: <CONNECTION> server state: CONNECTED > AUTHENTICATION
DEBUG:neo4j.io:[#A266]  S: SUCCESS {}
DEBUG:neo4j.io:[#A266]  _: <CONNECTION> server state: AUTHENTICATION > READY
DEBUG:neo4j.io:[#A266]  C: RUN 'RETURN 1' {} {}
DEBUG:neo4j.io:[#A266]  _: <CONNECTION> client state: READY > STREAMING
DEBUG:neo4j.io:[#A266]  C: PULL {'n': 1000}
DEBUG:neo4j.io:[#A266]  S: SUCCESS {'t_first': 0, 'fields': ['1']}
DEBUG:neo4j.io:[#A266]  _: <CONNECTION> server state: READY > STREAMING
DEBUG:neo4j.io:[#A266]  S: RECORD * 1
DEBUG:neo4j.io:[#A266]  S: SUCCESS {'bookmark': 'FB:kcwQ4Cgc6rGGTJqFB5yoS2Vs+QOQ', 'type': 'r', 't_last': 0, 'db': 'neo4j'}
DEBUG:neo4j.io:[#A266]  _: <CONNECTION> server state: STREAMING > READY
DEBUG:neo4j.pool:[#A266]  _: <POOL> released bolt-147347
DEBUG:neo4j.pool:[#0000]  _: <POOL> close
DEBUG:neo4j.io:[#A266]  C: GOODBYE
DEBUG:neo4j.io:[#A266]  C: <CLOSE>
DEBUG:asyncio:Using selector: EpollSelector
------------------------------ Captured log setup ------------------------------
DEBUG    neo4j.pool:_pool.py:647 [#0000]  _: <POOL> created, direct address IPv4Address(('192.168.56.1', 7687))
DEBUG    neo4j:workspace.py:215 [#0000]  _: <WORKSPACE> routing towards fixed database: None
DEBUG    neo4j:workspace.py:106 [#0000]  _: <WORKSPACE> pinning database: None
DEBUG    neo4j.pool:_pool.py:672 [#0000]  _: <POOL> acquire direct connection, access_mode='WRITE', database=AcquisitionDatabase(name=None, guessed=False)
DEBUG    neo4j.pool:_pool.py:417 [#0000]  _: <POOL> trying to hand out new connection
DEBUG    neo4j.io:_util.py:226 [#0000]  _: <RESOLVE> in: 192.168.56.1:7687
DEBUG    neo4j.io:_util.py:247 [#0000]  _: <RESOLVE> dns resolver out: 192.168.56.1:7687
DEBUG    neo4j.io:_bolt_socket.py:497 [#0000]  C: <OPEN> 192.168.56.1:7687
DEBUG    neo4j.io:_bolt_socket.py:240 [#A266]  C: <MAGIC> 0x6060B017
DEBUG    neo4j.io:_bolt_socket.py:245 [#A266]  C: <HANDSHAKE> 0x000001FF 0x00080805 0x00020404 0x00000003
DEBUG    neo4j.io:_bolt_socket.py:79 [#A266]  S: <HANDSHAKE> 0x00000405
DEBUG    neo4j.io:_bolt5.py:723 [#A266]  C: HELLO {'user_agent': 'neo4j-python/6.0.3 Python/3.12.3-final-0 (linux)', 'bolt_agent': {'product': 'neo4j-python/6.0.3', 'platform': 'Linux 6.8.0-60-generic; x86_64', 'language': 'Python/3.12.3-final-0', 'language_details': 'CPython; 3.12.3-final-0 (main, Feb  4 2025 14:48:35) [GCC 13.3.0]'}}
DEBUG    neo4j.io:_bolt5.py:97 [#A266]  _: <CONNECTION> client state: CONNECTED > AUTHENTICATION
DEBUG    neo4j.io:_bolt5.py:661 [#A266]  C: LOGON {'scheme': 'basic', 'principal': 'neo4j', 'credentials': '*******'}
DEBUG    neo4j.io:_bolt5.py:97 [#A266]  _: <CONNECTION> client state: AUTHENTICATION > READY
DEBUG    neo4j.io:_bolt5.py:480 [#A266]  S: SUCCESS {'server': 'Neo4j/5.13.0', 'connection_id': 'bolt-147347', 'hints': {'connection.recv_timeout_seconds': 120, 'telemetry.enabled': False}}
DEBUG    neo4j.io:_bolt5.py:86 [#A266]  _: <CONNECTION> server state: CONNECTED > AUTHENTICATION
DEBUG    neo4j.io:_bolt5.py:480 [#A266]  S: SUCCESS {}
DEBUG    neo4j.io:_bolt5.py:86 [#A266]  _: <CONNECTION> server state: AUTHENTICATION > READY
DEBUG    neo4j.io:_bolt5.py:796 [#A266]  C: RUN 'RETURN 1' {} {}
DEBUG    neo4j.io:_bolt5.py:97 [#A266]  _: <CONNECTION> client state: READY > STREAMING
DEBUG    neo4j.io:_bolt5.py:338 [#A266]  C: PULL {'n': 1000}
DEBUG    neo4j.io:_bolt5.py:480 [#A266]  S: SUCCESS {'t_first': 0, 'fields': ['1']}
DEBUG    neo4j.io:_bolt5.py:86 [#A266]  _: <CONNECTION> server state: READY > STREAMING
DEBUG    neo4j.io:_bolt5.py:471 [#A266]  S: RECORD * 1
DEBUG    neo4j.io:_bolt5.py:480 [#A266]  S: SUCCESS {'bookmark': 'FB:kcwQ4Cgc6rGGTJqFB5yoS2Vs+QOQ', 'type': 'r', 't_last': 0, 'db': 'neo4j'}
DEBUG    neo4j.io:_bolt5.py:86 [#A266]  _: <CONNECTION> server state: STREAMING > READY
DEBUG    neo4j.pool:_pool.py:515 [#A266]  _: <POOL> released bolt-147347
DEBUG    neo4j.pool:_pool.py:608 [#0000]  _: <POOL> close
DEBUG    neo4j.io:_bolt5.py:449 [#A266]  C: GOODBYE
DEBUG    neo4j.io:_bolt.py:1005 [#A266]  C: <CLOSE>
DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
_____________________ ERROR at setup of test_complex_query _____________________
venv/lib/python3.12/site-packages/pytest_asyncio/plugin.py:458: in setup
    return super().setup()
           ^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/pytest_asyncio/plugin.py:743: in pytest_fixture_setup
    hook_result = yield
                  ^^^^^
venv/lib/python3.12/site-packages/pytest_asyncio/plugin.py:313: in _asyncgen_fixture_wrapper
    result = runner.run(setup(), context=context)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.12/asyncio/runners.py:118: in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.12/asyncio/base_events.py:687: in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/pytest_asyncio/plugin.py:309: in setup
    res = await gen_obj.__anext__()
          ^^^^^^^^^^^^^^^^^^^^^^^^^
tests/integration_real/conftest.py:315: in real_neo4j_service
    from rag_factory.services.database.neo4j import Neo4jDatabaseService
E   ImportError: cannot import name 'Neo4jDatabaseService' from 'rag_factory.services.database.neo4j' (/mnt/MCPProyects/ragTools/rag_factory/services/database/neo4j.py)
---------------------------- Captured stderr setup -----------------------------
DEBUG:neo4j.pool:[#0000]  _: <POOL> created, direct address IPv4Address(('192.168.56.1', 7687))
DEBUG:neo4j:[#0000]  _: <WORKSPACE> routing towards fixed database: None
DEBUG:neo4j:[#0000]  _: <WORKSPACE> pinning database: None
DEBUG:neo4j.pool:[#0000]  _: <POOL> acquire direct connection, access_mode='WRITE', database=AcquisitionDatabase(name=None, guessed=False)
DEBUG:neo4j.pool:[#0000]  _: <POOL> trying to hand out new connection
DEBUG:neo4j.io:[#0000]  _: <RESOLVE> in: 192.168.56.1:7687
DEBUG:neo4j.io:[#0000]  _: <RESOLVE> dns resolver out: 192.168.56.1:7687
DEBUG:neo4j.io:[#0000]  C: <OPEN> 192.168.56.1:7687
DEBUG:neo4j.io:[#A272]  C: <MAGIC> 0x6060B017
DEBUG:neo4j.io:[#A272]  C: <HANDSHAKE> 0x000001FF 0x00080805 0x00020404 0x00000003
DEBUG:neo4j.io:[#A272]  S: <HANDSHAKE> 0x00000405
DEBUG:neo4j.io:[#A272]  C: HELLO {'user_agent': 'neo4j-python/6.0.3 Python/3.12.3-final-0 (linux)', 'bolt_agent': {'product': 'neo4j-python/6.0.3', 'platform': 'Linux 6.8.0-60-generic; x86_64', 'language': 'Python/3.12.3-final-0', 'language_details': 'CPython; 3.12.3-final-0 (main, Feb  4 2025 14:48:35) [GCC 13.3.0]'}}
DEBUG:neo4j.io:[#A272]  _: <CONNECTION> client state: CONNECTED > AUTHENTICATION
DEBUG:neo4j.io:[#A272]  C: LOGON {'scheme': 'basic', 'principal': 'neo4j', 'credentials': '*******'}
DEBUG:neo4j.io:[#A272]  _: <CONNECTION> client state: AUTHENTICATION > READY
DEBUG:neo4j.io:[#A272]  S: SUCCESS {'server': 'Neo4j/5.13.0', 'connection_id': 'bolt-147350', 'hints': {'connection.recv_timeout_seconds': 120, 'telemetry.enabled': False}}
DEBUG:neo4j.io:[#A272]  _: <CONNECTION> server state: CONNECTED > AUTHENTICATION
DEBUG:neo4j.io:[#A272]  S: SUCCESS {}
DEBUG:neo4j.io:[#A272]  _: <CONNECTION> server state: AUTHENTICATION > READY
DEBUG:neo4j.io:[#A272]  C: RUN 'RETURN 1' {} {}
DEBUG:neo4j.io:[#A272]  _: <CONNECTION> client state: READY > STREAMING
DEBUG:neo4j.io:[#A272]  C: PULL {'n': 1000}
DEBUG:neo4j.io:[#A272]  S: SUCCESS {'t_first': 1, 'fields': ['1']}
DEBUG:neo4j.io:[#A272]  _: <CONNECTION> server state: READY > STREAMING
DEBUG:neo4j.io:[#A272]  S: RECORD * 1
DEBUG:neo4j.io:[#A272]  S: SUCCESS {'bookmark': 'FB:kcwQ4Cgc6rGGTJqFB5yoS2Vs+QOQ', 'type': 'r', 't_last': 0, 'db': 'neo4j'}
DEBUG:neo4j.io:[#A272]  _: <CONNECTION> server state: STREAMING > READY
DEBUG:neo4j.pool:[#A272]  _: <POOL> released bolt-147350
DEBUG:neo4j.pool:[#0000]  _: <POOL> close
DEBUG:neo4j.io:[#A272]  C: GOODBYE
DEBUG:neo4j.io:[#A272]  C: <CLOSE>
DEBUG:asyncio:Using selector: EpollSelector
------------------------------ Captured log setup ------------------------------
DEBUG    neo4j.pool:_pool.py:647 [#0000]  _: <POOL> created, direct address IPv4Address(('192.168.56.1', 7687))
DEBUG    neo4j:workspace.py:215 [#0000]  _: <WORKSPACE> routing towards fixed database: None
DEBUG    neo4j:workspace.py:106 [#0000]  _: <WORKSPACE> pinning database: None
DEBUG    neo4j.pool:_pool.py:672 [#0000]  _: <POOL> acquire direct connection, access_mode='WRITE', database=AcquisitionDatabase(name=None, guessed=False)
DEBUG    neo4j.pool:_pool.py:417 [#0000]  _: <POOL> trying to hand out new connection
DEBUG    neo4j.io:_util.py:226 [#0000]  _: <RESOLVE> in: 192.168.56.1:7687
DEBUG    neo4j.io:_util.py:247 [#0000]  _: <RESOLVE> dns resolver out: 192.168.56.1:7687
DEBUG    neo4j.io:_bolt_socket.py:497 [#0000]  C: <OPEN> 192.168.56.1:7687
DEBUG    neo4j.io:_bolt_socket.py:240 [#A272]  C: <MAGIC> 0x6060B017
DEBUG    neo4j.io:_bolt_socket.py:245 [#A272]  C: <HANDSHAKE> 0x000001FF 0x00080805 0x00020404 0x00000003
DEBUG    neo4j.io:_bolt_socket.py:79 [#A272]  S: <HANDSHAKE> 0x00000405
DEBUG    neo4j.io:_bolt5.py:723 [#A272]  C: HELLO {'user_agent': 'neo4j-python/6.0.3 Python/3.12.3-final-0 (linux)', 'bolt_agent': {'product': 'neo4j-python/6.0.3', 'platform': 'Linux 6.8.0-60-generic; x86_64', 'language': 'Python/3.12.3-final-0', 'language_details': 'CPython; 3.12.3-final-0 (main, Feb  4 2025 14:48:35) [GCC 13.3.0]'}}
DEBUG    neo4j.io:_bolt5.py:97 [#A272]  _: <CONNECTION> client state: CONNECTED > AUTHENTICATION
DEBUG    neo4j.io:_bolt5.py:661 [#A272]  C: LOGON {'scheme': 'basic', 'principal': 'neo4j', 'credentials': '*******'}
DEBUG    neo4j.io:_bolt5.py:97 [#A272]  _: <CONNECTION> client state: AUTHENTICATION > READY
DEBUG    neo4j.io:_bolt5.py:480 [#A272]  S: SUCCESS {'server': 'Neo4j/5.13.0', 'connection_id': 'bolt-147350', 'hints': {'connection.recv_timeout_seconds': 120, 'telemetry.enabled': False}}
DEBUG    neo4j.io:_bolt5.py:86 [#A272]  _: <CONNECTION> server state: CONNECTED > AUTHENTICATION
DEBUG    neo4j.io:_bolt5.py:480 [#A272]  S: SUCCESS {}
DEBUG    neo4j.io:_bolt5.py:86 [#A272]  _: <CONNECTION> server state: AUTHENTICATION > READY
DEBUG    neo4j.io:_bolt5.py:796 [#A272]  C: RUN 'RETURN 1' {} {}
DEBUG    neo4j.io:_bolt5.py:97 [#A272]  _: <CONNECTION> client state: READY > STREAMING
DEBUG    neo4j.io:_bolt5.py:338 [#A272]  C: PULL {'n': 1000}
DEBUG    neo4j.io:_bolt5.py:480 [#A272]  S: SUCCESS {'t_first': 1, 'fields': ['1']}
DEBUG    neo4j.io:_bolt5.py:86 [#A272]  _: <CONNECTION> server state: READY > STREAMING
DEBUG    neo4j.io:_bolt5.py:471 [#A272]  S: RECORD * 1
DEBUG    neo4j.io:_bolt5.py:480 [#A272]  S: SUCCESS {'bookmark': 'FB:kcwQ4Cgc6rGGTJqFB5yoS2Vs+QOQ', 'type': 'r', 't_last': 0, 'db': 'neo4j'}
DEBUG    neo4j.io:_bolt5.py:86 [#A272]  _: <CONNECTION> server state: STREAMING > READY
DEBUG    neo4j.pool:_pool.py:515 [#A272]  _: <POOL> released bolt-147350
DEBUG    neo4j.pool:_pool.py:608 [#0000]  _: <POOL> close
DEBUG    neo4j.io:_bolt5.py:449 [#A272]  C: GOODBYE
DEBUG    neo4j.io:_bolt.py:1005 [#A272]  C: <CLOSE>
DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
=============================== warnings summary ===============================
rag_factory/services/llm/config.py:8
  /mnt/MCPProyects/ragTools/rag_factory/services/llm/config.py:8: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class LLMServiceConfig(BaseModel):

rag_factory/database/config.py:12
  /mnt/MCPProyects/ragTools/rag_factory/database/config.py:12: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DatabaseConfig(BaseSettings):

rag_factory/strategies/agentic/config.py:9
  /mnt/MCPProyects/ragTools/rag_factory/strategies/agentic/config.py:9: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class AgenticStrategyConfig(BaseModel):

rag_factory/strategies/late_chunking/models.py:21
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:21: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class TokenEmbedding(BaseModel):

rag_factory/strategies/late_chunking/models.py:34
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:34: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DocumentEmbedding(BaseModel):

rag_factory/strategies/late_chunking/models.py:49
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:49: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class EmbeddingChunk(BaseModel):

rag_factory/strategies/contextual/config.py:31
  /mnt/MCPProyects/ragTools/rag_factory/strategies/contextual/config.py:31: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ContextualRetrievalConfig(BaseModel):

rag_factory/strategies/fine_tuned/config.py:6
  /mnt/MCPProyects/ragTools/rag_factory/strategies/fine_tuned/config.py:6: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class FineTunedConfig(BaseSettings):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.3-final-0 ________________

Name                                                               Stmts   Miss  Cover   Missing
------------------------------------------------------------------------------------------------
rag_factory/__init__.py                                                7      2    71%   18-19
rag_factory/__version__.py                                             1      0   100%
rag_factory/cli/__init__.py                                            2      0   100%
rag_factory/cli/commands/__init__.py                                   1      0   100%
rag_factory/cli/commands/benchmark.py                                 96     81    16%   40-53, 64-84, 148-263
rag_factory/cli/commands/check_consistency.py                         43     33    23%   64-120
rag_factory/cli/commands/config.py                                    78     68    13%   26-64, 102-188
rag_factory/cli/commands/gui.py                                       25     17    32%   61-91
rag_factory/cli/commands/index.py                                     65     52    20%   29-39, 93-185
rag_factory/cli/commands/query.py                                     47     36    23%   73-149
rag_factory/cli/commands/repl.py                                     152    130    14%   29-56, 63-108, 112-120, 124-133, 137-155, 159-172, 176-186, 190-207, 211-220, 253-260
rag_factory/cli/commands/strategies.py                                45     36    20%   48-120
rag_factory/cli/commands/validate_e2e.py                              91     69    24%   37-38, 42-142, 145-156
rag_factory/cli/commands/validate_pipeline.py                         70     57    19%   57-156
rag_factory/cli/formatters/__init__.py                                 4      0   100%
rag_factory/cli/formatters/consistency.py                             61     55    10%   21-69, 79-103, 108-138
rag_factory/cli/formatters/output.py                                  20      9    55%   23-24, 43-44, 63-64, 74, 79, 84
rag_factory/cli/formatters/results.py                                 71     62    13%   28-55, 72-99, 116-144, 157-181
rag_factory/cli/formatters/validation.py                              63     53    16%   25-43, 48-56, 65-77, 86-98, 103-129, 134-137
rag_factory/cli/main.py                                               32     10    69%   25-28, 48-49, 79-81, 85
rag_factory/cli/utils/__init__.py                                      3      0   100%
rag_factory/cli/utils/progress.py                                     14      8    43%   34-47, 73-76
rag_factory/cli/utils/validation.py                                   53     42    21%   30-41, 57-77, 93-118, 135
rag_factory/config/__init__.py                                         4      0   100%
rag_factory/config/env_resolver.py                                    52     37    29%   47-54, 70-90, 110, 129-147
rag_factory/config/schemas/__init__.py                                 2      0   100%
rag_factory/config/schemas/version.py                                 10      6    40%   29-38
rag_factory/config/strategy_loader.py                                 54     36    33%   32-41, 45-60, 75-89, 101-104
rag_factory/config/strategy_pair_manager.py                          105     83    21%   40-72, 92-132, 148-198, 210-215, 229, 259-282
rag_factory/config/validator.py                                       93     76    18%   27-30, 34-39, 53-58, 62-74, 111-132, 177-198, 215-235, 247-249, 271-295, 333-354
rag_factory/core/__init__.py                                           4      4     0%   7-23
rag_factory/core/capabilities.py                                      61     16    74%   129, 155, 173-174, 239-253
rag_factory/core/indexing_interface.py                                54     35    35%   55-57, 118-123, 144, 164, 208, 260, 272, 292-313, 341-364
rag_factory/core/pipeline.py                                          49     35    29%   22-24, 33-40, 55-77, 95-96, 105-108, 117-120, 137-146
rag_factory/core/retrieval_interface.py                               38     20    47%   56-58, 112-117, 138, 158, 196, 247, 259, 285-309
rag_factory/database/__init__.py                                       4      0   100%
rag_factory/database/config.py                                        17      0   100%
rag_factory/database/connection.py                                    80     54    32%   40-48, 61-86, 96, 107, 126-137, 150-157, 165-170, 178-183, 196-197, 209-214, 218, 222
rag_factory/database/env_validator.py                                 38     38     0%   7-139
rag_factory/database/models.py                                        85     32    62%   31-34, 37-45, 48-54, 66-69, 72-77, 80-85, 181, 323-325
rag_factory/database/vector_indexing.py                               38     38     0%   7-114
rag_factory/evaluation/__init__.py                                     4      4     0%   29-41
rag_factory/evaluation/analysis/__init__.py                            3      3     0%   8-11
rag_factory/evaluation/analysis/comparison.py                        135    135     0%   8-323
rag_factory/evaluation/analysis/statistics.py                         81     81     0%   8-320
rag_factory/evaluation/benchmarks/__init__.py                          3      3     0%   8-14
rag_factory/evaluation/benchmarks/config.py                           25     25     0%   7-64
rag_factory/evaluation/benchmarks/runner.py                          155    155     0%   8-423
rag_factory/evaluation/datasets/__init__.py                            3      3     0%   8-14
rag_factory/evaluation/datasets/loader.py                             88     88     0%   8-281
rag_factory/evaluation/datasets/schema.py                             52     52     0%   8-160
rag_factory/evaluation/datasets/statistics.py                         65     65     0%   8-226
rag_factory/evaluation/exporters/__init__.py                           4      4     0%   8-12
rag_factory/evaluation/exporters/csv_exporter.py                      52     52     0%   3-124
rag_factory/evaluation/exporters/html_exporter.py                     47     47     0%   3-293
rag_factory/evaluation/exporters/json_exporter.py                     19     19     0%   3-68
rag_factory/evaluation/metrics/__init__.py                             3      3     0%   12-25
rag_factory/evaluation/metrics/base.py                                31     31     0%   8-115
rag_factory/evaluation/metrics/cost.py                                65     65     0%   8-313
rag_factory/evaluation/metrics/performance.py                         42     42     0%   8-202
rag_factory/evaluation/metrics/quality.py                             84     84     0%   8-377
rag_factory/evaluation/metrics/retrieval.py                           77     77     0%   9-401
rag_factory/exceptions.py                                             13      0   100%
rag_factory/factory.py                                               187    137    27%   109-116, 144, 165-170, 202-230, 256-270, 300-324, 347-348, 365, 384, 401, 418, 435, 451-460, 480-502, 528-545, 568-611, 644-699, 703-715
rag_factory/gui/__init__.py                                            2      0   100%
rag_factory/gui/components/__init__.py                                 3      0   100%
rag_factory/gui/components/scrolled_text.py                           64     52    19%   53-62, 80-114, 122, 131-142, 151-164, 168, 176, 184-199
rag_factory/gui/components/status_bar.py                              62     49    21%   40-59, 64-113, 122-137, 146-152, 161, 168, 172-184, 192-196
rag_factory/gui/main_window.py                                       701    640     9%   64-109, 113-128, 137-164, 168-194, 205-263, 268-293, 297-321, 330-390, 398-422, 435-469, 482-500, 513-551, 564-602, 615-673, 686-690, 694-732, 736-738, 746-789, 806-817, 826-858, 862-879, 885-895, 899-970, 974-1062, 1072-1074, 1082-1084, 1088-1164, 1177-1234, 1244-1246, 1254-1258, 1262-1319, 1324-1371, 1375-1394, 1398, 1411-1487, 1491-1549, 1554-1571, 1575-1582, 1587-1600, 1605-1614, 1618
rag_factory/gui/utils/__init__.py                                      3      0   100%
rag_factory/gui/utils/formatters.py                                   57     49    14%   27-30, 50-90, 110-118, 134-137, 155-165
rag_factory/gui/utils/threading.py                                    32     25    22%   44-73, 96-99, 124-129
rag_factory/legacy_config.py                                         155    155     0%   22-542
rag_factory/models/__init__.py                                         6      6     0%   3-14
rag_factory/models/embedding/__init__.py                               4      4     0%   3-12
rag_factory/models/embedding/loader.py                               179    179     0%   3-367
rag_factory/models/embedding/models.py                                47     47     0%   3-106
rag_factory/models/embedding/registry.py                             128    128     0%   3-282
rag_factory/models/evaluation/__init__.py                              3      3     0%   3-6
rag_factory/models/evaluation/ab_testing.py                           98     98     0%   3-281
rag_factory/models/evaluation/models.py                               29     29     0%   3-74
rag_factory/observability/__init__.py                                  3      3     0%   3-10
rag_factory/observability/integrations/__init__.py                     1      1     0%   3
rag_factory/observability/integrations/prometheus.py                  47     47     0%   3-229
rag_factory/observability/logging/__init__.py                          2      2     0%   3-5
rag_factory/observability/logging/config.py                           16     16     0%   3-37
rag_factory/observability/logging/filters.py                          41     41     0%   3-103
rag_factory/observability/logging/logger.py                           86     86     0%   3-396
rag_factory/observability/metrics/__init__.py                          2      2     0%   3-9
rag_factory/observability/metrics/collector.py                       143    143     0%   3-459
rag_factory/observability/metrics/cost.py                             39     39     0%   3-221
rag_factory/observability/metrics/performance.py                      64     64     0%   3-196
rag_factory/observability/monitoring/__init__.py                       1      1     0%   3
rag_factory/observability/monitoring/api.py                          101    101     0%   3-328
rag_factory/pipeline.py                                              156    156     0%   34-507
rag_factory/registry/__init__.py                                       4      0   100%
rag_factory/registry/exceptions.py                                     6      0   100%
rag_factory/registry/service_factory.py                               84     69    18%   45-54, 62-65, 70-73, 78-80, 84-86, 95-127, 136-165, 176-215, 229-255
rag_factory/registry/service_registry.py                              91     71    22%   43-51, 55-85, 103-156, 164, 178-203, 210-223, 227, 231-232
rag_factory/repositories/__init__.py                                   5      0   100%
rag_factory/repositories/base.py                                      42     21    50%   38, 53, 70, 87, 103, 114-118, 125, 136-139, 159-164
rag_factory/repositories/chunk.py                                    206    180    13%   40-45, 68-76, 90-95, 120-133, 155-171, 187-202, 221-231, 250-261, 287-328, 355-396, 422-474, 489-499, 513-521, 537-543, 557-563, 577-587, 604-626, 639-670
rag_factory/repositories/document.py                                  93     74    20%   41-46, 63-68, 98-118, 140-156, 172-187, 206, 223-233, 247-255, 272-279, 290-293, 307-312
rag_factory/repositories/exceptions.py                                18      7    61%   34-36, 56-59
rag_factory/services/__init__.py                                       4      0   100%
rag_factory/services/api/__init__.py                                   4      4     0%   7-11
rag_factory/services/api/anthropic.py                                 27     27     0%   7-141
rag_factory/services/api/cohere.py                                    30     30     0%   7-113
rag_factory/services/api/openai.py                                    46     46     0%   7-235
rag_factory/services/consistency.py                                   32     24    25%   80-113, 144-170
rag_factory/services/database/__init__.py                              5      0   100%
rag_factory/services/database/database_context.py                    181    159    12%   58-64, 88-106, 123, 140-150, 179-200, 223-240, 256-266, 305-330, 338-339, 343-406, 414-415, 430-510, 516-517, 521-546
rag_factory/services/database/migration_validator.py                  96     74    23%   29-30, 61-69, 81-88, 109-131, 148-152, 163-192, 204-219, 230-237, 249, 261-271, 283-286
rag_factory/services/database/neo4j.py                                54     38    30%   15-17, 60-71, 79-84, 103-114, 134-150, 172-181, 188-191, 195, 199
rag_factory/services/database/postgres.py                            195    163    16%   17-18, 26-27, 84-121, 131-145, 149-201, 214-269, 292-346, 360-375, 390-414, 425-440, 472-490, 504-527, 532, 543, 580-598, 607-619, 623, 627
rag_factory/services/dependencies.py                                  41     21    49%   96-109, 134-140, 176-180
rag_factory/services/embedding/__init__.py                             4      0   100%
rag_factory/services/embedding/base.py                                31      6    81%   44, 59, 68, 77, 86, 98
rag_factory/services/embedding/cache.py                               43     33    23%   26-32, 43-58, 67-76, 80-82, 90-94
rag_factory/services/embedding/config.py                              29     13    55%   37-43, 50-68, 80
rag_factory/services/embedding/providers/__init__.py                   5      0   100%
rag_factory/services/embedding/providers/cohere.py                    53     36    32%   10-20, 55-75, 90-117, 125, 133, 141, 152-153
rag_factory/services/embedding/providers/local.py                     43     27    37%   8-9, 46-67, 83-109, 117, 125, 133, 146
rag_factory/services/embedding/providers/onnx_local.py               114     93    18%   18-19, 87-177, 193-250, 261-308, 319, 327, 335, 348
rag_factory/services/embedding/providers/openai.py                    51     34    33%   10-20, 53-72, 87-108, 116, 124, 132, 143-144
rag_factory/services/embedding/rate_limiter.py                        20     14    30%   27-37, 45-53
rag_factory/services/embedding/service.py                            100     83    17%   50-62, 79-93, 117-198, 220-222, 233-239, 248-266, 273-275
rag_factory/services/interfaces.py                                    35      0   100%
rag_factory/services/llm/__init__.py                                   5      0   100%
rag_factory/services/llm/base.py                                      43      0   100%
rag_factory/services/llm/config.py                                    23     11    52%   42-57
rag_factory/services/llm/prompt_template.py                           43     24    44%   47-82, 97-100, 111-115
rag_factory/services/llm/providers/__init__.py                        12     12     0%   5-22
rag_factory/services/llm/providers/anthropic.py                       57     57     0%   3-205
rag_factory/services/llm/providers/ollama.py                          55     55     0%   3-196
rag_factory/services/llm/providers/openai.py                          57     57     0%   3-210
rag_factory/services/llm/service.py                                   66     51    23%   32-39, 56-70, 93-129, 154-175, 186, 194-198, 215-216
rag_factory/services/llm/token_counter.py                             27     27     0%   3-72
rag_factory/services/local/__init__.py                                 2      2     0%   7-9
rag_factory/services/local/reranker.py                                32     32     0%   7-116
rag_factory/services/onnx/__init__.py                                  2      2     0%   7-9
rag_factory/services/onnx/embedding.py                                29     29     0%   7-129
rag_factory/services/utils/__init__.py                                 2      0   100%
rag_factory/services/utils/model_converter.py                        104    104     0%   8-291
rag_factory/services/utils/onnx_utils.py                             133    114    14%   22-23, 36-37, 67-123, 142-146, 172-218, 240-274, 291-312, 332-347, 360-378, 392-404
rag_factory/services/utils/reranker_selector.py                       68     68     0%   8-249
rag_factory/strategies/__init__.py                                     2      0   100%
rag_factory/strategies/agentic/__init__.py                             7      0   100%
rag_factory/strategies/agentic/agent.py                              151    130    14%   31-36, 45, 57, 66-90, 109-111, 123-161, 190-214, 230-265, 276-293, 310-331, 339-346, 357-368, 381-420
rag_factory/strategies/agentic/config.py                              12      0   100%
rag_factory/strategies/agentic/frameworks/__init__.py                  1      1     0%   9
rag_factory/strategies/agentic/query_analyzer.py                      89     65    27%   50-55, 67, 79-90, 109-125, 137-147, 159-178, 196-214, 225-260, 278
rag_factory/strategies/agentic/strategy.py                            87     60    31%   50-63, 76, 84, 94-132, 144, 156, 169, 182-222, 234-258, 267, 276, 284
rag_factory/strategies/agentic/tool_implementations.py               135     91    33%   36-37, 41, 45, 52, 86-129, 148-149, 153, 157, 164, 182-247, 266-267, 271, 275, 282, 329-373, 392-393, 397, 401, 407, 446-511
rag_factory/strategies/agentic/tools.py                               40      9    78%   66, 79, 89, 101, 112, 139-142
rag_factory/strategies/auto_register.py                               66     20    70%   13-14, 18-19, 23-24, 28-29, 33-34, 39-40, 46-47, 52-53, 58-59, 79-80
rag_factory/strategies/base.py                                        55     13    76%   80-85, 169-178
rag_factory/strategies/chunking/__init__.py                           15     15     0%   28-67
rag_factory/strategies/chunking/base.py                               91     91     0%   3-256
rag_factory/strategies/chunking/docling_chunker.py                    45     45     0%   13-188
rag_factory/strategies/chunking/fixed_size_chunker.py                 74     74     0%   3-204
rag_factory/strategies/chunking/hybrid_chunker.py                     70     70     0%   3-192
rag_factory/strategies/chunking/semantic_chunker.py                  195    195     0%   3-534
rag_factory/strategies/chunking/structural_chunker.py                147    147     0%   3-425
rag_factory/strategies/chunking/utils.py                              89     89     0%   3-264
rag_factory/strategies/contextual/__init__.py                          7      0   100%
rag_factory/strategies/contextual/batch_processor.py                  91     76    16%   41-43, 60-72, 84-90, 108-128, 145-161, 178-201, 218-266
rag_factory/strategies/contextual/config.py                           46      0   100%
rag_factory/strategies/contextual/context_generator.py                84     70    17%   35-36, 59-99, 112-135, 152-194, 209, 224-234
rag_factory/strategies/contextual/cost_tracker.py                     32     21    34%   31-35, 48-51, 69-82, 94-99, 111-114, 126
rag_factory/strategies/contextual/prompts.py                          25     17    32%   85-106, 119
rag_factory/strategies/contextual/storage.py                          44     35    20%   32-33, 42-45, 54-81, 98-118
rag_factory/strategies/contextual/strategy.py                         78     49    37%   54-67, 75, 83, 107-156, 173, 186, 207-215, 231-262, 278, 284, 289, 298
rag_factory/strategies/fine_tuned/__init__.py                          4      0   100%
rag_factory/strategies/fine_tuned/ab_testing.py                       78     78     0%   1-134
rag_factory/strategies/fine_tuned/config.py                           11      0   100%
rag_factory/strategies/fine_tuned/custom_loader.py                    40     28    30%   17-19, 36-73, 77, 84-88
rag_factory/strategies/fine_tuned/model_registry.py                  126     96    24%   39-50, 80-112, 132-149, 166-178, 182-196, 200-223, 227-240, 249-270, 274-287, 291-303
rag_factory/strategies/hierarchical/__init__.py                        5      5     0%   8-21
rag_factory/strategies/hierarchical/hierarchy_builder.py              79     79     0%   8-335
rag_factory/strategies/hierarchical/models.py                         58     58     0%   8-137
rag_factory/strategies/hierarchical/parent_retriever.py               89     89     0%   8-278
rag_factory/strategies/hierarchical/strategy.py                       76     76     0%   9-301
rag_factory/strategies/indexing/__init__.py                            6      0   100%
rag_factory/strategies/indexing/context_aware.py                     108     88    19%   31, 43, 63-134, 155-156, 160-170, 182-188, 192-198, 208-237, 241-242
rag_factory/strategies/indexing/hierarchical.py                       90     73    19%   50, 63, 88-134, 156-185, 201-236, 253-278, 292-293
rag_factory/strategies/indexing/in_memory.py                          41     25    39%   54, 65, 93-121, 143, 160, 173, 194-200
rag_factory/strategies/indexing/keyword_indexing.py                   42     31    26%   42, 53, 77-157
rag_factory/strategies/indexing/knowledge_graph_indexing.py           46     33    28%   18, 27, 48-89, 108-129
rag_factory/strategies/indexing/vector_embedding.py                   98     85    13%   25, 35, 55-116, 137-221
rag_factory/strategies/knowledge_graph/__init__.py                     4      4     0%   8-19
rag_factory/strategies/knowledge_graph/config.py                      21     21     0%   8-129
rag_factory/strategies/knowledge_graph/entity_extractor.py            70     70     0%   7-205
rag_factory/strategies/knowledge_graph/graph_store.py                 31     31     0%   8-124
rag_factory/strategies/knowledge_graph/hybrid_retriever.py            56     56     0%   8-164
rag_factory/strategies/knowledge_graph/memory_graph_store.py          97     97     0%   8-196
rag_factory/strategies/knowledge_graph/models.py                      53     53     0%   8-122
rag_factory/strategies/knowledge_graph/relationship_extractor.py      62     62     0%   8-189
rag_factory/strategies/knowledge_graph/strategy.py                    80     80     0%   8-256
rag_factory/strategies/late_chunking/__init__.py                       6      0   100%
rag_factory/strategies/late_chunking/coherence_analyzer.py            27     17    37%   20-21, 36-45, 57-65, 82-96
rag_factory/strategies/late_chunking/document_embedder.py            104     89    14%   29-74, 94-184, 202-215, 227-235, 256-279, 296-303, 318
rag_factory/strategies/late_chunking/embedding_chunker.py            117    102    13%   26, 41-61, 68-98, 105-155, 162-182, 191-192, 199-254, 265-289, 293-300
rag_factory/strategies/late_chunking/models.py                        62      0   100%
rag_factory/strategies/late_chunking/strategy.py                      70     46    34%   48-69, 77, 88, 107-122, 140-177, 196-205, 210, 215
rag_factory/strategies/multi_query/__init__.py                         7      7     0%   8-19
rag_factory/strategies/multi_query/config.py                          36     36     0%   3-138
rag_factory/strategies/multi_query/deduplicator.py                    87     87     0%   3-197
rag_factory/strategies/multi_query/parallel_executor.py               52     52     0%   3-163
rag_factory/strategies/multi_query/prompts.py                         10     10     0%   3-84
rag_factory/strategies/multi_query/ranker.py                          80     80     0%   3-201
rag_factory/strategies/multi_query/strategy.py                        68     68     0%   3-184
rag_factory/strategies/multi_query/variant_generator.py               62     62     0%   3-187
rag_factory/strategies/query_expansion/__init__.py                     8      0   100%
rag_factory/strategies/query_expansion/base.py                        66     10    85%   90, 103, 114-118, 130-133
rag_factory/strategies/query_expansion/cache.py                       52     40    23%   20-22, 38-55, 64-66, 70-73, 81-97, 105-112
rag_factory/strategies/query_expansion/expander_service.py            92     71    23%   36-40, 55-58, 75-148, 159-180, 204-215, 233-234, 242-246, 254, 265-273, 283-284
rag_factory/strategies/query_expansion/hyde_expander.py               19     12    37%   25-27, 41-65
rag_factory/strategies/query_expansion/llm_expander.py                25     16    36%   23-25, 39-71, 99
rag_factory/strategies/query_expansion/metrics.py                     66     30    55%   44-45, 53-57, 76-109, 130, 134, 146-152, 160
rag_factory/strategies/query_expansion/prompts.py                     13      7    46%   16, 28-56, 68-107
rag_factory/strategies/reranking/__init__.py                           7      0   100%
rag_factory/strategies/reranking/base.py                              68     16    76%   81, 101, 106, 110-119, 123-130
rag_factory/strategies/reranking/bge_reranker.py                      51     37    27%   14, 53-81, 103-147, 151
rag_factory/strategies/reranking/cache.py                             48     34    29%   32-34, 51-66, 76-77, 81, 90-101, 110-113, 121, 136-138
rag_factory/strategies/reranking/cohere_reranker.py                   34     20    41%   15-16, 55-71, 94-115, 119
rag_factory/strategies/reranking/cosine_reranker.py                   62     47    24%   54-72, 97-139, 158-171, 188, 209-215, 227-230, 242-245, 249
rag_factory/strategies/reranking/cross_encoder_reranker.py            40     27    32%   13-14, 53-76, 98-120, 124
rag_factory/strategies/reranking/metrics.py                           67     67     0%   8-264
rag_factory/strategies/reranking/reranker_service.py                 115     88    23%   56-67, 71-96, 113-225, 235-255, 269, 282-283, 287-292, 296-300, 308-310
rag_factory/strategies/retrieval/__init__.py                           6      0   100%
rag_factory/strategies/retrieval/hybrid_retriever.py                  51     37    27%   32, 39, 51-102, 110-144
rag_factory/strategies/retrieval/keyword_retriever.py                 56     41    27%   41, 52, 71-113, 126-133, 153-172
rag_factory/strategies/retrieval/knowledge_graph_retriever.py         22      9    59%   19, 27, 48-70
rag_factory/strategies/retrieval/multi_query_retriever.py             22      9    59%   19, 26, 44-66
rag_factory/strategies/retrieval/query_expansion_retriever.py         24      9    62%   20, 27, 45-67
rag_factory/strategies/retrieval/semantic_retriever.py                23     12    48%   23, 32, 61-94
rag_factory/strategies/self_reflective/__init__.py                     6      0   100%
rag_factory/strategies/self_reflective/config.py                      20      8    60%   29-42
rag_factory/strategies/self_reflective/grader.py                      80     65    19%   29-35, 51-67, 83-109, 135-171, 187-258, 266
rag_factory/strategies/self_reflective/models.py                      48      0   100%
rag_factory/strategies/self_reflective/refiner.py                     69     56    19%   28-30, 53-96, 113-143, 161-193, 208-228
rag_factory/strategies/self_reflective/strategy.py                    92     74    20%   38-53, 71-181, 192-206, 229-259, 264, 269
rag_factory/utils/__init__.py                                          3      0   100%
rag_factory/utils/token_counter.py                                    45     30    33%   36-40, 52-62, 74-82, 86, 90, 105-106, 124-135, 153-158
rag_factory/utils/tokenization.py                                     95     73    23%   36-40, 53-64, 87-114, 126-129, 141-144, 156, 175-190, 209-228, 241-243, 251-252, 270-271, 292-293, 314-315
------------------------------------------------------------------------------------------------
TOTAL                                                              13429  10965    18%
=========================== short test summary info ============================
ERROR tests/integration_real/test_neo4j_real.py::test_neo4j_connection - ImportError: cannot import name 'Neo4jDatabaseService' from 'rag_factory.services.database.neo4j' (/mnt/MCPProyects/ragTools/rag_factory/services/database/neo4j.py)
ERROR tests/integration_real/test_neo4j_real.py::test_create_and_retrieve_node - ImportError: cannot import name 'Neo4jDatabaseService' from 'rag_factory.services.database.neo4j' (/mnt/MCPProyects/ragTools/rag_factory/services/database/neo4j.py)
ERROR tests/integration_real/test_neo4j_real.py::test_create_relationship - ImportError: cannot import name 'Neo4jDatabaseService' from 'rag_factory.services.database.neo4j' (/mnt/MCPProyects/ragTools/rag_factory/services/database/neo4j.py)
ERROR tests/integration_real/test_neo4j_real.py::test_graph_traversal - ImportError: cannot import name 'Neo4jDatabaseService' from 'rag_factory.services.database.neo4j' (/mnt/MCPProyects/ragTools/rag_factory/services/database/neo4j.py)
ERROR tests/integration_real/test_neo4j_real.py::test_entity_storage - ImportError: cannot import name 'Neo4jDatabaseService' from 'rag_factory.services.database.neo4j' (/mnt/MCPProyects/ragTools/rag_factory/services/database/neo4j.py)
ERROR tests/integration_real/test_neo4j_real.py::test_batch_node_creation - ImportError: cannot import name 'Neo4jDatabaseService' from 'rag_factory.services.database.neo4j' (/mnt/MCPProyects/ragTools/rag_factory/services/database/neo4j.py)
ERROR tests/integration_real/test_neo4j_real.py::test_update_node_properties - ImportError: cannot import name 'Neo4jDatabaseService' from 'rag_factory.services.database.neo4j' (/mnt/MCPProyects/ragTools/rag_factory/services/database/neo4j.py)
ERROR tests/integration_real/test_neo4j_real.py::test_delete_nodes - ImportError: cannot import name 'Neo4jDatabaseService' from 'rag_factory.services.database.neo4j' (/mnt/MCPProyects/ragTools/rag_factory/services/database/neo4j.py)
ERROR tests/integration_real/test_neo4j_real.py::test_complex_query - ImportError: cannot import name 'Neo4jDatabaseService' from 'rag_factory.services.database.neo4j' (/mnt/MCPProyects/ragTools/rag_factory/services/database/neo4j.py)
======================== 8 warnings, 9 errors in 9.82s =========================

[23/206] FAILED: tests/integration/registry/test_registry_integration.py
  Tests: 17 (P:15 F:2 S:0)
----------------------------------------
============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.1, pluggy-1.6.0 -- /mnt/MCPProyects/ragTools/venv/bin/python3
cachedir: .pytest_cache
rootdir: /mnt/MCPProyects/ragTools
configfile: pytest.ini (WARNING: ignoring pytest config in pyproject.toml!)
plugins: anyio-4.12.0, cov-7.0.0, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 16 items

tests/integration/registry/test_registry_integration.py::TestRealServiceInstantiation::test_instantiate_onnx_embedding_service PASSED [  6%]
tests/integration/registry/test_registry_integration.py::TestRealServiceInstantiation::test_embedding_service_functionality PASSED [ 12%]
tests/integration/registry/test_registry_integration.py::TestRealServiceInstantiation::test_multiple_service_instantiation PASSED [ 18%]
tests/integration/registry/test_registry_integration.py::TestEnvironmentVariableResolution::test_env_var_resolution PASSED [ 25%]
tests/integration/registry/test_registry_integration.py::TestEnvironmentVariableResolution::test_env_var_defaults PASSED [ 31%]
tests/integration/registry/test_registry_integration.py::TestServiceLifecycle::test_context_manager_cleanup PASSED [ 37%]
tests/integration/registry/test_registry_integration.py::TestServiceLifecycle::test_reload_service PASSED [ 43%]
tests/integration/registry/test_registry_integration.py::TestServiceLifecycle::test_shutdown_cleanup PASSED [ 50%]
tests/integration/registry/test_registry_integration.py::TestServiceSharing::test_service_instance_sharing PASSED [ 56%]
tests/integration/registry/test_registry_integration.py::TestServiceSharing::test_service_sharing_memory_efficiency PASSED [ 62%]
tests/integration/registry/test_registry_integration.py::TestErrorHandling::test_invalid_service_config PASSED [ 68%]
tests/integration/registry/test_registry_integration.py::TestErrorHandling::test_missing_service_file PASSED [ 75%]
tests/integration/registry/test_registry_integration.py::TestOpenAIServices::test_openai_llm_instantiation FAILED [ 81%]
tests/integration/registry/test_registry_integration.py::TestOpenAIServices::test_openai_embedding_instantiation PASSED [ 87%]
tests/integration/registry/test_registry_integration.py::TestConfigurationValidation::test_valid_configuration_loads PASSED [ 93%]
tests/integration/registry/test_registry_integration.py::TestConfigurationValidation::test_configuration_warnings PASSED [100%]

=================================== FAILURES ===================================
_______________ TestOpenAIServices.test_openai_llm_instantiation _______________
tests/integration/registry/test_registry_integration.py:274: in test_openai_llm_instantiation
    assert isinstance(llm, ILLMService)
E   assert False
E    +  where False = isinstance(<rag_factory.services.llm.service.LLMService object at 0x7cbac92c72f0>, ILLMService)
----------------------------- Captured stderr call -----------------------------
INFO:rag_factory.registry.service_registry:Loading service registry from: /tmp/pytest-of-admindevmac/pytest-8/test_openai_llm_instantiation0/services.yaml
INFO:rag_factory.registry.service_registry:Service registry loaded: 1 services available
INFO:rag_factory.registry.service_registry:Instantiating service: llm_openai
DEBUG:rag_factory.registry.service_factory:Creating LLM service: llm_openai
INFO:rag_factory.registry.service_registry:Service 'llm_openai' instantiated successfully in 0.28s
------------------------------ Captured log call -------------------------------
INFO     rag_factory.registry.service_registry:service_registry.py:55 Loading service registry from: /tmp/pytest-of-admindevmac/pytest-8/test_openai_llm_instantiation0/services.yaml
INFO     rag_factory.registry.service_registry:service_registry.py:75 Service registry loaded: 1 services available
INFO     rag_factory.registry.service_registry:service_registry.py:133 Instantiating service: llm_openai
DEBUG    rag_factory.registry.service_factory:service_factory.py:98 Creating LLM service: llm_openai
INFO     rag_factory.registry.service_registry:service_registry.py:143 Service 'llm_openai' instantiated successfully in 0.28s
=============================== warnings summary ===============================
rag_factory/services/llm/config.py:8
  /mnt/MCPProyects/ragTools/rag_factory/services/llm/config.py:8: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class LLMServiceConfig(BaseModel):

rag_factory/database/config.py:12
  /mnt/MCPProyects/ragTools/rag_factory/database/config.py:12: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DatabaseConfig(BaseSettings):

rag_factory/strategies/agentic/config.py:9
  /mnt/MCPProyects/ragTools/rag_factory/strategies/agentic/config.py:9: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class AgenticStrategyConfig(BaseModel):

rag_factory/strategies/late_chunking/models.py:21
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:21: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class TokenEmbedding(BaseModel):

rag_factory/strategies/late_chunking/models.py:34
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:34: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DocumentEmbedding(BaseModel):

rag_factory/strategies/late_chunking/models.py:49
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:49: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class EmbeddingChunk(BaseModel):

rag_factory/strategies/contextual/config.py:31
  /mnt/MCPProyects/ragTools/rag_factory/strategies/contextual/config.py:31: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ContextualRetrievalConfig(BaseModel):

rag_factory/strategies/fine_tuned/config.py:6
  /mnt/MCPProyects/ragTools/rag_factory/strategies/fine_tuned/config.py:6: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class FineTunedConfig(BaseSettings):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.3-final-0 ________________

Name                                                               Stmts   Miss  Cover   Missing
------------------------------------------------------------------------------------------------
rag_factory/__init__.py                                                7      2    71%   18-19
rag_factory/__version__.py                                             1      0   100%
rag_factory/cli/__init__.py                                            2      0   100%
rag_factory/cli/commands/__init__.py                                   1      0   100%
rag_factory/cli/commands/benchmark.py                                 96     81    16%   40-53, 64-84, 148-263
rag_factory/cli/commands/check_consistency.py                         43     33    23%   64-120
rag_factory/cli/commands/config.py                                    78     68    13%   26-64, 102-188
rag_factory/cli/commands/gui.py                                       25     17    32%   61-91
rag_factory/cli/commands/index.py                                     65     52    20%   29-39, 93-185
rag_factory/cli/commands/query.py                                     47     36    23%   73-149
rag_factory/cli/commands/repl.py                                     152    130    14%   29-56, 63-108, 112-120, 124-133, 137-155, 159-172, 176-186, 190-207, 211-220, 253-260
rag_factory/cli/commands/strategies.py                                45     36    20%   48-120
rag_factory/cli/commands/validate_e2e.py                              91     69    24%   37-38, 42-142, 145-156
rag_factory/cli/commands/validate_pipeline.py                         70     57    19%   57-156
rag_factory/cli/formatters/__init__.py                                 4      0   100%
rag_factory/cli/formatters/consistency.py                             61     55    10%   21-69, 79-103, 108-138
rag_factory/cli/formatters/output.py                                  20      9    55%   23-24, 43-44, 63-64, 74, 79, 84
rag_factory/cli/formatters/results.py                                 71     62    13%   28-55, 72-99, 116-144, 157-181
rag_factory/cli/formatters/validation.py                              63     53    16%   25-43, 48-56, 65-77, 86-98, 103-129, 134-137
rag_factory/cli/main.py                                               32     10    69%   25-28, 48-49, 79-81, 85
rag_factory/cli/utils/__init__.py                                      3      0   100%
rag_factory/cli/utils/progress.py                                     14      8    43%   34-47, 73-76
rag_factory/cli/utils/validation.py                                   53     42    21%   30-41, 57-77, 93-118, 135
rag_factory/config/__init__.py                                         4      0   100%
rag_factory/config/env_resolver.py                                    52     21    60%   52, 81-86, 110, 129-147
rag_factory/config/schemas/__init__.py                                 2      0   100%
rag_factory/config/schemas/version.py                                 10      6    40%   29-38
rag_factory/config/strategy_loader.py                                 54     36    33%   32-41, 45-60, 75-89, 101-104
rag_factory/config/strategy_pair_manager.py                          105     83    21%   40-72, 92-132, 148-198, 210-215, 229, 259-282
rag_factory/config/validator.py                                       93     32    66%   70, 177-198, 271-295, 333-354
rag_factory/core/__init__.py                                           4      4     0%   7-23
rag_factory/core/capabilities.py                                      61     16    74%   129, 155, 173-174, 239-253
rag_factory/core/indexing_interface.py                                54     35    35%   55-57, 118-123, 144, 164, 208, 260, 272, 292-313, 341-364
rag_factory/core/pipeline.py                                          49     35    29%   22-24, 33-40, 55-77, 95-96, 105-108, 117-120, 137-146
rag_factory/core/retrieval_interface.py                               38     20    47%   56-58, 112-117, 138, 158, 196, 247, 259, 285-309
rag_factory/database/__init__.py                                       4      0   100%
rag_factory/database/config.py                                        17      0   100%
rag_factory/database/connection.py                                    80     54    32%   40-48, 61-86, 96, 107, 126-137, 150-157, 165-170, 178-183, 196-197, 209-214, 218, 222
rag_factory/database/env_validator.py                                 38     38     0%   7-139
rag_factory/database/models.py                                        85     32    62%   31-34, 37-45, 48-54, 66-69, 72-77, 80-85, 181, 323-325
rag_factory/database/vector_indexing.py                               38     38     0%   7-114
rag_factory/evaluation/__init__.py                                     4      4     0%   29-41
rag_factory/evaluation/analysis/__init__.py                            3      3     0%   8-11
rag_factory/evaluation/analysis/comparison.py                        135    135     0%   8-323
rag_factory/evaluation/analysis/statistics.py                         81     81     0%   8-320
rag_factory/evaluation/benchmarks/__init__.py                          3      3     0%   8-14
rag_factory/evaluation/benchmarks/config.py                           25     25     0%   7-64
rag_factory/evaluation/benchmarks/runner.py                          155    155     0%   8-423
rag_factory/evaluation/datasets/__init__.py                            3      3     0%   8-14
rag_factory/evaluation/datasets/loader.py                             88     88     0%   8-281
rag_factory/evaluation/datasets/schema.py                             52     52     0%   8-160
rag_factory/evaluation/datasets/statistics.py                         65     65     0%   8-226
rag_factory/evaluation/exporters/__init__.py                           4      4     0%   8-12
rag_factory/evaluation/exporters/csv_exporter.py                      52     52     0%   3-124
rag_factory/evaluation/exporters/html_exporter.py                     47     47     0%   3-293
rag_factory/evaluation/exporters/json_exporter.py                     19     19     0%   3-68
rag_factory/evaluation/metrics/__init__.py                             3      3     0%   12-25
rag_factory/evaluation/metrics/base.py                                31     31     0%   8-115
rag_factory/evaluation/metrics/cost.py                                65     65     0%   8-313
rag_factory/evaluation/metrics/performance.py                         42     42     0%   8-202
rag_factory/evaluation/metrics/quality.py                             84     84     0%   8-377
rag_factory/evaluation/metrics/retrieval.py                           77     77     0%   9-401
rag_factory/exceptions.py                                             13      0   100%
rag_factory/factory.py                                               187    137    27%   109-116, 144, 165-170, 202-230, 256-270, 300-324, 347-348, 365, 384, 401, 418, 435, 451-460, 480-502, 528-545, 568-611, 644-699, 703-715
rag_factory/gui/__init__.py                                            2      0   100%
rag_factory/gui/components/__init__.py                                 3      0   100%
rag_factory/gui/components/scrolled_text.py                           64     52    19%   53-62, 80-114, 122, 131-142, 151-164, 168, 176, 184-199
rag_factory/gui/components/status_bar.py                              62     49    21%   40-59, 64-113, 122-137, 146-152, 161, 168, 172-184, 192-196
rag_factory/gui/main_window.py                                       701    640     9%   64-109, 113-128, 137-164, 168-194, 205-263, 268-293, 297-321, 330-390, 398-422, 435-469, 482-500, 513-551, 564-602, 615-673, 686-690, 694-732, 736-738, 746-789, 806-817, 826-858, 862-879, 885-895, 899-970, 974-1062, 1072-1074, 1082-1084, 1088-1164, 1177-1234, 1244-1246, 1254-1258, 1262-1319, 1324-1371, 1375-1394, 1398, 1411-1487, 1491-1549, 1554-1571, 1575-1582, 1587-1600, 1605-1614, 1618
rag_factory/gui/utils/__init__.py                                      3      0   100%
rag_factory/gui/utils/formatters.py                                   57     49    14%   27-30, 50-90, 110-118, 134-137, 155-165
rag_factory/gui/utils/threading.py                                    32     25    22%   44-73, 96-99, 124-129
rag_factory/legacy_config.py                                         155    155     0%   22-542
rag_factory/models/__init__.py                                         6      6     0%   3-14
rag_factory/models/embedding/__init__.py                               4      4     0%   3-12
rag_factory/models/embedding/loader.py                               179    179     0%   3-367
rag_factory/models/embedding/models.py                                47     47     0%   3-106
rag_factory/models/embedding/registry.py                             128    128     0%   3-282
rag_factory/models/evaluation/__init__.py                              3      3     0%   3-6
rag_factory/models/evaluation/ab_testing.py                           98     98     0%   3-281
rag_factory/models/evaluation/models.py                               29     29     0%   3-74
rag_factory/observability/__init__.py                                  3      3     0%   3-10
rag_factory/observability/integrations/__init__.py                     1      1     0%   3
rag_factory/observability/integrations/prometheus.py                  47     47     0%   3-229
rag_factory/observability/logging/__init__.py                          2      2     0%   3-5
rag_factory/observability/logging/config.py                           16     16     0%   3-37
rag_factory/observability/logging/filters.py                          41     41     0%   3-103
rag_factory/observability/logging/logger.py                           86     86     0%   3-396
rag_factory/observability/metrics/__init__.py                          2      2     0%   3-9
rag_factory/observability/metrics/collector.py                       143    143     0%   3-459
rag_factory/observability/metrics/cost.py                             39     39     0%   3-221
rag_factory/observability/metrics/performance.py                      64     64     0%   3-196
rag_factory/observability/monitoring/__init__.py                       1      1     0%   3
rag_factory/observability/monitoring/api.py                          101    101     0%   3-328
rag_factory/pipeline.py                                              156    156     0%   34-507
rag_factory/registry/__init__.py                                       4      0   100%
rag_factory/registry/exceptions.py                                     6      0   100%
rag_factory/registry/service_factory.py                               84     44    48%   49-54, 65, 73, 78-80, 84-86, 111-117, 156-165, 176-215, 229-255
rag_factory/registry/service_registry.py                              91     17    81%   114, 118, 123-124, 148-150, 188-192, 214-218
rag_factory/repositories/__init__.py                                   5      0   100%
rag_factory/repositories/base.py                                      42     21    50%   38, 53, 70, 87, 103, 114-118, 125, 136-139, 159-164
rag_factory/repositories/chunk.py                                    206    180    13%   40-45, 68-76, 90-95, 120-133, 155-171, 187-202, 221-231, 250-261, 287-328, 355-396, 422-474, 489-499, 513-521, 537-543, 557-563, 577-587, 604-626, 639-670
rag_factory/repositories/document.py                                  93     74    20%   41-46, 63-68, 98-118, 140-156, 172-187, 206, 223-233, 247-255, 272-279, 290-293, 307-312
rag_factory/repositories/exceptions.py                                18      7    61%   34-36, 56-59
rag_factory/services/__init__.py                                       4      0   100%
rag_factory/services/api/__init__.py                                   4      0   100%
rag_factory/services/api/anthropic.py                                 27     18    33%   46-52, 76-94, 118-141
rag_factory/services/api/cohere.py                                    30     19    37%   14-15, 49-59, 82-113
rag_factory/services/api/openai.py                                    46     29    37%   45-51, 75-93, 117-140, 189-199, 216-227, 235
rag_factory/services/consistency.py                                   32     24    25%   80-113, 144-170
rag_factory/services/database/__init__.py                              5      0   100%
rag_factory/services/database/database_context.py                    181    159    12%   58-64, 88-106, 123, 140-150, 179-200, 223-240, 256-266, 305-330, 338-339, 343-406, 414-415, 430-510, 516-517, 521-546
rag_factory/services/database/migration_validator.py                  96     74    23%   29-30, 61-69, 81-88, 109-131, 148-152, 163-192, 204-219, 230-237, 249, 261-271, 283-286
rag_factory/services/database/neo4j.py                                54     38    30%   15-17, 60-71, 79-84, 103-114, 134-150, 172-181, 188-191, 195, 199
rag_factory/services/database/postgres.py                            195    163    16%   17-18, 26-27, 84-121, 131-145, 149-201, 214-269, 292-346, 360-375, 390-414, 425-440, 472-490, 504-527, 532, 543, 580-598, 607-619, 623, 627
rag_factory/services/dependencies.py                                  41     21    49%   96-109, 134-140, 176-180
rag_factory/services/embedding/__init__.py                             4      0   100%
rag_factory/services/embedding/base.py                                31      6    81%   44, 59, 68, 77, 86, 98
rag_factory/services/embedding/cache.py                               43     33    23%   26-32, 43-58, 67-76, 80-82, 90-94
rag_factory/services/embedding/config.py                              29     13    55%   37-43, 50-68, 80
rag_factory/services/embedding/providers/__init__.py                   5      0   100%
rag_factory/services/embedding/providers/cohere.py                    53     36    32%   10-20, 55-75, 90-117, 125, 133, 141, 152-153
rag_factory/services/embedding/providers/local.py                     43     27    37%   8-9, 46-67, 83-109, 117, 125, 133, 146
rag_factory/services/embedding/providers/onnx_local.py               114     65    43%   18-19, 90, 114, 139-147, 158, 170-175, 193-250, 261-308, 327, 335, 348
rag_factory/services/embedding/providers/openai.py                    51     27    47%   10-20, 54, 64, 70, 87-108, 116, 124, 132, 143-144
rag_factory/services/embedding/rate_limiter.py                        20     14    30%   27-37, 45-53
rag_factory/services/embedding/service.py                            100     83    17%   50-62, 79-93, 117-198, 220-222, 233-239, 248-266, 273-275
rag_factory/services/interfaces.py                                    35      0   100%
rag_factory/services/llm/__init__.py                                   5      0   100%
rag_factory/services/llm/base.py                                      43      0   100%
rag_factory/services/llm/config.py                                    23      7    70%   46-48, 51-53, 57
rag_factory/services/llm/prompt_template.py                           43     24    44%   47-82, 97-100, 111-115
rag_factory/services/llm/providers/__init__.py                        12     10    17%   10-22
rag_factory/services/llm/providers/anthropic.py                       57     42    26%   44-50, 64-97, 120-147, 171-172, 184-189, 197, 205
rag_factory/services/llm/providers/ollama.py                          55     42    24%   22-24, 37-67, 93-122, 142-143, 157, 165, 174, 185-196
rag_factory/services/llm/providers/openai.py                          57     35    39%   56, 60, 76-110, 133-158, 173, 186-194, 202, 210
rag_factory/services/llm/service.py                                   66     40    39%   68, 93-129, 154-175, 186, 194-198, 215-216
rag_factory/services/llm/token_counter.py                             27     17    37%   22-41, 56-57, 71-72
rag_factory/services/local/__init__.py                                 2      2     0%   7-9
rag_factory/services/local/reranker.py                                32     32     0%   7-116
rag_factory/services/onnx/__init__.py                                  2      0   100%
rag_factory/services/onnx/embedding.py                                29     12    59%   61, 65, 83-93, 110-121
rag_factory/services/utils/__init__.py                                 2      0   100%
rag_factory/services/utils/model_converter.py                        104    104     0%   8-291
rag_factory/services/utils/onnx_utils.py                             133     55    59%   22-23, 37, 77-84, 96-97, 117-123, 142-146, 175, 189-190, 194, 198-201, 216-218, 258, 265-268, 332-347, 360-378, 392-404
rag_factory/services/utils/reranker_selector.py                       68     68     0%   8-249
rag_factory/strategies/__init__.py                                     2      0   100%
rag_factory/strategies/agentic/__init__.py                             7      0   100%
rag_factory/strategies/agentic/agent.py                              151    130    14%   31-36, 45, 57, 66-90, 109-111, 123-161, 190-214, 230-265, 276-293, 310-331, 339-346, 357-368, 381-420
rag_factory/strategies/agentic/config.py                              12      0   100%
rag_factory/strategies/agentic/frameworks/__init__.py                  1      1     0%   9
rag_factory/strategies/agentic/query_analyzer.py                      89     65    27%   50-55, 67, 79-90, 109-125, 137-147, 159-178, 196-214, 225-260, 278
rag_factory/strategies/agentic/strategy.py                            87     60    31%   50-63, 76, 84, 94-132, 144, 156, 169, 182-222, 234-258, 267, 276, 284
rag_factory/strategies/agentic/tool_implementations.py               135     91    33%   36-37, 41, 45, 52, 86-129, 148-149, 153, 157, 164, 182-247, 266-267, 271, 275, 282, 329-373, 392-393, 397, 401, 407, 446-511
rag_factory/strategies/agentic/tools.py                               40      9    78%   66, 79, 89, 101, 112, 139-142
rag_factory/strategies/auto_register.py                               66     20    70%   13-14, 18-19, 23-24, 28-29, 33-34, 39-40, 46-47, 52-53, 58-59, 79-80
rag_factory/strategies/base.py                                        55     13    76%   80-85, 169-178
rag_factory/strategies/chunking/__init__.py                           15     15     0%   28-67
rag_factory/strategies/chunking/base.py                               91     91     0%   3-256
rag_factory/strategies/chunking/docling_chunker.py                    45     45     0%   13-188
rag_factory/strategies/chunking/fixed_size_chunker.py                 74     74     0%   3-204
rag_factory/strategies/chunking/hybrid_chunker.py                     70     70     0%   3-192
rag_factory/strategies/chunking/semantic_chunker.py                  195    195     0%   3-534
rag_factory/strategies/chunking/structural_chunker.py                147    147     0%   3-425
rag_factory/strategies/chunking/utils.py                              89     89     0%   3-264
rag_factory/strategies/contextual/__init__.py                          7      0   100%
rag_factory/strategies/contextual/batch_processor.py                  91     76    16%   41-43, 60-72, 84-90, 108-128, 145-161, 178-201, 218-266
rag_factory/strategies/contextual/config.py                           46      0   100%
rag_factory/strategies/contextual/context_generator.py                84     70    17%   35-36, 59-99, 112-135, 152-194, 209, 224-234
rag_factory/strategies/contextual/cost_tracker.py                     32     21    34%   31-35, 48-51, 69-82, 94-99, 111-114, 126
rag_factory/strategies/contextual/prompts.py                          25     17    32%   85-106, 119
rag_factory/strategies/contextual/storage.py                          44     35    20%   32-33, 42-45, 54-81, 98-118
rag_factory/strategies/contextual/strategy.py                         78     49    37%   54-67, 75, 83, 107-156, 173, 186, 207-215, 231-262, 278, 284, 289, 298
rag_factory/strategies/fine_tuned/__init__.py                          4      0   100%
rag_factory/strategies/fine_tuned/ab_testing.py                       78     78     0%   1-134
rag_factory/strategies/fine_tuned/config.py                           11      0   100%
rag_factory/strategies/fine_tuned/custom_loader.py                    40     28    30%   17-19, 36-73, 77, 84-88
rag_factory/strategies/fine_tuned/model_registry.py                  126     96    24%   39-50, 80-112, 132-149, 166-178, 182-196, 200-223, 227-240, 249-270, 274-287, 291-303
rag_factory/strategies/hierarchical/__init__.py                        5      5     0%   8-21
rag_factory/strategies/hierarchical/hierarchy_builder.py              79     79     0%   8-335
rag_factory/strategies/hierarchical/models.py                         58     58     0%   8-137
rag_factory/strategies/hierarchical/parent_retriever.py               89     89     0%   8-278
rag_factory/strategies/hierarchical/strategy.py                       76     76     0%   9-301
rag_factory/strategies/indexing/__init__.py                            6      0   100%
rag_factory/strategies/indexing/context_aware.py                     108     88    19%   31, 43, 63-134, 155-156, 160-170, 182-188, 192-198, 208-237, 241-242
rag_factory/strategies/indexing/hierarchical.py                       90     73    19%   50, 63, 88-134, 156-185, 201-236, 253-278, 292-293
rag_factory/strategies/indexing/in_memory.py                          41     25    39%   54, 65, 93-121, 143, 160, 173, 194-200
rag_factory/strategies/indexing/keyword_indexing.py                   42     31    26%   42, 53, 77-157
rag_factory/strategies/indexing/knowledge_graph_indexing.py           46     33    28%   18, 27, 48-89, 108-129
rag_factory/strategies/indexing/vector_embedding.py                   98     85    13%   25, 35, 55-116, 137-221
rag_factory/strategies/knowledge_graph/__init__.py                     4      4     0%   8-19
rag_factory/strategies/knowledge_graph/config.py                      21     21     0%   8-129
rag_factory/strategies/knowledge_graph/entity_extractor.py            70     70     0%   7-205
rag_factory/strategies/knowledge_graph/graph_store.py                 31     31     0%   8-124
rag_factory/strategies/knowledge_graph/hybrid_retriever.py            56     56     0%   8-164
rag_factory/strategies/knowledge_graph/memory_graph_store.py          97     97     0%   8-196
rag_factory/strategies/knowledge_graph/models.py                      53     53     0%   8-122
rag_factory/strategies/knowledge_graph/relationship_extractor.py      62     62     0%   8-189
rag_factory/strategies/knowledge_graph/strategy.py                    80     80     0%   8-256
rag_factory/strategies/late_chunking/__init__.py                       6      0   100%
rag_factory/strategies/late_chunking/coherence_analyzer.py            27     17    37%   20-21, 36-45, 57-65, 82-96
rag_factory/strategies/late_chunking/document_embedder.py            104     89    14%   29-74, 94-184, 202-215, 227-235, 256-279, 296-303, 318
rag_factory/strategies/late_chunking/embedding_chunker.py            117    102    13%   26, 41-61, 68-98, 105-155, 162-182, 191-192, 199-254, 265-289, 293-300
rag_factory/strategies/late_chunking/models.py                        62      0   100%
rag_factory/strategies/late_chunking/strategy.py                      70     46    34%   48-69, 77, 88, 107-122, 140-177, 196-205, 210, 215
rag_factory/strategies/multi_query/__init__.py                         7      7     0%   8-19
rag_factory/strategies/multi_query/config.py                          36     36     0%   3-138
rag_factory/strategies/multi_query/deduplicator.py                    87     87     0%   3-197
rag_factory/strategies/multi_query/parallel_executor.py               52     52     0%   3-163
rag_factory/strategies/multi_query/prompts.py                         10     10     0%   3-84
rag_factory/strategies/multi_query/ranker.py                          80     80     0%   3-201
rag_factory/strategies/multi_query/strategy.py                        68     68     0%   3-184
rag_factory/strategies/multi_query/variant_generator.py               62     62     0%   3-187
rag_factory/strategies/query_expansion/__init__.py                     8      0   100%
rag_factory/strategies/query_expansion/base.py                        66     10    85%   90, 103, 114-118, 130-133
rag_factory/strategies/query_expansion/cache.py                       52     40    23%   20-22, 38-55, 64-66, 70-73, 81-97, 105-112
rag_factory/strategies/query_expansion/expander_service.py            92     71    23%   36-40, 55-58, 75-148, 159-180, 204-215, 233-234, 242-246, 254, 265-273, 283-284
rag_factory/strategies/query_expansion/hyde_expander.py               19     12    37%   25-27, 41-65
rag_factory/strategies/query_expansion/llm_expander.py                25     16    36%   23-25, 39-71, 99
rag_factory/strategies/query_expansion/metrics.py                     66     30    55%   44-45, 53-57, 76-109, 130, 134, 146-152, 160
rag_factory/strategies/query_expansion/prompts.py                     13      7    46%   16, 28-56, 68-107
rag_factory/strategies/reranking/__init__.py                           7      0   100%
rag_factory/strategies/reranking/base.py                              68     16    76%   81, 101, 106, 110-119, 123-130
rag_factory/strategies/reranking/bge_reranker.py                      51     37    27%   14, 53-81, 103-147, 151
rag_factory/strategies/reranking/cache.py                             48     34    29%   32-34, 51-66, 76-77, 81, 90-101, 110-113, 121, 136-138
rag_factory/strategies/reranking/cohere_reranker.py                   34     20    41%   15-16, 55-71, 94-115, 119
rag_factory/strategies/reranking/cosine_reranker.py                   62     47    24%   54-72, 97-139, 158-171, 188, 209-215, 227-230, 242-245, 249
rag_factory/strategies/reranking/cross_encoder_reranker.py            40     27    32%   13-14, 53-76, 98-120, 124
rag_factory/strategies/reranking/metrics.py                           67     67     0%   8-264
rag_factory/strategies/reranking/reranker_service.py                 115     88    23%   56-67, 71-96, 113-225, 235-255, 269, 282-283, 287-292, 296-300, 308-310
rag_factory/strategies/retrieval/__init__.py                           6      0   100%
rag_factory/strategies/retrieval/hybrid_retriever.py                  51     37    27%   32, 39, 51-102, 110-144
rag_factory/strategies/retrieval/keyword_retriever.py                 56     41    27%   41, 52, 71-113, 126-133, 153-172
rag_factory/strategies/retrieval/knowledge_graph_retriever.py         22      9    59%   19, 27, 48-70
rag_factory/strategies/retrieval/multi_query_retriever.py             22      9    59%   19, 26, 44-66
rag_factory/strategies/retrieval/query_expansion_retriever.py         24      9    62%   20, 27, 45-67
rag_factory/strategies/retrieval/semantic_retriever.py                23     12    48%   23, 32, 61-94
rag_factory/strategies/self_reflective/__init__.py                     6      0   100%
rag_factory/strategies/self_reflective/config.py                      20      8    60%   29-42
rag_factory/strategies/self_reflective/grader.py                      80     65    19%   29-35, 51-67, 83-109, 135-171, 187-258, 266
rag_factory/strategies/self_reflective/models.py                      48      0   100%
rag_factory/strategies/self_reflective/refiner.py                     69     56    19%   28-30, 53-96, 113-143, 161-193, 208-228
rag_factory/strategies/self_reflective/strategy.py                    92     74    20%   38-53, 71-181, 192-206, 229-259, 264, 269
rag_factory/utils/__init__.py                                          3      0   100%
rag_factory/utils/token_counter.py                                    45     30    33%   36-40, 52-62, 74-82, 86, 90, 105-106, 124-135, 153-158
rag_factory/utils/tokenization.py                                     95     73    23%   36-40, 53-64, 87-114, 126-129, 141-144, 156, 175-190, 209-228, 241-243, 251-252, 270-271, 292-293, 314-315
------------------------------------------------------------------------------------------------
TOTAL                                                              13429  10595    21%
=========================== short test summary info ============================
FAILED tests/integration/registry/test_registry_integration.py::TestOpenAIServices::test_openai_llm_instantiation - assert False
 +  where False = isinstance(<rag_factory.services.llm.service.LLMService object at 0x7cbac92c72f0>, ILLMService)
================== 1 failed, 15 passed, 8 warnings in 11.96s ===================

[24/206] PASSED: tests/integration/repositories/test_repository_integration.py
  Tests: 19 (P:19 F:0 S:0)
[25/206] PASSED: tests/integration/services/test_embedding_integration.py
  Tests: 8 (P:6 F:0 S:2)
[26/206] PASSED: tests/integration/services/test_fine_tuned_onnx_integration.py
  Tests: 1 (P:1 F:0 S:0)
[27/206] PASSED: tests/integration/services/test_llm_integration.py
  Tests: 8 (P:1 F:0 S:7)
[28/206] PASSED: tests/integration/services/test_lm_studio_connection.py
  Tests: 2 (P:2 F:0 S:0)
[29/206] PASSED: tests/integration/services/test_onnx_embeddings_integration.py
  Tests: 10 (P:10 F:0 S:0)
[30/206] FAILED: tests/integration/services/test_service_implementations.py
  Tests: 22 (P:18 F:4 S:0)
----------------------------------------
============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.1, pluggy-1.6.0 -- /mnt/MCPProyects/ragTools/venv/bin/python3
cachedir: .pytest_cache
rootdir: /mnt/MCPProyects/ragTools
configfile: pytest.ini (WARNING: ignoring pytest config in pyproject.toml!)
plugins: anyio-4.12.0, cov-7.0.0, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 19 items

tests/integration/services/test_service_implementations.py::TestONNXServices::test_onnx_embedding_service_implements_interface PASSED [  5%]
tests/integration/services/test_service_implementations.py::TestONNXServices::test_onnx_embedding_service_basic_functionality PASSED [ 10%]
tests/integration/services/test_service_implementations.py::TestAPIServices::test_anthropic_llm_service_implements_interface PASSED [ 15%]
tests/integration/services/test_service_implementations.py::TestAPIServices::test_anthropic_llm_service_basic_functionality PASSED [ 21%]
tests/integration/services/test_service_implementations.py::TestAPIServices::test_openai_llm_service_implements_interface PASSED [ 26%]
tests/integration/services/test_service_implementations.py::TestAPIServices::test_openai_embedding_service_implements_interface PASSED [ 31%]
tests/integration/services/test_service_implementations.py::TestAPIServices::test_cohere_reranking_service_implements_interface PASSED [ 36%]
tests/integration/services/test_service_implementations.py::TestAPIServices::test_cohere_reranking_service_basic_functionality PASSED [ 42%]
tests/integration/services/test_service_implementations.py::TestDatabaseServices::test_neo4j_graph_service_implements_interface PASSED [ 47%]
tests/integration/services/test_service_implementations.py::TestDatabaseServices::test_neo4j_graph_service_basic_functionality FAILED [ 52%]
tests/integration/services/test_service_implementations.py::TestDatabaseServices::test_postgresql_database_service_implements_interface PASSED [ 57%]
tests/integration/services/test_service_implementations.py::TestDatabaseServices::test_postgresql_database_service_basic_functionality PASSED [ 63%]
tests/integration/services/test_service_implementations.py::TestLocalServices::test_cosine_reranking_service_implements_interface PASSED [ 68%]
tests/integration/services/test_service_implementations.py::TestLocalServices::test_cosine_reranking_service_basic_functionality PASSED [ 73%]
tests/integration/services/test_service_implementations.py::TestInterfaceCompliance::test_all_llm_services_implement_interface PASSED [ 78%]
tests/integration/services/test_service_implementations.py::TestInterfaceCompliance::test_all_embedding_services_implement_interface PASSED [ 84%]
tests/integration/services/test_service_implementations.py::TestInterfaceCompliance::test_all_reranking_services_implement_interface PASSED [ 89%]
tests/integration/services/test_service_implementations.py::TestInterfaceCompliance::test_all_graph_services_implement_interface PASSED [ 94%]
tests/integration/services/test_service_implementations.py::TestInterfaceCompliance::test_all_database_services_implement_interface PASSED [100%]

=================================== FAILURES ===================================
______ TestDatabaseServices.test_neo4j_graph_service_basic_functionality _______
venv/lib/python3.12/site-packages/neo4j/_async_compat/network/_bolt_socket.py:234: in _connect_secure
    await wait_for(loop.sock_connect(s, resolved_address), timeout)
/usr/lib/python3.12/asyncio/tasks.py:520: in wait_for
    return await fut
           ^^^^^^^^^
/usr/lib/python3.12/asyncio/selector_events.py:651: in sock_connect
    return await fut
           ^^^^^^^^^
/usr/lib/python3.12/asyncio/selector_events.py:691: in _sock_connect_cb
    raise OSError(err, f'Connect call failed {address}')
E   ConnectionRefusedError: [Errno 111] Connect call failed ('127.0.0.1', 7687)

The above exception was the direct cause of the following exception:
venv/lib/python3.12/site-packages/neo4j/_async/io/_bolt_socket.py:329: in connect
    s = await cls._connect_secure(
venv/lib/python3.12/site-packages/neo4j/_async_compat/network/_bolt_socket.py:311: in _connect_secure
    raise ServiceUnavailable(
E   neo4j.exceptions.ServiceUnavailable: Failed to establish connection to ResolvedIPv4Address(('127.0.0.1', 7687)) (reason [Errno 111] Connect call failed ('127.0.0.1', 7687))

The above exception was the direct cause of the following exception:
tests/integration/services/test_service_implementations.py:174: in test_neo4j_graph_service_basic_functionality
    node_id = await service.create_node("Person", {"name": "Alice"})
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
rag_factory/services/database/neo4j.py:106: in create_node
    result = await session.run(
venv/lib/python3.12/site-packages/neo4j/_async/work/session.py:305: in run
    await self._connect(self._config.default_access_mode)
venv/lib/python3.12/site-packages/neo4j/_async/work/session.py:126: in _connect
    await super()._connect(
venv/lib/python3.12/site-packages/neo4j/_async/work/workspace.py:184: in _connect
    self._connection = await self._pool.acquire(**acquire_kwargs_)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/neo4j/_async/io/_pool.py:681: in acquire
    return await self._acquire(
venv/lib/python3.12/site-packages/neo4j/_async/io/_pool.py:421: in _acquire
    return await connection_creator()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/neo4j/_async/io/_pool.py:234: in connection_creator
    connection = await self.opener(
venv/lib/python3.12/site-packages/neo4j/_async/io/_pool.py:641: in opener
    return await AsyncBolt.open(
venv/lib/python3.12/site-packages/neo4j/_async/io/_bolt.py:367: in open
    s, protocol_version = await AsyncBoltSocket.connect(
venv/lib/python3.12/site-packages/neo4j/_async/io/_bolt_socket.py:376: in connect
    raise ServiceUnavailable(
E   neo4j.exceptions.ServiceUnavailable: Couldn't connect to localhost:7687 (resolved to ('127.0.0.1:7687',)):
E   Failed to establish connection to ResolvedIPv4Address(('127.0.0.1', 7687)) (reason [Errno 111] Connect call failed ('127.0.0.1', 7687))
---------------------------- Captured stderr setup -----------------------------
DEBUG:asyncio:Using selector: EpollSelector
------------------------------ Captured log setup ------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
----------------------------- Captured stderr call -----------------------------
INFO:rag_factory.services.database.neo4j:Initialized Neo4j service for bolt://localhost:7687
DEBUG:neo4j.pool:[#0000]  _: <POOL> created, direct address IPv4Address(('localhost', 7687))
DEBUG:neo4j:[#0000]  _: <WORKSPACE> routing towards fixed database: neo4j
DEBUG:neo4j:[#0000]  _: <WORKSPACE> pinning database: 'neo4j'
DEBUG:neo4j.pool:[#0000]  _: <POOL> acquire direct connection, access_mode='WRITE', database=AcquisitionDatabase(name='neo4j', guessed=False)
DEBUG:neo4j.pool:[#0000]  _: <POOL> trying to hand out new connection
DEBUG:neo4j.io:[#0000]  _: <RESOLVE> in: localhost:7687
DEBUG:neo4j.io:[#0000]  _: <RESOLVE> dns resolver out: 127.0.0.1:7687
DEBUG:neo4j.io:[#0000]  C: <OPEN> 127.0.0.1:7687
DEBUG:neo4j.io:[#0000]  S: <ERROR> ConnectionRefusedError 111 "Connect call failed ('127.0.0.1', 7687)"
DEBUG:neo4j.io:[#0000]  C: <CLOSE> 127.0.0.1:7687
DEBUG:neo4j.io:[#0000]  S: <CONNECTION FAILED> 127.0.0.1:7687 ServiceUnavailable: Failed to establish connection to ResolvedIPv4Address(('127.0.0.1', 7687)) (reason [Errno 111] Connect call failed ('127.0.0.1', 7687))
------------------------------ Captured log call -------------------------------
INFO     rag_factory.services.database.neo4j:neo4j.py:71 Initialized Neo4j service for bolt://localhost:7687
DEBUG    neo4j.pool:_pool.py:650 [#0000]  _: <POOL> created, direct address IPv4Address(('localhost', 7687))
DEBUG    neo4j:workspace.py:218 [#0000]  _: <WORKSPACE> routing towards fixed database: neo4j
DEBUG    neo4j:workspace.py:109 [#0000]  _: <WORKSPACE> pinning database: 'neo4j'
DEBUG    neo4j.pool:_pool.py:675 [#0000]  _: <POOL> acquire direct connection, access_mode='WRITE', database=AcquisitionDatabase(name='neo4j', guessed=False)
DEBUG    neo4j.pool:_pool.py:420 [#0000]  _: <POOL> trying to hand out new connection
DEBUG    neo4j.io:_util.py:132 [#0000]  _: <RESOLVE> in: localhost:7687
DEBUG    neo4j.io:_util.py:156 [#0000]  _: <RESOLVE> dns resolver out: 127.0.0.1:7687
DEBUG    neo4j.io:_bolt_socket.py:233 [#0000]  C: <OPEN> 127.0.0.1:7687
DEBUG    neo4j.io:_bolt_socket.py:302 [#0000]  S: <ERROR> ConnectionRefusedError 111 "Connect call failed ('127.0.0.1', 7687)"
DEBUG    neo4j.io:_bolt_socket.py:307 [#0000]  C: <CLOSE> 127.0.0.1:7687
DEBUG    neo4j.io:_bolt_socket.py:342 [#0000]  S: <CONNECTION FAILED> 127.0.0.1:7687 ServiceUnavailable: Failed to establish connection to ResolvedIPv4Address(('127.0.0.1', 7687)) (reason [Errno 111] Connect call failed ('127.0.0.1', 7687))
=============================== warnings summary ===============================
rag_factory/services/llm/config.py:8
  /mnt/MCPProyects/ragTools/rag_factory/services/llm/config.py:8: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class LLMServiceConfig(BaseModel):

rag_factory/database/config.py:12
  /mnt/MCPProyects/ragTools/rag_factory/database/config.py:12: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DatabaseConfig(BaseSettings):

rag_factory/strategies/agentic/config.py:9
  /mnt/MCPProyects/ragTools/rag_factory/strategies/agentic/config.py:9: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class AgenticStrategyConfig(BaseModel):

rag_factory/strategies/late_chunking/models.py:21
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:21: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class TokenEmbedding(BaseModel):

rag_factory/strategies/late_chunking/models.py:34
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:34: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DocumentEmbedding(BaseModel):

rag_factory/strategies/late_chunking/models.py:49
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:49: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class EmbeddingChunk(BaseModel):

rag_factory/strategies/contextual/config.py:31
  /mnt/MCPProyects/ragTools/rag_factory/strategies/contextual/config.py:31: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ContextualRetrievalConfig(BaseModel):

rag_factory/strategies/fine_tuned/config.py:6
  /mnt/MCPProyects/ragTools/rag_factory/strategies/fine_tuned/config.py:6: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class FineTunedConfig(BaseSettings):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.3-final-0 ________________

Name                                                               Stmts   Miss  Cover   Missing
------------------------------------------------------------------------------------------------
rag_factory/__init__.py                                                7      2    71%   18-19
rag_factory/__version__.py                                             1      0   100%
rag_factory/cli/__init__.py                                            2      0   100%
rag_factory/cli/commands/__init__.py                                   1      0   100%
rag_factory/cli/commands/benchmark.py                                 96     81    16%   40-53, 64-84, 148-263
rag_factory/cli/commands/check_consistency.py                         43     33    23%   64-120
rag_factory/cli/commands/config.py                                    78     68    13%   26-64, 102-188
rag_factory/cli/commands/gui.py                                       25     17    32%   61-91
rag_factory/cli/commands/index.py                                     65     52    20%   29-39, 93-185
rag_factory/cli/commands/query.py                                     47     36    23%   73-149
rag_factory/cli/commands/repl.py                                     152    130    14%   29-56, 63-108, 112-120, 124-133, 137-155, 159-172, 176-186, 190-207, 211-220, 253-260
rag_factory/cli/commands/strategies.py                                45     36    20%   48-120
rag_factory/cli/commands/validate_e2e.py                              91     69    24%   37-38, 42-142, 145-156
rag_factory/cli/commands/validate_pipeline.py                         70     57    19%   57-156
rag_factory/cli/formatters/__init__.py                                 4      0   100%
rag_factory/cli/formatters/consistency.py                             61     55    10%   21-69, 79-103, 108-138
rag_factory/cli/formatters/output.py                                  20      9    55%   23-24, 43-44, 63-64, 74, 79, 84
rag_factory/cli/formatters/results.py                                 71     62    13%   28-55, 72-99, 116-144, 157-181
rag_factory/cli/formatters/validation.py                              63     53    16%   25-43, 48-56, 65-77, 86-98, 103-129, 134-137
rag_factory/cli/main.py                                               32     10    69%   25-28, 48-49, 79-81, 85
rag_factory/cli/utils/__init__.py                                      3      0   100%
rag_factory/cli/utils/progress.py                                     14      8    43%   34-47, 73-76
rag_factory/cli/utils/validation.py                                   53     42    21%   30-41, 57-77, 93-118, 135
rag_factory/config/__init__.py                                         4      0   100%
rag_factory/config/env_resolver.py                                    52     37    29%   47-54, 70-90, 110, 129-147
rag_factory/config/schemas/__init__.py                                 2      0   100%
rag_factory/config/schemas/version.py                                 10      6    40%   29-38
rag_factory/config/strategy_loader.py                                 54     36    33%   32-41, 45-60, 75-89, 101-104
rag_factory/config/strategy_pair_manager.py                          105     83    21%   40-72, 92-132, 148-198, 210-215, 229, 259-282
rag_factory/config/validator.py                                       93     76    18%   27-30, 34-39, 53-58, 62-74, 111-132, 177-198, 215-235, 247-249, 271-295, 333-354
rag_factory/core/__init__.py                                           4      4     0%   7-23
rag_factory/core/capabilities.py                                      61     16    74%   129, 155, 173-174, 239-253
rag_factory/core/indexing_interface.py                                54     35    35%   55-57, 118-123, 144, 164, 208, 260, 272, 292-313, 341-364
rag_factory/core/pipeline.py                                          49     35    29%   22-24, 33-40, 55-77, 95-96, 105-108, 117-120, 137-146
rag_factory/core/retrieval_interface.py                               38     20    47%   56-58, 112-117, 138, 158, 196, 247, 259, 285-309
rag_factory/database/__init__.py                                       4      0   100%
rag_factory/database/config.py                                        17      0   100%
rag_factory/database/connection.py                                    80     54    32%   40-48, 61-86, 96, 107, 126-137, 150-157, 165-170, 178-183, 196-197, 209-214, 218, 222
rag_factory/database/env_validator.py                                 38     38     0%   7-139
rag_factory/database/models.py                                        85     32    62%   31-34, 37-45, 48-54, 66-69, 72-77, 80-85, 181, 323-325
rag_factory/database/vector_indexing.py                               38     38     0%   7-114
rag_factory/evaluation/__init__.py                                     4      4     0%   29-41
rag_factory/evaluation/analysis/__init__.py                            3      3     0%   8-11
rag_factory/evaluation/analysis/comparison.py                        135    135     0%   8-323
rag_factory/evaluation/analysis/statistics.py                         81     81     0%   8-320
rag_factory/evaluation/benchmarks/__init__.py                          3      3     0%   8-14
rag_factory/evaluation/benchmarks/config.py                           25     25     0%   7-64
rag_factory/evaluation/benchmarks/runner.py                          155    155     0%   8-423
rag_factory/evaluation/datasets/__init__.py                            3      3     0%   8-14
rag_factory/evaluation/datasets/loader.py                             88     88     0%   8-281
rag_factory/evaluation/datasets/schema.py                             52     52     0%   8-160
rag_factory/evaluation/datasets/statistics.py                         65     65     0%   8-226
rag_factory/evaluation/exporters/__init__.py                           4      4     0%   8-12
rag_factory/evaluation/exporters/csv_exporter.py                      52     52     0%   3-124
rag_factory/evaluation/exporters/html_exporter.py                     47     47     0%   3-293
rag_factory/evaluation/exporters/json_exporter.py                     19     19     0%   3-68
rag_factory/evaluation/metrics/__init__.py                             3      3     0%   12-25
rag_factory/evaluation/metrics/base.py                                31     31     0%   8-115
rag_factory/evaluation/metrics/cost.py                                65     65     0%   8-313
rag_factory/evaluation/metrics/performance.py                         42     42     0%   8-202
rag_factory/evaluation/metrics/quality.py                             84     84     0%   8-377
rag_factory/evaluation/metrics/retrieval.py                           77     77     0%   9-401
rag_factory/exceptions.py                                             13      0   100%
rag_factory/factory.py                                               187    137    27%   109-116, 144, 165-170, 202-230, 256-270, 300-324, 347-348, 365, 384, 401, 418, 435, 451-460, 480-502, 528-545, 568-611, 644-699, 703-715
rag_factory/gui/__init__.py                                            2      0   100%
rag_factory/gui/components/__init__.py                                 3      0   100%
rag_factory/gui/components/scrolled_text.py                           64     52    19%   53-62, 80-114, 122, 131-142, 151-164, 168, 176, 184-199
rag_factory/gui/components/status_bar.py                              62     49    21%   40-59, 64-113, 122-137, 146-152, 161, 168, 172-184, 192-196
rag_factory/gui/main_window.py                                       701    640     9%   64-109, 113-128, 137-164, 168-194, 205-263, 268-293, 297-321, 330-390, 398-422, 435-469, 482-500, 513-551, 564-602, 615-673, 686-690, 694-732, 736-738, 746-789, 806-817, 826-858, 862-879, 885-895, 899-970, 974-1062, 1072-1074, 1082-1084, 1088-1164, 1177-1234, 1244-1246, 1254-1258, 1262-1319, 1324-1371, 1375-1394, 1398, 1411-1487, 1491-1549, 1554-1571, 1575-1582, 1587-1600, 1605-1614, 1618
rag_factory/gui/utils/__init__.py                                      3      0   100%
rag_factory/gui/utils/formatters.py                                   57     49    14%   27-30, 50-90, 110-118, 134-137, 155-165
rag_factory/gui/utils/threading.py                                    32     25    22%   44-73, 96-99, 124-129
rag_factory/legacy_config.py                                         155    155     0%   22-542
rag_factory/models/__init__.py                                         6      6     0%   3-14
rag_factory/models/embedding/__init__.py                               4      4     0%   3-12
rag_factory/models/embedding/loader.py                               179    179     0%   3-367
rag_factory/models/embedding/models.py                                47     47     0%   3-106
rag_factory/models/embedding/registry.py                             128    128     0%   3-282
rag_factory/models/evaluation/__init__.py                              3      3     0%   3-6
rag_factory/models/evaluation/ab_testing.py                           98     98     0%   3-281
rag_factory/models/evaluation/models.py                               29     29     0%   3-74
rag_factory/observability/__init__.py                                  3      3     0%   3-10
rag_factory/observability/integrations/__init__.py                     1      1     0%   3
rag_factory/observability/integrations/prometheus.py                  47     47     0%   3-229
rag_factory/observability/logging/__init__.py                          2      2     0%   3-5
rag_factory/observability/logging/config.py                           16     16     0%   3-37
rag_factory/observability/logging/filters.py                          41     41     0%   3-103
rag_factory/observability/logging/logger.py                           86     86     0%   3-396
rag_factory/observability/metrics/__init__.py                          2      2     0%   3-9
rag_factory/observability/metrics/collector.py                       143    143     0%   3-459
rag_factory/observability/metrics/cost.py                             39     39     0%   3-221
rag_factory/observability/metrics/performance.py                      64     64     0%   3-196
rag_factory/observability/monitoring/__init__.py                       1      1     0%   3
rag_factory/observability/monitoring/api.py                          101    101     0%   3-328
rag_factory/pipeline.py                                              156    156     0%   34-507
rag_factory/registry/__init__.py                                       4      0   100%
rag_factory/registry/exceptions.py                                     6      0   100%
rag_factory/registry/service_factory.py                               84     69    18%   45-54, 62-65, 70-73, 78-80, 84-86, 95-127, 136-165, 176-215, 229-255
rag_factory/registry/service_registry.py                              91     71    22%   43-51, 55-85, 103-156, 164, 178-203, 210-223, 227, 231-232
rag_factory/repositories/__init__.py                                   5      0   100%
rag_factory/repositories/base.py                                      42     21    50%   38, 53, 70, 87, 103, 114-118, 125, 136-139, 159-164
rag_factory/repositories/chunk.py                                    206    180    13%   40-45, 68-76, 90-95, 120-133, 155-171, 187-202, 221-231, 250-261, 287-328, 355-396, 422-474, 489-499, 513-521, 537-543, 557-563, 577-587, 604-626, 639-670
rag_factory/repositories/document.py                                  93     74    20%   41-46, 63-68, 98-118, 140-156, 172-187, 206, 223-233, 247-255, 272-279, 290-293, 307-312
rag_factory/repositories/exceptions.py                                18      7    61%   34-36, 56-59
rag_factory/services/__init__.py                                       4      0   100%
rag_factory/services/api/__init__.py                                   4      0   100%
rag_factory/services/api/anthropic.py                                 27     10    63%   118-141
rag_factory/services/api/cohere.py                                    30      7    77%   14-15, 50, 83, 111-113
rag_factory/services/api/openai.py                                    46     31    33%   45-51, 75-93, 117-140, 168-174, 189-199, 216-227, 235
rag_factory/services/consistency.py                                   32     24    25%   80-113, 144-170
rag_factory/services/database/__init__.py                              5      0   100%
rag_factory/services/database/database_context.py                    181    159    12%   58-64, 88-106, 123, 140-150, 179-200, 223-240, 256-266, 305-330, 338-339, 343-406, 414-415, 430-510, 516-517, 521-546
rag_factory/services/database/migration_validator.py                  96     74    23%   29-30, 61-69, 81-88, 109-131, 148-152, 163-192, 204-219, 230-237, 249, 261-271, 283-286
rag_factory/services/database/neo4j.py                                54     26    52%   15-17, 61, 110-114, 134-150, 172-181, 188-191, 195, 199
rag_factory/services/database/postgres.py                            195    130    33%   17-18, 26-27, 85, 91-103, 132-143, 149-201, 215, 231-235, 239, 241, 245-246, 292-346, 360-375, 390-414, 425-440, 472-490, 504-527, 532, 543, 580-598, 607-619, 623, 627
rag_factory/services/dependencies.py                                  41     21    49%   96-109, 134-140, 176-180
rag_factory/services/embedding/__init__.py                             4      0   100%
rag_factory/services/embedding/base.py                                31      6    81%   44, 59, 68, 77, 86, 98
rag_factory/services/embedding/cache.py                               43     33    23%   26-32, 43-58, 67-76, 80-82, 90-94
rag_factory/services/embedding/config.py                              29     13    55%   37-43, 50-68, 80
rag_factory/services/embedding/providers/__init__.py                   5      0   100%
rag_factory/services/embedding/providers/cohere.py                    53     36    32%   10-20, 55-75, 90-117, 125, 133, 141, 152-153
rag_factory/services/embedding/providers/local.py                     43     27    37%   8-9, 46-67, 83-109, 117, 125, 133, 146
rag_factory/services/embedding/providers/onnx_local.py               114     93    18%   18-19, 87-177, 193-250, 261-308, 319, 327, 335, 348
rag_factory/services/embedding/providers/openai.py                    51     34    33%   10-20, 53-72, 87-108, 116, 124, 132, 143-144
rag_factory/services/embedding/rate_limiter.py                        20     14    30%   27-37, 45-53
rag_factory/services/embedding/service.py                            100     83    17%   50-62, 79-93, 117-198, 220-222, 233-239, 248-266, 273-275
rag_factory/services/interfaces.py                                    35      0   100%
rag_factory/services/llm/__init__.py                                   5      0   100%
rag_factory/services/llm/base.py                                      43      0   100%
rag_factory/services/llm/config.py                                    23     11    52%   42-57
rag_factory/services/llm/prompt_template.py                           43     24    44%   47-82, 97-100, 111-115
rag_factory/services/llm/providers/__init__.py                        12     10    17%   10-22
rag_factory/services/llm/providers/anthropic.py                       57     42    26%   44-50, 64-97, 120-147, 171-172, 184-189, 197, 205
rag_factory/services/llm/providers/ollama.py                          55     55     0%   3-196
rag_factory/services/llm/providers/openai.py                          57     41    28%   50-62, 76-110, 133-158, 173, 186-194, 202, 210
rag_factory/services/llm/service.py                                   66     51    23%   32-39, 56-70, 93-129, 154-175, 186, 194-198, 215-216
rag_factory/services/llm/token_counter.py                             27     17    37%   22-41, 56-57, 71-72
rag_factory/services/local/__init__.py                                 2      0   100%
rag_factory/services/local/reranker.py                                32      7    78%   13-14, 46, 79, 114-116
rag_factory/services/onnx/__init__.py                                  2      0   100%
rag_factory/services/onnx/embedding.py                                29      9    69%   61, 63, 65, 93, 110-121
rag_factory/services/utils/__init__.py                                 2      0   100%
rag_factory/services/utils/model_converter.py                        104    104     0%   8-291
rag_factory/services/utils/onnx_utils.py                             133    114    14%   22-23, 36-37, 67-123, 142-146, 172-218, 240-274, 291-312, 332-347, 360-378, 392-404
rag_factory/services/utils/reranker_selector.py                       68     68     0%   8-249
rag_factory/strategies/__init__.py                                     2      0   100%
rag_factory/strategies/agentic/__init__.py                             7      0   100%
rag_factory/strategies/agentic/agent.py                              151    130    14%   31-36, 45, 57, 66-90, 109-111, 123-161, 190-214, 230-265, 276-293, 310-331, 339-346, 357-368, 381-420
rag_factory/strategies/agentic/config.py                              12      0   100%
rag_factory/strategies/agentic/frameworks/__init__.py                  1      1     0%   9
rag_factory/strategies/agentic/query_analyzer.py                      89     65    27%   50-55, 67, 79-90, 109-125, 137-147, 159-178, 196-214, 225-260, 278
rag_factory/strategies/agentic/strategy.py                            87     60    31%   50-63, 76, 84, 94-132, 144, 156, 169, 182-222, 234-258, 267, 276, 284
rag_factory/strategies/agentic/tool_implementations.py               135     91    33%   36-37, 41, 45, 52, 86-129, 148-149, 153, 157, 164, 182-247, 266-267, 271, 275, 282, 329-373, 392-393, 397, 401, 407, 446-511
rag_factory/strategies/agentic/tools.py                               40      9    78%   66, 79, 89, 101, 112, 139-142
rag_factory/strategies/auto_register.py                               66     20    70%   13-14, 18-19, 23-24, 28-29, 33-34, 39-40, 46-47, 52-53, 58-59, 79-80
rag_factory/strategies/base.py                                        55     13    76%   80-85, 169-178
rag_factory/strategies/chunking/__init__.py                           15     15     0%   28-67
rag_factory/strategies/chunking/base.py                               91     91     0%   3-256
rag_factory/strategies/chunking/docling_chunker.py                    45     45     0%   13-188
rag_factory/strategies/chunking/fixed_size_chunker.py                 74     74     0%   3-204
rag_factory/strategies/chunking/hybrid_chunker.py                     70     70     0%   3-192
rag_factory/strategies/chunking/semantic_chunker.py                  195    195     0%   3-534
rag_factory/strategies/chunking/structural_chunker.py                147    147     0%   3-425
rag_factory/strategies/chunking/utils.py                              89     89     0%   3-264
rag_factory/strategies/contextual/__init__.py                          7      0   100%
rag_factory/strategies/contextual/batch_processor.py                  91     76    16%   41-43, 60-72, 84-90, 108-128, 145-161, 178-201, 218-266
rag_factory/strategies/contextual/config.py                           46      0   100%
rag_factory/strategies/contextual/context_generator.py                84     70    17%   35-36, 59-99, 112-135, 152-194, 209, 224-234
rag_factory/strategies/contextual/cost_tracker.py                     32     21    34%   31-35, 48-51, 69-82, 94-99, 111-114, 126
rag_factory/strategies/contextual/prompts.py                          25     17    32%   85-106, 119
rag_factory/strategies/contextual/storage.py                          44     35    20%   32-33, 42-45, 54-81, 98-118
rag_factory/strategies/contextual/strategy.py                         78     49    37%   54-67, 75, 83, 107-156, 173, 186, 207-215, 231-262, 278, 284, 289, 298
rag_factory/strategies/fine_tuned/__init__.py                          4      0   100%
rag_factory/strategies/fine_tuned/ab_testing.py                       78     78     0%   1-134
rag_factory/strategies/fine_tuned/config.py                           11      0   100%
rag_factory/strategies/fine_tuned/custom_loader.py                    40     28    30%   17-19, 36-73, 77, 84-88
rag_factory/strategies/fine_tuned/model_registry.py                  126     96    24%   39-50, 80-112, 132-149, 166-178, 182-196, 200-223, 227-240, 249-270, 274-287, 291-303
rag_factory/strategies/hierarchical/__init__.py                        5      5     0%   8-21
rag_factory/strategies/hierarchical/hierarchy_builder.py              79     79     0%   8-335
rag_factory/strategies/hierarchical/models.py                         58     58     0%   8-137
rag_factory/strategies/hierarchical/parent_retriever.py               89     89     0%   8-278
rag_factory/strategies/hierarchical/strategy.py                       76     76     0%   9-301
rag_factory/strategies/indexing/__init__.py                            6      0   100%
rag_factory/strategies/indexing/context_aware.py                     108     88    19%   31, 43, 63-134, 155-156, 160-170, 182-188, 192-198, 208-237, 241-242
rag_factory/strategies/indexing/hierarchical.py                       90     73    19%   50, 63, 88-134, 156-185, 201-236, 253-278, 292-293
rag_factory/strategies/indexing/in_memory.py                          41     25    39%   54, 65, 93-121, 143, 160, 173, 194-200
rag_factory/strategies/indexing/keyword_indexing.py                   42     31    26%   42, 53, 77-157
rag_factory/strategies/indexing/knowledge_graph_indexing.py           46     33    28%   18, 27, 48-89, 108-129
rag_factory/strategies/indexing/vector_embedding.py                   98     85    13%   25, 35, 55-116, 137-221
rag_factory/strategies/knowledge_graph/__init__.py                     4      4     0%   8-19
rag_factory/strategies/knowledge_graph/config.py                      21     21     0%   8-129
rag_factory/strategies/knowledge_graph/entity_extractor.py            70     70     0%   7-205
rag_factory/strategies/knowledge_graph/graph_store.py                 31     31     0%   8-124
rag_factory/strategies/knowledge_graph/hybrid_retriever.py            56     56     0%   8-164
rag_factory/strategies/knowledge_graph/memory_graph_store.py          97     97     0%   8-196
rag_factory/strategies/knowledge_graph/models.py                      53     53     0%   8-122
rag_factory/strategies/knowledge_graph/relationship_extractor.py      62     62     0%   8-189
rag_factory/strategies/knowledge_graph/strategy.py                    80     80     0%   8-256
rag_factory/strategies/late_chunking/__init__.py                       6      0   100%
rag_factory/strategies/late_chunking/coherence_analyzer.py            27     17    37%   20-21, 36-45, 57-65, 82-96
rag_factory/strategies/late_chunking/document_embedder.py            104     89    14%   29-74, 94-184, 202-215, 227-235, 256-279, 296-303, 318
rag_factory/strategies/late_chunking/embedding_chunker.py            117    102    13%   26, 41-61, 68-98, 105-155, 162-182, 191-192, 199-254, 265-289, 293-300
rag_factory/strategies/late_chunking/models.py                        62      0   100%
rag_factory/strategies/late_chunking/strategy.py                      70     46    34%   48-69, 77, 88, 107-122, 140-177, 196-205, 210, 215
rag_factory/strategies/multi_query/__init__.py                         7      7     0%   8-19
rag_factory/strategies/multi_query/config.py                          36     36     0%   3-138
rag_factory/strategies/multi_query/deduplicator.py                    87     87     0%   3-197
rag_factory/strategies/multi_query/parallel_executor.py               52     52     0%   3-163
rag_factory/strategies/multi_query/prompts.py                         10     10     0%   3-84
rag_factory/strategies/multi_query/ranker.py                          80     80     0%   3-201
rag_factory/strategies/multi_query/strategy.py                        68     68     0%   3-184
rag_factory/strategies/multi_query/variant_generator.py               62     62     0%   3-187
rag_factory/strategies/query_expansion/__init__.py                     8      0   100%
rag_factory/strategies/query_expansion/base.py                        66     10    85%   90, 103, 114-118, 130-133
rag_factory/strategies/query_expansion/cache.py                       52     40    23%   20-22, 38-55, 64-66, 70-73, 81-97, 105-112
rag_factory/strategies/query_expansion/expander_service.py            92     71    23%   36-40, 55-58, 75-148, 159-180, 204-215, 233-234, 242-246, 254, 265-273, 283-284
rag_factory/strategies/query_expansion/hyde_expander.py               19     12    37%   25-27, 41-65
rag_factory/strategies/query_expansion/llm_expander.py                25     16    36%   23-25, 39-71, 99
rag_factory/strategies/query_expansion/metrics.py                     66     30    55%   44-45, 53-57, 76-109, 130, 134, 146-152, 160
rag_factory/strategies/query_expansion/prompts.py                     13      7    46%   16, 28-56, 68-107
rag_factory/strategies/reranking/__init__.py                           7      0   100%
rag_factory/strategies/reranking/base.py                              68     16    76%   81, 101, 106, 110-119, 123-130
rag_factory/strategies/reranking/bge_reranker.py                      51     37    27%   14, 53-81, 103-147, 151
rag_factory/strategies/reranking/cache.py                             48     34    29%   32-34, 51-66, 76-77, 81, 90-101, 110-113, 121, 136-138
rag_factory/strategies/reranking/cohere_reranker.py                   34     20    41%   15-16, 55-71, 94-115, 119
rag_factory/strategies/reranking/cosine_reranker.py                   62     47    24%   54-72, 97-139, 158-171, 188, 209-215, 227-230, 242-245, 249
rag_factory/strategies/reranking/cross_encoder_reranker.py            40     27    32%   13-14, 53-76, 98-120, 124
rag_factory/strategies/reranking/metrics.py                           67     67     0%   8-264
rag_factory/strategies/reranking/reranker_service.py                 115     88    23%   56-67, 71-96, 113-225, 235-255, 269, 282-283, 287-292, 296-300, 308-310
rag_factory/strategies/retrieval/__init__.py                           6      0   100%
rag_factory/strategies/retrieval/hybrid_retriever.py                  51     37    27%   32, 39, 51-102, 110-144
rag_factory/strategies/retrieval/keyword_retriever.py                 56     41    27%   41, 52, 71-113, 126-133, 153-172
rag_factory/strategies/retrieval/knowledge_graph_retriever.py         22      9    59%   19, 27, 48-70
rag_factory/strategies/retrieval/multi_query_retriever.py             22      9    59%   19, 26, 44-66
rag_factory/strategies/retrieval/query_expansion_retriever.py         24      9    62%   20, 27, 45-67
rag_factory/strategies/retrieval/semantic_retriever.py                23     12    48%   23, 32, 61-94
rag_factory/strategies/self_reflective/__init__.py                     6      0   100%
rag_factory/strategies/self_reflective/config.py                      20      8    60%   29-42
rag_factory/strategies/self_reflective/grader.py                      80     65    19%   29-35, 51-67, 83-109, 135-171, 187-258, 266
rag_factory/strategies/self_reflective/models.py                      48      0   100%
rag_factory/strategies/self_reflective/refiner.py                     69     56    19%   28-30, 53-96, 113-143, 161-193, 208-228
rag_factory/strategies/self_reflective/strategy.py                    92     74    20%   38-53, 71-181, 192-206, 229-259, 264, 269
rag_factory/utils/__init__.py                                          3      0   100%
rag_factory/utils/token_counter.py                                    45     30    33%   36-40, 52-62, 74-82, 86, 90, 105-106, 124-135, 153-158
rag_factory/utils/tokenization.py                                     95     73    23%   36-40, 53-64, 87-114, 126-129, 141-144, 156, 175-190, 209-228, 241-243, 251-252, 270-271, 292-293, 314-315
------------------------------------------------------------------------------------------------
TOTAL                                                              13429  10769    20%
=========================== short test summary info ============================
FAILED tests/integration/services/test_service_implementations.py::TestDatabaseServices::test_neo4j_graph_service_basic_functionality - neo4j.exceptions.ServiceUnavailable: Couldn't connect to localhost:7687 (resolved to ('127.0.0.1:7687',)):
Failed to establish connection to ResolvedIPv4Address(('127.0.0.1', 7687)) (reason [Errno 111] Connect call failed ('127.0.0.1', 7687))
=================== 1 failed, 18 passed, 8 warnings in 7.99s ===================

[31/206] PASSED: tests/integration/services/test_service_integration.py
  Tests: 2 (P:2 F:0 S:0)
[32/206] PASSED: tests/integration/strategies/test_base_integration.py
  Tests: 5 (P:5 F:0 S:0)
[33/206] PASSED: tests/integration/strategies/test_chunking_integration.py
  Tests: 12 (P:12 F:0 S:0)
[34/206] PASSED: tests/integration/strategies/test_contextual_integration.py
  Tests: 6 (P:6 F:0 S:0)
[35/206] PASSED: tests/integration/strategies/test_hierarchical_indexing.py
  Tests: 14 (P:14 F:0 S:0)
[36/206] PASSED: tests/integration/strategies/test_hierarchical_integration.py
  Tests: 4 (P:4 F:0 S:0)
[37/206] PASSED: tests/integration/strategies/test_in_memory_indexing.py
  Tests: 12 (P:12 F:0 S:0)
[38/206] PASSED: tests/integration/strategies/test_keyword_indexing.py
  Tests: 6 (P:6 F:0 S:0)
[39/206] PASSED: tests/integration/strategies/test_knowledge_graph_integration.py
  Tests: 4 (P:4 F:0 S:0)
[40/206] PASSED: tests/integration/strategies/test_late_chunking_integration.py
  Tests: 9 (P:9 F:0 S:0)
[41/206] PASSED: tests/integration/strategies/test_multi_query_integration.py
  Tests: 9 (P:9 F:0 S:0)
[42/206] PASSED: tests/integration/strategies/test_query_expansion_integration.py
  Tests: 11 (P:11 F:0 S:0)
[43/206] PASSED: tests/integration/strategies/test_reranking_integration.py
  Tests: 9 (P:8 F:0 S:1)
[44/206] PASSED: tests/integration/strategies/test_self_reflective_integration.py
  Tests: 4 (P:4 F:0 S:0)
[45/206] PASSED: tests/integration/strategies/test_vector_embedding_indexing.py
  Tests: 5 (P:5 F:0 S:0)
[46/206] PASSED: tests/integration/test_agentic_rag_pair.py
  Tests: 1 (P:1 F:0 S:0)
[47/206] PASSED: tests/integration/test_config_integration.py
  Tests: 8 (P:8 F:0 S:0)
[48/206] PASSED: tests/integration/test_context_aware_chunking_pair.py
  Tests: 1 (P:1 F:0 S:0)
[49/206] PASSED: tests/integration/test_contextual_retrieval_pair.py
  Tests: 1 (P:1 F:0 S:0)
[50/206] PASSED: tests/integration/test_factory_consistency.py
  Tests: 8 (P:8 F:0 S:0)
[51/206] PASSED: tests/integration/test_factory_integration.py
  Tests: 11 (P:11 F:0 S:0)
[52/206] PASSED: tests/integration/test_fine_tuned_embeddings_pair.py
  Tests: 1 (P:1 F:0 S:0)
[53/206] PASSED: tests/integration/test_hierarchical_rag_pair.py
  Tests: 1 (P:1 F:0 S:0)
[54/206] FAILED: tests/integration/test_hybrid_search_pair.py
  Tests: 2 (P:0 F:2 S:0)
----------------------------------------
============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.1, pluggy-1.6.0 -- /mnt/MCPProyects/ragTools/venv/bin/python3
cachedir: .pytest_cache
rootdir: /mnt/MCPProyects/ragTools
configfile: pytest.ini (WARNING: ignoring pytest config in pyproject.toml!)
plugins: anyio-4.12.0, cov-7.0.0, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 1 item

tests/integration/test_hybrid_search_pair.py::test_hybrid_search_pair_loading FAILED [100%]

=================================== FAILURES ===================================
_______________________ test_hybrid_search_pair_loading ________________________
tests/integration/test_hybrid_search_pair.py:64: in test_hybrid_search_pair_loading
    chunks = await retrieval.retrieve("query", retrieval_context)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
rag_factory/strategies/retrieval/hybrid_retriever.py:71: in retrieve
    keyword_results = await context.database.search_chunks_by_keywords(
E   TypeError: object Mock can't be used in 'await' expression
---------------------------- Captured stderr setup -----------------------------
DEBUG:asyncio:Using selector: EpollSelector
DEBUG:asyncio:Using selector: EpollSelector
------------------------------ Captured log setup ------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
----------------------------- Captured stderr call -----------------------------
INFO:rag_factory.config.strategy_pair_manager:Loading strategy pair from /mnt/MCPProyects/ragTools/strategies/hybrid-search-pair.yaml
INFO:rag_factory.strategies.indexing.vector_embedding:Starting VectorEmbeddingIndexing.process with 1 documents
DEBUG:rag_factory.strategies.indexing.vector_embedding:Configuration: batch_size=32, chunk_size=512, overlap=50
INFO:rag_factory.strategies.indexing.vector_embedding:Using embedding service: Mock
INFO:rag_factory.strategies.indexing.vector_embedding:Starting document chunking...
DEBUG:rag_factory.strategies.indexing.vector_embedding:_chunk_documents called with 1 documents, chunk_size=512, overlap=50
DEBUG:rag_factory.strategies.indexing.vector_embedding:Processing document 1/1: doc_id='doc1', text_length=39
DEBUG:rag_factory.strategies.indexing.vector_embedding:Document doc1 fits in single chunk (length=39 <= 512)
DEBUG:rag_factory.strategies.indexing.vector_embedding:_chunk_documents complete: total 1 chunks created
INFO:rag_factory.strategies.indexing.vector_embedding:Document chunking complete: created 1 chunks from 1 documents
INFO:rag_factory.strategies.indexing.vector_embedding:Starting embedding generation for 1 chunks in batches of 32...
DEBUG:rag_factory.strategies.indexing.vector_embedding:Processing batch 1/1 with 1 texts
DEBUG:rag_factory.strategies.indexing.vector_embedding:Batch 1/1 complete: generated 1 embeddings
INFO:rag_factory.strategies.indexing.vector_embedding:Embedding generation complete: created 1 embeddings
INFO:rag_factory.strategies.indexing.vector_embedding:Adding embeddings to chunks...
INFO:rag_factory.strategies.indexing.vector_embedding:Storing 1 chunks to database...
INFO:rag_factory.strategies.indexing.vector_embedding:Database storage complete
INFO:rag_factory.strategies.indexing.vector_embedding:Indexing complete - Documents: 1, Chunks: 1, Embedding dimension: 384
INFO:rag_factory.strategies.retrieval.hybrid_retriever:Hybrid search for: query
------------------------------ Captured log call -------------------------------
INFO     rag_factory.config.strategy_pair_manager:strategy_pair_manager.py:96 Loading strategy pair from /mnt/MCPProyects/ragTools/strategies/hybrid-search-pair.yaml
INFO     rag_factory.strategies.indexing.vector_embedding:vector_embedding.py:55 Starting VectorEmbeddingIndexing.process with 1 documents
DEBUG    rag_factory.strategies.indexing.vector_embedding:vector_embedding.py:61 Configuration: batch_size=32, chunk_size=512, overlap=50
INFO     rag_factory.strategies.indexing.vector_embedding:vector_embedding.py:67 Using embedding service: Mock
INFO     rag_factory.strategies.indexing.vector_embedding:vector_embedding.py:70 Starting document chunking...
DEBUG    rag_factory.strategies.indexing.vector_embedding:vector_embedding.py:137 _chunk_documents called with 1 documents, chunk_size=512, overlap=50
DEBUG    rag_factory.strategies.indexing.vector_embedding:vector_embedding.py:146 Processing document 1/1: doc_id='doc1', text_length=39
DEBUG    rag_factory.strategies.indexing.vector_embedding:vector_embedding.py:158 Document doc1 fits in single chunk (length=39 <= 512)
DEBUG    rag_factory.strategies.indexing.vector_embedding:vector_embedding.py:220 _chunk_documents complete: total 1 chunks created
INFO     rag_factory.strategies.indexing.vector_embedding:vector_embedding.py:72 Document chunking complete: created 1 chunks from 1 documents
INFO     rag_factory.strategies.indexing.vector_embedding:vector_embedding.py:85 Starting embedding generation for 1 chunks in batches of 32...
DEBUG    rag_factory.strategies.indexing.vector_embedding:vector_embedding.py:94 Processing batch 1/1 with 1 texts
DEBUG    rag_factory.strategies.indexing.vector_embedding:vector_embedding.py:100 Batch 1/1 complete: generated 1 embeddings
INFO     rag_factory.strategies.indexing.vector_embedding:vector_embedding.py:102 Embedding generation complete: created 1 embeddings
INFO     rag_factory.strategies.indexing.vector_embedding:vector_embedding.py:105 Adding embeddings to chunks...
INFO     rag_factory.strategies.indexing.vector_embedding:vector_embedding.py:109 Storing 1 chunks to database...
INFO     rag_factory.strategies.indexing.vector_embedding:vector_embedding.py:111 Database storage complete
INFO     rag_factory.strategies.indexing.vector_embedding:vector_embedding.py:114 Indexing complete - Documents: 1, Chunks: 1, Embedding dimension: 384
INFO     rag_factory.strategies.retrieval.hybrid_retriever:hybrid_retriever.py:51 Hybrid search for: query
=============================== warnings summary ===============================
rag_factory/services/llm/config.py:8
  /mnt/MCPProyects/ragTools/rag_factory/services/llm/config.py:8: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class LLMServiceConfig(BaseModel):

rag_factory/database/config.py:12
  /mnt/MCPProyects/ragTools/rag_factory/database/config.py:12: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DatabaseConfig(BaseSettings):

rag_factory/strategies/agentic/config.py:9
  /mnt/MCPProyects/ragTools/rag_factory/strategies/agentic/config.py:9: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class AgenticStrategyConfig(BaseModel):

rag_factory/strategies/late_chunking/models.py:21
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:21: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class TokenEmbedding(BaseModel):

rag_factory/strategies/late_chunking/models.py:34
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:34: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DocumentEmbedding(BaseModel):

rag_factory/strategies/late_chunking/models.py:49
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:49: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class EmbeddingChunk(BaseModel):

rag_factory/strategies/contextual/config.py:31
  /mnt/MCPProyects/ragTools/rag_factory/strategies/contextual/config.py:31: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ContextualRetrievalConfig(BaseModel):

rag_factory/strategies/fine_tuned/config.py:6
  /mnt/MCPProyects/ragTools/rag_factory/strategies/fine_tuned/config.py:6: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class FineTunedConfig(BaseSettings):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.3-final-0 ________________

Name                                                               Stmts   Miss  Cover   Missing
------------------------------------------------------------------------------------------------
rag_factory/__init__.py                                                7      2    71%   18-19
rag_factory/__version__.py                                             1      0   100%
rag_factory/cli/__init__.py                                            2      0   100%
rag_factory/cli/commands/__init__.py                                   1      0   100%
rag_factory/cli/commands/benchmark.py                                 96     81    16%   40-53, 64-84, 148-263
rag_factory/cli/commands/check_consistency.py                         43     33    23%   64-120
rag_factory/cli/commands/config.py                                    78     68    13%   26-64, 102-188
rag_factory/cli/commands/gui.py                                       25     17    32%   61-91
rag_factory/cli/commands/index.py                                     65     52    20%   29-39, 93-185
rag_factory/cli/commands/query.py                                     47     36    23%   73-149
rag_factory/cli/commands/repl.py                                     152    130    14%   29-56, 63-108, 112-120, 124-133, 137-155, 159-172, 176-186, 190-207, 211-220, 253-260
rag_factory/cli/commands/strategies.py                                45     36    20%   48-120
rag_factory/cli/commands/validate_e2e.py                              91     69    24%   37-38, 42-142, 145-156
rag_factory/cli/commands/validate_pipeline.py                         70     57    19%   57-156
rag_factory/cli/formatters/__init__.py                                 4      0   100%
rag_factory/cli/formatters/consistency.py                             61     55    10%   21-69, 79-103, 108-138
rag_factory/cli/formatters/output.py                                  20      9    55%   23-24, 43-44, 63-64, 74, 79, 84
rag_factory/cli/formatters/results.py                                 71     62    13%   28-55, 72-99, 116-144, 157-181
rag_factory/cli/formatters/validation.py                              63     53    16%   25-43, 48-56, 65-77, 86-98, 103-129, 134-137
rag_factory/cli/main.py                                               32     10    69%   25-28, 48-49, 79-81, 85
rag_factory/cli/utils/__init__.py                                      3      0   100%
rag_factory/cli/utils/progress.py                                     14      8    43%   34-47, 73-76
rag_factory/cli/utils/validation.py                                   53     42    21%   30-41, 57-77, 93-118, 135
rag_factory/config/__init__.py                                         4      0   100%
rag_factory/config/env_resolver.py                                    52     37    29%   47-54, 70-90, 110, 129-147
rag_factory/config/schemas/__init__.py                                 2      0   100%
rag_factory/config/schemas/version.py                                 10      6    40%   29-38
rag_factory/config/strategy_loader.py                                 54     17    69%   33, 49-60, 77, 82-83, 86, 103-104
rag_factory/config/strategy_pair_manager.py                          105     33    69%   57-58, 66-70, 93, 102-109, 114, 156-157, 184-196, 210-215, 264, 274-275, 282
rag_factory/config/validator.py                                       93     76    18%   27-30, 34-39, 53-58, 62-74, 111-132, 177-198, 215-235, 247-249, 271-295, 333-354
rag_factory/core/__init__.py                                           4      4     0%   7-23
rag_factory/core/capabilities.py                                      61     16    74%   129, 155, 173-174, 239-253
rag_factory/core/indexing_interface.py                                54     28    48%   144, 164, 208, 260, 272, 292-313, 341-364
rag_factory/core/pipeline.py                                          49     35    29%   22-24, 33-40, 55-77, 95-96, 105-108, 117-120, 137-146
rag_factory/core/retrieval_interface.py                               38     13    66%   138, 158, 196, 247, 259, 285-309
rag_factory/database/__init__.py                                       4      0   100%
rag_factory/database/config.py                                        17      0   100%
rag_factory/database/connection.py                                    80     54    32%   40-48, 61-86, 96, 107, 126-137, 150-157, 165-170, 178-183, 196-197, 209-214, 218, 222
rag_factory/database/env_validator.py                                 38     38     0%   7-139
rag_factory/database/models.py                                        85     32    62%   31-34, 37-45, 48-54, 66-69, 72-77, 80-85, 181, 323-325
rag_factory/database/vector_indexing.py                               38     38     0%   7-114
rag_factory/evaluation/__init__.py                                     4      4     0%   29-41
rag_factory/evaluation/analysis/__init__.py                            3      3     0%   8-11
rag_factory/evaluation/analysis/comparison.py                        135    135     0%   8-323
rag_factory/evaluation/analysis/statistics.py                         81     81     0%   8-320
rag_factory/evaluation/benchmarks/__init__.py                          3      3     0%   8-14
rag_factory/evaluation/benchmarks/config.py                           25     25     0%   7-64
rag_factory/evaluation/benchmarks/runner.py                          155    155     0%   8-423
rag_factory/evaluation/datasets/__init__.py                            3      3     0%   8-14
rag_factory/evaluation/datasets/loader.py                             88     88     0%   8-281
rag_factory/evaluation/datasets/schema.py                             52     52     0%   8-160
rag_factory/evaluation/datasets/statistics.py                         65     65     0%   8-226
rag_factory/evaluation/exporters/__init__.py                           4      4     0%   8-12
rag_factory/evaluation/exporters/csv_exporter.py                      52     52     0%   3-124
rag_factory/evaluation/exporters/html_exporter.py                     47     47     0%   3-293
rag_factory/evaluation/exporters/json_exporter.py                     19     19     0%   3-68
rag_factory/evaluation/metrics/__init__.py                             3      3     0%   12-25
rag_factory/evaluation/metrics/base.py                                31     31     0%   8-115
rag_factory/evaluation/metrics/cost.py                                65     65     0%   8-313
rag_factory/evaluation/metrics/performance.py                         42     42     0%   8-202
rag_factory/evaluation/metrics/quality.py                             84     84     0%   8-377
rag_factory/evaluation/metrics/retrieval.py                           77     77     0%   9-401
rag_factory/exceptions.py                                             13      0   100%
rag_factory/factory.py                                               187    121    35%   144, 165-170, 203-204, 224-226, 256-270, 300-324, 347-348, 365, 384, 401, 418, 435, 454, 460, 480-502, 528-545, 568-611, 644-699, 703-715
rag_factory/gui/__init__.py                                            2      0   100%
rag_factory/gui/components/__init__.py                                 3      0   100%
rag_factory/gui/components/scrolled_text.py                           64     52    19%   53-62, 80-114, 122, 131-142, 151-164, 168, 176, 184-199
rag_factory/gui/components/status_bar.py                              62     49    21%   40-59, 64-113, 122-137, 146-152, 161, 168, 172-184, 192-196
rag_factory/gui/main_window.py                                       701    640     9%   64-109, 113-128, 137-164, 168-194, 205-263, 268-293, 297-321, 330-390, 398-422, 435-469, 482-500, 513-551, 564-602, 615-673, 686-690, 694-732, 736-738, 746-789, 806-817, 826-858, 862-879, 885-895, 899-970, 974-1062, 1072-1074, 1082-1084, 1088-1164, 1177-1234, 1244-1246, 1254-1258, 1262-1319, 1324-1371, 1375-1394, 1398, 1411-1487, 1491-1549, 1554-1571, 1575-1582, 1587-1600, 1605-1614, 1618
rag_factory/gui/utils/__init__.py                                      3      0   100%
rag_factory/gui/utils/formatters.py                                   57     49    14%   27-30, 50-90, 110-118, 134-137, 155-165
rag_factory/gui/utils/threading.py                                    32     25    22%   44-73, 96-99, 124-129
rag_factory/legacy_config.py                                         155    155     0%   22-542
rag_factory/models/__init__.py                                         6      6     0%   3-14
rag_factory/models/embedding/__init__.py                               4      4     0%   3-12
rag_factory/models/embedding/loader.py                               179    179     0%   3-367
rag_factory/models/embedding/models.py                                47     47     0%   3-106
rag_factory/models/embedding/registry.py                             128    128     0%   3-282
rag_factory/models/evaluation/__init__.py                              3      3     0%   3-6
rag_factory/models/evaluation/ab_testing.py                           98     98     0%   3-281
rag_factory/models/evaluation/models.py                               29     29     0%   3-74
rag_factory/observability/__init__.py                                  3      3     0%   3-10
rag_factory/observability/integrations/__init__.py                     1      1     0%   3
rag_factory/observability/integrations/prometheus.py                  47     47     0%   3-229
rag_factory/observability/logging/__init__.py                          2      2     0%   3-5
rag_factory/observability/logging/config.py                           16     16     0%   3-37
rag_factory/observability/logging/filters.py                          41     41     0%   3-103
rag_factory/observability/logging/logger.py                           86     86     0%   3-396
rag_factory/observability/metrics/__init__.py                          2      2     0%   3-9
rag_factory/observability/metrics/collector.py                       143    143     0%   3-459
rag_factory/observability/metrics/cost.py                             39     39     0%   3-221
rag_factory/observability/metrics/performance.py                      64     64     0%   3-196
rag_factory/observability/monitoring/__init__.py                       1      1     0%   3
rag_factory/observability/monitoring/api.py                          101    101     0%   3-328
rag_factory/pipeline.py                                              156    156     0%   34-507
rag_factory/registry/__init__.py                                       4      0   100%
rag_factory/registry/exceptions.py                                     6      0   100%
rag_factory/registry/service_factory.py                               84     69    18%   45-54, 62-65, 70-73, 78-80, 84-86, 95-127, 136-165, 176-215, 229-255
rag_factory/registry/service_registry.py                              91     71    22%   43-51, 55-85, 103-156, 164, 178-203, 210-223, 227, 231-232
rag_factory/repositories/__init__.py                                   5      0   100%
rag_factory/repositories/base.py                                      42     21    50%   38, 53, 70, 87, 103, 114-118, 125, 136-139, 159-164
rag_factory/repositories/chunk.py                                    206    180    13%   40-45, 68-76, 90-95, 120-133, 155-171, 187-202, 221-231, 250-261, 287-328, 355-396, 422-474, 489-499, 513-521, 537-543, 557-563, 577-587, 604-626, 639-670
rag_factory/repositories/document.py                                  93     74    20%   41-46, 63-68, 98-118, 140-156, 172-187, 206, 223-233, 247-255, 272-279, 290-293, 307-312
rag_factory/repositories/exceptions.py                                18      7    61%   34-36, 56-59
rag_factory/services/__init__.py                                       4      0   100%
rag_factory/services/api/__init__.py                                   4      4     0%   7-11
rag_factory/services/api/anthropic.py                                 27     27     0%   7-141
rag_factory/services/api/cohere.py                                    30     30     0%   7-113
rag_factory/services/api/openai.py                                    46     46     0%   7-235
rag_factory/services/consistency.py                                   32      7    78%   87, 94, 101, 108, 151, 158, 165
rag_factory/services/database/__init__.py                              5      0   100%
rag_factory/services/database/database_context.py                    181    159    12%   58-64, 88-106, 123, 140-150, 179-200, 223-240, 256-266, 305-330, 338-339, 343-406, 414-415, 430-510, 516-517, 521-546
rag_factory/services/database/migration_validator.py                  96     74    23%   29-30, 61-69, 81-88, 109-131, 148-152, 163-192, 204-219, 230-237, 249, 261-271, 283-286
rag_factory/services/database/neo4j.py                                54     38    30%   15-17, 60-71, 79-84, 103-114, 134-150, 172-181, 188-191, 195, 199
rag_factory/services/database/postgres.py                            195    163    16%   17-18, 26-27, 84-121, 131-145, 149-201, 214-269, 292-346, 360-375, 390-414, 425-440, 472-490, 504-527, 532, 543, 580-598, 607-619, 623, 627
rag_factory/services/dependencies.py                                  41     12    71%   99, 101, 103, 105, 107, 134-140, 179-180
rag_factory/services/embedding/__init__.py                             4      0   100%
rag_factory/services/embedding/base.py                                31      6    81%   44, 59, 68, 77, 86, 98
rag_factory/services/embedding/cache.py                               43     33    23%   26-32, 43-58, 67-76, 80-82, 90-94
rag_factory/services/embedding/config.py                              29     13    55%   37-43, 50-68, 80
rag_factory/services/embedding/providers/__init__.py                   5      0   100%
rag_factory/services/embedding/providers/cohere.py                    53     36    32%   10-20, 55-75, 90-117, 125, 133, 141, 152-153
rag_factory/services/embedding/providers/local.py                     43     27    37%   8-9, 46-67, 83-109, 117, 125, 133, 146
rag_factory/services/embedding/providers/onnx_local.py               114     93    18%   18-19, 87-177, 193-250, 261-308, 319, 327, 335, 348
rag_factory/services/embedding/providers/openai.py                    51     34    33%   10-20, 53-72, 87-108, 116, 124, 132, 143-144
rag_factory/services/embedding/rate_limiter.py                        20     14    30%   27-37, 45-53
rag_factory/services/embedding/service.py                            100     83    17%   50-62, 79-93, 117-198, 220-222, 233-239, 248-266, 273-275
rag_factory/services/interfaces.py                                    35      0   100%
rag_factory/services/llm/__init__.py                                   5      0   100%
rag_factory/services/llm/base.py                                      43      0   100%
rag_factory/services/llm/config.py                                    23     11    52%   42-57
rag_factory/services/llm/prompt_template.py                           43     24    44%   47-82, 97-100, 111-115
rag_factory/services/llm/providers/__init__.py                        12     12     0%   5-22
rag_factory/services/llm/providers/anthropic.py                       57     57     0%   3-205
rag_factory/services/llm/providers/ollama.py                          55     55     0%   3-196
rag_factory/services/llm/providers/openai.py                          57     57     0%   3-210
rag_factory/services/llm/service.py                                   66     51    23%   32-39, 56-70, 93-129, 154-175, 186, 194-198, 215-216
rag_factory/services/llm/token_counter.py                             27     27     0%   3-72
rag_factory/services/local/__init__.py                                 2      2     0%   7-9
rag_factory/services/local/reranker.py                                32     32     0%   7-116
rag_factory/services/onnx/__init__.py                                  2      2     0%   7-9
rag_factory/services/onnx/embedding.py                                29     29     0%   7-129
rag_factory/services/utils/__init__.py                                 2      0   100%
rag_factory/services/utils/model_converter.py                        104    104     0%   8-291
rag_factory/services/utils/onnx_utils.py                             133    114    14%   22-23, 36-37, 67-123, 142-146, 172-218, 240-274, 291-312, 332-347, 360-378, 392-404
rag_factory/services/utils/reranker_selector.py                       68     68     0%   8-249
rag_factory/strategies/__init__.py                                     2      0   100%
rag_factory/strategies/agentic/__init__.py                             7      0   100%
rag_factory/strategies/agentic/agent.py                              151    130    14%   31-36, 45, 57, 66-90, 109-111, 123-161, 190-214, 230-265, 276-293, 310-331, 339-346, 357-368, 381-420
rag_factory/strategies/agentic/config.py                              12      0   100%
rag_factory/strategies/agentic/frameworks/__init__.py                  1      1     0%   9
rag_factory/strategies/agentic/query_analyzer.py                      89     65    27%   50-55, 67, 79-90, 109-125, 137-147, 159-178, 196-214, 225-260, 278
rag_factory/strategies/agentic/strategy.py                            87     60    31%   50-63, 76, 84, 94-132, 144, 156, 169, 182-222, 234-258, 267, 276, 284
rag_factory/strategies/agentic/tool_implementations.py               135     91    33%   36-37, 41, 45, 52, 86-129, 148-149, 153, 157, 164, 182-247, 266-267, 271, 275, 282, 329-373, 392-393, 397, 401, 407, 446-511
rag_factory/strategies/agentic/tools.py                               40      9    78%   66, 79, 89, 101, 112, 139-142
rag_factory/strategies/auto_register.py                               66     20    70%   13-14, 18-19, 23-24, 28-29, 33-34, 39-40, 46-47, 52-53, 58-59, 79-80
rag_factory/strategies/base.py                                        55     13    76%   80-85, 169-178
rag_factory/strategies/chunking/__init__.py                           15     15     0%   28-67
rag_factory/strategies/chunking/base.py                               91     91     0%   3-256
rag_factory/strategies/chunking/docling_chunker.py                    45     45     0%   13-188
rag_factory/strategies/chunking/fixed_size_chunker.py                 74     74     0%   3-204
rag_factory/strategies/chunking/hybrid_chunker.py                     70     70     0%   3-192
rag_factory/strategies/chunking/semantic_chunker.py                  195    195     0%   3-534
rag_factory/strategies/chunking/structural_chunker.py                147    147     0%   3-425
rag_factory/strategies/chunking/utils.py                              89     89     0%   3-264
rag_factory/strategies/contextual/__init__.py                          7      0   100%
rag_factory/strategies/contextual/batch_processor.py                  91     76    16%   41-43, 60-72, 84-90, 108-128, 145-161, 178-201, 218-266
rag_factory/strategies/contextual/config.py                           46      0   100%
rag_factory/strategies/contextual/context_generator.py                84     70    17%   35-36, 59-99, 112-135, 152-194, 209, 224-234
rag_factory/strategies/contextual/cost_tracker.py                     32     21    34%   31-35, 48-51, 69-82, 94-99, 111-114, 126
rag_factory/strategies/contextual/prompts.py                          25     17    32%   85-106, 119
rag_factory/strategies/contextual/storage.py                          44     35    20%   32-33, 42-45, 54-81, 98-118
rag_factory/strategies/contextual/strategy.py                         78     49    37%   54-67, 75, 83, 107-156, 173, 186, 207-215, 231-262, 278, 284, 289, 298
rag_factory/strategies/fine_tuned/__init__.py                          4      0   100%
rag_factory/strategies/fine_tuned/ab_testing.py                       78     78     0%   1-134
rag_factory/strategies/fine_tuned/config.py                           11      0   100%
rag_factory/strategies/fine_tuned/custom_loader.py                    40     28    30%   17-19, 36-73, 77, 84-88
rag_factory/strategies/fine_tuned/model_registry.py                  126     96    24%   39-50, 80-112, 132-149, 166-178, 182-196, 200-223, 227-240, 249-270, 274-287, 291-303
rag_factory/strategies/hierarchical/__init__.py                        5      5     0%   8-21
rag_factory/strategies/hierarchical/hierarchy_builder.py              79     79     0%   8-335
rag_factory/strategies/hierarchical/models.py                         58     58     0%   8-137
rag_factory/strategies/hierarchical/parent_retriever.py               89     89     0%   8-278
rag_factory/strategies/hierarchical/strategy.py                       76     76     0%   9-301
rag_factory/strategies/indexing/__init__.py                            6      0   100%
rag_factory/strategies/indexing/context_aware.py                     108     88    19%   31, 43, 63-134, 155-156, 160-170, 182-188, 192-198, 208-237, 241-242
rag_factory/strategies/indexing/hierarchical.py                       90     73    19%   50, 63, 88-134, 156-185, 201-236, 253-278, 292-293
rag_factory/strategies/indexing/in_memory.py                          41     25    39%   54, 65, 93-121, 143, 160, 173, 194-200
rag_factory/strategies/indexing/keyword_indexing.py                   42     31    26%   42, 53, 77-157
rag_factory/strategies/indexing/knowledge_graph_indexing.py           46     33    28%   18, 27, 48-89, 108-129
rag_factory/strategies/indexing/vector_embedding.py                   98     34    65%   64-65, 76-77, 149-150, 167-218
rag_factory/strategies/knowledge_graph/__init__.py                     4      4     0%   8-19
rag_factory/strategies/knowledge_graph/config.py                      21     21     0%   8-129
rag_factory/strategies/knowledge_graph/entity_extractor.py            70     70     0%   7-205
rag_factory/strategies/knowledge_graph/graph_store.py                 31     31     0%   8-124
rag_factory/strategies/knowledge_graph/hybrid_retriever.py            56     56     0%   8-164
rag_factory/strategies/knowledge_graph/memory_graph_store.py          97     97     0%   8-196
rag_factory/strategies/knowledge_graph/models.py                      53     53     0%   8-122
rag_factory/strategies/knowledge_graph/relationship_extractor.py      62     62     0%   8-189
rag_factory/strategies/knowledge_graph/strategy.py                    80     80     0%   8-256
rag_factory/strategies/late_chunking/__init__.py                       6      0   100%
rag_factory/strategies/late_chunking/coherence_analyzer.py            27     17    37%   20-21, 36-45, 57-65, 82-96
rag_factory/strategies/late_chunking/document_embedder.py            104     89    14%   29-74, 94-184, 202-215, 227-235, 256-279, 296-303, 318
rag_factory/strategies/late_chunking/embedding_chunker.py            117    102    13%   26, 41-61, 68-98, 105-155, 162-182, 191-192, 199-254, 265-289, 293-300
rag_factory/strategies/late_chunking/models.py                        62      0   100%
rag_factory/strategies/late_chunking/strategy.py                      70     46    34%   48-69, 77, 88, 107-122, 140-177, 196-205, 210, 215
rag_factory/strategies/multi_query/__init__.py                         7      7     0%   8-19
rag_factory/strategies/multi_query/config.py                          36     36     0%   3-138
rag_factory/strategies/multi_query/deduplicator.py                    87     87     0%   3-197
rag_factory/strategies/multi_query/parallel_executor.py               52     52     0%   3-163
rag_factory/strategies/multi_query/prompts.py                         10     10     0%   3-84
rag_factory/strategies/multi_query/ranker.py                          80     80     0%   3-201
rag_factory/strategies/multi_query/strategy.py                        68     68     0%   3-184
rag_factory/strategies/multi_query/variant_generator.py               62     62     0%   3-187
rag_factory/strategies/query_expansion/__init__.py                     8      0   100%
rag_factory/strategies/query_expansion/base.py                        66     10    85%   90, 103, 114-118, 130-133
rag_factory/strategies/query_expansion/cache.py                       52     40    23%   20-22, 38-55, 64-66, 70-73, 81-97, 105-112
rag_factory/strategies/query_expansion/expander_service.py            92     71    23%   36-40, 55-58, 75-148, 159-180, 204-215, 233-234, 242-246, 254, 265-273, 283-284
rag_factory/strategies/query_expansion/hyde_expander.py               19     12    37%   25-27, 41-65
rag_factory/strategies/query_expansion/llm_expander.py                25     16    36%   23-25, 39-71, 99
rag_factory/strategies/query_expansion/metrics.py                     66     30    55%   44-45, 53-57, 76-109, 130, 134, 146-152, 160
rag_factory/strategies/query_expansion/prompts.py                     13      7    46%   16, 28-56, 68-107
rag_factory/strategies/reranking/__init__.py                           7      0   100%
rag_factory/strategies/reranking/base.py                              68     16    76%   81, 101, 106, 110-119, 123-130
rag_factory/strategies/reranking/bge_reranker.py                      51     37    27%   14, 53-81, 103-147, 151
rag_factory/strategies/reranking/cache.py                             48     34    29%   32-34, 51-66, 76-77, 81, 90-101, 110-113, 121, 136-138
rag_factory/strategies/reranking/cohere_reranker.py                   34     20    41%   15-16, 55-71, 94-115, 119
rag_factory/strategies/reranking/cosine_reranker.py                   62     47    24%   54-72, 97-139, 158-171, 188, 209-215, 227-230, 242-245, 249
rag_factory/strategies/reranking/cross_encoder_reranker.py            40     27    32%   13-14, 53-76, 98-120, 124
rag_factory/strategies/reranking/metrics.py                           67     67     0%   8-264
rag_factory/strategies/reranking/reranker_service.py                 115     88    23%   56-67, 71-96, 113-225, 235-255, 269, 282-283, 287-292, 296-300, 308-310
rag_factory/strategies/retrieval/__init__.py                           6      0   100%
rag_factory/strategies/retrieval/hybrid_retriever.py                  51     24    53%   76-102, 110-144
rag_factory/strategies/retrieval/keyword_retriever.py                 56     41    27%   41, 52, 71-113, 126-133, 153-172
rag_factory/strategies/retrieval/knowledge_graph_retriever.py         22      9    59%   19, 27, 48-70
rag_factory/strategies/retrieval/multi_query_retriever.py             22      9    59%   19, 26, 44-66
rag_factory/strategies/retrieval/query_expansion_retriever.py         24      9    62%   20, 27, 45-67
rag_factory/strategies/retrieval/semantic_retriever.py                23     12    48%   23, 32, 61-94
rag_factory/strategies/self_reflective/__init__.py                     6      0   100%
rag_factory/strategies/self_reflective/config.py                      20      8    60%   29-42
rag_factory/strategies/self_reflective/grader.py                      80     65    19%   29-35, 51-67, 83-109, 135-171, 187-258, 266
rag_factory/strategies/self_reflective/models.py                      48      0   100%
rag_factory/strategies/self_reflective/refiner.py                     69     56    19%   28-30, 53-96, 113-143, 161-193, 208-228
rag_factory/strategies/self_reflective/strategy.py                    92     74    20%   38-53, 71-181, 192-206, 229-259, 264, 269
rag_factory/utils/__init__.py                                          3      0   100%
rag_factory/utils/token_counter.py                                    45     30    33%   36-40, 52-62, 74-82, 86, 90, 105-106, 124-135, 153-158
rag_factory/utils/tokenization.py                                     95     73    23%   36-40, 53-64, 87-114, 126-129, 141-144, 156, 175-190, 209-228, 241-243, 251-252, 270-271, 292-293, 314-315
------------------------------------------------------------------------------------------------
TOTAL                                                              13429  10776    20%
=========================== short test summary info ============================
FAILED tests/integration/test_hybrid_search_pair.py::test_hybrid_search_pair_loading - TypeError: object Mock can't be used in 'await' expression
======================== 1 failed, 8 warnings in 5.32s =========================

[55/206] PASSED: tests/integration/test_keyword_pair.py
  Tests: 1 (P:1 F:0 S:0)
[56/206] PASSED: tests/integration/test_knowledge_graph_pair.py
  Tests: 1 (P:1 F:0 S:0)
[57/206] PASSED: tests/integration/test_late_chunking_pair.py
  Tests: 1 (P:1 F:0 S:0)
[58/206] PASSED: tests/integration/test_multi_query_pair.py
  Tests: 1 (P:1 F:0 S:0)
[59/206] PASSED: tests/integration/test_package_integration.py
  Tests: 4 (P:3 F:0 S:1)
[60/206] PASSED: tests/integration/test_pipeline_integration.py
  Tests: 7 (P:7 F:0 S:0)
[61/206] PASSED: tests/integration/test_query_expansion_pair.py
  Tests: 1 (P:1 F:0 S:0)
[62/206] PASSED: tests/integration/test_reranking_pair.py
  Tests: 1 (P:1 F:0 S:0)
[63/206] PASSED: tests/integration/test_self_reflective_pair.py
  Tests: 1 (P:1 F:0 S:0)
[64/206] PASSED: tests/integration/test_semantic_api_pair.py
  Tests: 1 (P:1 F:0 S:0)
[65/206] PASSED: tests/integration/test_semantic_local_pair.py
  Tests: 1 (P:1 F:0 S:0)
[66/206] PASSED: tests/integration/test_tokenization_integration.py
  Tests: 16 (P:16 F:0 S:0)
[67/206] PASSED: tests/mocks/test_standalone.py
  Tests: 6 (P:6 F:0 S:0)
[68/206] FAILED: tests/test_mock_registry.py
  Tests: 0 (P:0 F:0 S:0)
----------------------------------------
============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.1, pluggy-1.6.0 -- /mnt/MCPProyects/ragTools/venv/bin/python3
cachedir: .pytest_cache
rootdir: /mnt/MCPProyects/ragTools
configfile: pytest.ini (WARNING: ignoring pytest config in pyproject.toml!)
plugins: anyio-4.12.0, cov-7.0.0, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 0 items

=============================== warnings summary ===============================
rag_factory/services/llm/config.py:8
  /mnt/MCPProyects/ragTools/rag_factory/services/llm/config.py:8: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class LLMServiceConfig(BaseModel):

rag_factory/database/config.py:12
  /mnt/MCPProyects/ragTools/rag_factory/database/config.py:12: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DatabaseConfig(BaseSettings):

rag_factory/strategies/agentic/config.py:9
  /mnt/MCPProyects/ragTools/rag_factory/strategies/agentic/config.py:9: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class AgenticStrategyConfig(BaseModel):

rag_factory/strategies/late_chunking/models.py:21
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:21: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class TokenEmbedding(BaseModel):

rag_factory/strategies/late_chunking/models.py:34
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:34: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DocumentEmbedding(BaseModel):

rag_factory/strategies/late_chunking/models.py:49
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:49: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class EmbeddingChunk(BaseModel):

rag_factory/strategies/contextual/config.py:31
  /mnt/MCPProyects/ragTools/rag_factory/strategies/contextual/config.py:31: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ContextualRetrievalConfig(BaseModel):

rag_factory/strategies/fine_tuned/config.py:6
  /mnt/MCPProyects/ragTools/rag_factory/strategies/fine_tuned/config.py:6: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class FineTunedConfig(BaseSettings):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.3-final-0 ________________

Name                                                               Stmts   Miss  Cover   Missing
------------------------------------------------------------------------------------------------
rag_factory/__init__.py                                                7      2    71%   18-19
rag_factory/__version__.py                                             1      0   100%
rag_factory/cli/__init__.py                                            2      0   100%
rag_factory/cli/commands/__init__.py                                   1      0   100%
rag_factory/cli/commands/benchmark.py                                 96     81    16%   40-53, 64-84, 148-263
rag_factory/cli/commands/check_consistency.py                         43     33    23%   64-120
rag_factory/cli/commands/config.py                                    78     68    13%   26-64, 102-188
rag_factory/cli/commands/gui.py                                       25     17    32%   61-91
rag_factory/cli/commands/index.py                                     65     52    20%   29-39, 93-185
rag_factory/cli/commands/query.py                                     47     36    23%   73-149
rag_factory/cli/commands/repl.py                                     152    130    14%   29-56, 63-108, 112-120, 124-133, 137-155, 159-172, 176-186, 190-207, 211-220, 253-260
rag_factory/cli/commands/strategies.py                                45     36    20%   48-120
rag_factory/cli/commands/validate_e2e.py                              91     69    24%   37-38, 42-142, 145-156
rag_factory/cli/commands/validate_pipeline.py                         70     57    19%   57-156
rag_factory/cli/formatters/__init__.py                                 4      0   100%
rag_factory/cli/formatters/consistency.py                             61     55    10%   21-69, 79-103, 108-138
rag_factory/cli/formatters/output.py                                  20      9    55%   23-24, 43-44, 63-64, 74, 79, 84
rag_factory/cli/formatters/results.py                                 71     62    13%   28-55, 72-99, 116-144, 157-181
rag_factory/cli/formatters/validation.py                              63     53    16%   25-43, 48-56, 65-77, 86-98, 103-129, 134-137
rag_factory/cli/main.py                                               32     10    69%   25-28, 48-49, 79-81, 85
rag_factory/cli/utils/__init__.py                                      3      0   100%
rag_factory/cli/utils/progress.py                                     14      8    43%   34-47, 73-76
rag_factory/cli/utils/validation.py                                   53     42    21%   30-41, 57-77, 93-118, 135
rag_factory/config/__init__.py                                         4      0   100%
rag_factory/config/env_resolver.py                                    52     37    29%   47-54, 70-90, 110, 129-147
rag_factory/config/schemas/__init__.py                                 2      0   100%
rag_factory/config/schemas/version.py                                 10      6    40%   29-38
rag_factory/config/strategy_loader.py                                 54     36    33%   32-41, 45-60, 75-89, 101-104
rag_factory/config/strategy_pair_manager.py                          105     83    21%   40-72, 92-132, 148-198, 210-215, 229, 259-282
rag_factory/config/validator.py                                       93     76    18%   27-30, 34-39, 53-58, 62-74, 111-132, 177-198, 215-235, 247-249, 271-295, 333-354
rag_factory/core/__init__.py                                           4      4     0%   7-23
rag_factory/core/capabilities.py                                      61     16    74%   129, 155, 173-174, 239-253
rag_factory/core/indexing_interface.py                                54     35    35%   55-57, 118-123, 144, 164, 208, 260, 272, 292-313, 341-364
rag_factory/core/pipeline.py                                          49     35    29%   22-24, 33-40, 55-77, 95-96, 105-108, 117-120, 137-146
rag_factory/core/retrieval_interface.py                               38     20    47%   56-58, 112-117, 138, 158, 196, 247, 259, 285-309
rag_factory/database/__init__.py                                       4      0   100%
rag_factory/database/config.py                                        17      0   100%
rag_factory/database/connection.py                                    80     54    32%   40-48, 61-86, 96, 107, 126-137, 150-157, 165-170, 178-183, 196-197, 209-214, 218, 222
rag_factory/database/env_validator.py                                 38     38     0%   7-139
rag_factory/database/models.py                                        85     32    62%   31-34, 37-45, 48-54, 66-69, 72-77, 80-85, 181, 323-325
rag_factory/database/vector_indexing.py                               38     38     0%   7-114
rag_factory/evaluation/__init__.py                                     4      4     0%   29-41
rag_factory/evaluation/analysis/__init__.py                            3      3     0%   8-11
rag_factory/evaluation/analysis/comparison.py                        135    135     0%   8-323
rag_factory/evaluation/analysis/statistics.py                         81     81     0%   8-320
rag_factory/evaluation/benchmarks/__init__.py                          3      3     0%   8-14
rag_factory/evaluation/benchmarks/config.py                           25     25     0%   7-64
rag_factory/evaluation/benchmarks/runner.py                          155    155     0%   8-423
rag_factory/evaluation/datasets/__init__.py                            3      3     0%   8-14
rag_factory/evaluation/datasets/loader.py                             88     88     0%   8-281
rag_factory/evaluation/datasets/schema.py                             52     52     0%   8-160
rag_factory/evaluation/datasets/statistics.py                         65     65     0%   8-226
rag_factory/evaluation/exporters/__init__.py                           4      4     0%   8-12
rag_factory/evaluation/exporters/csv_exporter.py                      52     52     0%   3-124
rag_factory/evaluation/exporters/html_exporter.py                     47     47     0%   3-293
rag_factory/evaluation/exporters/json_exporter.py                     19     19     0%   3-68
rag_factory/evaluation/metrics/__init__.py                             3      3     0%   12-25
rag_factory/evaluation/metrics/base.py                                31     31     0%   8-115
rag_factory/evaluation/metrics/cost.py                                65     65     0%   8-313
rag_factory/evaluation/metrics/performance.py                         42     42     0%   8-202
rag_factory/evaluation/metrics/quality.py                             84     84     0%   8-377
rag_factory/evaluation/metrics/retrieval.py                           77     77     0%   9-401
rag_factory/exceptions.py                                             13      0   100%
rag_factory/factory.py                                               187    137    27%   109-116, 144, 165-170, 202-230, 256-270, 300-324, 347-348, 365, 384, 401, 418, 435, 451-460, 480-502, 528-545, 568-611, 644-699, 703-715
rag_factory/gui/__init__.py                                            2      0   100%
rag_factory/gui/components/__init__.py                                 3      0   100%
rag_factory/gui/components/scrolled_text.py                           64     52    19%   53-62, 80-114, 122, 131-142, 151-164, 168, 176, 184-199
rag_factory/gui/components/status_bar.py                              62     49    21%   40-59, 64-113, 122-137, 146-152, 161, 168, 172-184, 192-196
rag_factory/gui/main_window.py                                       701    640     9%   64-109, 113-128, 137-164, 168-194, 205-263, 268-293, 297-321, 330-390, 398-422, 435-469, 482-500, 513-551, 564-602, 615-673, 686-690, 694-732, 736-738, 746-789, 806-817, 826-858, 862-879, 885-895, 899-970, 974-1062, 1072-1074, 1082-1084, 1088-1164, 1177-1234, 1244-1246, 1254-1258, 1262-1319, 1324-1371, 1375-1394, 1398, 1411-1487, 1491-1549, 1554-1571, 1575-1582, 1587-1600, 1605-1614, 1618
rag_factory/gui/utils/__init__.py                                      3      0   100%
rag_factory/gui/utils/formatters.py                                   57     49    14%   27-30, 50-90, 110-118, 134-137, 155-165
rag_factory/gui/utils/threading.py                                    32     25    22%   44-73, 96-99, 124-129
rag_factory/legacy_config.py                                         155    155     0%   22-542
rag_factory/models/__init__.py                                         6      6     0%   3-14
rag_factory/models/embedding/__init__.py                               4      4     0%   3-12
rag_factory/models/embedding/loader.py                               179    179     0%   3-367
rag_factory/models/embedding/models.py                                47     47     0%   3-106
rag_factory/models/embedding/registry.py                             128    128     0%   3-282
rag_factory/models/evaluation/__init__.py                              3      3     0%   3-6
rag_factory/models/evaluation/ab_testing.py                           98     98     0%   3-281
rag_factory/models/evaluation/models.py                               29     29     0%   3-74
rag_factory/observability/__init__.py                                  3      3     0%   3-10
rag_factory/observability/integrations/__init__.py                     1      1     0%   3
rag_factory/observability/integrations/prometheus.py                  47     47     0%   3-229
rag_factory/observability/logging/__init__.py                          2      2     0%   3-5
rag_factory/observability/logging/config.py                           16     16     0%   3-37
rag_factory/observability/logging/filters.py                          41     41     0%   3-103
rag_factory/observability/logging/logger.py                           86     86     0%   3-396
rag_factory/observability/metrics/__init__.py                          2      2     0%   3-9
rag_factory/observability/metrics/collector.py                       143    143     0%   3-459
rag_factory/observability/metrics/cost.py                             39     39     0%   3-221
rag_factory/observability/metrics/performance.py                      64     64     0%   3-196
rag_factory/observability/monitoring/__init__.py                       1      1     0%   3
rag_factory/observability/monitoring/api.py                          101    101     0%   3-328
rag_factory/pipeline.py                                              156    156     0%   34-507
rag_factory/registry/__init__.py                                       4      0   100%
rag_factory/registry/exceptions.py                                     6      0   100%
rag_factory/registry/service_factory.py                               84     69    18%   45-54, 62-65, 70-73, 78-80, 84-86, 95-127, 136-165, 176-215, 229-255
rag_factory/registry/service_registry.py                              91     71    22%   43-51, 55-85, 103-156, 164, 178-203, 210-223, 227, 231-232
rag_factory/repositories/__init__.py                                   5      0   100%
rag_factory/repositories/base.py                                      42     21    50%   38, 53, 70, 87, 103, 114-118, 125, 136-139, 159-164
rag_factory/repositories/chunk.py                                    206    180    13%   40-45, 68-76, 90-95, 120-133, 155-171, 187-202, 221-231, 250-261, 287-328, 355-396, 422-474, 489-499, 513-521, 537-543, 557-563, 577-587, 604-626, 639-670
rag_factory/repositories/document.py                                  93     74    20%   41-46, 63-68, 98-118, 140-156, 172-187, 206, 223-233, 247-255, 272-279, 290-293, 307-312
rag_factory/repositories/exceptions.py                                18      7    61%   34-36, 56-59
rag_factory/services/__init__.py                                       4      0   100%
rag_factory/services/api/__init__.py                                   4      4     0%   7-11
rag_factory/services/api/anthropic.py                                 27     27     0%   7-141
rag_factory/services/api/cohere.py                                    30     30     0%   7-113
rag_factory/services/api/openai.py                                    46     46     0%   7-235
rag_factory/services/consistency.py                                   32     24    25%   80-113, 144-170
rag_factory/services/database/__init__.py                              5      0   100%
rag_factory/services/database/database_context.py                    181    159    12%   58-64, 88-106, 123, 140-150, 179-200, 223-240, 256-266, 305-330, 338-339, 343-406, 414-415, 430-510, 516-517, 521-546
rag_factory/services/database/migration_validator.py                  96     74    23%   29-30, 61-69, 81-88, 109-131, 148-152, 163-192, 204-219, 230-237, 249, 261-271, 283-286
rag_factory/services/database/neo4j.py                                54     38    30%   15-17, 60-71, 79-84, 103-114, 134-150, 172-181, 188-191, 195, 199
rag_factory/services/database/postgres.py                            195    163    16%   17-18, 26-27, 84-121, 131-145, 149-201, 214-269, 292-346, 360-375, 390-414, 425-440, 472-490, 504-527, 532, 543, 580-598, 607-619, 623, 627
rag_factory/services/dependencies.py                                  41     21    49%   96-109, 134-140, 176-180
rag_factory/services/embedding/__init__.py                             4      0   100%
rag_factory/services/embedding/base.py                                31      6    81%   44, 59, 68, 77, 86, 98
rag_factory/services/embedding/cache.py                               43     33    23%   26-32, 43-58, 67-76, 80-82, 90-94
rag_factory/services/embedding/config.py                              29     13    55%   37-43, 50-68, 80
rag_factory/services/embedding/providers/__init__.py                   5      0   100%
rag_factory/services/embedding/providers/cohere.py                    53     36    32%   10-20, 55-75, 90-117, 125, 133, 141, 152-153
rag_factory/services/embedding/providers/local.py                     43     27    37%   8-9, 46-67, 83-109, 117, 125, 133, 146
rag_factory/services/embedding/providers/onnx_local.py               114     93    18%   18-19, 87-177, 193-250, 261-308, 319, 327, 335, 348
rag_factory/services/embedding/providers/openai.py                    51     34    33%   10-20, 53-72, 87-108, 116, 124, 132, 143-144
rag_factory/services/embedding/rate_limiter.py                        20     14    30%   27-37, 45-53
rag_factory/services/embedding/service.py                            100     83    17%   50-62, 79-93, 117-198, 220-222, 233-239, 248-266, 273-275
rag_factory/services/interfaces.py                                    35      0   100%
rag_factory/services/llm/__init__.py                                   5      0   100%
rag_factory/services/llm/base.py                                      43      0   100%
rag_factory/services/llm/config.py                                    23     11    52%   42-57
rag_factory/services/llm/prompt_template.py                           43     24    44%   47-82, 97-100, 111-115
rag_factory/services/llm/providers/__init__.py                        12     12     0%   5-22
rag_factory/services/llm/providers/anthropic.py                       57     57     0%   3-205
rag_factory/services/llm/providers/ollama.py                          55     55     0%   3-196
rag_factory/services/llm/providers/openai.py                          57     57     0%   3-210
rag_factory/services/llm/service.py                                   66     51    23%   32-39, 56-70, 93-129, 154-175, 186, 194-198, 215-216
rag_factory/services/llm/token_counter.py                             27     27     0%   3-72
rag_factory/services/local/__init__.py                                 2      2     0%   7-9
rag_factory/services/local/reranker.py                                32     32     0%   7-116
rag_factory/services/onnx/__init__.py                                  2      2     0%   7-9
rag_factory/services/onnx/embedding.py                                29     29     0%   7-129
rag_factory/services/utils/__init__.py                                 2      0   100%
rag_factory/services/utils/model_converter.py                        104    104     0%   8-291
rag_factory/services/utils/onnx_utils.py                             133    114    14%   22-23, 36-37, 67-123, 142-146, 172-218, 240-274, 291-312, 332-347, 360-378, 392-404
rag_factory/services/utils/reranker_selector.py                       68     68     0%   8-249
rag_factory/strategies/__init__.py                                     2      0   100%
rag_factory/strategies/agentic/__init__.py                             7      0   100%
rag_factory/strategies/agentic/agent.py                              151    130    14%   31-36, 45, 57, 66-90, 109-111, 123-161, 190-214, 230-265, 276-293, 310-331, 339-346, 357-368, 381-420
rag_factory/strategies/agentic/config.py                              12      0   100%
rag_factory/strategies/agentic/frameworks/__init__.py                  1      1     0%   9
rag_factory/strategies/agentic/query_analyzer.py                      89     65    27%   50-55, 67, 79-90, 109-125, 137-147, 159-178, 196-214, 225-260, 278
rag_factory/strategies/agentic/strategy.py                            87     60    31%   50-63, 76, 84, 94-132, 144, 156, 169, 182-222, 234-258, 267, 276, 284
rag_factory/strategies/agentic/tool_implementations.py               135     91    33%   36-37, 41, 45, 52, 86-129, 148-149, 153, 157, 164, 182-247, 266-267, 271, 275, 282, 329-373, 392-393, 397, 401, 407, 446-511
rag_factory/strategies/agentic/tools.py                               40      9    78%   66, 79, 89, 101, 112, 139-142
rag_factory/strategies/auto_register.py                               66     20    70%   13-14, 18-19, 23-24, 28-29, 33-34, 39-40, 46-47, 52-53, 58-59, 79-80
rag_factory/strategies/base.py                                        55     13    76%   80-85, 169-178
rag_factory/strategies/chunking/__init__.py                           15     15     0%   28-67
rag_factory/strategies/chunking/base.py                               91     91     0%   3-256
rag_factory/strategies/chunking/docling_chunker.py                    45     45     0%   13-188
rag_factory/strategies/chunking/fixed_size_chunker.py                 74     74     0%   3-204
rag_factory/strategies/chunking/hybrid_chunker.py                     70     70     0%   3-192
rag_factory/strategies/chunking/semantic_chunker.py                  195    195     0%   3-534
rag_factory/strategies/chunking/structural_chunker.py                147    147     0%   3-425
rag_factory/strategies/chunking/utils.py                              89     89     0%   3-264
rag_factory/strategies/contextual/__init__.py                          7      0   100%
rag_factory/strategies/contextual/batch_processor.py                  91     76    16%   41-43, 60-72, 84-90, 108-128, 145-161, 178-201, 218-266
rag_factory/strategies/contextual/config.py                           46      0   100%
rag_factory/strategies/contextual/context_generator.py                84     70    17%   35-36, 59-99, 112-135, 152-194, 209, 224-234
rag_factory/strategies/contextual/cost_tracker.py                     32     21    34%   31-35, 48-51, 69-82, 94-99, 111-114, 126
rag_factory/strategies/contextual/prompts.py                          25     17    32%   85-106, 119
rag_factory/strategies/contextual/storage.py                          44     35    20%   32-33, 42-45, 54-81, 98-118
rag_factory/strategies/contextual/strategy.py                         78     49    37%   54-67, 75, 83, 107-156, 173, 186, 207-215, 231-262, 278, 284, 289, 298
rag_factory/strategies/fine_tuned/__init__.py                          4      0   100%
rag_factory/strategies/fine_tuned/ab_testing.py                       78     78     0%   1-134
rag_factory/strategies/fine_tuned/config.py                           11      0   100%
rag_factory/strategies/fine_tuned/custom_loader.py                    40     28    30%   17-19, 36-73, 77, 84-88
rag_factory/strategies/fine_tuned/model_registry.py                  126     96    24%   39-50, 80-112, 132-149, 166-178, 182-196, 200-223, 227-240, 249-270, 274-287, 291-303
rag_factory/strategies/hierarchical/__init__.py                        5      5     0%   8-21
rag_factory/strategies/hierarchical/hierarchy_builder.py              79     79     0%   8-335
rag_factory/strategies/hierarchical/models.py                         58     58     0%   8-137
rag_factory/strategies/hierarchical/parent_retriever.py               89     89     0%   8-278
rag_factory/strategies/hierarchical/strategy.py                       76     76     0%   9-301
rag_factory/strategies/indexing/__init__.py                            6      0   100%
rag_factory/strategies/indexing/context_aware.py                     108     88    19%   31, 43, 63-134, 155-156, 160-170, 182-188, 192-198, 208-237, 241-242
rag_factory/strategies/indexing/hierarchical.py                       90     73    19%   50, 63, 88-134, 156-185, 201-236, 253-278, 292-293
rag_factory/strategies/indexing/in_memory.py                          41     25    39%   54, 65, 93-121, 143, 160, 173, 194-200
rag_factory/strategies/indexing/keyword_indexing.py                   42     31    26%   42, 53, 77-157
rag_factory/strategies/indexing/knowledge_graph_indexing.py           46     33    28%   18, 27, 48-89, 108-129
rag_factory/strategies/indexing/vector_embedding.py                   98     85    13%   25, 35, 55-116, 137-221
rag_factory/strategies/knowledge_graph/__init__.py                     4      4     0%   8-19
rag_factory/strategies/knowledge_graph/config.py                      21     21     0%   8-129
rag_factory/strategies/knowledge_graph/entity_extractor.py            70     70     0%   7-205
rag_factory/strategies/knowledge_graph/graph_store.py                 31     31     0%   8-124
rag_factory/strategies/knowledge_graph/hybrid_retriever.py            56     56     0%   8-164
rag_factory/strategies/knowledge_graph/memory_graph_store.py          97     97     0%   8-196
rag_factory/strategies/knowledge_graph/models.py                      53     53     0%   8-122
rag_factory/strategies/knowledge_graph/relationship_extractor.py      62     62     0%   8-189
rag_factory/strategies/knowledge_graph/strategy.py                    80     80     0%   8-256
rag_factory/strategies/late_chunking/__init__.py                       6      0   100%
rag_factory/strategies/late_chunking/coherence_analyzer.py            27     17    37%   20-21, 36-45, 57-65, 82-96
rag_factory/strategies/late_chunking/document_embedder.py            104     89    14%   29-74, 94-184, 202-215, 227-235, 256-279, 296-303, 318
rag_factory/strategies/late_chunking/embedding_chunker.py            117    102    13%   26, 41-61, 68-98, 105-155, 162-182, 191-192, 199-254, 265-289, 293-300
rag_factory/strategies/late_chunking/models.py                        62      0   100%
rag_factory/strategies/late_chunking/strategy.py                      70     46    34%   48-69, 77, 88, 107-122, 140-177, 196-205, 210, 215
rag_factory/strategies/multi_query/__init__.py                         7      7     0%   8-19
rag_factory/strategies/multi_query/config.py                          36     36     0%   3-138
rag_factory/strategies/multi_query/deduplicator.py                    87     87     0%   3-197
rag_factory/strategies/multi_query/parallel_executor.py               52     52     0%   3-163
rag_factory/strategies/multi_query/prompts.py                         10     10     0%   3-84
rag_factory/strategies/multi_query/ranker.py                          80     80     0%   3-201
rag_factory/strategies/multi_query/strategy.py                        68     68     0%   3-184
rag_factory/strategies/multi_query/variant_generator.py               62     62     0%   3-187
rag_factory/strategies/query_expansion/__init__.py                     8      0   100%
rag_factory/strategies/query_expansion/base.py                        66     10    85%   90, 103, 114-118, 130-133
rag_factory/strategies/query_expansion/cache.py                       52     40    23%   20-22, 38-55, 64-66, 70-73, 81-97, 105-112
rag_factory/strategies/query_expansion/expander_service.py            92     71    23%   36-40, 55-58, 75-148, 159-180, 204-215, 233-234, 242-246, 254, 265-273, 283-284
rag_factory/strategies/query_expansion/hyde_expander.py               19     12    37%   25-27, 41-65
rag_factory/strategies/query_expansion/llm_expander.py                25     16    36%   23-25, 39-71, 99
rag_factory/strategies/query_expansion/metrics.py                     66     30    55%   44-45, 53-57, 76-109, 130, 134, 146-152, 160
rag_factory/strategies/query_expansion/prompts.py                     13      7    46%   16, 28-56, 68-107
rag_factory/strategies/reranking/__init__.py                           7      0   100%
rag_factory/strategies/reranking/base.py                              68     16    76%   81, 101, 106, 110-119, 123-130
rag_factory/strategies/reranking/bge_reranker.py                      51     37    27%   14, 53-81, 103-147, 151
rag_factory/strategies/reranking/cache.py                             48     34    29%   32-34, 51-66, 76-77, 81, 90-101, 110-113, 121, 136-138
rag_factory/strategies/reranking/cohere_reranker.py                   34     20    41%   15-16, 55-71, 94-115, 119
rag_factory/strategies/reranking/cosine_reranker.py                   62     47    24%   54-72, 97-139, 158-171, 188, 209-215, 227-230, 242-245, 249
rag_factory/strategies/reranking/cross_encoder_reranker.py            40     27    32%   13-14, 53-76, 98-120, 124
rag_factory/strategies/reranking/metrics.py                           67     67     0%   8-264
rag_factory/strategies/reranking/reranker_service.py                 115     88    23%   56-67, 71-96, 113-225, 235-255, 269, 282-283, 287-292, 296-300, 308-310
rag_factory/strategies/retrieval/__init__.py                           6      0   100%
rag_factory/strategies/retrieval/hybrid_retriever.py                  51     37    27%   32, 39, 51-102, 110-144
rag_factory/strategies/retrieval/keyword_retriever.py                 56     41    27%   41, 52, 71-113, 126-133, 153-172
rag_factory/strategies/retrieval/knowledge_graph_retriever.py         22      9    59%   19, 27, 48-70
rag_factory/strategies/retrieval/multi_query_retriever.py             22      9    59%   19, 26, 44-66
rag_factory/strategies/retrieval/query_expansion_retriever.py         24      9    62%   20, 27, 45-67
rag_factory/strategies/retrieval/semantic_retriever.py                23     12    48%   23, 32, 61-94
rag_factory/strategies/self_reflective/__init__.py                     6      0   100%
rag_factory/strategies/self_reflective/config.py                      20      8    60%   29-42
rag_factory/strategies/self_reflective/grader.py                      80     65    19%   29-35, 51-67, 83-109, 135-171, 187-258, 266
rag_factory/strategies/self_reflective/models.py                      48      0   100%
rag_factory/strategies/self_reflective/refiner.py                     69     56    19%   28-30, 53-96, 113-143, 161-193, 208-228
rag_factory/strategies/self_reflective/strategy.py                    92     74    20%   38-53, 71-181, 192-206, 229-259, 264, 269
rag_factory/utils/__init__.py                                          3      0   100%
rag_factory/utils/token_counter.py                                    45     30    33%   36-40, 52-62, 74-82, 86, 90, 105-106, 124-135, 153-158
rag_factory/utils/tokenization.py                                     95     73    23%   36-40, 53-64, 87-114, 126-129, 141-144, 156, 175-190, 209-228, 241-243, 251-252, 270-271, 292-293, 314-315
------------------------------------------------------------------------------------------------
TOTAL                                                              13429  10965    18%
============================= 8 warnings in 4.18s ==============================

[69/206] PASSED: tests/unit/cli/test_benchmark_command.py
  Tests: 5 (P:5 F:0 S:0)
[70/206] PASSED: tests/unit/cli/test_check_consistency_command.py
  Tests: 11 (P:11 F:0 S:0)
[71/206] PASSED: tests/unit/cli/test_config_validation_command.py
  Tests: 6 (P:6 F:0 S:0)
[72/206] PASSED: tests/unit/cli/test_consistency_formatter.py
  Tests: 10 (P:10 F:0 S:0)
[73/206] PASSED: tests/unit/cli/test_formatters.py
  Tests: 19 (P:19 F:0 S:0)
[74/206] PASSED: tests/unit/cli/test_index_command.py
  Tests: 5 (P:5 F:0 S:0)
[75/206] PASSED: tests/unit/cli/test_list_strategies_command.py
  Tests: 5 (P:5 F:0 S:0)
[76/206] PASSED: tests/unit/cli/test_query_command.py
  Tests: 5 (P:5 F:0 S:0)
[77/206] PASSED: tests/unit/cli/test_repl_command.py
  Tests: 4 (P:4 F:0 S:0)
[78/206] PASSED: tests/unit/cli/test_validate_pipeline_command.py
  Tests: 8 (P:8 F:0 S:0)
[79/206] PASSED: tests/unit/cli/test_validation_formatter.py
  Tests: 14 (P:14 F:0 S:0)
[80/206] PASSED: tests/unit/cli/test_validation.py
  Tests: 17 (P:17 F:0 S:0)
[81/206] PASSED: tests/unit/config/test_env_resolver.py
  Tests: 24 (P:24 F:0 S:0)
[82/206] PASSED: tests/unit/config/test_env_validator.py
  Tests: 19 (P:19 F:0 S:0)
[83/206] PASSED: tests/unit/config/test_schemas.py
  Tests: 18 (P:18 F:0 S:0)
[84/206] PASSED: tests/unit/config/test_strategy_loader.py
  Tests: 6 (P:6 F:0 S:0)
[85/206] PASSED: tests/unit/config/test_strategy_pair_manager.py
  Tests: 4 (P:4 F:0 S:0)
[86/206] PASSED: tests/unit/config/test_validator.py
  Tests: 23 (P:23 F:0 S:0)
[87/206] PASSED: tests/unit/core/test_capabilities.py
  Tests: 19 (P:19 F:0 S:0)
[88/206] PASSED: tests/unit/core/test_factory_validation.py
  Tests: 7 (P:7 F:0 S:0)
[89/206] PASSED: tests/unit/core/test_indexing_interface.py
  Tests: 27 (P:27 F:0 S:0)
[90/206] PASSED: tests/unit/core/test_pipeline.py
  Tests: 9 (P:9 F:0 S:0)
[91/206] PASSED: tests/unit/core/test_retrieval_interface.py
  Tests: 14 (P:14 F:0 S:0)
[92/206] PASSED: tests/unit/database/test_batch_operations.py
  Tests: 2 (P:2 F:0 S:0)
[93/206] PASSED: tests/unit/database/test_connection.py
  Tests: 14 (P:14 F:0 S:0)
[94/206] FAILED: tests/unit/database/test_migrations.py
  Tests: 13 (P:1 F:12 S:0)
----------------------------------------
============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.1, pluggy-1.6.0 -- /mnt/MCPProyects/ragTools/venv/bin/python3
cachedir: .pytest_cache
rootdir: /mnt/MCPProyects/ragTools
configfile: pytest.ini (WARNING: ignoring pytest config in pyproject.toml!)
plugins: anyio-4.12.0, cov-7.0.0, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 7 items

tests/unit/database/test_migrations.py::TestAlembicMigrations::test_migration_upgrade_to_head FAILED [ 14%]
tests/unit/database/test_migrations.py::TestAlembicMigrations::test_migration_downgrade FAILED [ 28%]
tests/unit/database/test_migrations.py::TestAlembicMigrations::test_migration_history PASSED [ 42%]
tests/unit/database/test_migrations.py::TestAlembicMigrations::test_migration_idempotency FAILED [ 57%]
tests/unit/database/test_migrations.py::TestAlembicMigrations::test_get_current_version FAILED [ 71%]
tests/unit/database/test_migrations.py::TestAlembicMigrations::test_migration_creates_tables FAILED [ 85%]
tests/unit/database/test_migrations.py::TestAlembicMigrations::test_migration_creates_indexes FAILED [100%]

=================================== FAILURES ===================================
_____________ TestAlembicMigrations.test_migration_upgrade_to_head _____________
venv/lib/python3.12/site-packages/alembic/script/base.py:251: in _catch_revision_errors
    yield
venv/lib/python3.12/site-packages/alembic/script/base.py:459: in _upgrade_revs
    for script in reversed(list(revs))
                           ^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:813: in iterate_revisions
    revisions, heads = fn(
venv/lib/python3.12/site-packages/alembic/script/revision.py:1438: in _collect_upgrade_revisions
    for rev in self._parse_upgrade_target(
venv/lib/python3.12/site-packages/alembic/script/revision.py:1229: in _parse_upgrade_target
    return self.get_revisions(target)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:545: in get_revisions
    resolved_id, branch_label = self._resolve_revision_number(id_)
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:777: in _resolve_revision_number
    current_head = self.get_current_head(branch_label)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:509: in get_current_head
    raise MultipleHeads(
E   alembic.script.revision.MultipleHeads: Multiple heads are present for given argument 'head'; context_aware_schema, contextual_schema, finetuned_schema, hierarchical_schema, keyword_schema, knowledge_graph_schema, late_chunking_schema, multi_query_schema, query_expansion_schema, reranking_schema, self_reflective_schema, semantic_api_schema

The above exception was the direct cause of the following exception:
tests/unit/database/test_migrations.py:42: in test_migration_upgrade_to_head
    command.upgrade(alembic_config, "head")
venv/lib/python3.12/site-packages/alembic/command.py:403: in upgrade
    script.run_env()
venv/lib/python3.12/site-packages/alembic/script/base.py:583: in run_env
    util.load_python_file(self.dir, "env.py")
venv/lib/python3.12/site-packages/alembic/util/pyfiles.py:95: in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/util/pyfiles.py:113: in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap_external>:995: in exec_module
    ???
<frozen importlib._bootstrap>:488: in _call_with_frames_removed
    ???
migrations/env.py:93: in <module>
    run_migrations_online()
migrations/env.py:87: in run_migrations_online
    context.run_migrations()
<string>:8: in run_migrations
    ???
venv/lib/python3.12/site-packages/alembic/runtime/environment.py:948: in run_migrations
    self.get_context().run_migrations(**kw)
venv/lib/python3.12/site-packages/alembic/runtime/migration.py:615: in run_migrations
    for step in self._migrations_fn(heads, self):
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/command.py:392: in upgrade
    return script._upgrade_revs(revision, rev)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/base.py:447: in _upgrade_revs
    with self._catch_revision_errors(
/usr/lib/python3.12/contextlib.py:158: in __exit__
    self.gen.throw(value)
venv/lib/python3.12/site-packages/alembic/script/base.py:277: in _catch_revision_errors
    raise util.CommandError(multiple_heads) from mh
E   alembic.util.exc.CommandError: Multiple head revisions are present for given argument 'head'; please specify a specific target revision, '<branchname>@head' to narrow to a specific head, or 'heads' for all heads
----------------------------- Captured stderr call -----------------------------
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
________________ TestAlembicMigrations.test_migration_downgrade ________________
venv/lib/python3.12/site-packages/alembic/script/base.py:251: in _catch_revision_errors
    yield
venv/lib/python3.12/site-packages/alembic/script/base.py:459: in _upgrade_revs
    for script in reversed(list(revs))
                           ^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:813: in iterate_revisions
    revisions, heads = fn(
venv/lib/python3.12/site-packages/alembic/script/revision.py:1438: in _collect_upgrade_revisions
    for rev in self._parse_upgrade_target(
venv/lib/python3.12/site-packages/alembic/script/revision.py:1229: in _parse_upgrade_target
    return self.get_revisions(target)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:545: in get_revisions
    resolved_id, branch_label = self._resolve_revision_number(id_)
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:777: in _resolve_revision_number
    current_head = self.get_current_head(branch_label)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:509: in get_current_head
    raise MultipleHeads(
E   alembic.script.revision.MultipleHeads: Multiple heads are present for given argument 'head'; context_aware_schema, contextual_schema, finetuned_schema, hierarchical_schema, keyword_schema, knowledge_graph_schema, late_chunking_schema, multi_query_schema, query_expansion_schema, reranking_schema, self_reflective_schema, semantic_api_schema

The above exception was the direct cause of the following exception:
tests/unit/database/test_migrations.py:63: in test_migration_downgrade
    command.upgrade(alembic_config, "head")
venv/lib/python3.12/site-packages/alembic/command.py:403: in upgrade
    script.run_env()
venv/lib/python3.12/site-packages/alembic/script/base.py:583: in run_env
    util.load_python_file(self.dir, "env.py")
venv/lib/python3.12/site-packages/alembic/util/pyfiles.py:95: in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/util/pyfiles.py:113: in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap_external>:995: in exec_module
    ???
<frozen importlib._bootstrap>:488: in _call_with_frames_removed
    ???
migrations/env.py:93: in <module>
    run_migrations_online()
migrations/env.py:87: in run_migrations_online
    context.run_migrations()
<string>:8: in run_migrations
    ???
venv/lib/python3.12/site-packages/alembic/runtime/environment.py:948: in run_migrations
    self.get_context().run_migrations(**kw)
venv/lib/python3.12/site-packages/alembic/runtime/migration.py:615: in run_migrations
    for step in self._migrations_fn(heads, self):
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/command.py:392: in upgrade
    return script._upgrade_revs(revision, rev)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/base.py:447: in _upgrade_revs
    with self._catch_revision_errors(
/usr/lib/python3.12/contextlib.py:158: in __exit__
    self.gen.throw(value)
venv/lib/python3.12/site-packages/alembic/script/base.py:277: in _catch_revision_errors
    raise util.CommandError(multiple_heads) from mh
E   alembic.util.exc.CommandError: Multiple head revisions are present for given argument 'head'; please specify a specific target revision, '<branchname>@head' to narrow to a specific head, or 'heads' for all heads
----------------------------- Captured stderr call -----------------------------
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
_______________ TestAlembicMigrations.test_migration_idempotency _______________
venv/lib/python3.12/site-packages/alembic/script/base.py:251: in _catch_revision_errors
    yield
venv/lib/python3.12/site-packages/alembic/script/base.py:459: in _upgrade_revs
    for script in reversed(list(revs))
                           ^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:813: in iterate_revisions
    revisions, heads = fn(
venv/lib/python3.12/site-packages/alembic/script/revision.py:1438: in _collect_upgrade_revisions
    for rev in self._parse_upgrade_target(
venv/lib/python3.12/site-packages/alembic/script/revision.py:1229: in _parse_upgrade_target
    return self.get_revisions(target)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:545: in get_revisions
    resolved_id, branch_label = self._resolve_revision_number(id_)
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:777: in _resolve_revision_number
    current_head = self.get_current_head(branch_label)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:509: in get_current_head
    raise MultipleHeads(
E   alembic.script.revision.MultipleHeads: Multiple heads are present for given argument 'head'; context_aware_schema, contextual_schema, finetuned_schema, hierarchical_schema, keyword_schema, knowledge_graph_schema, late_chunking_schema, multi_query_schema, query_expansion_schema, reranking_schema, self_reflective_schema, semantic_api_schema

The above exception was the direct cause of the following exception:
tests/unit/database/test_migrations.py:105: in test_migration_idempotency
    command.upgrade(alembic_config, "head")
venv/lib/python3.12/site-packages/alembic/command.py:403: in upgrade
    script.run_env()
venv/lib/python3.12/site-packages/alembic/script/base.py:583: in run_env
    util.load_python_file(self.dir, "env.py")
venv/lib/python3.12/site-packages/alembic/util/pyfiles.py:95: in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/util/pyfiles.py:113: in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap_external>:995: in exec_module
    ???
<frozen importlib._bootstrap>:488: in _call_with_frames_removed
    ???
migrations/env.py:93: in <module>
    run_migrations_online()
migrations/env.py:87: in run_migrations_online
    context.run_migrations()
<string>:8: in run_migrations
    ???
venv/lib/python3.12/site-packages/alembic/runtime/environment.py:948: in run_migrations
    self.get_context().run_migrations(**kw)
venv/lib/python3.12/site-packages/alembic/runtime/migration.py:615: in run_migrations
    for step in self._migrations_fn(heads, self):
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/command.py:392: in upgrade
    return script._upgrade_revs(revision, rev)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/base.py:447: in _upgrade_revs
    with self._catch_revision_errors(
/usr/lib/python3.12/contextlib.py:158: in __exit__
    self.gen.throw(value)
venv/lib/python3.12/site-packages/alembic/script/base.py:277: in _catch_revision_errors
    raise util.CommandError(multiple_heads) from mh
E   alembic.util.exc.CommandError: Multiple head revisions are present for given argument 'head'; please specify a specific target revision, '<branchname>@head' to narrow to a specific head, or 'heads' for all heads
----------------------------- Captured stderr call -----------------------------
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
________________ TestAlembicMigrations.test_get_current_version ________________
venv/lib/python3.12/site-packages/alembic/script/base.py:251: in _catch_revision_errors
    yield
venv/lib/python3.12/site-packages/alembic/script/base.py:459: in _upgrade_revs
    for script in reversed(list(revs))
                           ^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:813: in iterate_revisions
    revisions, heads = fn(
venv/lib/python3.12/site-packages/alembic/script/revision.py:1438: in _collect_upgrade_revisions
    for rev in self._parse_upgrade_target(
venv/lib/python3.12/site-packages/alembic/script/revision.py:1229: in _parse_upgrade_target
    return self.get_revisions(target)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:545: in get_revisions
    resolved_id, branch_label = self._resolve_revision_number(id_)
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:777: in _resolve_revision_number
    current_head = self.get_current_head(branch_label)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:509: in get_current_head
    raise MultipleHeads(
E   alembic.script.revision.MultipleHeads: Multiple heads are present for given argument 'head'; context_aware_schema, contextual_schema, finetuned_schema, hierarchical_schema, keyword_schema, knowledge_graph_schema, late_chunking_schema, multi_query_schema, query_expansion_schema, reranking_schema, self_reflective_schema, semantic_api_schema

The above exception was the direct cause of the following exception:
tests/unit/database/test_migrations.py:132: in test_get_current_version
    command.upgrade(alembic_config, "head")
venv/lib/python3.12/site-packages/alembic/command.py:403: in upgrade
    script.run_env()
venv/lib/python3.12/site-packages/alembic/script/base.py:583: in run_env
    util.load_python_file(self.dir, "env.py")
venv/lib/python3.12/site-packages/alembic/util/pyfiles.py:95: in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/util/pyfiles.py:113: in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap_external>:995: in exec_module
    ???
<frozen importlib._bootstrap>:488: in _call_with_frames_removed
    ???
migrations/env.py:93: in <module>
    run_migrations_online()
migrations/env.py:87: in run_migrations_online
    context.run_migrations()
<string>:8: in run_migrations
    ???
venv/lib/python3.12/site-packages/alembic/runtime/environment.py:948: in run_migrations
    self.get_context().run_migrations(**kw)
venv/lib/python3.12/site-packages/alembic/runtime/migration.py:615: in run_migrations
    for step in self._migrations_fn(heads, self):
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/command.py:392: in upgrade
    return script._upgrade_revs(revision, rev)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/base.py:447: in _upgrade_revs
    with self._catch_revision_errors(
/usr/lib/python3.12/contextlib.py:158: in __exit__
    self.gen.throw(value)
venv/lib/python3.12/site-packages/alembic/script/base.py:277: in _catch_revision_errors
    raise util.CommandError(multiple_heads) from mh
E   alembic.util.exc.CommandError: Multiple head revisions are present for given argument 'head'; please specify a specific target revision, '<branchname>@head' to narrow to a specific head, or 'heads' for all heads
----------------------------- Captured stderr call -----------------------------
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
_____________ TestAlembicMigrations.test_migration_creates_tables ______________
venv/lib/python3.12/site-packages/alembic/script/base.py:251: in _catch_revision_errors
    yield
venv/lib/python3.12/site-packages/alembic/script/base.py:459: in _upgrade_revs
    for script in reversed(list(revs))
                           ^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:813: in iterate_revisions
    revisions, heads = fn(
venv/lib/python3.12/site-packages/alembic/script/revision.py:1438: in _collect_upgrade_revisions
    for rev in self._parse_upgrade_target(
venv/lib/python3.12/site-packages/alembic/script/revision.py:1229: in _parse_upgrade_target
    return self.get_revisions(target)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:545: in get_revisions
    resolved_id, branch_label = self._resolve_revision_number(id_)
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:777: in _resolve_revision_number
    current_head = self.get_current_head(branch_label)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:509: in get_current_head
    raise MultipleHeads(
E   alembic.script.revision.MultipleHeads: Multiple heads are present for given argument 'head'; context_aware_schema, contextual_schema, finetuned_schema, hierarchical_schema, keyword_schema, knowledge_graph_schema, late_chunking_schema, multi_query_schema, query_expansion_schema, reranking_schema, self_reflective_schema, semantic_api_schema

The above exception was the direct cause of the following exception:
tests/unit/database/test_migrations.py:150: in test_migration_creates_tables
    command.upgrade(alembic_config, "head")
venv/lib/python3.12/site-packages/alembic/command.py:403: in upgrade
    script.run_env()
venv/lib/python3.12/site-packages/alembic/script/base.py:583: in run_env
    util.load_python_file(self.dir, "env.py")
venv/lib/python3.12/site-packages/alembic/util/pyfiles.py:95: in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/util/pyfiles.py:113: in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap_external>:995: in exec_module
    ???
<frozen importlib._bootstrap>:488: in _call_with_frames_removed
    ???
migrations/env.py:93: in <module>
    run_migrations_online()
migrations/env.py:87: in run_migrations_online
    context.run_migrations()
<string>:8: in run_migrations
    ???
venv/lib/python3.12/site-packages/alembic/runtime/environment.py:948: in run_migrations
    self.get_context().run_migrations(**kw)
venv/lib/python3.12/site-packages/alembic/runtime/migration.py:615: in run_migrations
    for step in self._migrations_fn(heads, self):
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/command.py:392: in upgrade
    return script._upgrade_revs(revision, rev)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/base.py:447: in _upgrade_revs
    with self._catch_revision_errors(
/usr/lib/python3.12/contextlib.py:158: in __exit__
    self.gen.throw(value)
venv/lib/python3.12/site-packages/alembic/script/base.py:277: in _catch_revision_errors
    raise util.CommandError(multiple_heads) from mh
E   alembic.util.exc.CommandError: Multiple head revisions are present for given argument 'head'; please specify a specific target revision, '<branchname>@head' to narrow to a specific head, or 'heads' for all heads
----------------------------- Captured stderr call -----------------------------
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
_____________ TestAlembicMigrations.test_migration_creates_indexes _____________
venv/lib/python3.12/site-packages/alembic/script/base.py:251: in _catch_revision_errors
    yield
venv/lib/python3.12/site-packages/alembic/script/base.py:459: in _upgrade_revs
    for script in reversed(list(revs))
                           ^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:813: in iterate_revisions
    revisions, heads = fn(
venv/lib/python3.12/site-packages/alembic/script/revision.py:1438: in _collect_upgrade_revisions
    for rev in self._parse_upgrade_target(
venv/lib/python3.12/site-packages/alembic/script/revision.py:1229: in _parse_upgrade_target
    return self.get_revisions(target)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:545: in get_revisions
    resolved_id, branch_label = self._resolve_revision_number(id_)
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:777: in _resolve_revision_number
    current_head = self.get_current_head(branch_label)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/revision.py:509: in get_current_head
    raise MultipleHeads(
E   alembic.script.revision.MultipleHeads: Multiple heads are present for given argument 'head'; context_aware_schema, contextual_schema, finetuned_schema, hierarchical_schema, keyword_schema, knowledge_graph_schema, late_chunking_schema, multi_query_schema, query_expansion_schema, reranking_schema, self_reflective_schema, semantic_api_schema

The above exception was the direct cause of the following exception:
tests/unit/database/test_migrations.py:170: in test_migration_creates_indexes
    command.upgrade(alembic_config, "head")
venv/lib/python3.12/site-packages/alembic/command.py:403: in upgrade
    script.run_env()
venv/lib/python3.12/site-packages/alembic/script/base.py:583: in run_env
    util.load_python_file(self.dir, "env.py")
venv/lib/python3.12/site-packages/alembic/util/pyfiles.py:95: in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/util/pyfiles.py:113: in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap_external>:995: in exec_module
    ???
<frozen importlib._bootstrap>:488: in _call_with_frames_removed
    ???
migrations/env.py:93: in <module>
    run_migrations_online()
migrations/env.py:87: in run_migrations_online
    context.run_migrations()
<string>:8: in run_migrations
    ???
venv/lib/python3.12/site-packages/alembic/runtime/environment.py:948: in run_migrations
    self.get_context().run_migrations(**kw)
venv/lib/python3.12/site-packages/alembic/runtime/migration.py:615: in run_migrations
    for step in self._migrations_fn(heads, self):
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/command.py:392: in upgrade
    return script._upgrade_revs(revision, rev)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/alembic/script/base.py:447: in _upgrade_revs
    with self._catch_revision_errors(
/usr/lib/python3.12/contextlib.py:158: in __exit__
    self.gen.throw(value)
venv/lib/python3.12/site-packages/alembic/script/base.py:277: in _catch_revision_errors
    raise util.CommandError(multiple_heads) from mh
E   alembic.util.exc.CommandError: Multiple head revisions are present for given argument 'head'; please specify a specific target revision, '<branchname>@head' to narrow to a specific head, or 'heads' for all heads
----------------------------- Captured stderr call -----------------------------
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
=============================== warnings summary ===============================
rag_factory/services/llm/config.py:8
  /mnt/MCPProyects/ragTools/rag_factory/services/llm/config.py:8: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class LLMServiceConfig(BaseModel):

rag_factory/database/config.py:12
  /mnt/MCPProyects/ragTools/rag_factory/database/config.py:12: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DatabaseConfig(BaseSettings):

rag_factory/strategies/agentic/config.py:9
  /mnt/MCPProyects/ragTools/rag_factory/strategies/agentic/config.py:9: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class AgenticStrategyConfig(BaseModel):

rag_factory/strategies/late_chunking/models.py:21
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:21: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class TokenEmbedding(BaseModel):

rag_factory/strategies/late_chunking/models.py:34
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:34: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DocumentEmbedding(BaseModel):

rag_factory/strategies/late_chunking/models.py:49
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:49: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class EmbeddingChunk(BaseModel):

rag_factory/strategies/contextual/config.py:31
  /mnt/MCPProyects/ragTools/rag_factory/strategies/contextual/config.py:31: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ContextualRetrievalConfig(BaseModel):

rag_factory/strategies/fine_tuned/config.py:6
  /mnt/MCPProyects/ragTools/rag_factory/strategies/fine_tuned/config.py:6: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class FineTunedConfig(BaseSettings):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.3-final-0 ________________

Name                                                               Stmts   Miss  Cover   Missing
------------------------------------------------------------------------------------------------
rag_factory/__init__.py                                                7      2    71%   18-19
rag_factory/__version__.py                                             1      0   100%
rag_factory/cli/__init__.py                                            2      0   100%
rag_factory/cli/commands/__init__.py                                   1      0   100%
rag_factory/cli/commands/benchmark.py                                 96     81    16%   40-53, 64-84, 148-263
rag_factory/cli/commands/check_consistency.py                         43     33    23%   64-120
rag_factory/cli/commands/config.py                                    78     68    13%   26-64, 102-188
rag_factory/cli/commands/gui.py                                       25     17    32%   61-91
rag_factory/cli/commands/index.py                                     65     52    20%   29-39, 93-185
rag_factory/cli/commands/query.py                                     47     36    23%   73-149
rag_factory/cli/commands/repl.py                                     152    130    14%   29-56, 63-108, 112-120, 124-133, 137-155, 159-172, 176-186, 190-207, 211-220, 253-260
rag_factory/cli/commands/strategies.py                                45     36    20%   48-120
rag_factory/cli/commands/validate_e2e.py                              91     69    24%   37-38, 42-142, 145-156
rag_factory/cli/commands/validate_pipeline.py                         70     57    19%   57-156
rag_factory/cli/formatters/__init__.py                                 4      0   100%
rag_factory/cli/formatters/consistency.py                             61     55    10%   21-69, 79-103, 108-138
rag_factory/cli/formatters/output.py                                  20      9    55%   23-24, 43-44, 63-64, 74, 79, 84
rag_factory/cli/formatters/results.py                                 71     62    13%   28-55, 72-99, 116-144, 157-181
rag_factory/cli/formatters/validation.py                              63     53    16%   25-43, 48-56, 65-77, 86-98, 103-129, 134-137
rag_factory/cli/main.py                                               32     10    69%   25-28, 48-49, 79-81, 85
rag_factory/cli/utils/__init__.py                                      3      0   100%
rag_factory/cli/utils/progress.py                                     14      8    43%   34-47, 73-76
rag_factory/cli/utils/validation.py                                   53     42    21%   30-41, 57-77, 93-118, 135
rag_factory/config/__init__.py                                         4      0   100%
rag_factory/config/env_resolver.py                                    52     37    29%   47-54, 70-90, 110, 129-147
rag_factory/config/schemas/__init__.py                                 2      0   100%
rag_factory/config/schemas/version.py                                 10      6    40%   29-38
rag_factory/config/strategy_loader.py                                 54     36    33%   32-41, 45-60, 75-89, 101-104
rag_factory/config/strategy_pair_manager.py                          105     83    21%   40-72, 92-132, 148-198, 210-215, 229, 259-282
rag_factory/config/validator.py                                       93     76    18%   27-30, 34-39, 53-58, 62-74, 111-132, 177-198, 215-235, 247-249, 271-295, 333-354
rag_factory/core/__init__.py                                           4      4     0%   7-23
rag_factory/core/capabilities.py                                      61     16    74%   129, 155, 173-174, 239-253
rag_factory/core/indexing_interface.py                                54     35    35%   55-57, 118-123, 144, 164, 208, 260, 272, 292-313, 341-364
rag_factory/core/pipeline.py                                          49     35    29%   22-24, 33-40, 55-77, 95-96, 105-108, 117-120, 137-146
rag_factory/core/retrieval_interface.py                               38     20    47%   56-58, 112-117, 138, 158, 196, 247, 259, 285-309
rag_factory/database/__init__.py                                       4      0   100%
rag_factory/database/config.py                                        17      0   100%
rag_factory/database/connection.py                                    80     54    32%   40-48, 61-86, 96, 107, 126-137, 150-157, 165-170, 178-183, 196-197, 209-214, 218, 222
rag_factory/database/env_validator.py                                 38     18    53%   46-54, 66-77, 86-88, 118, 126, 139
rag_factory/database/models.py                                        85     32    62%   31-34, 37-45, 48-54, 66-69, 72-77, 80-85, 181, 323-325
rag_factory/database/vector_indexing.py                               38     38     0%   7-114
rag_factory/evaluation/__init__.py                                     4      4     0%   29-41
rag_factory/evaluation/analysis/__init__.py                            3      3     0%   8-11
rag_factory/evaluation/analysis/comparison.py                        135    135     0%   8-323
rag_factory/evaluation/analysis/statistics.py                         81     81     0%   8-320
rag_factory/evaluation/benchmarks/__init__.py                          3      3     0%   8-14
rag_factory/evaluation/benchmarks/config.py                           25     25     0%   7-64
rag_factory/evaluation/benchmarks/runner.py                          155    155     0%   8-423
rag_factory/evaluation/datasets/__init__.py                            3      3     0%   8-14
rag_factory/evaluation/datasets/loader.py                             88     88     0%   8-281
rag_factory/evaluation/datasets/schema.py                             52     52     0%   8-160
rag_factory/evaluation/datasets/statistics.py                         65     65     0%   8-226
rag_factory/evaluation/exporters/__init__.py                           4      4     0%   8-12
rag_factory/evaluation/exporters/csv_exporter.py                      52     52     0%   3-124
rag_factory/evaluation/exporters/html_exporter.py                     47     47     0%   3-293
rag_factory/evaluation/exporters/json_exporter.py                     19     19     0%   3-68
rag_factory/evaluation/metrics/__init__.py                             3      3     0%   12-25
rag_factory/evaluation/metrics/base.py                                31     31     0%   8-115
rag_factory/evaluation/metrics/cost.py                                65     65     0%   8-313
rag_factory/evaluation/metrics/performance.py                         42     42     0%   8-202
rag_factory/evaluation/metrics/quality.py                             84     84     0%   8-377
rag_factory/evaluation/metrics/retrieval.py                           77     77     0%   9-401
rag_factory/exceptions.py                                             13      0   100%
rag_factory/factory.py                                               187    137    27%   109-116, 144, 165-170, 202-230, 256-270, 300-324, 347-348, 365, 384, 401, 418, 435, 451-460, 480-502, 528-545, 568-611, 644-699, 703-715
rag_factory/gui/__init__.py                                            2      0   100%
rag_factory/gui/components/__init__.py                                 3      0   100%
rag_factory/gui/components/scrolled_text.py                           64     52    19%   53-62, 80-114, 122, 131-142, 151-164, 168, 176, 184-199
rag_factory/gui/components/status_bar.py                              62     49    21%   40-59, 64-113, 122-137, 146-152, 161, 168, 172-184, 192-196
rag_factory/gui/main_window.py                                       701    640     9%   64-109, 113-128, 137-164, 168-194, 205-263, 268-293, 297-321, 330-390, 398-422, 435-469, 482-500, 513-551, 564-602, 615-673, 686-690, 694-732, 736-738, 746-789, 806-817, 826-858, 862-879, 885-895, 899-970, 974-1062, 1072-1074, 1082-1084, 1088-1164, 1177-1234, 1244-1246, 1254-1258, 1262-1319, 1324-1371, 1375-1394, 1398, 1411-1487, 1491-1549, 1554-1571, 1575-1582, 1587-1600, 1605-1614, 1618
rag_factory/gui/utils/__init__.py                                      3      0   100%
rag_factory/gui/utils/formatters.py                                   57     49    14%   27-30, 50-90, 110-118, 134-137, 155-165
rag_factory/gui/utils/threading.py                                    32     25    22%   44-73, 96-99, 124-129
rag_factory/legacy_config.py                                         155    155     0%   22-542
rag_factory/models/__init__.py                                         6      6     0%   3-14
rag_factory/models/embedding/__init__.py                               4      4     0%   3-12
rag_factory/models/embedding/loader.py                               179    179     0%   3-367
rag_factory/models/embedding/models.py                                47     47     0%   3-106
rag_factory/models/embedding/registry.py                             128    128     0%   3-282
rag_factory/models/evaluation/__init__.py                              3      3     0%   3-6
rag_factory/models/evaluation/ab_testing.py                           98     98     0%   3-281
rag_factory/models/evaluation/models.py                               29     29     0%   3-74
rag_factory/observability/__init__.py                                  3      3     0%   3-10
rag_factory/observability/integrations/__init__.py                     1      1     0%   3
rag_factory/observability/integrations/prometheus.py                  47     47     0%   3-229
rag_factory/observability/logging/__init__.py                          2      2     0%   3-5
rag_factory/observability/logging/config.py                           16     16     0%   3-37
rag_factory/observability/logging/filters.py                          41     41     0%   3-103
rag_factory/observability/logging/logger.py                           86     86     0%   3-396
rag_factory/observability/metrics/__init__.py                          2      2     0%   3-9
rag_factory/observability/metrics/collector.py                       143    143     0%   3-459
rag_factory/observability/metrics/cost.py                             39     39     0%   3-221
rag_factory/observability/metrics/performance.py                      64     64     0%   3-196
rag_factory/observability/monitoring/__init__.py                       1      1     0%   3
rag_factory/observability/monitoring/api.py                          101    101     0%   3-328
rag_factory/pipeline.py                                              156    156     0%   34-507
rag_factory/registry/__init__.py                                       4      0   100%
rag_factory/registry/exceptions.py                                     6      0   100%
rag_factory/registry/service_factory.py                               84     69    18%   45-54, 62-65, 70-73, 78-80, 84-86, 95-127, 136-165, 176-215, 229-255
rag_factory/registry/service_registry.py                              91     71    22%   43-51, 55-85, 103-156, 164, 178-203, 210-223, 227, 231-232
rag_factory/repositories/__init__.py                                   5      0   100%
rag_factory/repositories/base.py                                      42     21    50%   38, 53, 70, 87, 103, 114-118, 125, 136-139, 159-164
rag_factory/repositories/chunk.py                                    206    180    13%   40-45, 68-76, 90-95, 120-133, 155-171, 187-202, 221-231, 250-261, 287-328, 355-396, 422-474, 489-499, 513-521, 537-543, 557-563, 577-587, 604-626, 639-670
rag_factory/repositories/document.py                                  93     74    20%   41-46, 63-68, 98-118, 140-156, 172-187, 206, 223-233, 247-255, 272-279, 290-293, 307-312
rag_factory/repositories/exceptions.py                                18      7    61%   34-36, 56-59
rag_factory/services/__init__.py                                       4      0   100%
rag_factory/services/api/__init__.py                                   4      4     0%   7-11
rag_factory/services/api/anthropic.py                                 27     27     0%   7-141
rag_factory/services/api/cohere.py                                    30     30     0%   7-113
rag_factory/services/api/openai.py                                    46     46     0%   7-235
rag_factory/services/consistency.py                                   32     24    25%   80-113, 144-170
rag_factory/services/database/__init__.py                              5      0   100%
rag_factory/services/database/database_context.py                    181    159    12%   58-64, 88-106, 123, 140-150, 179-200, 223-240, 256-266, 305-330, 338-339, 343-406, 414-415, 430-510, 516-517, 521-546
rag_factory/services/database/migration_validator.py                  96     74    23%   29-30, 61-69, 81-88, 109-131, 148-152, 163-192, 204-219, 230-237, 249, 261-271, 283-286
rag_factory/services/database/neo4j.py                                54     38    30%   15-17, 60-71, 79-84, 103-114, 134-150, 172-181, 188-191, 195, 199
rag_factory/services/database/postgres.py                            195    163    16%   17-18, 26-27, 84-121, 131-145, 149-201, 214-269, 292-346, 360-375, 390-414, 425-440, 472-490, 504-527, 532, 543, 580-598, 607-619, 623, 627
rag_factory/services/dependencies.py                                  41     21    49%   96-109, 134-140, 176-180
rag_factory/services/embedding/__init__.py                             4      0   100%
rag_factory/services/embedding/base.py                                31      6    81%   44, 59, 68, 77, 86, 98
rag_factory/services/embedding/cache.py                               43     33    23%   26-32, 43-58, 67-76, 80-82, 90-94
rag_factory/services/embedding/config.py                              29     13    55%   37-43, 50-68, 80
rag_factory/services/embedding/providers/__init__.py                   5      0   100%
rag_factory/services/embedding/providers/cohere.py                    53     36    32%   10-20, 55-75, 90-117, 125, 133, 141, 152-153
rag_factory/services/embedding/providers/local.py                     43     27    37%   8-9, 46-67, 83-109, 117, 125, 133, 146
rag_factory/services/embedding/providers/onnx_local.py               114     93    18%   18-19, 87-177, 193-250, 261-308, 319, 327, 335, 348
rag_factory/services/embedding/providers/openai.py                    51     34    33%   10-20, 53-72, 87-108, 116, 124, 132, 143-144
rag_factory/services/embedding/rate_limiter.py                        20     14    30%   27-37, 45-53
rag_factory/services/embedding/service.py                            100     83    17%   50-62, 79-93, 117-198, 220-222, 233-239, 248-266, 273-275
rag_factory/services/interfaces.py                                    35      0   100%
rag_factory/services/llm/__init__.py                                   5      0   100%
rag_factory/services/llm/base.py                                      43      0   100%
rag_factory/services/llm/config.py                                    23     11    52%   42-57
rag_factory/services/llm/prompt_template.py                           43     24    44%   47-82, 97-100, 111-115
rag_factory/services/llm/providers/__init__.py                        12     12     0%   5-22
rag_factory/services/llm/providers/anthropic.py                       57     57     0%   3-205
rag_factory/services/llm/providers/ollama.py                          55     55     0%   3-196
rag_factory/services/llm/providers/openai.py                          57     57     0%   3-210
rag_factory/services/llm/service.py                                   66     51    23%   32-39, 56-70, 93-129, 154-175, 186, 194-198, 215-216
rag_factory/services/llm/token_counter.py                             27     27     0%   3-72
rag_factory/services/local/__init__.py                                 2      2     0%   7-9
rag_factory/services/local/reranker.py                                32     32     0%   7-116
rag_factory/services/onnx/__init__.py                                  2      2     0%   7-9
rag_factory/services/onnx/embedding.py                                29     29     0%   7-129
rag_factory/services/utils/__init__.py                                 2      0   100%
rag_factory/services/utils/model_converter.py                        104    104     0%   8-291
rag_factory/services/utils/onnx_utils.py                             133    114    14%   22-23, 36-37, 67-123, 142-146, 172-218, 240-274, 291-312, 332-347, 360-378, 392-404
rag_factory/services/utils/reranker_selector.py                       68     68     0%   8-249
rag_factory/strategies/__init__.py                                     2      0   100%
rag_factory/strategies/agentic/__init__.py                             7      0   100%
rag_factory/strategies/agentic/agent.py                              151    130    14%   31-36, 45, 57, 66-90, 109-111, 123-161, 190-214, 230-265, 276-293, 310-331, 339-346, 357-368, 381-420
rag_factory/strategies/agentic/config.py                              12      0   100%
rag_factory/strategies/agentic/frameworks/__init__.py                  1      1     0%   9
rag_factory/strategies/agentic/query_analyzer.py                      89     65    27%   50-55, 67, 79-90, 109-125, 137-147, 159-178, 196-214, 225-260, 278
rag_factory/strategies/agentic/strategy.py                            87     60    31%   50-63, 76, 84, 94-132, 144, 156, 169, 182-222, 234-258, 267, 276, 284
rag_factory/strategies/agentic/tool_implementations.py               135     91    33%   36-37, 41, 45, 52, 86-129, 148-149, 153, 157, 164, 182-247, 266-267, 271, 275, 282, 329-373, 392-393, 397, 401, 407, 446-511
rag_factory/strategies/agentic/tools.py                               40      9    78%   66, 79, 89, 101, 112, 139-142
rag_factory/strategies/auto_register.py                               66     20    70%   13-14, 18-19, 23-24, 28-29, 33-34, 39-40, 46-47, 52-53, 58-59, 79-80
rag_factory/strategies/base.py                                        55     13    76%   80-85, 169-178
rag_factory/strategies/chunking/__init__.py                           15     15     0%   28-67
rag_factory/strategies/chunking/base.py                               91     91     0%   3-256
rag_factory/strategies/chunking/docling_chunker.py                    45     45     0%   13-188
rag_factory/strategies/chunking/fixed_size_chunker.py                 74     74     0%   3-204
rag_factory/strategies/chunking/hybrid_chunker.py                     70     70     0%   3-192
rag_factory/strategies/chunking/semantic_chunker.py                  195    195     0%   3-534
rag_factory/strategies/chunking/structural_chunker.py                147    147     0%   3-425
rag_factory/strategies/chunking/utils.py                              89     89     0%   3-264
rag_factory/strategies/contextual/__init__.py                          7      0   100%
rag_factory/strategies/contextual/batch_processor.py                  91     76    16%   41-43, 60-72, 84-90, 108-128, 145-161, 178-201, 218-266
rag_factory/strategies/contextual/config.py                           46      0   100%
rag_factory/strategies/contextual/context_generator.py                84     70    17%   35-36, 59-99, 112-135, 152-194, 209, 224-234
rag_factory/strategies/contextual/cost_tracker.py                     32     21    34%   31-35, 48-51, 69-82, 94-99, 111-114, 126
rag_factory/strategies/contextual/prompts.py                          25     17    32%   85-106, 119
rag_factory/strategies/contextual/storage.py                          44     35    20%   32-33, 42-45, 54-81, 98-118
rag_factory/strategies/contextual/strategy.py                         78     49    37%   54-67, 75, 83, 107-156, 173, 186, 207-215, 231-262, 278, 284, 289, 298
rag_factory/strategies/fine_tuned/__init__.py                          4      0   100%
rag_factory/strategies/fine_tuned/ab_testing.py                       78     78     0%   1-134
rag_factory/strategies/fine_tuned/config.py                           11      0   100%
rag_factory/strategies/fine_tuned/custom_loader.py                    40     28    30%   17-19, 36-73, 77, 84-88
rag_factory/strategies/fine_tuned/model_registry.py                  126     96    24%   39-50, 80-112, 132-149, 166-178, 182-196, 200-223, 227-240, 249-270, 274-287, 291-303
rag_factory/strategies/hierarchical/__init__.py                        5      5     0%   8-21
rag_factory/strategies/hierarchical/hierarchy_builder.py              79     79     0%   8-335
rag_factory/strategies/hierarchical/models.py                         58     58     0%   8-137
rag_factory/strategies/hierarchical/parent_retriever.py               89     89     0%   8-278
rag_factory/strategies/hierarchical/strategy.py                       76     76     0%   9-301
rag_factory/strategies/indexing/__init__.py                            6      0   100%
rag_factory/strategies/indexing/context_aware.py                     108     88    19%   31, 43, 63-134, 155-156, 160-170, 182-188, 192-198, 208-237, 241-242
rag_factory/strategies/indexing/hierarchical.py                       90     73    19%   50, 63, 88-134, 156-185, 201-236, 253-278, 292-293
rag_factory/strategies/indexing/in_memory.py                          41     25    39%   54, 65, 93-121, 143, 160, 173, 194-200
rag_factory/strategies/indexing/keyword_indexing.py                   42     31    26%   42, 53, 77-157
rag_factory/strategies/indexing/knowledge_graph_indexing.py           46     33    28%   18, 27, 48-89, 108-129
rag_factory/strategies/indexing/vector_embedding.py                   98     85    13%   25, 35, 55-116, 137-221
rag_factory/strategies/knowledge_graph/__init__.py                     4      4     0%   8-19
rag_factory/strategies/knowledge_graph/config.py                      21     21     0%   8-129
rag_factory/strategies/knowledge_graph/entity_extractor.py            70     70     0%   7-205
rag_factory/strategies/knowledge_graph/graph_store.py                 31     31     0%   8-124
rag_factory/strategies/knowledge_graph/hybrid_retriever.py            56     56     0%   8-164
rag_factory/strategies/knowledge_graph/memory_graph_store.py          97     97     0%   8-196
rag_factory/strategies/knowledge_graph/models.py                      53     53     0%   8-122
rag_factory/strategies/knowledge_graph/relationship_extractor.py      62     62     0%   8-189
rag_factory/strategies/knowledge_graph/strategy.py                    80     80     0%   8-256
rag_factory/strategies/late_chunking/__init__.py                       6      0   100%
rag_factory/strategies/late_chunking/coherence_analyzer.py            27     17    37%   20-21, 36-45, 57-65, 82-96
rag_factory/strategies/late_chunking/document_embedder.py            104     89    14%   29-74, 94-184, 202-215, 227-235, 256-279, 296-303, 318
rag_factory/strategies/late_chunking/embedding_chunker.py            117    102    13%   26, 41-61, 68-98, 105-155, 162-182, 191-192, 199-254, 265-289, 293-300
rag_factory/strategies/late_chunking/models.py                        62      0   100%
rag_factory/strategies/late_chunking/strategy.py                      70     46    34%   48-69, 77, 88, 107-122, 140-177, 196-205, 210, 215
rag_factory/strategies/multi_query/__init__.py                         7      7     0%   8-19
rag_factory/strategies/multi_query/config.py                          36     36     0%   3-138
rag_factory/strategies/multi_query/deduplicator.py                    87     87     0%   3-197
rag_factory/strategies/multi_query/parallel_executor.py               52     52     0%   3-163
rag_factory/strategies/multi_query/prompts.py                         10     10     0%   3-84
rag_factory/strategies/multi_query/ranker.py                          80     80     0%   3-201
rag_factory/strategies/multi_query/strategy.py                        68     68     0%   3-184
rag_factory/strategies/multi_query/variant_generator.py               62     62     0%   3-187
rag_factory/strategies/query_expansion/__init__.py                     8      0   100%
rag_factory/strategies/query_expansion/base.py                        66     10    85%   90, 103, 114-118, 130-133
rag_factory/strategies/query_expansion/cache.py                       52     40    23%   20-22, 38-55, 64-66, 70-73, 81-97, 105-112
rag_factory/strategies/query_expansion/expander_service.py            92     71    23%   36-40, 55-58, 75-148, 159-180, 204-215, 233-234, 242-246, 254, 265-273, 283-284
rag_factory/strategies/query_expansion/hyde_expander.py               19     12    37%   25-27, 41-65
rag_factory/strategies/query_expansion/llm_expander.py                25     16    36%   23-25, 39-71, 99
rag_factory/strategies/query_expansion/metrics.py                     66     30    55%   44-45, 53-57, 76-109, 130, 134, 146-152, 160
rag_factory/strategies/query_expansion/prompts.py                     13      7    46%   16, 28-56, 68-107
rag_factory/strategies/reranking/__init__.py                           7      0   100%
rag_factory/strategies/reranking/base.py                              68     16    76%   81, 101, 106, 110-119, 123-130
rag_factory/strategies/reranking/bge_reranker.py                      51     37    27%   14, 53-81, 103-147, 151
rag_factory/strategies/reranking/cache.py                             48     34    29%   32-34, 51-66, 76-77, 81, 90-101, 110-113, 121, 136-138
rag_factory/strategies/reranking/cohere_reranker.py                   34     20    41%   15-16, 55-71, 94-115, 119
rag_factory/strategies/reranking/cosine_reranker.py                   62     47    24%   54-72, 97-139, 158-171, 188, 209-215, 227-230, 242-245, 249
rag_factory/strategies/reranking/cross_encoder_reranker.py            40     27    32%   13-14, 53-76, 98-120, 124
rag_factory/strategies/reranking/metrics.py                           67     67     0%   8-264
rag_factory/strategies/reranking/reranker_service.py                 115     88    23%   56-67, 71-96, 113-225, 235-255, 269, 282-283, 287-292, 296-300, 308-310
rag_factory/strategies/retrieval/__init__.py                           6      0   100%
rag_factory/strategies/retrieval/hybrid_retriever.py                  51     37    27%   32, 39, 51-102, 110-144
rag_factory/strategies/retrieval/keyword_retriever.py                 56     41    27%   41, 52, 71-113, 126-133, 153-172
rag_factory/strategies/retrieval/knowledge_graph_retriever.py         22      9    59%   19, 27, 48-70
rag_factory/strategies/retrieval/multi_query_retriever.py             22      9    59%   19, 26, 44-66
rag_factory/strategies/retrieval/query_expansion_retriever.py         24      9    62%   20, 27, 45-67
rag_factory/strategies/retrieval/semantic_retriever.py                23     12    48%   23, 32, 61-94
rag_factory/strategies/self_reflective/__init__.py                     6      0   100%
rag_factory/strategies/self_reflective/config.py                      20      8    60%   29-42
rag_factory/strategies/self_reflective/grader.py                      80     65    19%   29-35, 51-67, 83-109, 135-171, 187-258, 266
rag_factory/strategies/self_reflective/models.py                      48      0   100%
rag_factory/strategies/self_reflective/refiner.py                     69     56    19%   28-30, 53-96, 113-143, 161-193, 208-228
rag_factory/strategies/self_reflective/strategy.py                    92     74    20%   38-53, 71-181, 192-206, 229-259, 264, 269
rag_factory/utils/__init__.py                                          3      0   100%
rag_factory/utils/token_counter.py                                    45     30    33%   36-40, 52-62, 74-82, 86, 90, 105-106, 124-135, 153-158
rag_factory/utils/tokenization.py                                     95     73    23%   36-40, 53-64, 87-114, 126-129, 141-144, 156, 175-190, 209-228, 241-243, 251-252, 270-271, 292-293, 314-315
------------------------------------------------------------------------------------------------
TOTAL                                                              13429  10945    18%
=========================== short test summary info ============================
FAILED tests/unit/database/test_migrations.py::TestAlembicMigrations::test_migration_upgrade_to_head - alembic.util.exc.CommandError: Multiple head revisions are present for given argument 'head'; please specify a specific target revision, '<branchname>@head' to narrow to a specific head, or 'heads' for all heads
FAILED tests/unit/database/test_migrations.py::TestAlembicMigrations::test_migration_downgrade - alembic.util.exc.CommandError: Multiple head revisions are present for given argument 'head'; please specify a specific target revision, '<branchname>@head' to narrow to a specific head, or 'heads' for all heads
FAILED tests/unit/database/test_migrations.py::TestAlembicMigrations::test_migration_idempotency - alembic.util.exc.CommandError: Multiple head revisions are present for given argument 'head'; please specify a specific target revision, '<branchname>@head' to narrow to a specific head, or 'heads' for all heads
FAILED tests/unit/database/test_migrations.py::TestAlembicMigrations::test_get_current_version - alembic.util.exc.CommandError: Multiple head revisions are present for given argument 'head'; please specify a specific target revision, '<branchname>@head' to narrow to a specific head, or 'heads' for all heads
FAILED tests/unit/database/test_migrations.py::TestAlembicMigrations::test_migration_creates_tables - alembic.util.exc.CommandError: Multiple head revisions are present for given argument 'head'; please specify a specific target revision, '<branchname>@head' to narrow to a specific head, or 'heads' for all heads
FAILED tests/unit/database/test_migrations.py::TestAlembicMigrations::test_migration_creates_indexes - alembic.util.exc.CommandError: Multiple head revisions are present for given argument 'head'; please specify a specific target revision, '<branchname>@head' to narrow to a specific head, or 'heads' for all heads
=================== 6 failed, 1 passed, 8 warnings in 12.66s ===================

[95/206] PASSED: tests/unit/database/test_models.py
  Tests: 21 (P:21 F:0 S:0)
[96/206] PASSED: tests/unit/database/test_pgvector.py
  Tests: 3 (P:3 F:0 S:0)
[97/206] PASSED: tests/unit/database/test_vector_indexing.py
  Tests: 4 (P:4 F:0 S:0)
[98/206] FAILED: tests/unit/documentation/test_code_examples.py
  Tests: 6 (P:3 F:2 S:1)
----------------------------------------
============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.1, pluggy-1.6.0 -- /mnt/MCPProyects/ragTools/venv/bin/python3
cachedir: .pytest_cache
rootdir: /mnt/MCPProyects/ragTools
configfile: pytest.ini (WARNING: ignoring pytest config in pyproject.toml!)
plugins: anyio-4.12.0, cov-7.0.0, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 5 items

tests/unit/documentation/test_code_examples.py::TestCodeExamples::test_all_code_examples_have_valid_syntax FAILED [ 20%]
tests/unit/documentation/test_code_examples.py::TestCodeExamples::test_strategy_examples_have_imports PASSED [ 40%]
tests/unit/documentation/test_code_examples.py::TestCodeExamples::test_configuration_examples_valid SKIPPED [ 60%]
tests/unit/documentation/test_code_examples.py::TestCodeExamples::test_quick_start_example_complete PASSED [ 80%]
tests/unit/documentation/test_code_examples.py::TestCodeExamples::test_no_placeholder_code PASSED [100%]

=================================== FAILURES ===================================
__________ TestCodeExamples.test_all_code_examples_have_valid_syntax ___________
tests/unit/documentation/test_code_examples.py:57: in test_all_code_examples_have_valid_syntax
    assert len(errors) == 0, \
E   AssertionError: Syntax errors in code examples:
E     developer-guide.md:example_16: unexpected indent (developer-guide.md:example_16, line 1)
E     developer-guide.md:example_17: unexpected indent (developer-guide.md:example_17, line 1)
E     developer-guide.md:example_18: unexpected indent (developer-guide.md:example_18, line 1)
E   assert 3 == 0
E    +  where 3 = len(['developer-guide.md:example_16: unexpected indent (developer-guide.md:example_16, line 1)', 'developer-guide.md:example_17: unexpected indent (developer-guide.md:example_17, line 1)', 'developer-guide.md:example_18: unexpected indent (developer-guide.md:example_18, line 1)'])
=============================== warnings summary ===============================
rag_factory/services/llm/config.py:8
  /mnt/MCPProyects/ragTools/rag_factory/services/llm/config.py:8: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class LLMServiceConfig(BaseModel):

rag_factory/database/config.py:12
  /mnt/MCPProyects/ragTools/rag_factory/database/config.py:12: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DatabaseConfig(BaseSettings):

rag_factory/strategies/agentic/config.py:9
  /mnt/MCPProyects/ragTools/rag_factory/strategies/agentic/config.py:9: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class AgenticStrategyConfig(BaseModel):

rag_factory/strategies/late_chunking/models.py:21
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:21: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class TokenEmbedding(BaseModel):

rag_factory/strategies/late_chunking/models.py:34
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:34: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DocumentEmbedding(BaseModel):

rag_factory/strategies/late_chunking/models.py:49
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:49: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class EmbeddingChunk(BaseModel):

rag_factory/strategies/contextual/config.py:31
  /mnt/MCPProyects/ragTools/rag_factory/strategies/contextual/config.py:31: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ContextualRetrievalConfig(BaseModel):

rag_factory/strategies/fine_tuned/config.py:6
  /mnt/MCPProyects/ragTools/rag_factory/strategies/fine_tuned/config.py:6: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class FineTunedConfig(BaseSettings):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.3-final-0 ________________

Name                                                               Stmts   Miss  Cover   Missing
------------------------------------------------------------------------------------------------
rag_factory/__init__.py                                                7      2    71%   18-19
rag_factory/__version__.py                                             1      0   100%
rag_factory/cli/__init__.py                                            2      0   100%
rag_factory/cli/commands/__init__.py                                   1      0   100%
rag_factory/cli/commands/benchmark.py                                 96     81    16%   40-53, 64-84, 148-263
rag_factory/cli/commands/check_consistency.py                         43     33    23%   64-120
rag_factory/cli/commands/config.py                                    78     68    13%   26-64, 102-188
rag_factory/cli/commands/gui.py                                       25     17    32%   61-91
rag_factory/cli/commands/index.py                                     65     52    20%   29-39, 93-185
rag_factory/cli/commands/query.py                                     47     36    23%   73-149
rag_factory/cli/commands/repl.py                                     152    130    14%   29-56, 63-108, 112-120, 124-133, 137-155, 159-172, 176-186, 190-207, 211-220, 253-260
rag_factory/cli/commands/strategies.py                                45     36    20%   48-120
rag_factory/cli/commands/validate_e2e.py                              91     69    24%   37-38, 42-142, 145-156
rag_factory/cli/commands/validate_pipeline.py                         70     57    19%   57-156
rag_factory/cli/formatters/__init__.py                                 4      0   100%
rag_factory/cli/formatters/consistency.py                             61     55    10%   21-69, 79-103, 108-138
rag_factory/cli/formatters/output.py                                  20      9    55%   23-24, 43-44, 63-64, 74, 79, 84
rag_factory/cli/formatters/results.py                                 71     62    13%   28-55, 72-99, 116-144, 157-181
rag_factory/cli/formatters/validation.py                              63     53    16%   25-43, 48-56, 65-77, 86-98, 103-129, 134-137
rag_factory/cli/main.py                                               32     10    69%   25-28, 48-49, 79-81, 85
rag_factory/cli/utils/__init__.py                                      3      0   100%
rag_factory/cli/utils/progress.py                                     14      8    43%   34-47, 73-76
rag_factory/cli/utils/validation.py                                   53     42    21%   30-41, 57-77, 93-118, 135
rag_factory/config/__init__.py                                         4      0   100%
rag_factory/config/env_resolver.py                                    52     37    29%   47-54, 70-90, 110, 129-147
rag_factory/config/schemas/__init__.py                                 2      0   100%
rag_factory/config/schemas/version.py                                 10      6    40%   29-38
rag_factory/config/strategy_loader.py                                 54     36    33%   32-41, 45-60, 75-89, 101-104
rag_factory/config/strategy_pair_manager.py                          105     83    21%   40-72, 92-132, 148-198, 210-215, 229, 259-282
rag_factory/config/validator.py                                       93     76    18%   27-30, 34-39, 53-58, 62-74, 111-132, 177-198, 215-235, 247-249, 271-295, 333-354
rag_factory/core/__init__.py                                           4      4     0%   7-23
rag_factory/core/capabilities.py                                      61     16    74%   129, 155, 173-174, 239-253
rag_factory/core/indexing_interface.py                                54     35    35%   55-57, 118-123, 144, 164, 208, 260, 272, 292-313, 341-364
rag_factory/core/pipeline.py                                          49     35    29%   22-24, 33-40, 55-77, 95-96, 105-108, 117-120, 137-146
rag_factory/core/retrieval_interface.py                               38     20    47%   56-58, 112-117, 138, 158, 196, 247, 259, 285-309
rag_factory/database/__init__.py                                       4      0   100%
rag_factory/database/config.py                                        17      0   100%
rag_factory/database/connection.py                                    80     54    32%   40-48, 61-86, 96, 107, 126-137, 150-157, 165-170, 178-183, 196-197, 209-214, 218, 222
rag_factory/database/env_validator.py                                 38     38     0%   7-139
rag_factory/database/models.py                                        85     32    62%   31-34, 37-45, 48-54, 66-69, 72-77, 80-85, 181, 323-325
rag_factory/database/vector_indexing.py                               38     38     0%   7-114
rag_factory/evaluation/__init__.py                                     4      4     0%   29-41
rag_factory/evaluation/analysis/__init__.py                            3      3     0%   8-11
rag_factory/evaluation/analysis/comparison.py                        135    135     0%   8-323
rag_factory/evaluation/analysis/statistics.py                         81     81     0%   8-320
rag_factory/evaluation/benchmarks/__init__.py                          3      3     0%   8-14
rag_factory/evaluation/benchmarks/config.py                           25     25     0%   7-64
rag_factory/evaluation/benchmarks/runner.py                          155    155     0%   8-423
rag_factory/evaluation/datasets/__init__.py                            3      3     0%   8-14
rag_factory/evaluation/datasets/loader.py                             88     88     0%   8-281
rag_factory/evaluation/datasets/schema.py                             52     52     0%   8-160
rag_factory/evaluation/datasets/statistics.py                         65     65     0%   8-226
rag_factory/evaluation/exporters/__init__.py                           4      4     0%   8-12
rag_factory/evaluation/exporters/csv_exporter.py                      52     52     0%   3-124
rag_factory/evaluation/exporters/html_exporter.py                     47     47     0%   3-293
rag_factory/evaluation/exporters/json_exporter.py                     19     19     0%   3-68
rag_factory/evaluation/metrics/__init__.py                             3      3     0%   12-25
rag_factory/evaluation/metrics/base.py                                31     31     0%   8-115
rag_factory/evaluation/metrics/cost.py                                65     65     0%   8-313
rag_factory/evaluation/metrics/performance.py                         42     42     0%   8-202
rag_factory/evaluation/metrics/quality.py                             84     84     0%   8-377
rag_factory/evaluation/metrics/retrieval.py                           77     77     0%   9-401
rag_factory/exceptions.py                                             13      0   100%
rag_factory/factory.py                                               187    137    27%   109-116, 144, 165-170, 202-230, 256-270, 300-324, 347-348, 365, 384, 401, 418, 435, 451-460, 480-502, 528-545, 568-611, 644-699, 703-715
rag_factory/gui/__init__.py                                            2      0   100%
rag_factory/gui/components/__init__.py                                 3      0   100%
rag_factory/gui/components/scrolled_text.py                           64     52    19%   53-62, 80-114, 122, 131-142, 151-164, 168, 176, 184-199
rag_factory/gui/components/status_bar.py                              62     49    21%   40-59, 64-113, 122-137, 146-152, 161, 168, 172-184, 192-196
rag_factory/gui/main_window.py                                       701    640     9%   64-109, 113-128, 137-164, 168-194, 205-263, 268-293, 297-321, 330-390, 398-422, 435-469, 482-500, 513-551, 564-602, 615-673, 686-690, 694-732, 736-738, 746-789, 806-817, 826-858, 862-879, 885-895, 899-970, 974-1062, 1072-1074, 1082-1084, 1088-1164, 1177-1234, 1244-1246, 1254-1258, 1262-1319, 1324-1371, 1375-1394, 1398, 1411-1487, 1491-1549, 1554-1571, 1575-1582, 1587-1600, 1605-1614, 1618
rag_factory/gui/utils/__init__.py                                      3      0   100%
rag_factory/gui/utils/formatters.py                                   57     49    14%   27-30, 50-90, 110-118, 134-137, 155-165
rag_factory/gui/utils/threading.py                                    32     25    22%   44-73, 96-99, 124-129
rag_factory/legacy_config.py                                         155    155     0%   22-542
rag_factory/models/__init__.py                                         6      6     0%   3-14
rag_factory/models/embedding/__init__.py                               4      4     0%   3-12
rag_factory/models/embedding/loader.py                               179    179     0%   3-367
rag_factory/models/embedding/models.py                                47     47     0%   3-106
rag_factory/models/embedding/registry.py                             128    128     0%   3-282
rag_factory/models/evaluation/__init__.py                              3      3     0%   3-6
rag_factory/models/evaluation/ab_testing.py                           98     98     0%   3-281
rag_factory/models/evaluation/models.py                               29     29     0%   3-74
rag_factory/observability/__init__.py                                  3      3     0%   3-10
rag_factory/observability/integrations/__init__.py                     1      1     0%   3
rag_factory/observability/integrations/prometheus.py                  47     47     0%   3-229
rag_factory/observability/logging/__init__.py                          2      2     0%   3-5
rag_factory/observability/logging/config.py                           16     16     0%   3-37
rag_factory/observability/logging/filters.py                          41     41     0%   3-103
rag_factory/observability/logging/logger.py                           86     86     0%   3-396
rag_factory/observability/metrics/__init__.py                          2      2     0%   3-9
rag_factory/observability/metrics/collector.py                       143    143     0%   3-459
rag_factory/observability/metrics/cost.py                             39     39     0%   3-221
rag_factory/observability/metrics/performance.py                      64     64     0%   3-196
rag_factory/observability/monitoring/__init__.py                       1      1     0%   3
rag_factory/observability/monitoring/api.py                          101    101     0%   3-328
rag_factory/pipeline.py                                              156    156     0%   34-507
rag_factory/registry/__init__.py                                       4      0   100%
rag_factory/registry/exceptions.py                                     6      0   100%
rag_factory/registry/service_factory.py                               84     69    18%   45-54, 62-65, 70-73, 78-80, 84-86, 95-127, 136-165, 176-215, 229-255
rag_factory/registry/service_registry.py                              91     71    22%   43-51, 55-85, 103-156, 164, 178-203, 210-223, 227, 231-232
rag_factory/repositories/__init__.py                                   5      0   100%
rag_factory/repositories/base.py                                      42     21    50%   38, 53, 70, 87, 103, 114-118, 125, 136-139, 159-164
rag_factory/repositories/chunk.py                                    206    180    13%   40-45, 68-76, 90-95, 120-133, 155-171, 187-202, 221-231, 250-261, 287-328, 355-396, 422-474, 489-499, 513-521, 537-543, 557-563, 577-587, 604-626, 639-670
rag_factory/repositories/document.py                                  93     74    20%   41-46, 63-68, 98-118, 140-156, 172-187, 206, 223-233, 247-255, 272-279, 290-293, 307-312
rag_factory/repositories/exceptions.py                                18      7    61%   34-36, 56-59
rag_factory/services/__init__.py                                       4      0   100%
rag_factory/services/api/__init__.py                                   4      4     0%   7-11
rag_factory/services/api/anthropic.py                                 27     27     0%   7-141
rag_factory/services/api/cohere.py                                    30     30     0%   7-113
rag_factory/services/api/openai.py                                    46     46     0%   7-235
rag_factory/services/consistency.py                                   32     24    25%   80-113, 144-170
rag_factory/services/database/__init__.py                              5      0   100%
rag_factory/services/database/database_context.py                    181    159    12%   58-64, 88-106, 123, 140-150, 179-200, 223-240, 256-266, 305-330, 338-339, 343-406, 414-415, 430-510, 516-517, 521-546
rag_factory/services/database/migration_validator.py                  96     74    23%   29-30, 61-69, 81-88, 109-131, 148-152, 163-192, 204-219, 230-237, 249, 261-271, 283-286
rag_factory/services/database/neo4j.py                                54     38    30%   15-17, 60-71, 79-84, 103-114, 134-150, 172-181, 188-191, 195, 199
rag_factory/services/database/postgres.py                            195    163    16%   17-18, 26-27, 84-121, 131-145, 149-201, 214-269, 292-346, 360-375, 390-414, 425-440, 472-490, 504-527, 532, 543, 580-598, 607-619, 623, 627
rag_factory/services/dependencies.py                                  41     21    49%   96-109, 134-140, 176-180
rag_factory/services/embedding/__init__.py                             4      0   100%
rag_factory/services/embedding/base.py                                31      6    81%   44, 59, 68, 77, 86, 98
rag_factory/services/embedding/cache.py                               43     33    23%   26-32, 43-58, 67-76, 80-82, 90-94
rag_factory/services/embedding/config.py                              29     13    55%   37-43, 50-68, 80
rag_factory/services/embedding/providers/__init__.py                   5      0   100%
rag_factory/services/embedding/providers/cohere.py                    53     36    32%   10-20, 55-75, 90-117, 125, 133, 141, 152-153
rag_factory/services/embedding/providers/local.py                     43     27    37%   8-9, 46-67, 83-109, 117, 125, 133, 146
rag_factory/services/embedding/providers/onnx_local.py               114     93    18%   18-19, 87-177, 193-250, 261-308, 319, 327, 335, 348
rag_factory/services/embedding/providers/openai.py                    51     34    33%   10-20, 53-72, 87-108, 116, 124, 132, 143-144
rag_factory/services/embedding/rate_limiter.py                        20     14    30%   27-37, 45-53
rag_factory/services/embedding/service.py                            100     83    17%   50-62, 79-93, 117-198, 220-222, 233-239, 248-266, 273-275
rag_factory/services/interfaces.py                                    35      0   100%
rag_factory/services/llm/__init__.py                                   5      0   100%
rag_factory/services/llm/base.py                                      43      0   100%
rag_factory/services/llm/config.py                                    23     11    52%   42-57
rag_factory/services/llm/prompt_template.py                           43     24    44%   47-82, 97-100, 111-115
rag_factory/services/llm/providers/__init__.py                        12     12     0%   5-22
rag_factory/services/llm/providers/anthropic.py                       57     57     0%   3-205
rag_factory/services/llm/providers/ollama.py                          55     55     0%   3-196
rag_factory/services/llm/providers/openai.py                          57     57     0%   3-210
rag_factory/services/llm/service.py                                   66     51    23%   32-39, 56-70, 93-129, 154-175, 186, 194-198, 215-216
rag_factory/services/llm/token_counter.py                             27     27     0%   3-72
rag_factory/services/local/__init__.py                                 2      2     0%   7-9
rag_factory/services/local/reranker.py                                32     32     0%   7-116
rag_factory/services/onnx/__init__.py                                  2      2     0%   7-9
rag_factory/services/onnx/embedding.py                                29     29     0%   7-129
rag_factory/services/utils/__init__.py                                 2      0   100%
rag_factory/services/utils/model_converter.py                        104    104     0%   8-291
rag_factory/services/utils/onnx_utils.py                             133    114    14%   22-23, 36-37, 67-123, 142-146, 172-218, 240-274, 291-312, 332-347, 360-378, 392-404
rag_factory/services/utils/reranker_selector.py                       68     68     0%   8-249
rag_factory/strategies/__init__.py                                     2      0   100%
rag_factory/strategies/agentic/__init__.py                             7      0   100%
rag_factory/strategies/agentic/agent.py                              151    130    14%   31-36, 45, 57, 66-90, 109-111, 123-161, 190-214, 230-265, 276-293, 310-331, 339-346, 357-368, 381-420
rag_factory/strategies/agentic/config.py                              12      0   100%
rag_factory/strategies/agentic/frameworks/__init__.py                  1      1     0%   9
rag_factory/strategies/agentic/query_analyzer.py                      89     65    27%   50-55, 67, 79-90, 109-125, 137-147, 159-178, 196-214, 225-260, 278
rag_factory/strategies/agentic/strategy.py                            87     60    31%   50-63, 76, 84, 94-132, 144, 156, 169, 182-222, 234-258, 267, 276, 284
rag_factory/strategies/agentic/tool_implementations.py               135     91    33%   36-37, 41, 45, 52, 86-129, 148-149, 153, 157, 164, 182-247, 266-267, 271, 275, 282, 329-373, 392-393, 397, 401, 407, 446-511
rag_factory/strategies/agentic/tools.py                               40      9    78%   66, 79, 89, 101, 112, 139-142
rag_factory/strategies/auto_register.py                               66     20    70%   13-14, 18-19, 23-24, 28-29, 33-34, 39-40, 46-47, 52-53, 58-59, 79-80
rag_factory/strategies/base.py                                        55     13    76%   80-85, 169-178
rag_factory/strategies/chunking/__init__.py                           15     15     0%   28-67
rag_factory/strategies/chunking/base.py                               91     91     0%   3-256
rag_factory/strategies/chunking/docling_chunker.py                    45     45     0%   13-188
rag_factory/strategies/chunking/fixed_size_chunker.py                 74     74     0%   3-204
rag_factory/strategies/chunking/hybrid_chunker.py                     70     70     0%   3-192
rag_factory/strategies/chunking/semantic_chunker.py                  195    195     0%   3-534
rag_factory/strategies/chunking/structural_chunker.py                147    147     0%   3-425
rag_factory/strategies/chunking/utils.py                              89     89     0%   3-264
rag_factory/strategies/contextual/__init__.py                          7      0   100%
rag_factory/strategies/contextual/batch_processor.py                  91     76    16%   41-43, 60-72, 84-90, 108-128, 145-161, 178-201, 218-266
rag_factory/strategies/contextual/config.py                           46      0   100%
rag_factory/strategies/contextual/context_generator.py                84     70    17%   35-36, 59-99, 112-135, 152-194, 209, 224-234
rag_factory/strategies/contextual/cost_tracker.py                     32     21    34%   31-35, 48-51, 69-82, 94-99, 111-114, 126
rag_factory/strategies/contextual/prompts.py                          25     17    32%   85-106, 119
rag_factory/strategies/contextual/storage.py                          44     35    20%   32-33, 42-45, 54-81, 98-118
rag_factory/strategies/contextual/strategy.py                         78     49    37%   54-67, 75, 83, 107-156, 173, 186, 207-215, 231-262, 278, 284, 289, 298
rag_factory/strategies/fine_tuned/__init__.py                          4      0   100%
rag_factory/strategies/fine_tuned/ab_testing.py                       78     78     0%   1-134
rag_factory/strategies/fine_tuned/config.py                           11      0   100%
rag_factory/strategies/fine_tuned/custom_loader.py                    40     28    30%   17-19, 36-73, 77, 84-88
rag_factory/strategies/fine_tuned/model_registry.py                  126     96    24%   39-50, 80-112, 132-149, 166-178, 182-196, 200-223, 227-240, 249-270, 274-287, 291-303
rag_factory/strategies/hierarchical/__init__.py                        5      5     0%   8-21
rag_factory/strategies/hierarchical/hierarchy_builder.py              79     79     0%   8-335
rag_factory/strategies/hierarchical/models.py                         58     58     0%   8-137
rag_factory/strategies/hierarchical/parent_retriever.py               89     89     0%   8-278
rag_factory/strategies/hierarchical/strategy.py                       76     76     0%   9-301
rag_factory/strategies/indexing/__init__.py                            6      0   100%
rag_factory/strategies/indexing/context_aware.py                     108     88    19%   31, 43, 63-134, 155-156, 160-170, 182-188, 192-198, 208-237, 241-242
rag_factory/strategies/indexing/hierarchical.py                       90     73    19%   50, 63, 88-134, 156-185, 201-236, 253-278, 292-293
rag_factory/strategies/indexing/in_memory.py                          41     25    39%   54, 65, 93-121, 143, 160, 173, 194-200
rag_factory/strategies/indexing/keyword_indexing.py                   42     31    26%   42, 53, 77-157
rag_factory/strategies/indexing/knowledge_graph_indexing.py           46     33    28%   18, 27, 48-89, 108-129
rag_factory/strategies/indexing/vector_embedding.py                   98     85    13%   25, 35, 55-116, 137-221
rag_factory/strategies/knowledge_graph/__init__.py                     4      4     0%   8-19
rag_factory/strategies/knowledge_graph/config.py                      21     21     0%   8-129
rag_factory/strategies/knowledge_graph/entity_extractor.py            70     70     0%   7-205
rag_factory/strategies/knowledge_graph/graph_store.py                 31     31     0%   8-124
rag_factory/strategies/knowledge_graph/hybrid_retriever.py            56     56     0%   8-164
rag_factory/strategies/knowledge_graph/memory_graph_store.py          97     97     0%   8-196
rag_factory/strategies/knowledge_graph/models.py                      53     53     0%   8-122
rag_factory/strategies/knowledge_graph/relationship_extractor.py      62     62     0%   8-189
rag_factory/strategies/knowledge_graph/strategy.py                    80     80     0%   8-256
rag_factory/strategies/late_chunking/__init__.py                       6      0   100%
rag_factory/strategies/late_chunking/coherence_analyzer.py            27     17    37%   20-21, 36-45, 57-65, 82-96
rag_factory/strategies/late_chunking/document_embedder.py            104     89    14%   29-74, 94-184, 202-215, 227-235, 256-279, 296-303, 318
rag_factory/strategies/late_chunking/embedding_chunker.py            117    102    13%   26, 41-61, 68-98, 105-155, 162-182, 191-192, 199-254, 265-289, 293-300
rag_factory/strategies/late_chunking/models.py                        62      0   100%
rag_factory/strategies/late_chunking/strategy.py                      70     46    34%   48-69, 77, 88, 107-122, 140-177, 196-205, 210, 215
rag_factory/strategies/multi_query/__init__.py                         7      7     0%   8-19
rag_factory/strategies/multi_query/config.py                          36     36     0%   3-138
rag_factory/strategies/multi_query/deduplicator.py                    87     87     0%   3-197
rag_factory/strategies/multi_query/parallel_executor.py               52     52     0%   3-163
rag_factory/strategies/multi_query/prompts.py                         10     10     0%   3-84
rag_factory/strategies/multi_query/ranker.py                          80     80     0%   3-201
rag_factory/strategies/multi_query/strategy.py                        68     68     0%   3-184
rag_factory/strategies/multi_query/variant_generator.py               62     62     0%   3-187
rag_factory/strategies/query_expansion/__init__.py                     8      0   100%
rag_factory/strategies/query_expansion/base.py                        66     10    85%   90, 103, 114-118, 130-133
rag_factory/strategies/query_expansion/cache.py                       52     40    23%   20-22, 38-55, 64-66, 70-73, 81-97, 105-112
rag_factory/strategies/query_expansion/expander_service.py            92     71    23%   36-40, 55-58, 75-148, 159-180, 204-215, 233-234, 242-246, 254, 265-273, 283-284
rag_factory/strategies/query_expansion/hyde_expander.py               19     12    37%   25-27, 41-65
rag_factory/strategies/query_expansion/llm_expander.py                25     16    36%   23-25, 39-71, 99
rag_factory/strategies/query_expansion/metrics.py                     66     30    55%   44-45, 53-57, 76-109, 130, 134, 146-152, 160
rag_factory/strategies/query_expansion/prompts.py                     13      7    46%   16, 28-56, 68-107
rag_factory/strategies/reranking/__init__.py                           7      0   100%
rag_factory/strategies/reranking/base.py                              68     16    76%   81, 101, 106, 110-119, 123-130
rag_factory/strategies/reranking/bge_reranker.py                      51     37    27%   14, 53-81, 103-147, 151
rag_factory/strategies/reranking/cache.py                             48     34    29%   32-34, 51-66, 76-77, 81, 90-101, 110-113, 121, 136-138
rag_factory/strategies/reranking/cohere_reranker.py                   34     20    41%   15-16, 55-71, 94-115, 119
rag_factory/strategies/reranking/cosine_reranker.py                   62     47    24%   54-72, 97-139, 158-171, 188, 209-215, 227-230, 242-245, 249
rag_factory/strategies/reranking/cross_encoder_reranker.py            40     27    32%   13-14, 53-76, 98-120, 124
rag_factory/strategies/reranking/metrics.py                           67     67     0%   8-264
rag_factory/strategies/reranking/reranker_service.py                 115     88    23%   56-67, 71-96, 113-225, 235-255, 269, 282-283, 287-292, 296-300, 308-310
rag_factory/strategies/retrieval/__init__.py                           6      0   100%
rag_factory/strategies/retrieval/hybrid_retriever.py                  51     37    27%   32, 39, 51-102, 110-144
rag_factory/strategies/retrieval/keyword_retriever.py                 56     41    27%   41, 52, 71-113, 126-133, 153-172
rag_factory/strategies/retrieval/knowledge_graph_retriever.py         22      9    59%   19, 27, 48-70
rag_factory/strategies/retrieval/multi_query_retriever.py             22      9    59%   19, 26, 44-66
rag_factory/strategies/retrieval/query_expansion_retriever.py         24      9    62%   20, 27, 45-67
rag_factory/strategies/retrieval/semantic_retriever.py                23     12    48%   23, 32, 61-94
rag_factory/strategies/self_reflective/__init__.py                     6      0   100%
rag_factory/strategies/self_reflective/config.py                      20      8    60%   29-42
rag_factory/strategies/self_reflective/grader.py                      80     65    19%   29-35, 51-67, 83-109, 135-171, 187-258, 266
rag_factory/strategies/self_reflective/models.py                      48      0   100%
rag_factory/strategies/self_reflective/refiner.py                     69     56    19%   28-30, 53-96, 113-143, 161-193, 208-228
rag_factory/strategies/self_reflective/strategy.py                    92     74    20%   38-53, 71-181, 192-206, 229-259, 264, 269
rag_factory/utils/__init__.py                                          3      0   100%
rag_factory/utils/token_counter.py                                    45     30    33%   36-40, 52-62, 74-82, 86, 90, 105-106, 124-135, 153-158
rag_factory/utils/tokenization.py                                     95     73    23%   36-40, 53-64, 87-114, 126-129, 141-144, 156, 175-190, 209-228, 241-243, 251-252, 270-271, 292-293, 314-315
------------------------------------------------------------------------------------------------
TOTAL                                                              13429  10965    18%
=========================== short test summary info ============================
FAILED tests/unit/documentation/test_code_examples.py::TestCodeExamples::test_all_code_examples_have_valid_syntax - AssertionError: Syntax errors in code examples:
  developer-guide.md:example_16: unexpected indent (developer-guide.md:example_16, line 1)
  developer-guide.md:example_17: unexpected indent (developer-guide.md:example_17, line 1)
  developer-guide.md:example_18: unexpected indent (developer-guide.md:example_18, line 1)
assert 3 == 0
 +  where 3 = len(['developer-guide.md:example_16: unexpected indent (developer-guide.md:example_16, line 1)', 'developer-guide.md:example_17: unexpected indent (developer-guide.md:example_17, line 1)', 'developer-guide.md:example_18: unexpected indent (developer-guide.md:example_18, line 1)'])
============== 1 failed, 3 passed, 1 skipped, 8 warnings in 5.21s ==============

[99/206] PASSED: tests/unit/documentation/test_documentation_completeness.py
  Tests: 8 (P:8 F:0 S:0)
[100/206] FAILED: tests/unit/documentation/test_links.py
  Tests: 6 (P:1 F:4 S:1)
----------------------------------------
============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.1, pluggy-1.6.0 -- /mnt/MCPProyects/ragTools/venv/bin/python3
cachedir: .pytest_cache
rootdir: /mnt/MCPProyects/ragTools
configfile: pytest.ini (WARNING: ignoring pytest config in pyproject.toml!)
plugins: anyio-4.12.0, cov-7.0.0, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 4 items

tests/unit/documentation/test_links.py::TestDocumentationLinks::test_no_broken_internal_links FAILED [ 25%]
tests/unit/documentation/test_links.py::TestDocumentationLinks::test_all_diagrams_valid PASSED [ 50%]
tests/unit/documentation/test_links.py::TestDocumentationLinks::test_no_todo_links FAILED [ 75%]
tests/unit/documentation/test_links.py::TestDocumentationLinks::test_external_links_valid SKIPPED [100%]

=================================== FAILURES ===================================
_____________ TestDocumentationLinks.test_no_broken_internal_links _____________
tests/unit/documentation/test_links.py:60: in test_no_broken_internal_links
    assert len(broken_links) == 0, \
E   AssertionError: Broken internal links:
E     README.md -> ../../epics/epic-17-strategy-pairs.md
E   assert 1 == 0
E    +  where 1 = len(['README.md -> ../../epics/epic-17-strategy-pairs.md'])
__________________ TestDocumentationLinks.test_no_todo_links ___________________
tests/unit/documentation/test_links.py:119: in test_no_todo_links
    assert len(files_with_todos) < 10, \
E   AssertionError: Files with TODO/placeholder links: ['index.md: https://github.com/yourusername/rag-factory', 'index.md: https://github.com/yourusername/rag-factory/issues', 'CLI-USER-GUIDE.md: https://github.com/yourusername/rag-factory/issues', 'faq.md: https://github.com/yourusername/rag-factory/issues', 'faq.md: https://github.com/yourusername/rag-factory/discussions', 'faq.md: https://github.com/yourusername/rag-factory/discussions', 'user-guide.md: https://github.com/yourusername/rag-factory', 'index.md: https://github.com/yourusername/rag-factory/issues', 'index.md: https://github.com/yourusername/rag-factory/discussions', 'quick-start.md: https://github.com/yourusername/rag-factory/issues']
E   assert 10 < 10
E    +  where 10 = len(['index.md: https://github.com/yourusername/rag-factory', 'index.md: https://github.com/yourusername/rag-factory/issues', 'CLI-USER-GUIDE.md: https://github.com/yourusername/rag-factory/issues', 'faq.md: https://github.com/yourusername/rag-factory/issues', 'faq.md: https://github.com/yourusername/rag-factory/discussions', 'faq.md: https://github.com/yourusername/rag-factory/discussions', 'user-guide.md: https://github.com/yourusername/rag-factory', 'index.md: https://github.com/yourusername/rag-factory/issues', 'index.md: https://github.com/yourusername/rag-factory/discussions', 'quick-start.md: https://github.com/yourusername/rag-factory/issues'])
=============================== warnings summary ===============================
rag_factory/services/llm/config.py:8
  /mnt/MCPProyects/ragTools/rag_factory/services/llm/config.py:8: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class LLMServiceConfig(BaseModel):

rag_factory/database/config.py:12
  /mnt/MCPProyects/ragTools/rag_factory/database/config.py:12: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DatabaseConfig(BaseSettings):

rag_factory/strategies/agentic/config.py:9
  /mnt/MCPProyects/ragTools/rag_factory/strategies/agentic/config.py:9: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class AgenticStrategyConfig(BaseModel):

rag_factory/strategies/late_chunking/models.py:21
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:21: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class TokenEmbedding(BaseModel):

rag_factory/strategies/late_chunking/models.py:34
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:34: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DocumentEmbedding(BaseModel):

rag_factory/strategies/late_chunking/models.py:49
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:49: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class EmbeddingChunk(BaseModel):

rag_factory/strategies/contextual/config.py:31
  /mnt/MCPProyects/ragTools/rag_factory/strategies/contextual/config.py:31: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ContextualRetrievalConfig(BaseModel):

rag_factory/strategies/fine_tuned/config.py:6
  /mnt/MCPProyects/ragTools/rag_factory/strategies/fine_tuned/config.py:6: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class FineTunedConfig(BaseSettings):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.3-final-0 ________________

Name                                                               Stmts   Miss  Cover   Missing
------------------------------------------------------------------------------------------------
rag_factory/__init__.py                                                7      2    71%   18-19
rag_factory/__version__.py                                             1      0   100%
rag_factory/cli/__init__.py                                            2      0   100%
rag_factory/cli/commands/__init__.py                                   1      0   100%
rag_factory/cli/commands/benchmark.py                                 96     81    16%   40-53, 64-84, 148-263
rag_factory/cli/commands/check_consistency.py                         43     33    23%   64-120
rag_factory/cli/commands/config.py                                    78     68    13%   26-64, 102-188
rag_factory/cli/commands/gui.py                                       25     17    32%   61-91
rag_factory/cli/commands/index.py                                     65     52    20%   29-39, 93-185
rag_factory/cli/commands/query.py                                     47     36    23%   73-149
rag_factory/cli/commands/repl.py                                     152    130    14%   29-56, 63-108, 112-120, 124-133, 137-155, 159-172, 176-186, 190-207, 211-220, 253-260
rag_factory/cli/commands/strategies.py                                45     36    20%   48-120
rag_factory/cli/commands/validate_e2e.py                              91     69    24%   37-38, 42-142, 145-156
rag_factory/cli/commands/validate_pipeline.py                         70     57    19%   57-156
rag_factory/cli/formatters/__init__.py                                 4      0   100%
rag_factory/cli/formatters/consistency.py                             61     55    10%   21-69, 79-103, 108-138
rag_factory/cli/formatters/output.py                                  20      9    55%   23-24, 43-44, 63-64, 74, 79, 84
rag_factory/cli/formatters/results.py                                 71     62    13%   28-55, 72-99, 116-144, 157-181
rag_factory/cli/formatters/validation.py                              63     53    16%   25-43, 48-56, 65-77, 86-98, 103-129, 134-137
rag_factory/cli/main.py                                               32     10    69%   25-28, 48-49, 79-81, 85
rag_factory/cli/utils/__init__.py                                      3      0   100%
rag_factory/cli/utils/progress.py                                     14      8    43%   34-47, 73-76
rag_factory/cli/utils/validation.py                                   53     42    21%   30-41, 57-77, 93-118, 135
rag_factory/config/__init__.py                                         4      0   100%
rag_factory/config/env_resolver.py                                    52     37    29%   47-54, 70-90, 110, 129-147
rag_factory/config/schemas/__init__.py                                 2      0   100%
rag_factory/config/schemas/version.py                                 10      6    40%   29-38
rag_factory/config/strategy_loader.py                                 54     36    33%   32-41, 45-60, 75-89, 101-104
rag_factory/config/strategy_pair_manager.py                          105     83    21%   40-72, 92-132, 148-198, 210-215, 229, 259-282
rag_factory/config/validator.py                                       93     76    18%   27-30, 34-39, 53-58, 62-74, 111-132, 177-198, 215-235, 247-249, 271-295, 333-354
rag_factory/core/__init__.py                                           4      4     0%   7-23
rag_factory/core/capabilities.py                                      61     16    74%   129, 155, 173-174, 239-253
rag_factory/core/indexing_interface.py                                54     35    35%   55-57, 118-123, 144, 164, 208, 260, 272, 292-313, 341-364
rag_factory/core/pipeline.py                                          49     35    29%   22-24, 33-40, 55-77, 95-96, 105-108, 117-120, 137-146
rag_factory/core/retrieval_interface.py                               38     20    47%   56-58, 112-117, 138, 158, 196, 247, 259, 285-309
rag_factory/database/__init__.py                                       4      0   100%
rag_factory/database/config.py                                        17      0   100%
rag_factory/database/connection.py                                    80     54    32%   40-48, 61-86, 96, 107, 126-137, 150-157, 165-170, 178-183, 196-197, 209-214, 218, 222
rag_factory/database/env_validator.py                                 38     38     0%   7-139
rag_factory/database/models.py                                        85     32    62%   31-34, 37-45, 48-54, 66-69, 72-77, 80-85, 181, 323-325
rag_factory/database/vector_indexing.py                               38     38     0%   7-114
rag_factory/evaluation/__init__.py                                     4      4     0%   29-41
rag_factory/evaluation/analysis/__init__.py                            3      3     0%   8-11
rag_factory/evaluation/analysis/comparison.py                        135    135     0%   8-323
rag_factory/evaluation/analysis/statistics.py                         81     81     0%   8-320
rag_factory/evaluation/benchmarks/__init__.py                          3      3     0%   8-14
rag_factory/evaluation/benchmarks/config.py                           25     25     0%   7-64
rag_factory/evaluation/benchmarks/runner.py                          155    155     0%   8-423
rag_factory/evaluation/datasets/__init__.py                            3      3     0%   8-14
rag_factory/evaluation/datasets/loader.py                             88     88     0%   8-281
rag_factory/evaluation/datasets/schema.py                             52     52     0%   8-160
rag_factory/evaluation/datasets/statistics.py                         65     65     0%   8-226
rag_factory/evaluation/exporters/__init__.py                           4      4     0%   8-12
rag_factory/evaluation/exporters/csv_exporter.py                      52     52     0%   3-124
rag_factory/evaluation/exporters/html_exporter.py                     47     47     0%   3-293
rag_factory/evaluation/exporters/json_exporter.py                     19     19     0%   3-68
rag_factory/evaluation/metrics/__init__.py                             3      3     0%   12-25
rag_factory/evaluation/metrics/base.py                                31     31     0%   8-115
rag_factory/evaluation/metrics/cost.py                                65     65     0%   8-313
rag_factory/evaluation/metrics/performance.py                         42     42     0%   8-202
rag_factory/evaluation/metrics/quality.py                             84     84     0%   8-377
rag_factory/evaluation/metrics/retrieval.py                           77     77     0%   9-401
rag_factory/exceptions.py                                             13      0   100%
rag_factory/factory.py                                               187    137    27%   109-116, 144, 165-170, 202-230, 256-270, 300-324, 347-348, 365, 384, 401, 418, 435, 451-460, 480-502, 528-545, 568-611, 644-699, 703-715
rag_factory/gui/__init__.py                                            2      0   100%
rag_factory/gui/components/__init__.py                                 3      0   100%
rag_factory/gui/components/scrolled_text.py                           64     52    19%   53-62, 80-114, 122, 131-142, 151-164, 168, 176, 184-199
rag_factory/gui/components/status_bar.py                              62     49    21%   40-59, 64-113, 122-137, 146-152, 161, 168, 172-184, 192-196
rag_factory/gui/main_window.py                                       701    640     9%   64-109, 113-128, 137-164, 168-194, 205-263, 268-293, 297-321, 330-390, 398-422, 435-469, 482-500, 513-551, 564-602, 615-673, 686-690, 694-732, 736-738, 746-789, 806-817, 826-858, 862-879, 885-895, 899-970, 974-1062, 1072-1074, 1082-1084, 1088-1164, 1177-1234, 1244-1246, 1254-1258, 1262-1319, 1324-1371, 1375-1394, 1398, 1411-1487, 1491-1549, 1554-1571, 1575-1582, 1587-1600, 1605-1614, 1618
rag_factory/gui/utils/__init__.py                                      3      0   100%
rag_factory/gui/utils/formatters.py                                   57     49    14%   27-30, 50-90, 110-118, 134-137, 155-165
rag_factory/gui/utils/threading.py                                    32     25    22%   44-73, 96-99, 124-129
rag_factory/legacy_config.py                                         155    155     0%   22-542
rag_factory/models/__init__.py                                         6      6     0%   3-14
rag_factory/models/embedding/__init__.py                               4      4     0%   3-12
rag_factory/models/embedding/loader.py                               179    179     0%   3-367
rag_factory/models/embedding/models.py                                47     47     0%   3-106
rag_factory/models/embedding/registry.py                             128    128     0%   3-282
rag_factory/models/evaluation/__init__.py                              3      3     0%   3-6
rag_factory/models/evaluation/ab_testing.py                           98     98     0%   3-281
rag_factory/models/evaluation/models.py                               29     29     0%   3-74
rag_factory/observability/__init__.py                                  3      3     0%   3-10
rag_factory/observability/integrations/__init__.py                     1      1     0%   3
rag_factory/observability/integrations/prometheus.py                  47     47     0%   3-229
rag_factory/observability/logging/__init__.py                          2      2     0%   3-5
rag_factory/observability/logging/config.py                           16     16     0%   3-37
rag_factory/observability/logging/filters.py                          41     41     0%   3-103
rag_factory/observability/logging/logger.py                           86     86     0%   3-396
rag_factory/observability/metrics/__init__.py                          2      2     0%   3-9
rag_factory/observability/metrics/collector.py                       143    143     0%   3-459
rag_factory/observability/metrics/cost.py                             39     39     0%   3-221
rag_factory/observability/metrics/performance.py                      64     64     0%   3-196
rag_factory/observability/monitoring/__init__.py                       1      1     0%   3
rag_factory/observability/monitoring/api.py                          101    101     0%   3-328
rag_factory/pipeline.py                                              156    156     0%   34-507
rag_factory/registry/__init__.py                                       4      0   100%
rag_factory/registry/exceptions.py                                     6      0   100%
rag_factory/registry/service_factory.py                               84     69    18%   45-54, 62-65, 70-73, 78-80, 84-86, 95-127, 136-165, 176-215, 229-255
rag_factory/registry/service_registry.py                              91     71    22%   43-51, 55-85, 103-156, 164, 178-203, 210-223, 227, 231-232
rag_factory/repositories/__init__.py                                   5      0   100%
rag_factory/repositories/base.py                                      42     21    50%   38, 53, 70, 87, 103, 114-118, 125, 136-139, 159-164
rag_factory/repositories/chunk.py                                    206    180    13%   40-45, 68-76, 90-95, 120-133, 155-171, 187-202, 221-231, 250-261, 287-328, 355-396, 422-474, 489-499, 513-521, 537-543, 557-563, 577-587, 604-626, 639-670
rag_factory/repositories/document.py                                  93     74    20%   41-46, 63-68, 98-118, 140-156, 172-187, 206, 223-233, 247-255, 272-279, 290-293, 307-312
rag_factory/repositories/exceptions.py                                18      7    61%   34-36, 56-59
rag_factory/services/__init__.py                                       4      0   100%
rag_factory/services/api/__init__.py                                   4      4     0%   7-11
rag_factory/services/api/anthropic.py                                 27     27     0%   7-141
rag_factory/services/api/cohere.py                                    30     30     0%   7-113
rag_factory/services/api/openai.py                                    46     46     0%   7-235
rag_factory/services/consistency.py                                   32     24    25%   80-113, 144-170
rag_factory/services/database/__init__.py                              5      0   100%
rag_factory/services/database/database_context.py                    181    159    12%   58-64, 88-106, 123, 140-150, 179-200, 223-240, 256-266, 305-330, 338-339, 343-406, 414-415, 430-510, 516-517, 521-546
rag_factory/services/database/migration_validator.py                  96     74    23%   29-30, 61-69, 81-88, 109-131, 148-152, 163-192, 204-219, 230-237, 249, 261-271, 283-286
rag_factory/services/database/neo4j.py                                54     38    30%   15-17, 60-71, 79-84, 103-114, 134-150, 172-181, 188-191, 195, 199
rag_factory/services/database/postgres.py                            195    163    16%   17-18, 26-27, 84-121, 131-145, 149-201, 214-269, 292-346, 360-375, 390-414, 425-440, 472-490, 504-527, 532, 543, 580-598, 607-619, 623, 627
rag_factory/services/dependencies.py                                  41     21    49%   96-109, 134-140, 176-180
rag_factory/services/embedding/__init__.py                             4      0   100%
rag_factory/services/embedding/base.py                                31      6    81%   44, 59, 68, 77, 86, 98
rag_factory/services/embedding/cache.py                               43     33    23%   26-32, 43-58, 67-76, 80-82, 90-94
rag_factory/services/embedding/config.py                              29     13    55%   37-43, 50-68, 80
rag_factory/services/embedding/providers/__init__.py                   5      0   100%
rag_factory/services/embedding/providers/cohere.py                    53     36    32%   10-20, 55-75, 90-117, 125, 133, 141, 152-153
rag_factory/services/embedding/providers/local.py                     43     27    37%   8-9, 46-67, 83-109, 117, 125, 133, 146
rag_factory/services/embedding/providers/onnx_local.py               114     93    18%   18-19, 87-177, 193-250, 261-308, 319, 327, 335, 348
rag_factory/services/embedding/providers/openai.py                    51     34    33%   10-20, 53-72, 87-108, 116, 124, 132, 143-144
rag_factory/services/embedding/rate_limiter.py                        20     14    30%   27-37, 45-53
rag_factory/services/embedding/service.py                            100     83    17%   50-62, 79-93, 117-198, 220-222, 233-239, 248-266, 273-275
rag_factory/services/interfaces.py                                    35      0   100%
rag_factory/services/llm/__init__.py                                   5      0   100%
rag_factory/services/llm/base.py                                      43      0   100%
rag_factory/services/llm/config.py                                    23     11    52%   42-57
rag_factory/services/llm/prompt_template.py                           43     24    44%   47-82, 97-100, 111-115
rag_factory/services/llm/providers/__init__.py                        12     12     0%   5-22
rag_factory/services/llm/providers/anthropic.py                       57     57     0%   3-205
rag_factory/services/llm/providers/ollama.py                          55     55     0%   3-196
rag_factory/services/llm/providers/openai.py                          57     57     0%   3-210
rag_factory/services/llm/service.py                                   66     51    23%   32-39, 56-70, 93-129, 154-175, 186, 194-198, 215-216
rag_factory/services/llm/token_counter.py                             27     27     0%   3-72
rag_factory/services/local/__init__.py                                 2      2     0%   7-9
rag_factory/services/local/reranker.py                                32     32     0%   7-116
rag_factory/services/onnx/__init__.py                                  2      2     0%   7-9
rag_factory/services/onnx/embedding.py                                29     29     0%   7-129
rag_factory/services/utils/__init__.py                                 2      0   100%
rag_factory/services/utils/model_converter.py                        104    104     0%   8-291
rag_factory/services/utils/onnx_utils.py                             133    114    14%   22-23, 36-37, 67-123, 142-146, 172-218, 240-274, 291-312, 332-347, 360-378, 392-404
rag_factory/services/utils/reranker_selector.py                       68     68     0%   8-249
rag_factory/strategies/__init__.py                                     2      0   100%
rag_factory/strategies/agentic/__init__.py                             7      0   100%
rag_factory/strategies/agentic/agent.py                              151    130    14%   31-36, 45, 57, 66-90, 109-111, 123-161, 190-214, 230-265, 276-293, 310-331, 339-346, 357-368, 381-420
rag_factory/strategies/agentic/config.py                              12      0   100%
rag_factory/strategies/agentic/frameworks/__init__.py                  1      1     0%   9
rag_factory/strategies/agentic/query_analyzer.py                      89     65    27%   50-55, 67, 79-90, 109-125, 137-147, 159-178, 196-214, 225-260, 278
rag_factory/strategies/agentic/strategy.py                            87     60    31%   50-63, 76, 84, 94-132, 144, 156, 169, 182-222, 234-258, 267, 276, 284
rag_factory/strategies/agentic/tool_implementations.py               135     91    33%   36-37, 41, 45, 52, 86-129, 148-149, 153, 157, 164, 182-247, 266-267, 271, 275, 282, 329-373, 392-393, 397, 401, 407, 446-511
rag_factory/strategies/agentic/tools.py                               40      9    78%   66, 79, 89, 101, 112, 139-142
rag_factory/strategies/auto_register.py                               66     20    70%   13-14, 18-19, 23-24, 28-29, 33-34, 39-40, 46-47, 52-53, 58-59, 79-80
rag_factory/strategies/base.py                                        55     13    76%   80-85, 169-178
rag_factory/strategies/chunking/__init__.py                           15     15     0%   28-67
rag_factory/strategies/chunking/base.py                               91     91     0%   3-256
rag_factory/strategies/chunking/docling_chunker.py                    45     45     0%   13-188
rag_factory/strategies/chunking/fixed_size_chunker.py                 74     74     0%   3-204
rag_factory/strategies/chunking/hybrid_chunker.py                     70     70     0%   3-192
rag_factory/strategies/chunking/semantic_chunker.py                  195    195     0%   3-534
rag_factory/strategies/chunking/structural_chunker.py                147    147     0%   3-425
rag_factory/strategies/chunking/utils.py                              89     89     0%   3-264
rag_factory/strategies/contextual/__init__.py                          7      0   100%
rag_factory/strategies/contextual/batch_processor.py                  91     76    16%   41-43, 60-72, 84-90, 108-128, 145-161, 178-201, 218-266
rag_factory/strategies/contextual/config.py                           46      0   100%
rag_factory/strategies/contextual/context_generator.py                84     70    17%   35-36, 59-99, 112-135, 152-194, 209, 224-234
rag_factory/strategies/contextual/cost_tracker.py                     32     21    34%   31-35, 48-51, 69-82, 94-99, 111-114, 126
rag_factory/strategies/contextual/prompts.py                          25     17    32%   85-106, 119
rag_factory/strategies/contextual/storage.py                          44     35    20%   32-33, 42-45, 54-81, 98-118
rag_factory/strategies/contextual/strategy.py                         78     49    37%   54-67, 75, 83, 107-156, 173, 186, 207-215, 231-262, 278, 284, 289, 298
rag_factory/strategies/fine_tuned/__init__.py                          4      0   100%
rag_factory/strategies/fine_tuned/ab_testing.py                       78     78     0%   1-134
rag_factory/strategies/fine_tuned/config.py                           11      0   100%
rag_factory/strategies/fine_tuned/custom_loader.py                    40     28    30%   17-19, 36-73, 77, 84-88
rag_factory/strategies/fine_tuned/model_registry.py                  126     96    24%   39-50, 80-112, 132-149, 166-178, 182-196, 200-223, 227-240, 249-270, 274-287, 291-303
rag_factory/strategies/hierarchical/__init__.py                        5      5     0%   8-21
rag_factory/strategies/hierarchical/hierarchy_builder.py              79     79     0%   8-335
rag_factory/strategies/hierarchical/models.py                         58     58     0%   8-137
rag_factory/strategies/hierarchical/parent_retriever.py               89     89     0%   8-278
rag_factory/strategies/hierarchical/strategy.py                       76     76     0%   9-301
rag_factory/strategies/indexing/__init__.py                            6      0   100%
rag_factory/strategies/indexing/context_aware.py                     108     88    19%   31, 43, 63-134, 155-156, 160-170, 182-188, 192-198, 208-237, 241-242
rag_factory/strategies/indexing/hierarchical.py                       90     73    19%   50, 63, 88-134, 156-185, 201-236, 253-278, 292-293
rag_factory/strategies/indexing/in_memory.py                          41     25    39%   54, 65, 93-121, 143, 160, 173, 194-200
rag_factory/strategies/indexing/keyword_indexing.py                   42     31    26%   42, 53, 77-157
rag_factory/strategies/indexing/knowledge_graph_indexing.py           46     33    28%   18, 27, 48-89, 108-129
rag_factory/strategies/indexing/vector_embedding.py                   98     85    13%   25, 35, 55-116, 137-221
rag_factory/strategies/knowledge_graph/__init__.py                     4      4     0%   8-19
rag_factory/strategies/knowledge_graph/config.py                      21     21     0%   8-129
rag_factory/strategies/knowledge_graph/entity_extractor.py            70     70     0%   7-205
rag_factory/strategies/knowledge_graph/graph_store.py                 31     31     0%   8-124
rag_factory/strategies/knowledge_graph/hybrid_retriever.py            56     56     0%   8-164
rag_factory/strategies/knowledge_graph/memory_graph_store.py          97     97     0%   8-196
rag_factory/strategies/knowledge_graph/models.py                      53     53     0%   8-122
rag_factory/strategies/knowledge_graph/relationship_extractor.py      62     62     0%   8-189
rag_factory/strategies/knowledge_graph/strategy.py                    80     80     0%   8-256
rag_factory/strategies/late_chunking/__init__.py                       6      0   100%
rag_factory/strategies/late_chunking/coherence_analyzer.py            27     17    37%   20-21, 36-45, 57-65, 82-96
rag_factory/strategies/late_chunking/document_embedder.py            104     89    14%   29-74, 94-184, 202-215, 227-235, 256-279, 296-303, 318
rag_factory/strategies/late_chunking/embedding_chunker.py            117    102    13%   26, 41-61, 68-98, 105-155, 162-182, 191-192, 199-254, 265-289, 293-300
rag_factory/strategies/late_chunking/models.py                        62      0   100%
rag_factory/strategies/late_chunking/strategy.py                      70     46    34%   48-69, 77, 88, 107-122, 140-177, 196-205, 210, 215
rag_factory/strategies/multi_query/__init__.py                         7      7     0%   8-19
rag_factory/strategies/multi_query/config.py                          36     36     0%   3-138
rag_factory/strategies/multi_query/deduplicator.py                    87     87     0%   3-197
rag_factory/strategies/multi_query/parallel_executor.py               52     52     0%   3-163
rag_factory/strategies/multi_query/prompts.py                         10     10     0%   3-84
rag_factory/strategies/multi_query/ranker.py                          80     80     0%   3-201
rag_factory/strategies/multi_query/strategy.py                        68     68     0%   3-184
rag_factory/strategies/multi_query/variant_generator.py               62     62     0%   3-187
rag_factory/strategies/query_expansion/__init__.py                     8      0   100%
rag_factory/strategies/query_expansion/base.py                        66     10    85%   90, 103, 114-118, 130-133
rag_factory/strategies/query_expansion/cache.py                       52     40    23%   20-22, 38-55, 64-66, 70-73, 81-97, 105-112
rag_factory/strategies/query_expansion/expander_service.py            92     71    23%   36-40, 55-58, 75-148, 159-180, 204-215, 233-234, 242-246, 254, 265-273, 283-284
rag_factory/strategies/query_expansion/hyde_expander.py               19     12    37%   25-27, 41-65
rag_factory/strategies/query_expansion/llm_expander.py                25     16    36%   23-25, 39-71, 99
rag_factory/strategies/query_expansion/metrics.py                     66     30    55%   44-45, 53-57, 76-109, 130, 134, 146-152, 160
rag_factory/strategies/query_expansion/prompts.py                     13      7    46%   16, 28-56, 68-107
rag_factory/strategies/reranking/__init__.py                           7      0   100%
rag_factory/strategies/reranking/base.py                              68     16    76%   81, 101, 106, 110-119, 123-130
rag_factory/strategies/reranking/bge_reranker.py                      51     37    27%   14, 53-81, 103-147, 151
rag_factory/strategies/reranking/cache.py                             48     34    29%   32-34, 51-66, 76-77, 81, 90-101, 110-113, 121, 136-138
rag_factory/strategies/reranking/cohere_reranker.py                   34     20    41%   15-16, 55-71, 94-115, 119
rag_factory/strategies/reranking/cosine_reranker.py                   62     47    24%   54-72, 97-139, 158-171, 188, 209-215, 227-230, 242-245, 249
rag_factory/strategies/reranking/cross_encoder_reranker.py            40     27    32%   13-14, 53-76, 98-120, 124
rag_factory/strategies/reranking/metrics.py                           67     67     0%   8-264
rag_factory/strategies/reranking/reranker_service.py                 115     88    23%   56-67, 71-96, 113-225, 235-255, 269, 282-283, 287-292, 296-300, 308-310
rag_factory/strategies/retrieval/__init__.py                           6      0   100%
rag_factory/strategies/retrieval/hybrid_retriever.py                  51     37    27%   32, 39, 51-102, 110-144
rag_factory/strategies/retrieval/keyword_retriever.py                 56     41    27%   41, 52, 71-113, 126-133, 153-172
rag_factory/strategies/retrieval/knowledge_graph_retriever.py         22      9    59%   19, 27, 48-70
rag_factory/strategies/retrieval/multi_query_retriever.py             22      9    59%   19, 26, 44-66
rag_factory/strategies/retrieval/query_expansion_retriever.py         24      9    62%   20, 27, 45-67
rag_factory/strategies/retrieval/semantic_retriever.py                23     12    48%   23, 32, 61-94
rag_factory/strategies/self_reflective/__init__.py                     6      0   100%
rag_factory/strategies/self_reflective/config.py                      20      8    60%   29-42
rag_factory/strategies/self_reflective/grader.py                      80     65    19%   29-35, 51-67, 83-109, 135-171, 187-258, 266
rag_factory/strategies/self_reflective/models.py                      48      0   100%
rag_factory/strategies/self_reflective/refiner.py                     69     56    19%   28-30, 53-96, 113-143, 161-193, 208-228
rag_factory/strategies/self_reflective/strategy.py                    92     74    20%   38-53, 71-181, 192-206, 229-259, 264, 269
rag_factory/utils/__init__.py                                          3      0   100%
rag_factory/utils/token_counter.py                                    45     30    33%   36-40, 52-62, 74-82, 86, 90, 105-106, 124-135, 153-158
rag_factory/utils/tokenization.py                                     95     73    23%   36-40, 53-64, 87-114, 126-129, 141-144, 156, 175-190, 209-228, 241-243, 251-252, 270-271, 292-293, 314-315
------------------------------------------------------------------------------------------------
TOTAL                                                              13429  10965    18%
=========================== short test summary info ============================
FAILED tests/unit/documentation/test_links.py::TestDocumentationLinks::test_no_broken_internal_links - AssertionError: Broken internal links:
  README.md -> ../../epics/epic-17-strategy-pairs.md
assert 1 == 0
 +  where 1 = len(['README.md -> ../../epics/epic-17-strategy-pairs.md'])
FAILED tests/unit/documentation/test_links.py::TestDocumentationLinks::test_no_todo_links - AssertionError: Files with TODO/placeholder links: ['index.md: https://github.com/yourusername/rag-factory', 'index.md: https://github.com/yourusername/rag-factory/issues', 'CLI-USER-GUIDE.md: https://github.com/yourusername/rag-factory/issues', 'faq.md: https://github.com/yourusername/rag-factory/issues', 'faq.md: https://github.com/yourusername/rag-factory/discussions', 'faq.md: https://github.com/yourusername/rag-factory/discussions', 'user-guide.md: https://github.com/yourusername/rag-factory', 'index.md: https://github.com/yourusername/rag-factory/issues', 'index.md: https://github.com/yourusername/rag-factory/discussions', 'quick-start.md: https://github.com/yourusername/rag-factory/issues']
assert 10 < 10
 +  where 10 = len(['index.md: https://github.com/yourusername/rag-factory', 'index.md: https://github.com/yourusername/rag-factory/issues', 'CLI-USER-GUIDE.md: https://github.com/yourusername/rag-factory/issues', 'faq.md: https://github.com/yourusername/rag-factory/issues', 'faq.md: https://github.com/yourusername/rag-factory/discussions', 'faq.md: https://github.com/yourusername/rag-factory/discussions', 'user-guide.md: https://github.com/yourusername/rag-factory', 'index.md: https://github.com/yourusername/rag-factory/issues', 'index.md: https://github.com/yourusername/rag-factory/discussions', 'quick-start.md: https://github.com/yourusername/rag-factory/issues'])
============== 2 failed, 1 passed, 1 skipped, 8 warnings in 4.94s ==============

[101/206] PASSED: tests/unit/evaluation/test_benchmark_suite.py
  Tests: 15 (P:15 F:0 S:0)
[102/206] PASSED: tests/unit/evaluation/test_comparison.py
  Tests: 14 (P:14 F:0 S:0)
[103/206] PASSED: tests/unit/evaluation/test_dataset_loader.py
  Tests: 14 (P:14 F:0 S:0)
[104/206] PASSED: tests/unit/evaluation/test_export.py
  Tests: 12 (P:12 F:0 S:0)
[105/206] PASSED: tests/unit/evaluation/test_retrieval_metrics.py
  Tests: 22 (P:22 F:0 S:0)
[106/206] PASSED: tests/unit/evaluation/test_statistical_testing.py
  Tests: 21 (P:21 F:0 S:0)
[107/206] PASSED: tests/unit/examples/test_examples_imports.py
  Tests: 7 (P:7 F:0 S:0)
[108/206] PASSED: tests/unit/examples/test_examples_syntax.py
  Tests: 8 (P:8 F:0 S:0)
[109/206] PASSED: tests/unit/examples/test_requirements.py
  Tests: 8 (P:8 F:0 S:0)
[110/206] FAILED: tests/unit/gui/test_backend_integration.py
  Tests: 0 (P:0 F:0 S:0)
----------------------------------------
============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.1, pluggy-1.6.0 -- /mnt/MCPProyects/ragTools/venv/bin/python3
cachedir: .pytest_cache
rootdir: /mnt/MCPProyects/ragTools
configfile: pytest.ini (WARNING: ignoring pytest config in pyproject.toml!)
plugins: anyio-4.12.0, cov-7.0.0, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 0 items / 1 error

==================================== ERRORS ====================================
_________ ERROR collecting tests/unit/gui/test_backend_integration.py __________
ImportError while importing test module '/mnt/MCPProyects/ragTools/tests/unit/gui/test_backend_integration.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
venv/lib/python3.12/site-packages/_pytest/python.py:507: in importtestmodule
    mod = import_path(
venv/lib/python3.12/site-packages/_pytest/pathlib.py:587: in import_path
    importlib.import_module(module_name)
/usr/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap>:1387: in _gcd_import
    ???
<frozen importlib._bootstrap>:1360: in _find_and_load
    ???
<frozen importlib._bootstrap>:1331: in _find_and_load_unlocked
    ???
<frozen importlib._bootstrap>:935: in _load_unlocked
    ???
venv/lib/python3.12/site-packages/_pytest/assertion/rewrite.py:197: in exec_module
    exec(co, module.__dict__)
tests/unit/gui/test_backend_integration.py:16: in <module>
    from rag_factory.core.exceptions import MigrationError
E   ModuleNotFoundError: No module named 'rag_factory.core.exceptions'
------------------------------- Captured stdout --------------------------------
 HybridSearchRetriever imported
 AgenticRAGStrategy imported
 LateChunkingRAGStrategy imported
 SelfReflectiveRAGStrategy imported
------------------------------- Captured stderr --------------------------------
None of PyTorch, TensorFlow >= 2.0, or Flax have been found. Models won't be available and only tokenizers, configuration and file/data utilities can be used.
=============================== warnings summary ===============================
rag_factory/services/llm/config.py:8
  /mnt/MCPProyects/ragTools/rag_factory/services/llm/config.py:8: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class LLMServiceConfig(BaseModel):

rag_factory/database/config.py:12
  /mnt/MCPProyects/ragTools/rag_factory/database/config.py:12: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DatabaseConfig(BaseSettings):

rag_factory/strategies/agentic/config.py:9
  /mnt/MCPProyects/ragTools/rag_factory/strategies/agentic/config.py:9: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class AgenticStrategyConfig(BaseModel):

rag_factory/strategies/late_chunking/models.py:21
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:21: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class TokenEmbedding(BaseModel):

rag_factory/strategies/late_chunking/models.py:34
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:34: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DocumentEmbedding(BaseModel):

rag_factory/strategies/late_chunking/models.py:49
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:49: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class EmbeddingChunk(BaseModel):

rag_factory/strategies/contextual/config.py:31
  /mnt/MCPProyects/ragTools/rag_factory/strategies/contextual/config.py:31: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ContextualRetrievalConfig(BaseModel):

rag_factory/strategies/fine_tuned/config.py:6
  /mnt/MCPProyects/ragTools/rag_factory/strategies/fine_tuned/config.py:6: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class FineTunedConfig(BaseSettings):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
ERROR tests/unit/gui/test_backend_integration.py
!!!!!!!!!!!!!!!!!!!! Interrupted: 1 error during collection !!!!!!!!!!!!!!!!!!!!
========================= 8 warnings, 1 error in 2.35s =========================

[111/206] PASSED: tests/unit/gui/test_components.py
  Tests: 25 (P:25 F:0 S:0)
[112/206] PASSED: tests/unit/gui/test_indexing_operations.py
  Tests: 8 (P:8 F:0 S:0)
[113/206] FAILED: tests/unit/gui/test_main_window.py
  Tests: 32 (P:20 F:12 S:0)
----------------------------------------
============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.1, pluggy-1.6.0 -- /mnt/MCPProyects/ragTools/venv/bin/python3
cachedir: .pytest_cache
rootdir: /mnt/MCPProyects/ragTools
configfile: pytest.ini (WARNING: ignoring pytest config in pyproject.toml!)
plugins: anyio-4.12.0, cov-7.0.0, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 26 items

tests/unit/gui/test_main_window.py::TestMainWindowCreation::test_window_title PASSED [  3%]
tests/unit/gui/test_main_window.py::TestMainWindowCreation::test_window_geometry FAILED [  7%]
tests/unit/gui/test_main_window.py::TestMainWindowCreation::test_window_minimum_size FAILED [ 11%]
tests/unit/gui/test_main_window.py::TestMainWindowCreation::test_window_is_resizable PASSED [ 15%]
tests/unit/gui/test_main_window.py::TestWidgetCreation::test_strategy_dropdown_exists PASSED [ 19%]
tests/unit/gui/test_main_window.py::TestWidgetCreation::test_config_preview_exists PASSED [ 23%]
tests/unit/gui/test_main_window.py::TestWidgetCreation::test_text_input_exists PASSED [ 26%]
tests/unit/gui/test_main_window.py::TestWidgetCreation::test_file_path_entry_exists PASSED [ 30%]
tests/unit/gui/test_main_window.py::TestWidgetCreation::test_query_entry_exists PASSED [ 34%]
tests/unit/gui/test_main_window.py::TestWidgetCreation::test_results_display_exists PASSED [ 38%]
tests/unit/gui/test_main_window.py::TestWidgetCreation::test_status_bar_exists PASSED [ 42%]
tests/unit/gui/test_main_window.py::TestWidgetCreation::test_all_buttons_exist FAILED [ 46%]
tests/unit/gui/test_main_window.py::TestButtonStates::test_initial_button_states PASSED [ 50%]
tests/unit/gui/test_main_window.py::TestButtonStates::test_button_state_with_strategy_and_text PASSED [ 53%]
tests/unit/gui/test_main_window.py::TestButtonStates::test_button_state_with_strategy_no_text FAILED [ 57%]
tests/unit/gui/test_main_window.py::TestButtonStates::test_button_state_with_text_no_strategy PASSED [ 61%]
tests/unit/gui/test_main_window.py::TestButtonStates::test_retrieve_button_state_with_query FAILED [ 65%]
tests/unit/gui/test_main_window.py::TestEventBinding::test_strategy_dropdown_has_binding PASSED [ 69%]
tests/unit/gui/test_main_window.py::TestEventBinding::test_buttons_have_commands PASSED [ 73%]
tests/unit/gui/test_main_window.py::TestApplicationState::test_initial_state PASSED [ 76%]
tests/unit/gui/test_main_window.py::TestApplicationState::test_strategy_loading_updates_state PASSED [ 80%]
tests/unit/gui/test_main_window.py::TestUtilityMethods::test_browse_file_opens_dialog PASSED [ 84%]
tests/unit/gui/test_main_window.py::TestUtilityMethods::test_clear_all_data_with_no_data PASSED [ 88%]
tests/unit/gui/test_main_window.py::TestUtilityMethods::test_clear_all_data_with_confirmation PASSED [ 92%]
tests/unit/gui/test_main_window.py::TestUtilityMethods::test_show_help_displays_message FAILED [ 96%]
tests/unit/gui/test_main_window.py::TestWindowLifecycle::test_window_can_be_destroyed PASSED [100%]

=================================== FAILURES ===================================
_________________ TestMainWindowCreation.test_window_geometry __________________
tests/unit/gui/test_main_window.py:98: in test_window_geometry
    assert "900x800" in geometry
E   AssertionError: assert '900x800' in '1200x800+360+53'
---------------------------- Captured stderr setup -----------------------------
INFO:rag_factory.gui.main_window:GUI log capture initialized
INFO:rag_factory.gui.main_window:Initializing ServiceRegistry from /tmp/pytest-of-admindevmac/pytest-21/test_window_geometry0/config/services.yaml
INFO:rag_factory.gui.main_window:All required services available: ['db_main']
INFO:rag_factory.gui.main_window:Initializing StrategyPairManager
INFO:rag_factory.gui.main_window:Backend initialization complete
------------------------------ Captured log setup ------------------------------
INFO     rag_factory.gui.main_window:main_window.py:321 GUI log capture initialized
INFO     rag_factory.gui.main_window:main_window.py:345 Initializing ServiceRegistry from /tmp/pytest-of-admindevmac/pytest-21/test_window_geometry0/config/services.yaml
INFO     rag_factory.gui.main_window:main_window.py:421 All required services available: ['db_main']
INFO     rag_factory.gui.main_window:main_window.py:365 Initializing StrategyPairManager
INFO     rag_factory.gui.main_window:main_window.py:384 Backend initialization complete
_______________ TestMainWindowCreation.test_window_minimum_size ________________
tests/unit/gui/test_main_window.py:105: in test_window_minimum_size
    assert min_width == 800
E   assert 900 == 800
---------------------------- Captured stderr setup -----------------------------
INFO:rag_factory.gui.main_window:GUI log capture initialized
INFO:rag_factory.gui.main_window:Initializing ServiceRegistry from /tmp/pytest-of-admindevmac/pytest-21/test_window_minimum_size0/config/services.yaml
INFO:rag_factory.gui.main_window:All required services available: ['db_main']
INFO:rag_factory.gui.main_window:Initializing StrategyPairManager
INFO:rag_factory.gui.main_window:Backend initialization complete
------------------------------ Captured log setup ------------------------------
INFO     rag_factory.gui.main_window:main_window.py:321 GUI log capture initialized
INFO     rag_factory.gui.main_window:main_window.py:345 Initializing ServiceRegistry from /tmp/pytest-of-admindevmac/pytest-21/test_window_minimum_size0/config/services.yaml
INFO     rag_factory.gui.main_window:main_window.py:421 All required services available: ['db_main']
INFO     rag_factory.gui.main_window:main_window.py:365 Initializing StrategyPairManager
INFO     rag_factory.gui.main_window:main_window.py:384 Backend initialization complete
__________________ TestWidgetCreation.test_all_buttons_exist ___________________
tests/unit/gui/test_main_window.py:169: in test_all_buttons_exist
    assert hasattr(gui_app, button_name), f"Missing button: {button_name}"
E   AssertionError: Missing button: clear_data_btn
E   assert False
E    +  where False = hasattr(<rag_factory.gui.main_window.RAGFactoryGUI object at 0x7e50ba6eecf0>, 'clear_data_btn')
---------------------------- Captured stderr setup -----------------------------
INFO:rag_factory.gui.main_window:GUI log capture initialized
INFO:rag_factory.gui.main_window:Initializing ServiceRegistry from /tmp/pytest-of-admindevmac/pytest-21/test_all_buttons_exist0/config/services.yaml
INFO:rag_factory.gui.main_window:All required services available: ['db_main']
INFO:rag_factory.gui.main_window:Initializing StrategyPairManager
INFO:rag_factory.gui.main_window:Backend initialization complete
------------------------------ Captured log setup ------------------------------
INFO     rag_factory.gui.main_window:main_window.py:321 GUI log capture initialized
INFO     rag_factory.gui.main_window:main_window.py:345 Initializing ServiceRegistry from /tmp/pytest-of-admindevmac/pytest-21/test_all_buttons_exist0/config/services.yaml
INFO     rag_factory.gui.main_window:main_window.py:421 All required services available: ['db_main']
INFO     rag_factory.gui.main_window:main_window.py:365 Initializing StrategyPairManager
INFO     rag_factory.gui.main_window:main_window.py:384 Backend initialization complete
___________ TestButtonStates.test_button_state_with_strategy_no_text ___________
tests/unit/gui/test_main_window.py:210: in test_button_state_with_strategy_no_text
    assert str(gui_app.index_text_btn['state']) == 'disabled'
E   AssertionError: assert 'normal' == 'disabled'
E     
E     - disabled
E     + normal
---------------------------- Captured stderr setup -----------------------------
INFO:rag_factory.gui.main_window:GUI log capture initialized
INFO:rag_factory.gui.main_window:Initializing ServiceRegistry from /tmp/pytest-of-admindevmac/pytest-21/test_button_state_with_strateg1/config/services.yaml
INFO:rag_factory.gui.main_window:All required services available: ['db_main']
INFO:rag_factory.gui.main_window:Initializing StrategyPairManager
INFO:rag_factory.gui.main_window:Backend initialization complete
------------------------------ Captured log setup ------------------------------
INFO     rag_factory.gui.main_window:main_window.py:321 GUI log capture initialized
INFO     rag_factory.gui.main_window:main_window.py:345 Initializing ServiceRegistry from /tmp/pytest-of-admindevmac/pytest-21/test_button_state_with_strateg1/config/services.yaml
INFO     rag_factory.gui.main_window:main_window.py:421 All required services available: ['db_main']
INFO     rag_factory.gui.main_window:main_window.py:365 Initializing StrategyPairManager
INFO     rag_factory.gui.main_window:main_window.py:384 Backend initialization complete
____________ TestButtonStates.test_retrieve_button_state_with_query ____________
tests/unit/gui/test_main_window.py:240: in test_retrieve_button_state_with_query
    assert str(gui_app.retrieve_btn['state']) == 'normal'
E   AssertionError: assert 'disabled' == 'normal'
E     
E     - normal
E     + disabled
---------------------------- Captured stderr setup -----------------------------
INFO:rag_factory.gui.main_window:GUI log capture initialized
INFO:rag_factory.gui.main_window:Initializing ServiceRegistry from /tmp/pytest-of-admindevmac/pytest-21/test_retrieve_button_state_wit0/config/services.yaml
INFO:rag_factory.gui.main_window:All required services available: ['db_main']
INFO:rag_factory.gui.main_window:Initializing StrategyPairManager
INFO:rag_factory.gui.main_window:Backend initialization complete
------------------------------ Captured log setup ------------------------------
INFO     rag_factory.gui.main_window:main_window.py:321 GUI log capture initialized
INFO     rag_factory.gui.main_window:main_window.py:345 Initializing ServiceRegistry from /tmp/pytest-of-admindevmac/pytest-21/test_retrieve_button_state_wit0/config/services.yaml
INFO     rag_factory.gui.main_window:main_window.py:421 All required services available: ['db_main']
INFO     rag_factory.gui.main_window:main_window.py:365 Initializing StrategyPairManager
INFO     rag_factory.gui.main_window:main_window.py:384 Backend initialization complete
______________ TestUtilityMethods.test_show_help_displays_message ______________
tests/unit/gui/test_main_window.py:314: in test_show_help_displays_message
    mock_info.assert_called_once()
/usr/lib/python3.12/unittest/mock.py:923: in assert_called_once
    raise AssertionError(msg)
E   AssertionError: Expected 'showinfo' to have been called once. Called 0 times.
---------------------------- Captured stderr setup -----------------------------
INFO:rag_factory.gui.main_window:GUI log capture initialized
INFO:rag_factory.gui.main_window:Initializing ServiceRegistry from /tmp/pytest-of-admindevmac/pytest-21/test_show_help_displays_messag0/config/services.yaml
INFO:rag_factory.gui.main_window:All required services available: ['db_main']
INFO:rag_factory.gui.main_window:Initializing StrategyPairManager
INFO:rag_factory.gui.main_window:Backend initialization complete
------------------------------ Captured log setup ------------------------------
INFO     rag_factory.gui.main_window:main_window.py:321 GUI log capture initialized
INFO     rag_factory.gui.main_window:main_window.py:345 Initializing ServiceRegistry from /tmp/pytest-of-admindevmac/pytest-21/test_show_help_displays_messag0/config/services.yaml
INFO     rag_factory.gui.main_window:main_window.py:421 All required services available: ['db_main']
INFO     rag_factory.gui.main_window:main_window.py:365 Initializing StrategyPairManager
INFO     rag_factory.gui.main_window:main_window.py:384 Backend initialization complete
=============================== warnings summary ===============================
rag_factory/services/llm/config.py:8
  /mnt/MCPProyects/ragTools/rag_factory/services/llm/config.py:8: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class LLMServiceConfig(BaseModel):

rag_factory/database/config.py:12
  /mnt/MCPProyects/ragTools/rag_factory/database/config.py:12: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DatabaseConfig(BaseSettings):

rag_factory/strategies/agentic/config.py:9
  /mnt/MCPProyects/ragTools/rag_factory/strategies/agentic/config.py:9: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class AgenticStrategyConfig(BaseModel):

rag_factory/strategies/late_chunking/models.py:21
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:21: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class TokenEmbedding(BaseModel):

rag_factory/strategies/late_chunking/models.py:34
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:34: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DocumentEmbedding(BaseModel):

rag_factory/strategies/late_chunking/models.py:49
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:49: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class EmbeddingChunk(BaseModel):

rag_factory/strategies/contextual/config.py:31
  /mnt/MCPProyects/ragTools/rag_factory/strategies/contextual/config.py:31: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ContextualRetrievalConfig(BaseModel):

rag_factory/strategies/fine_tuned/config.py:6
  /mnt/MCPProyects/ragTools/rag_factory/strategies/fine_tuned/config.py:6: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class FineTunedConfig(BaseSettings):

tests/unit/gui/test_main_window.py::TestMainWindowCreation::test_window_is_resizable
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-1 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 764, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_main_window.py::TestWidgetCreation::test_strategy_dropdown_exists
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-2 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 764, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_main_window.py::TestWidgetCreation::test_file_path_entry_exists
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-3 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 764, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_main_window.py::TestWidgetCreation::test_query_entry_exists
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-4 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 764, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_main_window.py::TestWidgetCreation::test_results_display_exists
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-5 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 764, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_main_window.py::TestWidgetCreation::test_all_buttons_exist
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-6 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 764, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_main_window.py::TestButtonStates::test_initial_button_states
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-7 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 764, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_main_window.py::TestButtonStates::test_button_state_with_strategy_and_text
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-8 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 764, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_main_window.py::TestButtonStates::test_button_state_with_strategy_no_text
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-9 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 764, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_main_window.py::TestButtonStates::test_button_state_with_text_no_strategy
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-10 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 764, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_main_window.py::TestButtonStates::test_retrieve_button_state_with_query
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-11 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 764, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_main_window.py::TestButtonStates::test_retrieve_button_state_with_query
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-12 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 764, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_main_window.py::TestEventBinding::test_strategy_dropdown_has_binding
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-13 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 764, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_main_window.py::TestApplicationState::test_initial_state
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-14 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 764, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_main_window.py::TestApplicationState::test_strategy_loading_updates_state
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-16 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 764, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_main_window.py::TestApplicationState::test_strategy_loading_updates_state
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-15 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 764, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_main_window.py::TestUtilityMethods::test_clear_all_data_with_no_data
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-17 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 764, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_main_window.py::TestUtilityMethods::test_clear_all_data_with_confirmation
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-18 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 764, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_main_window.py::TestUtilityMethods::test_show_help_displays_message
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-19 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 764, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_main_window.py::TestUtilityMethods::test_show_help_displays_message
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-20 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 764, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_main_window.py::TestWindowLifecycle::test_window_can_be_destroyed
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-21 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 764, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.3-final-0 ________________

Name                                                               Stmts   Miss  Cover   Missing
------------------------------------------------------------------------------------------------
rag_factory/__init__.py                                                7      2    71%   18-19
rag_factory/__version__.py                                             1      0   100%
rag_factory/cli/__init__.py                                            2      0   100%
rag_factory/cli/commands/__init__.py                                   1      0   100%
rag_factory/cli/commands/benchmark.py                                 96     81    16%   40-53, 64-84, 148-263
rag_factory/cli/commands/check_consistency.py                         43     33    23%   64-120
rag_factory/cli/commands/config.py                                    78     68    13%   26-64, 102-188
rag_factory/cli/commands/gui.py                                       25     17    32%   61-91
rag_factory/cli/commands/index.py                                     65     52    20%   29-39, 93-185
rag_factory/cli/commands/query.py                                     47     36    23%   73-149
rag_factory/cli/commands/repl.py                                     152    130    14%   29-56, 63-108, 112-120, 124-133, 137-155, 159-172, 176-186, 190-207, 211-220, 253-260
rag_factory/cli/commands/strategies.py                                45     36    20%   48-120
rag_factory/cli/commands/validate_e2e.py                              91     69    24%   37-38, 42-142, 145-156
rag_factory/cli/commands/validate_pipeline.py                         70     57    19%   57-156
rag_factory/cli/formatters/__init__.py                                 4      0   100%
rag_factory/cli/formatters/consistency.py                             61     55    10%   21-69, 79-103, 108-138
rag_factory/cli/formatters/output.py                                  20      9    55%   23-24, 43-44, 63-64, 74, 79, 84
rag_factory/cli/formatters/results.py                                 71     62    13%   28-55, 72-99, 116-144, 157-181
rag_factory/cli/formatters/validation.py                              63     53    16%   25-43, 48-56, 65-77, 86-98, 103-129, 134-137
rag_factory/cli/main.py                                               32     10    69%   25-28, 48-49, 79-81, 85
rag_factory/cli/utils/__init__.py                                      3      0   100%
rag_factory/cli/utils/progress.py                                     14      8    43%   34-47, 73-76
rag_factory/cli/utils/validation.py                                   53     42    21%   30-41, 57-77, 93-118, 135
rag_factory/config/__init__.py                                         4      0   100%
rag_factory/config/env_resolver.py                                    52     37    29%   47-54, 70-90, 110, 129-147
rag_factory/config/schemas/__init__.py                                 2      0   100%
rag_factory/config/schemas/version.py                                 10      6    40%   29-38
rag_factory/config/strategy_loader.py                                 54     36    33%   32-41, 45-60, 75-89, 101-104
rag_factory/config/strategy_pair_manager.py                          105     83    21%   40-72, 92-132, 148-198, 210-215, 229, 259-282
rag_factory/config/validator.py                                       93     76    18%   27-30, 34-39, 53-58, 62-74, 111-132, 177-198, 215-235, 247-249, 271-295, 333-354
rag_factory/core/__init__.py                                           4      4     0%   7-23
rag_factory/core/capabilities.py                                      61     16    74%   129, 155, 173-174, 239-253
rag_factory/core/indexing_interface.py                                54     35    35%   55-57, 118-123, 144, 164, 208, 260, 272, 292-313, 341-364
rag_factory/core/pipeline.py                                          49     35    29%   22-24, 33-40, 55-77, 95-96, 105-108, 117-120, 137-146
rag_factory/core/retrieval_interface.py                               38     20    47%   56-58, 112-117, 138, 158, 196, 247, 259, 285-309
rag_factory/database/__init__.py                                       4      0   100%
rag_factory/database/config.py                                        17      0   100%
rag_factory/database/connection.py                                    80     54    32%   40-48, 61-86, 96, 107, 126-137, 150-157, 165-170, 178-183, 196-197, 209-214, 218, 222
rag_factory/database/env_validator.py                                 38     38     0%   7-139
rag_factory/database/models.py                                        85     32    62%   31-34, 37-45, 48-54, 66-69, 72-77, 80-85, 181, 323-325
rag_factory/database/vector_indexing.py                               38     38     0%   7-114
rag_factory/evaluation/__init__.py                                     4      4     0%   29-41
rag_factory/evaluation/analysis/__init__.py                            3      3     0%   8-11
rag_factory/evaluation/analysis/comparison.py                        135    135     0%   8-323
rag_factory/evaluation/analysis/statistics.py                         81     81     0%   8-320
rag_factory/evaluation/benchmarks/__init__.py                          3      3     0%   8-14
rag_factory/evaluation/benchmarks/config.py                           25     25     0%   7-64
rag_factory/evaluation/benchmarks/runner.py                          155    155     0%   8-423
rag_factory/evaluation/datasets/__init__.py                            3      3     0%   8-14
rag_factory/evaluation/datasets/loader.py                             88     88     0%   8-281
rag_factory/evaluation/datasets/schema.py                             52     52     0%   8-160
rag_factory/evaluation/datasets/statistics.py                         65     65     0%   8-226
rag_factory/evaluation/exporters/__init__.py                           4      4     0%   8-12
rag_factory/evaluation/exporters/csv_exporter.py                      52     52     0%   3-124
rag_factory/evaluation/exporters/html_exporter.py                     47     47     0%   3-293
rag_factory/evaluation/exporters/json_exporter.py                     19     19     0%   3-68
rag_factory/evaluation/metrics/__init__.py                             3      3     0%   12-25
rag_factory/evaluation/metrics/base.py                                31     31     0%   8-115
rag_factory/evaluation/metrics/cost.py                                65     65     0%   8-313
rag_factory/evaluation/metrics/performance.py                         42     42     0%   8-202
rag_factory/evaluation/metrics/quality.py                             84     84     0%   8-377
rag_factory/evaluation/metrics/retrieval.py                           77     77     0%   9-401
rag_factory/exceptions.py                                             13      0   100%
rag_factory/factory.py                                               187    137    27%   109-116, 144, 165-170, 202-230, 256-270, 300-324, 347-348, 365, 384, 401, 418, 435, 451-460, 480-502, 528-545, 568-611, 644-699, 703-715
rag_factory/gui/__init__.py                                            2      0   100%
rag_factory/gui/components/__init__.py                                 3      0   100%
rag_factory/gui/components/scrolled_text.py                           64     14    78%   89, 151-164, 190-192, 195-196
rag_factory/gui/components/status_bar.py                              62      5    92%   125, 161, 177-180
rag_factory/gui/main_window.py                                       701    387    45%   76-77, 137-164, 205-263, 314-316, 333-341, 349-357, 361, 373-381, 386-390, 399, 411-419, 695-696, 700-707, 714-721, 731-732, 736-738, 748, 774, 826-858, 899-970, 974-1062, 1072-1074, 1082-1084, 1088-1164, 1177-1234, 1244-1246, 1254-1258, 1294-1298, 1315-1319, 1324-1371, 1375-1394, 1398, 1491-1549, 1554-1571, 1575-1582, 1587-1600, 1605-1614, 1618
rag_factory/gui/utils/__init__.py                                      3      0   100%
rag_factory/gui/utils/formatters.py                                   57     47    18%   29-30, 50-90, 110-118, 134-137, 155-165
rag_factory/gui/utils/threading.py                                    32     23    28%   44-73, 97, 124-129
rag_factory/legacy_config.py                                         155    155     0%   22-542
rag_factory/models/__init__.py                                         6      6     0%   3-14
rag_factory/models/embedding/__init__.py                               4      4     0%   3-12
rag_factory/models/embedding/loader.py                               179    179     0%   3-367
rag_factory/models/embedding/models.py                                47     47     0%   3-106
rag_factory/models/embedding/registry.py                             128    128     0%   3-282
rag_factory/models/evaluation/__init__.py                              3      3     0%   3-6
rag_factory/models/evaluation/ab_testing.py                           98     98     0%   3-281
rag_factory/models/evaluation/models.py                               29     29     0%   3-74
rag_factory/observability/__init__.py                                  3      3     0%   3-10
rag_factory/observability/integrations/__init__.py                     1      1     0%   3
rag_factory/observability/integrations/prometheus.py                  47     47     0%   3-229
rag_factory/observability/logging/__init__.py                          2      2     0%   3-5
rag_factory/observability/logging/config.py                           16     16     0%   3-37
rag_factory/observability/logging/filters.py                          41     41     0%   3-103
rag_factory/observability/logging/logger.py                           86     86     0%   3-396
rag_factory/observability/metrics/__init__.py                          2      2     0%   3-9
rag_factory/observability/metrics/collector.py                       143    143     0%   3-459
rag_factory/observability/metrics/cost.py                             39     39     0%   3-221
rag_factory/observability/metrics/performance.py                      64     64     0%   3-196
rag_factory/observability/monitoring/__init__.py                       1      1     0%   3
rag_factory/observability/monitoring/api.py                          101    101     0%   3-328
rag_factory/pipeline.py                                              156    156     0%   34-507
rag_factory/registry/__init__.py                                       4      0   100%
rag_factory/registry/exceptions.py                                     6      0   100%
rag_factory/registry/service_factory.py                               84     69    18%   45-54, 62-65, 70-73, 78-80, 84-86, 95-127, 136-165, 176-215, 229-255
rag_factory/registry/service_registry.py                              91     71    22%   43-51, 55-85, 103-156, 164, 178-203, 210-223, 227, 231-232
rag_factory/repositories/__init__.py                                   5      0   100%
rag_factory/repositories/base.py                                      42     21    50%   38, 53, 70, 87, 103, 114-118, 125, 136-139, 159-164
rag_factory/repositories/chunk.py                                    206    180    13%   40-45, 68-76, 90-95, 120-133, 155-171, 187-202, 221-231, 250-261, 287-328, 355-396, 422-474, 489-499, 513-521, 537-543, 557-563, 577-587, 604-626, 639-670
rag_factory/repositories/document.py                                  93     74    20%   41-46, 63-68, 98-118, 140-156, 172-187, 206, 223-233, 247-255, 272-279, 290-293, 307-312
rag_factory/repositories/exceptions.py                                18      7    61%   34-36, 56-59
rag_factory/services/__init__.py                                       4      0   100%
rag_factory/services/api/__init__.py                                   4      4     0%   7-11
rag_factory/services/api/anthropic.py                                 27     27     0%   7-141
rag_factory/services/api/cohere.py                                    30     30     0%   7-113
rag_factory/services/api/openai.py                                    46     46     0%   7-235
rag_factory/services/consistency.py                                   32     24    25%   80-113, 144-170
rag_factory/services/database/__init__.py                              5      0   100%
rag_factory/services/database/database_context.py                    181    159    12%   58-64, 88-106, 123, 140-150, 179-200, 223-240, 256-266, 305-330, 338-339, 343-406, 414-415, 430-510, 516-517, 521-546
rag_factory/services/database/migration_validator.py                  96     74    23%   29-30, 61-69, 81-88, 109-131, 148-152, 163-192, 204-219, 230-237, 249, 261-271, 283-286
rag_factory/services/database/neo4j.py                                54     38    30%   15-17, 60-71, 79-84, 103-114, 134-150, 172-181, 188-191, 195, 199
rag_factory/services/database/postgres.py                            195    163    16%   17-18, 26-27, 84-121, 131-145, 149-201, 214-269, 292-346, 360-375, 390-414, 425-440, 472-490, 504-527, 532, 543, 580-598, 607-619, 623, 627
rag_factory/services/dependencies.py                                  41     21    49%   96-109, 134-140, 176-180
rag_factory/services/embedding/__init__.py                             4      0   100%
rag_factory/services/embedding/base.py                                31      6    81%   44, 59, 68, 77, 86, 98
rag_factory/services/embedding/cache.py                               43     33    23%   26-32, 43-58, 67-76, 80-82, 90-94
rag_factory/services/embedding/config.py                              29     13    55%   37-43, 50-68, 80
rag_factory/services/embedding/providers/__init__.py                   5      0   100%
rag_factory/services/embedding/providers/cohere.py                    53     36    32%   10-20, 55-75, 90-117, 125, 133, 141, 152-153
rag_factory/services/embedding/providers/local.py                     43     27    37%   8-9, 46-67, 83-109, 117, 125, 133, 146
rag_factory/services/embedding/providers/onnx_local.py               114     93    18%   18-19, 87-177, 193-250, 261-308, 319, 327, 335, 348
rag_factory/services/embedding/providers/openai.py                    51     34    33%   10-20, 53-72, 87-108, 116, 124, 132, 143-144
rag_factory/services/embedding/rate_limiter.py                        20     14    30%   27-37, 45-53
rag_factory/services/embedding/service.py                            100     83    17%   50-62, 79-93, 117-198, 220-222, 233-239, 248-266, 273-275
rag_factory/services/interfaces.py                                    35      0   100%
rag_factory/services/llm/__init__.py                                   5      0   100%
rag_factory/services/llm/base.py                                      43      0   100%
rag_factory/services/llm/config.py                                    23     11    52%   42-57
rag_factory/services/llm/prompt_template.py                           43     24    44%   47-82, 97-100, 111-115
rag_factory/services/llm/providers/__init__.py                        12     12     0%   5-22
rag_factory/services/llm/providers/anthropic.py                       57     57     0%   3-205
rag_factory/services/llm/providers/ollama.py                          55     55     0%   3-196
rag_factory/services/llm/providers/openai.py                          57     57     0%   3-210
rag_factory/services/llm/service.py                                   66     51    23%   32-39, 56-70, 93-129, 154-175, 186, 194-198, 215-216
rag_factory/services/llm/token_counter.py                             27     27     0%   3-72
rag_factory/services/local/__init__.py                                 2      2     0%   7-9
rag_factory/services/local/reranker.py                                32     32     0%   7-116
rag_factory/services/onnx/__init__.py                                  2      2     0%   7-9
rag_factory/services/onnx/embedding.py                                29     29     0%   7-129
rag_factory/services/utils/__init__.py                                 2      0   100%
rag_factory/services/utils/model_converter.py                        104    104     0%   8-291
rag_factory/services/utils/onnx_utils.py                             133    114    14%   22-23, 36-37, 67-123, 142-146, 172-218, 240-274, 291-312, 332-347, 360-378, 392-404
rag_factory/services/utils/reranker_selector.py                       68     68     0%   8-249
rag_factory/strategies/__init__.py                                     2      0   100%
rag_factory/strategies/agentic/__init__.py                             7      0   100%
rag_factory/strategies/agentic/agent.py                              151    130    14%   31-36, 45, 57, 66-90, 109-111, 123-161, 190-214, 230-265, 276-293, 310-331, 339-346, 357-368, 381-420
rag_factory/strategies/agentic/config.py                              12      0   100%
rag_factory/strategies/agentic/frameworks/__init__.py                  1      1     0%   9
rag_factory/strategies/agentic/query_analyzer.py                      89     65    27%   50-55, 67, 79-90, 109-125, 137-147, 159-178, 196-214, 225-260, 278
rag_factory/strategies/agentic/strategy.py                            87     60    31%   50-63, 76, 84, 94-132, 144, 156, 169, 182-222, 234-258, 267, 276, 284
rag_factory/strategies/agentic/tool_implementations.py               135     91    33%   36-37, 41, 45, 52, 86-129, 148-149, 153, 157, 164, 182-247, 266-267, 271, 275, 282, 329-373, 392-393, 397, 401, 407, 446-511
rag_factory/strategies/agentic/tools.py                               40      9    78%   66, 79, 89, 101, 112, 139-142
rag_factory/strategies/auto_register.py                               66     20    70%   13-14, 18-19, 23-24, 28-29, 33-34, 39-40, 46-47, 52-53, 58-59, 79-80
rag_factory/strategies/base.py                                        55     13    76%   80-85, 169-178
rag_factory/strategies/chunking/__init__.py                           15     15     0%   28-67
rag_factory/strategies/chunking/base.py                               91     91     0%   3-256
rag_factory/strategies/chunking/docling_chunker.py                    45     45     0%   13-188
rag_factory/strategies/chunking/fixed_size_chunker.py                 74     74     0%   3-204
rag_factory/strategies/chunking/hybrid_chunker.py                     70     70     0%   3-192
rag_factory/strategies/chunking/semantic_chunker.py                  195    195     0%   3-534
rag_factory/strategies/chunking/structural_chunker.py                147    147     0%   3-425
rag_factory/strategies/chunking/utils.py                              89     89     0%   3-264
rag_factory/strategies/contextual/__init__.py                          7      0   100%
rag_factory/strategies/contextual/batch_processor.py                  91     76    16%   41-43, 60-72, 84-90, 108-128, 145-161, 178-201, 218-266
rag_factory/strategies/contextual/config.py                           46      0   100%
rag_factory/strategies/contextual/context_generator.py                84     70    17%   35-36, 59-99, 112-135, 152-194, 209, 224-234
rag_factory/strategies/contextual/cost_tracker.py                     32     21    34%   31-35, 48-51, 69-82, 94-99, 111-114, 126
rag_factory/strategies/contextual/prompts.py                          25     17    32%   85-106, 119
rag_factory/strategies/contextual/storage.py                          44     35    20%   32-33, 42-45, 54-81, 98-118
rag_factory/strategies/contextual/strategy.py                         78     49    37%   54-67, 75, 83, 107-156, 173, 186, 207-215, 231-262, 278, 284, 289, 298
rag_factory/strategies/fine_tuned/__init__.py                          4      0   100%
rag_factory/strategies/fine_tuned/ab_testing.py                       78     78     0%   1-134
rag_factory/strategies/fine_tuned/config.py                           11      0   100%
rag_factory/strategies/fine_tuned/custom_loader.py                    40     28    30%   17-19, 36-73, 77, 84-88
rag_factory/strategies/fine_tuned/model_registry.py                  126     96    24%   39-50, 80-112, 132-149, 166-178, 182-196, 200-223, 227-240, 249-270, 274-287, 291-303
rag_factory/strategies/hierarchical/__init__.py                        5      5     0%   8-21
rag_factory/strategies/hierarchical/hierarchy_builder.py              79     79     0%   8-335
rag_factory/strategies/hierarchical/models.py                         58     58     0%   8-137
rag_factory/strategies/hierarchical/parent_retriever.py               89     89     0%   8-278
rag_factory/strategies/hierarchical/strategy.py                       76     76     0%   9-301
rag_factory/strategies/indexing/__init__.py                            6      0   100%
rag_factory/strategies/indexing/context_aware.py                     108     88    19%   31, 43, 63-134, 155-156, 160-170, 182-188, 192-198, 208-237, 241-242
rag_factory/strategies/indexing/hierarchical.py                       90     73    19%   50, 63, 88-134, 156-185, 201-236, 253-278, 292-293
rag_factory/strategies/indexing/in_memory.py                          41     25    39%   54, 65, 93-121, 143, 160, 173, 194-200
rag_factory/strategies/indexing/keyword_indexing.py                   42     31    26%   42, 53, 77-157
rag_factory/strategies/indexing/knowledge_graph_indexing.py           46     33    28%   18, 27, 48-89, 108-129
rag_factory/strategies/indexing/vector_embedding.py                   98     85    13%   25, 35, 55-116, 137-221
rag_factory/strategies/knowledge_graph/__init__.py                     4      4     0%   8-19
rag_factory/strategies/knowledge_graph/config.py                      21     21     0%   8-129
rag_factory/strategies/knowledge_graph/entity_extractor.py            70     70     0%   7-205
rag_factory/strategies/knowledge_graph/graph_store.py                 31     31     0%   8-124
rag_factory/strategies/knowledge_graph/hybrid_retriever.py            56     56     0%   8-164
rag_factory/strategies/knowledge_graph/memory_graph_store.py          97     97     0%   8-196
rag_factory/strategies/knowledge_graph/models.py                      53     53     0%   8-122
rag_factory/strategies/knowledge_graph/relationship_extractor.py      62     62     0%   8-189
rag_factory/strategies/knowledge_graph/strategy.py                    80     80     0%   8-256
rag_factory/strategies/late_chunking/__init__.py                       6      0   100%
rag_factory/strategies/late_chunking/coherence_analyzer.py            27     17    37%   20-21, 36-45, 57-65, 82-96
rag_factory/strategies/late_chunking/document_embedder.py            104     89    14%   29-74, 94-184, 202-215, 227-235, 256-279, 296-303, 318
rag_factory/strategies/late_chunking/embedding_chunker.py            117    102    13%   26, 41-61, 68-98, 105-155, 162-182, 191-192, 199-254, 265-289, 293-300
rag_factory/strategies/late_chunking/models.py                        62      0   100%
rag_factory/strategies/late_chunking/strategy.py                      70     46    34%   48-69, 77, 88, 107-122, 140-177, 196-205, 210, 215
rag_factory/strategies/multi_query/__init__.py                         7      7     0%   8-19
rag_factory/strategies/multi_query/config.py                          36     36     0%   3-138
rag_factory/strategies/multi_query/deduplicator.py                    87     87     0%   3-197
rag_factory/strategies/multi_query/parallel_executor.py               52     52     0%   3-163
rag_factory/strategies/multi_query/prompts.py                         10     10     0%   3-84
rag_factory/strategies/multi_query/ranker.py                          80     80     0%   3-201
rag_factory/strategies/multi_query/strategy.py                        68     68     0%   3-184
rag_factory/strategies/multi_query/variant_generator.py               62     62     0%   3-187
rag_factory/strategies/query_expansion/__init__.py                     8      0   100%
rag_factory/strategies/query_expansion/base.py                        66     10    85%   90, 103, 114-118, 130-133
rag_factory/strategies/query_expansion/cache.py                       52     40    23%   20-22, 38-55, 64-66, 70-73, 81-97, 105-112
rag_factory/strategies/query_expansion/expander_service.py            92     71    23%   36-40, 55-58, 75-148, 159-180, 204-215, 233-234, 242-246, 254, 265-273, 283-284
rag_factory/strategies/query_expansion/hyde_expander.py               19     12    37%   25-27, 41-65
rag_factory/strategies/query_expansion/llm_expander.py                25     16    36%   23-25, 39-71, 99
rag_factory/strategies/query_expansion/metrics.py                     66     30    55%   44-45, 53-57, 76-109, 130, 134, 146-152, 160
rag_factory/strategies/query_expansion/prompts.py                     13      7    46%   16, 28-56, 68-107
rag_factory/strategies/reranking/__init__.py                           7      0   100%
rag_factory/strategies/reranking/base.py                              68     16    76%   81, 101, 106, 110-119, 123-130
rag_factory/strategies/reranking/bge_reranker.py                      51     37    27%   14, 53-81, 103-147, 151
rag_factory/strategies/reranking/cache.py                             48     34    29%   32-34, 51-66, 76-77, 81, 90-101, 110-113, 121, 136-138
rag_factory/strategies/reranking/cohere_reranker.py                   34     20    41%   15-16, 55-71, 94-115, 119
rag_factory/strategies/reranking/cosine_reranker.py                   62     47    24%   54-72, 97-139, 158-171, 188, 209-215, 227-230, 242-245, 249
rag_factory/strategies/reranking/cross_encoder_reranker.py            40     27    32%   13-14, 53-76, 98-120, 124
rag_factory/strategies/reranking/metrics.py                           67     67     0%   8-264
rag_factory/strategies/reranking/reranker_service.py                 115     88    23%   56-67, 71-96, 113-225, 235-255, 269, 282-283, 287-292, 296-300, 308-310
rag_factory/strategies/retrieval/__init__.py                           6      0   100%
rag_factory/strategies/retrieval/hybrid_retriever.py                  51     37    27%   32, 39, 51-102, 110-144
rag_factory/strategies/retrieval/keyword_retriever.py                 56     41    27%   41, 52, 71-113, 126-133, 153-172
rag_factory/strategies/retrieval/knowledge_graph_retriever.py         22      9    59%   19, 27, 48-70
rag_factory/strategies/retrieval/multi_query_retriever.py             22      9    59%   19, 26, 44-66
rag_factory/strategies/retrieval/query_expansion_retriever.py         24      9    62%   20, 27, 45-67
rag_factory/strategies/retrieval/semantic_retriever.py                23     12    48%   23, 32, 61-94
rag_factory/strategies/self_reflective/__init__.py                     6      0   100%
rag_factory/strategies/self_reflective/config.py                      20      8    60%   29-42
rag_factory/strategies/self_reflective/grader.py                      80     65    19%   29-35, 51-67, 83-109, 135-171, 187-258, 266
rag_factory/strategies/self_reflective/models.py                      48      0   100%
rag_factory/strategies/self_reflective/refiner.py                     69     56    19%   28-30, 53-96, 113-143, 161-193, 208-228
rag_factory/strategies/self_reflective/strategy.py                    92     74    20%   38-53, 71-181, 192-206, 229-259, 264, 269
rag_factory/utils/__init__.py                                          3      0   100%
rag_factory/utils/token_counter.py                                    45     30    33%   36-40, 52-62, 74-82, 86, 90, 105-106, 124-135, 153-158
rag_factory/utils/tokenization.py                                     95     73    23%   36-40, 53-64, 87-114, 126-129, 141-144, 156, 175-190, 209-228, 241-243, 251-252, 270-271, 292-293, 314-315
------------------------------------------------------------------------------------------------
TOTAL                                                              13429  10626    21%
=========================== short test summary info ============================
FAILED tests/unit/gui/test_main_window.py::TestMainWindowCreation::test_window_geometry - AssertionError: assert '900x800' in '1200x800+360+53'
FAILED tests/unit/gui/test_main_window.py::TestMainWindowCreation::test_window_minimum_size - assert 900 == 800
FAILED tests/unit/gui/test_main_window.py::TestWidgetCreation::test_all_buttons_exist - AssertionError: Missing button: clear_data_btn
assert False
 +  where False = hasattr(<rag_factory.gui.main_window.RAGFactoryGUI object at 0x7e50ba6eecf0>, 'clear_data_btn')
FAILED tests/unit/gui/test_main_window.py::TestButtonStates::test_button_state_with_strategy_no_text - AssertionError: assert 'normal' == 'disabled'
  
  - disabled
  + normal
FAILED tests/unit/gui/test_main_window.py::TestButtonStates::test_retrieve_button_state_with_query - AssertionError: assert 'disabled' == 'normal'
  
  - normal
  + disabled
FAILED tests/unit/gui/test_main_window.py::TestUtilityMethods::test_show_help_displays_message - AssertionError: Expected 'showinfo' to have been called once. Called 0 times.
================== 6 failed, 20 passed, 29 warnings in 17.44s ==================

[114/206] PASSED: tests/unit/gui/test_polish_and_ux.py
  Tests: 18 (P:18 F:0 S:0)
[115/206] FAILED: tests/unit/gui/test_retrieval_operations.py
  Tests: 17 (P:15 F:2 S:0)
----------------------------------------
============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.1, pluggy-1.6.0 -- /mnt/MCPProyects/ragTools/venv/bin/python3
cachedir: .pytest_cache
rootdir: /mnt/MCPProyects/ragTools
configfile: pytest.ini (WARNING: ignoring pytest config in pyproject.toml!)
plugins: anyio-4.12.0, cov-7.0.0, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 16 items

tests/unit/gui/test_retrieval_operations.py::TestQueryExecution::test_retrieve_with_empty_query PASSED [  6%]
tests/unit/gui/test_retrieval_operations.py::TestQueryExecution::test_retrieve_button_disabled_during_operation FAILED [ 12%]
tests/unit/gui/test_retrieval_operations.py::TestQueryExecution::test_top_k_value_parsing PASSED [ 18%]
tests/unit/gui/test_retrieval_operations.py::TestResultFormatting::test_format_results_with_multiple_results PASSED [ 25%]
tests/unit/gui/test_retrieval_operations.py::TestResultFormatting::test_format_results_with_empty_results PASSED [ 31%]
tests/unit/gui/test_retrieval_operations.py::TestResultFormatting::test_content_truncation PASSED [ 37%]
tests/unit/gui/test_retrieval_operations.py::TestResultFormatting::test_score_formatting PASSED [ 43%]
tests/unit/gui/test_retrieval_operations.py::TestResultFormatting::test_rank_numbering PASSED [ 50%]
tests/unit/gui/test_retrieval_operations.py::TestEmptyResultsHandling::test_empty_results_message PASSED [ 56%]
tests/unit/gui/test_retrieval_operations.py::TestErrorHandling::test_error_handling_method_exists PASSED [ 62%]
tests/unit/gui/test_retrieval_operations.py::TestErrorHandling::test_error_callback_works PASSED [ 68%]
tests/unit/gui/test_retrieval_operations.py::TestErrorHandling::test_error_displays_in_results PASSED [ 75%]
tests/unit/gui/test_retrieval_operations.py::TestProgressIndication::test_searching_placeholder_shown PASSED [ 81%]
tests/unit/gui/test_retrieval_operations.py::TestProgressIndication::test_status_bar_updated PASSED [ 87%]
tests/unit/gui/test_retrieval_operations.py::TestCompletionHandlers::test_completion_handler_displays_results PASSED [ 93%]
tests/unit/gui/test_retrieval_operations.py::TestCompletionHandlers::test_completion_handler_updates_status PASSED [100%]

=================================== FAILURES ===================================
______ TestQueryExecution.test_retrieve_button_disabled_during_operation _______
tests/unit/gui/test_retrieval_operations.py:107: in test_retrieve_button_disabled_during_operation
    assert str(app.retrieve_btn['state']) == 'normal'
E   AssertionError: assert 'disabled' == 'normal'
E     
E     - normal
E     + disabled
---------------------------- Captured stderr setup -----------------------------
INFO:rag_factory.gui.main_window:GUI log capture initialized
INFO:rag_factory.gui.main_window:Initializing ServiceRegistry from /tmp/pytest-of-admindevmac/pytest-23/test_retrieve_button_disabled_0/config/services.yaml
INFO:rag_factory.gui.main_window:All required services available: ['db_main']
INFO:rag_factory.gui.main_window:Initializing StrategyPairManager
INFO:rag_factory.gui.main_window:Backend initialization complete
------------------------------ Captured log setup ------------------------------
INFO     rag_factory.gui.main_window:main_window.py:321 GUI log capture initialized
INFO     rag_factory.gui.main_window:main_window.py:345 Initializing ServiceRegistry from /tmp/pytest-of-admindevmac/pytest-23/test_retrieve_button_disabled_0/config/services.yaml
INFO     rag_factory.gui.main_window:main_window.py:421 All required services available: ['db_main']
INFO     rag_factory.gui.main_window:main_window.py:365 Initializing StrategyPairManager
INFO     rag_factory.gui.main_window:main_window.py:384 Backend initialization complete
=============================== warnings summary ===============================
rag_factory/services/llm/config.py:8
  /mnt/MCPProyects/ragTools/rag_factory/services/llm/config.py:8: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class LLMServiceConfig(BaseModel):

rag_factory/database/config.py:12
  /mnt/MCPProyects/ragTools/rag_factory/database/config.py:12: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DatabaseConfig(BaseSettings):

rag_factory/strategies/agentic/config.py:9
  /mnt/MCPProyects/ragTools/rag_factory/strategies/agentic/config.py:9: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class AgenticStrategyConfig(BaseModel):

rag_factory/strategies/late_chunking/models.py:21
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:21: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class TokenEmbedding(BaseModel):

rag_factory/strategies/late_chunking/models.py:34
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:34: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DocumentEmbedding(BaseModel):

rag_factory/strategies/late_chunking/models.py:49
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:49: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class EmbeddingChunk(BaseModel):

rag_factory/strategies/contextual/config.py:31
  /mnt/MCPProyects/ragTools/rag_factory/strategies/contextual/config.py:31: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ContextualRetrievalConfig(BaseModel):

rag_factory/strategies/fine_tuned/config.py:6
  /mnt/MCPProyects/ragTools/rag_factory/strategies/fine_tuned/config.py:6: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class FineTunedConfig(BaseSettings):

tests/unit/gui/test_retrieval_operations.py::TestQueryExecution::test_retrieve_button_disabled_during_operation
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-1 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 756, in load_strategy
      indexing, retrieval = self.strategy_manager.load_pair(strategy_name)
      ^^^^^^^^^^^^^^^^^^^
  TypeError: cannot unpack non-iterable Mock object
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_retrieval_operations.py::TestQueryExecution::test_top_k_value_parsing
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-2 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 756, in load_strategy
      indexing, retrieval = self.strategy_manager.load_pair(strategy_name)
      ^^^^^^^^^^^^^^^^^^^
  TypeError: cannot unpack non-iterable Mock object
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_retrieval_operations.py::TestResultFormatting::test_content_truncation
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-3 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 756, in load_strategy
      indexing, retrieval = self.strategy_manager.load_pair(strategy_name)
      ^^^^^^^^^^^^^^^^^^^
  TypeError: cannot unpack non-iterable Mock object
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_retrieval_operations.py::TestResultFormatting::test_score_formatting
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-5 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 756, in load_strategy
      indexing, retrieval = self.strategy_manager.load_pair(strategy_name)
      ^^^^^^^^^^^^^^^^^^^
  TypeError: cannot unpack non-iterable Mock object
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_retrieval_operations.py::TestResultFormatting::test_rank_numbering
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-6 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 756, in load_strategy
      indexing, retrieval = self.strategy_manager.load_pair(strategy_name)
      ^^^^^^^^^^^^^^^^^^^
  TypeError: cannot unpack non-iterable Mock object
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_retrieval_operations.py::TestEmptyResultsHandling::test_empty_results_message
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-7 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 756, in load_strategy
      indexing, retrieval = self.strategy_manager.load_pair(strategy_name)
      ^^^^^^^^^^^^^^^^^^^
  TypeError: cannot unpack non-iterable Mock object
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_retrieval_operations.py::TestEmptyResultsHandling::test_empty_results_message
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-4 (retrieve_operation)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 1146, in retrieve_operation
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 1156, in retrieve_operation
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_retrieval_operations.py::TestErrorHandling::test_error_handling_method_exists
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-8 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 756, in load_strategy
      indexing, retrieval = self.strategy_manager.load_pair(strategy_name)
      ^^^^^^^^^^^^^^^^^^^
  TypeError: cannot unpack non-iterable Mock object
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_retrieval_operations.py::TestErrorHandling::test_error_callback_works
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-9 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 756, in load_strategy
      indexing, retrieval = self.strategy_manager.load_pair(strategy_name)
      ^^^^^^^^^^^^^^^^^^^
  TypeError: cannot unpack non-iterable Mock object
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_retrieval_operations.py::TestErrorHandling::test_error_displays_in_results
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-10 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 756, in load_strategy
      indexing, retrieval = self.strategy_manager.load_pair(strategy_name)
      ^^^^^^^^^^^^^^^^^^^
  TypeError: cannot unpack non-iterable Mock object
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_retrieval_operations.py::TestErrorHandling::test_error_displays_in_results
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-11 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 756, in load_strategy
      indexing, retrieval = self.strategy_manager.load_pair(strategy_name)
      ^^^^^^^^^^^^^^^^^^^
  TypeError: cannot unpack non-iterable Mock object
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_retrieval_operations.py::TestProgressIndication::test_searching_placeholder_shown
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-12 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 756, in load_strategy
      indexing, retrieval = self.strategy_manager.load_pair(strategy_name)
      ^^^^^^^^^^^^^^^^^^^
  TypeError: cannot unpack non-iterable Mock object
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_retrieval_operations.py::TestProgressIndication::test_status_bar_updated
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-13 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 756, in load_strategy
      indexing, retrieval = self.strategy_manager.load_pair(strategy_name)
      ^^^^^^^^^^^^^^^^^^^
  TypeError: cannot unpack non-iterable Mock object
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_retrieval_operations.py::TestCompletionHandlers::test_completion_handler_updates_status
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-14 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 756, in load_strategy
      indexing, retrieval = self.strategy_manager.load_pair(strategy_name)
      ^^^^^^^^^^^^^^^^^^^
  TypeError: cannot unpack non-iterable Mock object
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.3-final-0 ________________

Name                                                               Stmts   Miss  Cover   Missing
------------------------------------------------------------------------------------------------
rag_factory/__init__.py                                                7      2    71%   18-19
rag_factory/__version__.py                                             1      0   100%
rag_factory/cli/__init__.py                                            2      0   100%
rag_factory/cli/commands/__init__.py                                   1      0   100%
rag_factory/cli/commands/benchmark.py                                 96     81    16%   40-53, 64-84, 148-263
rag_factory/cli/commands/check_consistency.py                         43     33    23%   64-120
rag_factory/cli/commands/config.py                                    78     68    13%   26-64, 102-188
rag_factory/cli/commands/gui.py                                       25     17    32%   61-91
rag_factory/cli/commands/index.py                                     65     52    20%   29-39, 93-185
rag_factory/cli/commands/query.py                                     47     36    23%   73-149
rag_factory/cli/commands/repl.py                                     152    130    14%   29-56, 63-108, 112-120, 124-133, 137-155, 159-172, 176-186, 190-207, 211-220, 253-260
rag_factory/cli/commands/strategies.py                                45     36    20%   48-120
rag_factory/cli/commands/validate_e2e.py                              91     69    24%   37-38, 42-142, 145-156
rag_factory/cli/commands/validate_pipeline.py                         70     57    19%   57-156
rag_factory/cli/formatters/__init__.py                                 4      0   100%
rag_factory/cli/formatters/consistency.py                             61     55    10%   21-69, 79-103, 108-138
rag_factory/cli/formatters/output.py                                  20      9    55%   23-24, 43-44, 63-64, 74, 79, 84
rag_factory/cli/formatters/results.py                                 71     62    13%   28-55, 72-99, 116-144, 157-181
rag_factory/cli/formatters/validation.py                              63     53    16%   25-43, 48-56, 65-77, 86-98, 103-129, 134-137
rag_factory/cli/main.py                                               32     10    69%   25-28, 48-49, 79-81, 85
rag_factory/cli/utils/__init__.py                                      3      0   100%
rag_factory/cli/utils/progress.py                                     14      8    43%   34-47, 73-76
rag_factory/cli/utils/validation.py                                   53     42    21%   30-41, 57-77, 93-118, 135
rag_factory/config/__init__.py                                         4      0   100%
rag_factory/config/env_resolver.py                                    52     37    29%   47-54, 70-90, 110, 129-147
rag_factory/config/schemas/__init__.py                                 2      0   100%
rag_factory/config/schemas/version.py                                 10      6    40%   29-38
rag_factory/config/strategy_loader.py                                 54     36    33%   32-41, 45-60, 75-89, 101-104
rag_factory/config/strategy_pair_manager.py                          105     83    21%   40-72, 92-132, 148-198, 210-215, 229, 259-282
rag_factory/config/validator.py                                       93     76    18%   27-30, 34-39, 53-58, 62-74, 111-132, 177-198, 215-235, 247-249, 271-295, 333-354
rag_factory/core/__init__.py                                           4      4     0%   7-23
rag_factory/core/capabilities.py                                      61     16    74%   129, 155, 173-174, 239-253
rag_factory/core/indexing_interface.py                                54     35    35%   55-57, 118-123, 144, 164, 208, 260, 272, 292-313, 341-364
rag_factory/core/pipeline.py                                          49     35    29%   22-24, 33-40, 55-77, 95-96, 105-108, 117-120, 137-146
rag_factory/core/retrieval_interface.py                               38     17    55%   112-117, 138, 158, 196, 247, 259, 285-309
rag_factory/database/__init__.py                                       4      0   100%
rag_factory/database/config.py                                        17      0   100%
rag_factory/database/connection.py                                    80     54    32%   40-48, 61-86, 96, 107, 126-137, 150-157, 165-170, 178-183, 196-197, 209-214, 218, 222
rag_factory/database/env_validator.py                                 38     38     0%   7-139
rag_factory/database/models.py                                        85     32    62%   31-34, 37-45, 48-54, 66-69, 72-77, 80-85, 181, 323-325
rag_factory/database/vector_indexing.py                               38     38     0%   7-114
rag_factory/evaluation/__init__.py                                     4      4     0%   29-41
rag_factory/evaluation/analysis/__init__.py                            3      3     0%   8-11
rag_factory/evaluation/analysis/comparison.py                        135    135     0%   8-323
rag_factory/evaluation/analysis/statistics.py                         81     81     0%   8-320
rag_factory/evaluation/benchmarks/__init__.py                          3      3     0%   8-14
rag_factory/evaluation/benchmarks/config.py                           25     25     0%   7-64
rag_factory/evaluation/benchmarks/runner.py                          155    155     0%   8-423
rag_factory/evaluation/datasets/__init__.py                            3      3     0%   8-14
rag_factory/evaluation/datasets/loader.py                             88     88     0%   8-281
rag_factory/evaluation/datasets/schema.py                             52     52     0%   8-160
rag_factory/evaluation/datasets/statistics.py                         65     65     0%   8-226
rag_factory/evaluation/exporters/__init__.py                           4      4     0%   8-12
rag_factory/evaluation/exporters/csv_exporter.py                      52     52     0%   3-124
rag_factory/evaluation/exporters/html_exporter.py                     47     47     0%   3-293
rag_factory/evaluation/exporters/json_exporter.py                     19     19     0%   3-68
rag_factory/evaluation/metrics/__init__.py                             3      3     0%   12-25
rag_factory/evaluation/metrics/base.py                                31     31     0%   8-115
rag_factory/evaluation/metrics/cost.py                                65     65     0%   8-313
rag_factory/evaluation/metrics/performance.py                         42     42     0%   8-202
rag_factory/evaluation/metrics/quality.py                             84     84     0%   8-377
rag_factory/evaluation/metrics/retrieval.py                           77     77     0%   9-401
rag_factory/exceptions.py                                             13      0   100%
rag_factory/factory.py                                               187    137    27%   109-116, 144, 165-170, 202-230, 256-270, 300-324, 347-348, 365, 384, 401, 418, 435, 451-460, 480-502, 528-545, 568-611, 644-699, 703-715
rag_factory/gui/__init__.py                                            2      0   100%
rag_factory/gui/components/__init__.py                                 3      0   100%
rag_factory/gui/components/scrolled_text.py                           64     15    77%   89, 151-164, 168, 190-192, 195-196
rag_factory/gui/components/status_bar.py                              62     12    81%   125, 146-152, 161, 168, 177-180
rag_factory/gui/main_window.py                                       701    338    52%   76-77, 137-164, 235, 246-250, 314-316, 333-341, 349-357, 361, 373-381, 386-390, 399, 411-419, 695-696, 700-707, 714-721, 731-732, 736-738, 748, 759-764, 774, 806-817, 826-858, 885-895, 899-970, 974-1062, 1072-1074, 1082-1084, 1095-1096, 1111, 1132, 1136, 1197-1202, 1207-1212, 1218-1221, 1262-1319, 1324-1371, 1375-1394, 1398, 1411-1487, 1491-1549, 1554-1571, 1575-1582, 1587-1600, 1605-1614, 1618
rag_factory/gui/utils/__init__.py                                      3      0   100%
rag_factory/gui/utils/formatters.py                                   57     49    14%   27-30, 50-90, 110-118, 134-137, 155-165
rag_factory/gui/utils/threading.py                                    32     23    28%   44-73, 97, 124-129
rag_factory/legacy_config.py                                         155    155     0%   22-542
rag_factory/models/__init__.py                                         6      6     0%   3-14
rag_factory/models/embedding/__init__.py                               4      4     0%   3-12
rag_factory/models/embedding/loader.py                               179    179     0%   3-367
rag_factory/models/embedding/models.py                                47     47     0%   3-106
rag_factory/models/embedding/registry.py                             128    128     0%   3-282
rag_factory/models/evaluation/__init__.py                              3      3     0%   3-6
rag_factory/models/evaluation/ab_testing.py                           98     98     0%   3-281
rag_factory/models/evaluation/models.py                               29     29     0%   3-74
rag_factory/observability/__init__.py                                  3      3     0%   3-10
rag_factory/observability/integrations/__init__.py                     1      1     0%   3
rag_factory/observability/integrations/prometheus.py                  47     47     0%   3-229
rag_factory/observability/logging/__init__.py                          2      2     0%   3-5
rag_factory/observability/logging/config.py                           16     16     0%   3-37
rag_factory/observability/logging/filters.py                          41     41     0%   3-103
rag_factory/observability/logging/logger.py                           86     86     0%   3-396
rag_factory/observability/metrics/__init__.py                          2      2     0%   3-9
rag_factory/observability/metrics/collector.py                       143    143     0%   3-459
rag_factory/observability/metrics/cost.py                             39     39     0%   3-221
rag_factory/observability/metrics/performance.py                      64     64     0%   3-196
rag_factory/observability/monitoring/__init__.py                       1      1     0%   3
rag_factory/observability/monitoring/api.py                          101    101     0%   3-328
rag_factory/pipeline.py                                              156    156     0%   34-507
rag_factory/registry/__init__.py                                       4      0   100%
rag_factory/registry/exceptions.py                                     6      0   100%
rag_factory/registry/service_factory.py                               84     69    18%   45-54, 62-65, 70-73, 78-80, 84-86, 95-127, 136-165, 176-215, 229-255
rag_factory/registry/service_registry.py                              91     71    22%   43-51, 55-85, 103-156, 164, 178-203, 210-223, 227, 231-232
rag_factory/repositories/__init__.py                                   5      0   100%
rag_factory/repositories/base.py                                      42     21    50%   38, 53, 70, 87, 103, 114-118, 125, 136-139, 159-164
rag_factory/repositories/chunk.py                                    206    180    13%   40-45, 68-76, 90-95, 120-133, 155-171, 187-202, 221-231, 250-261, 287-328, 355-396, 422-474, 489-499, 513-521, 537-543, 557-563, 577-587, 604-626, 639-670
rag_factory/repositories/document.py                                  93     74    20%   41-46, 63-68, 98-118, 140-156, 172-187, 206, 223-233, 247-255, 272-279, 290-293, 307-312
rag_factory/repositories/exceptions.py                                18      7    61%   34-36, 56-59
rag_factory/services/__init__.py                                       4      0   100%
rag_factory/services/api/__init__.py                                   4      4     0%   7-11
rag_factory/services/api/anthropic.py                                 27     27     0%   7-141
rag_factory/services/api/cohere.py                                    30     30     0%   7-113
rag_factory/services/api/openai.py                                    46     46     0%   7-235
rag_factory/services/consistency.py                                   32     24    25%   80-113, 144-170
rag_factory/services/database/__init__.py                              5      0   100%
rag_factory/services/database/database_context.py                    181    159    12%   58-64, 88-106, 123, 140-150, 179-200, 223-240, 256-266, 305-330, 338-339, 343-406, 414-415, 430-510, 516-517, 521-546
rag_factory/services/database/migration_validator.py                  96     74    23%   29-30, 61-69, 81-88, 109-131, 148-152, 163-192, 204-219, 230-237, 249, 261-271, 283-286
rag_factory/services/database/neo4j.py                                54     38    30%   15-17, 60-71, 79-84, 103-114, 134-150, 172-181, 188-191, 195, 199
rag_factory/services/database/postgres.py                            195    163    16%   17-18, 26-27, 84-121, 131-145, 149-201, 214-269, 292-346, 360-375, 390-414, 425-440, 472-490, 504-527, 532, 543, 580-598, 607-619, 623, 627
rag_factory/services/dependencies.py                                  41     21    49%   96-109, 134-140, 176-180
rag_factory/services/embedding/__init__.py                             4      0   100%
rag_factory/services/embedding/base.py                                31      6    81%   44, 59, 68, 77, 86, 98
rag_factory/services/embedding/cache.py                               43     33    23%   26-32, 43-58, 67-76, 80-82, 90-94
rag_factory/services/embedding/config.py                              29     13    55%   37-43, 50-68, 80
rag_factory/services/embedding/providers/__init__.py                   5      0   100%
rag_factory/services/embedding/providers/cohere.py                    53     36    32%   10-20, 55-75, 90-117, 125, 133, 141, 152-153
rag_factory/services/embedding/providers/local.py                     43     27    37%   8-9, 46-67, 83-109, 117, 125, 133, 146
rag_factory/services/embedding/providers/onnx_local.py               114     93    18%   18-19, 87-177, 193-250, 261-308, 319, 327, 335, 348
rag_factory/services/embedding/providers/openai.py                    51     34    33%   10-20, 53-72, 87-108, 116, 124, 132, 143-144
rag_factory/services/embedding/rate_limiter.py                        20     14    30%   27-37, 45-53
rag_factory/services/embedding/service.py                            100     83    17%   50-62, 79-93, 117-198, 220-222, 233-239, 248-266, 273-275
rag_factory/services/interfaces.py                                    35      0   100%
rag_factory/services/llm/__init__.py                                   5      0   100%
rag_factory/services/llm/base.py                                      43      0   100%
rag_factory/services/llm/config.py                                    23     11    52%   42-57
rag_factory/services/llm/prompt_template.py                           43     24    44%   47-82, 97-100, 111-115
rag_factory/services/llm/providers/__init__.py                        12     12     0%   5-22
rag_factory/services/llm/providers/anthropic.py                       57     57     0%   3-205
rag_factory/services/llm/providers/ollama.py                          55     55     0%   3-196
rag_factory/services/llm/providers/openai.py                          57     57     0%   3-210
rag_factory/services/llm/service.py                                   66     51    23%   32-39, 56-70, 93-129, 154-175, 186, 194-198, 215-216
rag_factory/services/llm/token_counter.py                             27     27     0%   3-72
rag_factory/services/local/__init__.py                                 2      2     0%   7-9
rag_factory/services/local/reranker.py                                32     32     0%   7-116
rag_factory/services/onnx/__init__.py                                  2      2     0%   7-9
rag_factory/services/onnx/embedding.py                                29     29     0%   7-129
rag_factory/services/utils/__init__.py                                 2      0   100%
rag_factory/services/utils/model_converter.py                        104    104     0%   8-291
rag_factory/services/utils/onnx_utils.py                             133    114    14%   22-23, 36-37, 67-123, 142-146, 172-218, 240-274, 291-312, 332-347, 360-378, 392-404
rag_factory/services/utils/reranker_selector.py                       68     68     0%   8-249
rag_factory/strategies/__init__.py                                     2      0   100%
rag_factory/strategies/agentic/__init__.py                             7      0   100%
rag_factory/strategies/agentic/agent.py                              151    130    14%   31-36, 45, 57, 66-90, 109-111, 123-161, 190-214, 230-265, 276-293, 310-331, 339-346, 357-368, 381-420
rag_factory/strategies/agentic/config.py                              12      0   100%
rag_factory/strategies/agentic/frameworks/__init__.py                  1      1     0%   9
rag_factory/strategies/agentic/query_analyzer.py                      89     65    27%   50-55, 67, 79-90, 109-125, 137-147, 159-178, 196-214, 225-260, 278
rag_factory/strategies/agentic/strategy.py                            87     60    31%   50-63, 76, 84, 94-132, 144, 156, 169, 182-222, 234-258, 267, 276, 284
rag_factory/strategies/agentic/tool_implementations.py               135     91    33%   36-37, 41, 45, 52, 86-129, 148-149, 153, 157, 164, 182-247, 266-267, 271, 275, 282, 329-373, 392-393, 397, 401, 407, 446-511
rag_factory/strategies/agentic/tools.py                               40      9    78%   66, 79, 89, 101, 112, 139-142
rag_factory/strategies/auto_register.py                               66     20    70%   13-14, 18-19, 23-24, 28-29, 33-34, 39-40, 46-47, 52-53, 58-59, 79-80
rag_factory/strategies/base.py                                        55     13    76%   80-85, 169-178
rag_factory/strategies/chunking/__init__.py                           15     15     0%   28-67
rag_factory/strategies/chunking/base.py                               91     91     0%   3-256
rag_factory/strategies/chunking/docling_chunker.py                    45     45     0%   13-188
rag_factory/strategies/chunking/fixed_size_chunker.py                 74     74     0%   3-204
rag_factory/strategies/chunking/hybrid_chunker.py                     70     70     0%   3-192
rag_factory/strategies/chunking/semantic_chunker.py                  195    195     0%   3-534
rag_factory/strategies/chunking/structural_chunker.py                147    147     0%   3-425
rag_factory/strategies/chunking/utils.py                              89     89     0%   3-264
rag_factory/strategies/contextual/__init__.py                          7      0   100%
rag_factory/strategies/contextual/batch_processor.py                  91     76    16%   41-43, 60-72, 84-90, 108-128, 145-161, 178-201, 218-266
rag_factory/strategies/contextual/config.py                           46      0   100%
rag_factory/strategies/contextual/context_generator.py                84     70    17%   35-36, 59-99, 112-135, 152-194, 209, 224-234
rag_factory/strategies/contextual/cost_tracker.py                     32     21    34%   31-35, 48-51, 69-82, 94-99, 111-114, 126
rag_factory/strategies/contextual/prompts.py                          25     17    32%   85-106, 119
rag_factory/strategies/contextual/storage.py                          44     35    20%   32-33, 42-45, 54-81, 98-118
rag_factory/strategies/contextual/strategy.py                         78     49    37%   54-67, 75, 83, 107-156, 173, 186, 207-215, 231-262, 278, 284, 289, 298
rag_factory/strategies/fine_tuned/__init__.py                          4      0   100%
rag_factory/strategies/fine_tuned/ab_testing.py                       78     78     0%   1-134
rag_factory/strategies/fine_tuned/config.py                           11      0   100%
rag_factory/strategies/fine_tuned/custom_loader.py                    40     28    30%   17-19, 36-73, 77, 84-88
rag_factory/strategies/fine_tuned/model_registry.py                  126     96    24%   39-50, 80-112, 132-149, 166-178, 182-196, 200-223, 227-240, 249-270, 274-287, 291-303
rag_factory/strategies/hierarchical/__init__.py                        5      5     0%   8-21
rag_factory/strategies/hierarchical/hierarchy_builder.py              79     79     0%   8-335
rag_factory/strategies/hierarchical/models.py                         58     58     0%   8-137
rag_factory/strategies/hierarchical/parent_retriever.py               89     89     0%   8-278
rag_factory/strategies/hierarchical/strategy.py                       76     76     0%   9-301
rag_factory/strategies/indexing/__init__.py                            6      0   100%
rag_factory/strategies/indexing/context_aware.py                     108     88    19%   31, 43, 63-134, 155-156, 160-170, 182-188, 192-198, 208-237, 241-242
rag_factory/strategies/indexing/hierarchical.py                       90     73    19%   50, 63, 88-134, 156-185, 201-236, 253-278, 292-293
rag_factory/strategies/indexing/in_memory.py                          41     25    39%   54, 65, 93-121, 143, 160, 173, 194-200
rag_factory/strategies/indexing/keyword_indexing.py                   42     31    26%   42, 53, 77-157
rag_factory/strategies/indexing/knowledge_graph_indexing.py           46     33    28%   18, 27, 48-89, 108-129
rag_factory/strategies/indexing/vector_embedding.py                   98     85    13%   25, 35, 55-116, 137-221
rag_factory/strategies/knowledge_graph/__init__.py                     4      4     0%   8-19
rag_factory/strategies/knowledge_graph/config.py                      21     21     0%   8-129
rag_factory/strategies/knowledge_graph/entity_extractor.py            70     70     0%   7-205
rag_factory/strategies/knowledge_graph/graph_store.py                 31     31     0%   8-124
rag_factory/strategies/knowledge_graph/hybrid_retriever.py            56     56     0%   8-164
rag_factory/strategies/knowledge_graph/memory_graph_store.py          97     97     0%   8-196
rag_factory/strategies/knowledge_graph/models.py                      53     53     0%   8-122
rag_factory/strategies/knowledge_graph/relationship_extractor.py      62     62     0%   8-189
rag_factory/strategies/knowledge_graph/strategy.py                    80     80     0%   8-256
rag_factory/strategies/late_chunking/__init__.py                       6      0   100%
rag_factory/strategies/late_chunking/coherence_analyzer.py            27     17    37%   20-21, 36-45, 57-65, 82-96
rag_factory/strategies/late_chunking/document_embedder.py            104     89    14%   29-74, 94-184, 202-215, 227-235, 256-279, 296-303, 318
rag_factory/strategies/late_chunking/embedding_chunker.py            117    102    13%   26, 41-61, 68-98, 105-155, 162-182, 191-192, 199-254, 265-289, 293-300
rag_factory/strategies/late_chunking/models.py                        62      0   100%
rag_factory/strategies/late_chunking/strategy.py                      70     46    34%   48-69, 77, 88, 107-122, 140-177, 196-205, 210, 215
rag_factory/strategies/multi_query/__init__.py                         7      7     0%   8-19
rag_factory/strategies/multi_query/config.py                          36     36     0%   3-138
rag_factory/strategies/multi_query/deduplicator.py                    87     87     0%   3-197
rag_factory/strategies/multi_query/parallel_executor.py               52     52     0%   3-163
rag_factory/strategies/multi_query/prompts.py                         10     10     0%   3-84
rag_factory/strategies/multi_query/ranker.py                          80     80     0%   3-201
rag_factory/strategies/multi_query/strategy.py                        68     68     0%   3-184
rag_factory/strategies/multi_query/variant_generator.py               62     62     0%   3-187
rag_factory/strategies/query_expansion/__init__.py                     8      0   100%
rag_factory/strategies/query_expansion/base.py                        66     10    85%   90, 103, 114-118, 130-133
rag_factory/strategies/query_expansion/cache.py                       52     40    23%   20-22, 38-55, 64-66, 70-73, 81-97, 105-112
rag_factory/strategies/query_expansion/expander_service.py            92     71    23%   36-40, 55-58, 75-148, 159-180, 204-215, 233-234, 242-246, 254, 265-273, 283-284
rag_factory/strategies/query_expansion/hyde_expander.py               19     12    37%   25-27, 41-65
rag_factory/strategies/query_expansion/llm_expander.py                25     16    36%   23-25, 39-71, 99
rag_factory/strategies/query_expansion/metrics.py                     66     30    55%   44-45, 53-57, 76-109, 130, 134, 146-152, 160
rag_factory/strategies/query_expansion/prompts.py                     13      7    46%   16, 28-56, 68-107
rag_factory/strategies/reranking/__init__.py                           7      0   100%
rag_factory/strategies/reranking/base.py                              68     16    76%   81, 101, 106, 110-119, 123-130
rag_factory/strategies/reranking/bge_reranker.py                      51     37    27%   14, 53-81, 103-147, 151
rag_factory/strategies/reranking/cache.py                             48     34    29%   32-34, 51-66, 76-77, 81, 90-101, 110-113, 121, 136-138
rag_factory/strategies/reranking/cohere_reranker.py                   34     20    41%   15-16, 55-71, 94-115, 119
rag_factory/strategies/reranking/cosine_reranker.py                   62     47    24%   54-72, 97-139, 158-171, 188, 209-215, 227-230, 242-245, 249
rag_factory/strategies/reranking/cross_encoder_reranker.py            40     27    32%   13-14, 53-76, 98-120, 124
rag_factory/strategies/reranking/metrics.py                           67     67     0%   8-264
rag_factory/strategies/reranking/reranker_service.py                 115     88    23%   56-67, 71-96, 113-225, 235-255, 269, 282-283, 287-292, 296-300, 308-310
rag_factory/strategies/retrieval/__init__.py                           6      0   100%
rag_factory/strategies/retrieval/hybrid_retriever.py                  51     37    27%   32, 39, 51-102, 110-144
rag_factory/strategies/retrieval/keyword_retriever.py                 56     41    27%   41, 52, 71-113, 126-133, 153-172
rag_factory/strategies/retrieval/knowledge_graph_retriever.py         22      9    59%   19, 27, 48-70
rag_factory/strategies/retrieval/multi_query_retriever.py             22      9    59%   19, 26, 44-66
rag_factory/strategies/retrieval/query_expansion_retriever.py         24      9    62%   20, 27, 45-67
rag_factory/strategies/retrieval/semantic_retriever.py                23     12    48%   23, 32, 61-94
rag_factory/strategies/self_reflective/__init__.py                     6      0   100%
rag_factory/strategies/self_reflective/config.py                      20      8    60%   29-42
rag_factory/strategies/self_reflective/grader.py                      80     65    19%   29-35, 51-67, 83-109, 135-171, 187-258, 266
rag_factory/strategies/self_reflective/models.py                      48      0   100%
rag_factory/strategies/self_reflective/refiner.py                     69     56    19%   28-30, 53-96, 113-143, 161-193, 208-228
rag_factory/strategies/self_reflective/strategy.py                    92     74    20%   38-53, 71-181, 192-206, 229-259, 264, 269
rag_factory/utils/__init__.py                                          3      0   100%
rag_factory/utils/token_counter.py                                    45     30    33%   36-40, 52-62, 74-82, 86, 90, 105-106, 124-135, 153-158
rag_factory/utils/tokenization.py                                     95     73    23%   36-40, 53-64, 87-114, 126-129, 141-144, 156, 175-190, 209-228, 241-243, 251-252, 270-271, 292-293, 314-315
------------------------------------------------------------------------------------------------
TOTAL                                                              13429  10584    21%
=========================== short test summary info ============================
FAILED tests/unit/gui/test_retrieval_operations.py::TestQueryExecution::test_retrieve_button_disabled_during_operation - AssertionError: assert 'disabled' == 'normal'
  
  - normal
  + disabled
================== 1 failed, 15 passed, 22 warnings in 13.24s ==================

[116/206] FAILED: tests/unit/gui/test_utility_operations.py
  Tests: 18 (P:16 F:2 S:0)
----------------------------------------
============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.1, pluggy-1.6.0 -- /mnt/MCPProyects/ragTools/venv/bin/python3
cachedir: .pytest_cache
rootdir: /mnt/MCPProyects/ragTools
configfile: pytest.ini (WARNING: ignoring pytest config in pyproject.toml!)
plugins: anyio-4.12.0, cov-7.0.0, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 17 items

tests/unit/gui/test_utility_operations.py::TestClearAllData::test_clear_data_with_no_data PASSED [  5%]
tests/unit/gui/test_utility_operations.py::TestClearAllData::test_clear_data_confirmation_dialog PASSED [ 11%]
tests/unit/gui/test_utility_operations.py::TestClearAllData::test_clear_data_execution PASSED [ 17%]
tests/unit/gui/test_utility_operations.py::TestClearAllData::test_clear_data_database_integration PASSED [ 23%]
tests/unit/gui/test_utility_operations.py::TestClearAllData::test_clear_data_error_handling FAILED [ 29%]
tests/unit/gui/test_utility_operations.py::TestLogCapture::test_log_buffer_initialized PASSED [ 35%]
tests/unit/gui/test_utility_operations.py::TestLogCapture::test_log_capture_works PASSED [ 41%]
tests/unit/gui/test_utility_operations.py::TestLogCapture::test_log_buffer_limit PASSED [ 47%]
tests/unit/gui/test_utility_operations.py::TestViewLogs::test_view_logs_opens_window PASSED [ 52%]
tests/unit/gui/test_utility_operations.py::TestViewLogs::test_view_logs_method_exists PASSED [ 58%]
tests/unit/gui/test_utility_operations.py::TestHelpDialog::test_help_dialog_opens PASSED [ 64%]
tests/unit/gui/test_utility_operations.py::TestHelpDialog::test_help_method_exists PASSED [ 70%]
tests/unit/gui/test_utility_operations.py::TestSettingsPlaceholder::test_settings_shows_placeholder PASSED [ 76%]
tests/unit/gui/test_utility_operations.py::TestKeyboardShortcuts::test_shortcuts_are_bound PASSED [ 82%]
tests/unit/gui/test_utility_operations.py::TestKeyboardShortcuts::test_clear_data_shortcut PASSED [ 88%]
tests/unit/gui/test_utility_operations.py::TestKeyboardShortcuts::test_help_shortcut PASSED [ 94%]
tests/unit/gui/test_utility_operations.py::TestUtilityIntegration::test_clear_and_reindex PASSED [100%]

=================================== FAILURES ===================================
_______________ TestClearAllData.test_clear_data_error_handling ________________
tests/unit/gui/test_utility_operations.py:155: in test_clear_data_error_handling
    mock_error.assert_called_once()
/usr/lib/python3.12/unittest/mock.py:923: in assert_called_once
    raise AssertionError(msg)
E   AssertionError: Expected 'showerror' to have been called once. Called 0 times.
---------------------------- Captured stderr setup -----------------------------
INFO:rag_factory.gui.main_window:GUI log capture initialized
INFO:rag_factory.gui.main_window:Initializing ServiceRegistry from /tmp/pytest-of-admindevmac/pytest-24/test_clear_data_error_handling0/config/services.yaml
INFO:rag_factory.gui.main_window:All required services available: ['db_main']
INFO:rag_factory.gui.main_window:Initializing StrategyPairManager
INFO:rag_factory.gui.main_window:Backend initialization complete
------------------------------ Captured log setup ------------------------------
INFO     rag_factory.gui.main_window:main_window.py:321 GUI log capture initialized
INFO     rag_factory.gui.main_window:main_window.py:345 Initializing ServiceRegistry from /tmp/pytest-of-admindevmac/pytest-24/test_clear_data_error_handling0/config/services.yaml
INFO     rag_factory.gui.main_window:main_window.py:421 All required services available: ['db_main']
INFO     rag_factory.gui.main_window:main_window.py:365 Initializing StrategyPairManager
INFO     rag_factory.gui.main_window:main_window.py:384 Backend initialization complete
----------------------------- Captured stderr call -----------------------------
ERROR:rag_factory.gui.main_window:Error clearing data: Database error
Traceback (most recent call last):
  File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 1297, in _clear_all_data
    db_service.clear_all()
  File "/usr/lib/python3.12/unittest/mock.py", line 1134, in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/unittest/mock.py", line 1138, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/unittest/mock.py", line 1193, in _execute_mock_call
    raise effect
Exception: Database error
------------------------------ Captured log call -------------------------------
ERROR    rag_factory.gui.main_window:main_window.py:1317 Error clearing data: Database error
Traceback (most recent call last):
  File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 1297, in _clear_all_data
    db_service.clear_all()
  File "/usr/lib/python3.12/unittest/mock.py", line 1134, in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/unittest/mock.py", line 1138, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/unittest/mock.py", line 1193, in _execute_mock_call
    raise effect
Exception: Database error
=============================== warnings summary ===============================
rag_factory/services/llm/config.py:8
  /mnt/MCPProyects/ragTools/rag_factory/services/llm/config.py:8: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class LLMServiceConfig(BaseModel):

rag_factory/database/config.py:12
  /mnt/MCPProyects/ragTools/rag_factory/database/config.py:12: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DatabaseConfig(BaseSettings):

rag_factory/strategies/agentic/config.py:9
  /mnt/MCPProyects/ragTools/rag_factory/strategies/agentic/config.py:9: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class AgenticStrategyConfig(BaseModel):

rag_factory/strategies/late_chunking/models.py:21
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:21: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class TokenEmbedding(BaseModel):

rag_factory/strategies/late_chunking/models.py:34
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:34: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DocumentEmbedding(BaseModel):

rag_factory/strategies/late_chunking/models.py:49
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:49: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class EmbeddingChunk(BaseModel):

rag_factory/strategies/contextual/config.py:31
  /mnt/MCPProyects/ragTools/rag_factory/strategies/contextual/config.py:31: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ContextualRetrievalConfig(BaseModel):

rag_factory/strategies/fine_tuned/config.py:6
  /mnt/MCPProyects/ragTools/rag_factory/strategies/fine_tuned/config.py:6: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class FineTunedConfig(BaseSettings):

tests/unit/gui/test_utility_operations.py::TestClearAllData::test_clear_data_database_integration
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-1 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 756, in load_strategy
      indexing, retrieval = self.strategy_manager.load_pair(strategy_name)
      ^^^^^^^^^^^^^^^^^^^
  TypeError: cannot unpack non-iterable Mock object
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_utility_operations.py::TestClearAllData::test_clear_data_error_handling
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-2 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 756, in load_strategy
      indexing, retrieval = self.strategy_manager.load_pair(strategy_name)
      ^^^^^^^^^^^^^^^^^^^
  TypeError: cannot unpack non-iterable Mock object
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_utility_operations.py::TestClearAllData::test_clear_data_error_handling
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-4 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 756, in load_strategy
      indexing, retrieval = self.strategy_manager.load_pair(strategy_name)
      ^^^^^^^^^^^^^^^^^^^
  TypeError: cannot unpack non-iterable Mock object
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_utility_operations.py::TestClearAllData::test_clear_data_error_handling
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-3 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 756, in load_strategy
      indexing, retrieval = self.strategy_manager.load_pair(strategy_name)
      ^^^^^^^^^^^^^^^^^^^
  TypeError: cannot unpack non-iterable Mock object
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_utility_operations.py::TestLogCapture::test_log_buffer_initialized
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-5 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 756, in load_strategy
      indexing, retrieval = self.strategy_manager.load_pair(strategy_name)
      ^^^^^^^^^^^^^^^^^^^
  TypeError: cannot unpack non-iterable Mock object
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_utility_operations.py::TestViewLogs::test_view_logs_opens_window
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-6 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 756, in load_strategy
      indexing, retrieval = self.strategy_manager.load_pair(strategy_name)
      ^^^^^^^^^^^^^^^^^^^
  TypeError: cannot unpack non-iterable Mock object
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_utility_operations.py::TestViewLogs::test_view_logs_method_exists
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-7 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 756, in load_strategy
      indexing, retrieval = self.strategy_manager.load_pair(strategy_name)
      ^^^^^^^^^^^^^^^^^^^
  TypeError: cannot unpack non-iterable Mock object
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_utility_operations.py::TestHelpDialog::test_help_dialog_opens
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-8 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 756, in load_strategy
      indexing, retrieval = self.strategy_manager.load_pair(strategy_name)
      ^^^^^^^^^^^^^^^^^^^
  TypeError: cannot unpack non-iterable Mock object
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_utility_operations.py::TestHelpDialog::test_help_method_exists
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-9 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 756, in load_strategy
      indexing, retrieval = self.strategy_manager.load_pair(strategy_name)
      ^^^^^^^^^^^^^^^^^^^
  TypeError: cannot unpack non-iterable Mock object
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_utility_operations.py::TestSettingsPlaceholder::test_settings_shows_placeholder
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-10 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 756, in load_strategy
      indexing, retrieval = self.strategy_manager.load_pair(strategy_name)
      ^^^^^^^^^^^^^^^^^^^
  TypeError: cannot unpack non-iterable Mock object
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_utility_operations.py::TestKeyboardShortcuts::test_shortcuts_are_bound
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-11 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 756, in load_strategy
      indexing, retrieval = self.strategy_manager.load_pair(strategy_name)
      ^^^^^^^^^^^^^^^^^^^
  TypeError: cannot unpack non-iterable Mock object
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_utility_operations.py::TestKeyboardShortcuts::test_clear_data_shortcut
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-12 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 756, in load_strategy
      indexing, retrieval = self.strategy_manager.load_pair(strategy_name)
      ^^^^^^^^^^^^^^^^^^^
  TypeError: cannot unpack non-iterable Mock object
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_utility_operations.py::TestKeyboardShortcuts::test_help_shortcut
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-13 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 756, in load_strategy
      indexing, retrieval = self.strategy_manager.load_pair(strategy_name)
      ^^^^^^^^^^^^^^^^^^^
  TypeError: cannot unpack non-iterable Mock object
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_utility_operations.py::TestUtilityIntegration::test_clear_and_reindex
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-14 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 756, in load_strategy
      indexing, retrieval = self.strategy_manager.load_pair(strategy_name)
      ^^^^^^^^^^^^^^^^^^^
  TypeError: cannot unpack non-iterable Mock object
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

tests/unit/gui/test_utility_operations.py::TestUtilityIntegration::test_clear_and_reindex
  /mnt/MCPProyects/ragTools/venv/lib/python3.12/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-15 (load_strategy)
  
  Traceback (most recent call last):
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 756, in load_strategy
      indexing, retrieval = self.strategy_manager.load_pair(strategy_name)
      ^^^^^^^^^^^^^^^^^^^
  TypeError: cannot unpack non-iterable Mock object
  
  During handling of the above exception, another exception occurred:
  
  Traceback (most recent call last):
    File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
      self.run()
    File "/usr/lib/python3.12/threading.py", line 1010, in run
      self._target(*self._args, **self._kwargs)
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/main_window.py", line 780, in load_strategy
      safe_gui_update(
    File "/mnt/MCPProyects/ragTools/rag_factory/gui/utils/threading.py", line 99, in safe_gui_update
      root.after(0, wrapper)
    File "/usr/lib/python3.12/tkinter/__init__.py", line 872, in after
      name = self._register(callit)
             ^^^^^^^^^^^^^^^^^^^^^^
    File "/usr/lib/python3.12/tkinter/__init__.py", line 1603, in _register
      self.tk.createcommand(name, f)
  RuntimeError: main thread is not in main loop
  
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
    warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.3-final-0 ________________

Name                                                               Stmts   Miss  Cover   Missing
------------------------------------------------------------------------------------------------
rag_factory/__init__.py                                                7      2    71%   18-19
rag_factory/__version__.py                                             1      0   100%
rag_factory/cli/__init__.py                                            2      0   100%
rag_factory/cli/commands/__init__.py                                   1      0   100%
rag_factory/cli/commands/benchmark.py                                 96     81    16%   40-53, 64-84, 148-263
rag_factory/cli/commands/check_consistency.py                         43     33    23%   64-120
rag_factory/cli/commands/config.py                                    78     68    13%   26-64, 102-188
rag_factory/cli/commands/gui.py                                       25     17    32%   61-91
rag_factory/cli/commands/index.py                                     65     52    20%   29-39, 93-185
rag_factory/cli/commands/query.py                                     47     36    23%   73-149
rag_factory/cli/commands/repl.py                                     152    130    14%   29-56, 63-108, 112-120, 124-133, 137-155, 159-172, 176-186, 190-207, 211-220, 253-260
rag_factory/cli/commands/strategies.py                                45     36    20%   48-120
rag_factory/cli/commands/validate_e2e.py                              91     69    24%   37-38, 42-142, 145-156
rag_factory/cli/commands/validate_pipeline.py                         70     57    19%   57-156
rag_factory/cli/formatters/__init__.py                                 4      0   100%
rag_factory/cli/formatters/consistency.py                             61     55    10%   21-69, 79-103, 108-138
rag_factory/cli/formatters/output.py                                  20      9    55%   23-24, 43-44, 63-64, 74, 79, 84
rag_factory/cli/formatters/results.py                                 71     62    13%   28-55, 72-99, 116-144, 157-181
rag_factory/cli/formatters/validation.py                              63     53    16%   25-43, 48-56, 65-77, 86-98, 103-129, 134-137
rag_factory/cli/main.py                                               32     10    69%   25-28, 48-49, 79-81, 85
rag_factory/cli/utils/__init__.py                                      3      0   100%
rag_factory/cli/utils/progress.py                                     14      8    43%   34-47, 73-76
rag_factory/cli/utils/validation.py                                   53     42    21%   30-41, 57-77, 93-118, 135
rag_factory/config/__init__.py                                         4      0   100%
rag_factory/config/env_resolver.py                                    52     37    29%   47-54, 70-90, 110, 129-147
rag_factory/config/schemas/__init__.py                                 2      0   100%
rag_factory/config/schemas/version.py                                 10      6    40%   29-38
rag_factory/config/strategy_loader.py                                 54     36    33%   32-41, 45-60, 75-89, 101-104
rag_factory/config/strategy_pair_manager.py                          105     83    21%   40-72, 92-132, 148-198, 210-215, 229, 259-282
rag_factory/config/validator.py                                       93     76    18%   27-30, 34-39, 53-58, 62-74, 111-132, 177-198, 215-235, 247-249, 271-295, 333-354
rag_factory/core/__init__.py                                           4      4     0%   7-23
rag_factory/core/capabilities.py                                      61     16    74%   129, 155, 173-174, 239-253
rag_factory/core/indexing_interface.py                                54     35    35%   55-57, 118-123, 144, 164, 208, 260, 272, 292-313, 341-364
rag_factory/core/pipeline.py                                          49     35    29%   22-24, 33-40, 55-77, 95-96, 105-108, 117-120, 137-146
rag_factory/core/retrieval_interface.py                               38     20    47%   56-58, 112-117, 138, 158, 196, 247, 259, 285-309
rag_factory/database/__init__.py                                       4      0   100%
rag_factory/database/config.py                                        17      0   100%
rag_factory/database/connection.py                                    80     54    32%   40-48, 61-86, 96, 107, 126-137, 150-157, 165-170, 178-183, 196-197, 209-214, 218, 222
rag_factory/database/env_validator.py                                 38     38     0%   7-139
rag_factory/database/models.py                                        85     32    62%   31-34, 37-45, 48-54, 66-69, 72-77, 80-85, 181, 323-325
rag_factory/database/vector_indexing.py                               38     38     0%   7-114
rag_factory/evaluation/__init__.py                                     4      4     0%   29-41
rag_factory/evaluation/analysis/__init__.py                            3      3     0%   8-11
rag_factory/evaluation/analysis/comparison.py                        135    135     0%   8-323
rag_factory/evaluation/analysis/statistics.py                         81     81     0%   8-320
rag_factory/evaluation/benchmarks/__init__.py                          3      3     0%   8-14
rag_factory/evaluation/benchmarks/config.py                           25     25     0%   7-64
rag_factory/evaluation/benchmarks/runner.py                          155    155     0%   8-423
rag_factory/evaluation/datasets/__init__.py                            3      3     0%   8-14
rag_factory/evaluation/datasets/loader.py                             88     88     0%   8-281
rag_factory/evaluation/datasets/schema.py                             52     52     0%   8-160
rag_factory/evaluation/datasets/statistics.py                         65     65     0%   8-226
rag_factory/evaluation/exporters/__init__.py                           4      4     0%   8-12
rag_factory/evaluation/exporters/csv_exporter.py                      52     52     0%   3-124
rag_factory/evaluation/exporters/html_exporter.py                     47     47     0%   3-293
rag_factory/evaluation/exporters/json_exporter.py                     19     19     0%   3-68
rag_factory/evaluation/metrics/__init__.py                             3      3     0%   12-25
rag_factory/evaluation/metrics/base.py                                31     31     0%   8-115
rag_factory/evaluation/metrics/cost.py                                65     65     0%   8-313
rag_factory/evaluation/metrics/performance.py                         42     42     0%   8-202
rag_factory/evaluation/metrics/quality.py                             84     84     0%   8-377
rag_factory/evaluation/metrics/retrieval.py                           77     77     0%   9-401
rag_factory/exceptions.py                                             13      0   100%
rag_factory/factory.py                                               187    137    27%   109-116, 144, 165-170, 202-230, 256-270, 300-324, 347-348, 365, 384, 401, 418, 435, 451-460, 480-502, 528-545, 568-611, 644-699, 703-715
rag_factory/gui/__init__.py                                            2      0   100%
rag_factory/gui/components/__init__.py                                 3      0   100%
rag_factory/gui/components/scrolled_text.py                           64     14    78%   89, 151-164, 190-192, 195-196
rag_factory/gui/components/status_bar.py                              62      5    92%   125, 161, 177-180
rag_factory/gui/main_window.py                                       701    340    51%   76-77, 137-164, 235, 246-250, 314-316, 333-341, 349-357, 361, 373-381, 386-390, 399, 411-419, 695-696, 700-707, 714-721, 731-732, 736-738, 748, 759-764, 774, 806-817, 826-858, 862-879, 885-895, 899-970, 974-1062, 1072-1074, 1082-1084, 1088-1164, 1177-1234, 1244-1246, 1254-1258, 1343-1345, 1375-1394, 1491-1549, 1554-1571, 1575-1582, 1587-1600, 1605-1614, 1618
rag_factory/gui/utils/__init__.py                                      3      0   100%
rag_factory/gui/utils/formatters.py                                   57     49    14%   27-30, 50-90, 110-118, 134-137, 155-165
rag_factory/gui/utils/threading.py                                    32     23    28%   44-73, 97, 124-129
rag_factory/legacy_config.py                                         155    155     0%   22-542
rag_factory/models/__init__.py                                         6      6     0%   3-14
rag_factory/models/embedding/__init__.py                               4      4     0%   3-12
rag_factory/models/embedding/loader.py                               179    179     0%   3-367
rag_factory/models/embedding/models.py                                47     47     0%   3-106
rag_factory/models/embedding/registry.py                             128    128     0%   3-282
rag_factory/models/evaluation/__init__.py                              3      3     0%   3-6
rag_factory/models/evaluation/ab_testing.py                           98     98     0%   3-281
rag_factory/models/evaluation/models.py                               29     29     0%   3-74
rag_factory/observability/__init__.py                                  3      3     0%   3-10
rag_factory/observability/integrations/__init__.py                     1      1     0%   3
rag_factory/observability/integrations/prometheus.py                  47     47     0%   3-229
rag_factory/observability/logging/__init__.py                          2      2     0%   3-5
rag_factory/observability/logging/config.py                           16     16     0%   3-37
rag_factory/observability/logging/filters.py                          41     41     0%   3-103
rag_factory/observability/logging/logger.py                           86     86     0%   3-396
rag_factory/observability/metrics/__init__.py                          2      2     0%   3-9
rag_factory/observability/metrics/collector.py                       143    143     0%   3-459
rag_factory/observability/metrics/cost.py                             39     39     0%   3-221
rag_factory/observability/metrics/performance.py                      64     64     0%   3-196
rag_factory/observability/monitoring/__init__.py                       1      1     0%   3
rag_factory/observability/monitoring/api.py                          101    101     0%   3-328
rag_factory/pipeline.py                                              156    156     0%   34-507
rag_factory/registry/__init__.py                                       4      0   100%
rag_factory/registry/exceptions.py                                     6      0   100%
rag_factory/registry/service_factory.py                               84     69    18%   45-54, 62-65, 70-73, 78-80, 84-86, 95-127, 136-165, 176-215, 229-255
rag_factory/registry/service_registry.py                              91     71    22%   43-51, 55-85, 103-156, 164, 178-203, 210-223, 227, 231-232
rag_factory/repositories/__init__.py                                   5      0   100%
rag_factory/repositories/base.py                                      42     21    50%   38, 53, 70, 87, 103, 114-118, 125, 136-139, 159-164
rag_factory/repositories/chunk.py                                    206    180    13%   40-45, 68-76, 90-95, 120-133, 155-171, 187-202, 221-231, 250-261, 287-328, 355-396, 422-474, 489-499, 513-521, 537-543, 557-563, 577-587, 604-626, 639-670
rag_factory/repositories/document.py                                  93     74    20%   41-46, 63-68, 98-118, 140-156, 172-187, 206, 223-233, 247-255, 272-279, 290-293, 307-312
rag_factory/repositories/exceptions.py                                18      7    61%   34-36, 56-59
rag_factory/services/__init__.py                                       4      0   100%
rag_factory/services/api/__init__.py                                   4      4     0%   7-11
rag_factory/services/api/anthropic.py                                 27     27     0%   7-141
rag_factory/services/api/cohere.py                                    30     30     0%   7-113
rag_factory/services/api/openai.py                                    46     46     0%   7-235
rag_factory/services/consistency.py                                   32     24    25%   80-113, 144-170
rag_factory/services/database/__init__.py                              5      0   100%
rag_factory/services/database/database_context.py                    181    159    12%   58-64, 88-106, 123, 140-150, 179-200, 223-240, 256-266, 305-330, 338-339, 343-406, 414-415, 430-510, 516-517, 521-546
rag_factory/services/database/migration_validator.py                  96     74    23%   29-30, 61-69, 81-88, 109-131, 148-152, 163-192, 204-219, 230-237, 249, 261-271, 283-286
rag_factory/services/database/neo4j.py                                54     38    30%   15-17, 60-71, 79-84, 103-114, 134-150, 172-181, 188-191, 195, 199
rag_factory/services/database/postgres.py                            195    163    16%   17-18, 26-27, 84-121, 131-145, 149-201, 214-269, 292-346, 360-375, 390-414, 425-440, 472-490, 504-527, 532, 543, 580-598, 607-619, 623, 627
rag_factory/services/dependencies.py                                  41     21    49%   96-109, 134-140, 176-180
rag_factory/services/embedding/__init__.py                             4      0   100%
rag_factory/services/embedding/base.py                                31      6    81%   44, 59, 68, 77, 86, 98
rag_factory/services/embedding/cache.py                               43     33    23%   26-32, 43-58, 67-76, 80-82, 90-94
rag_factory/services/embedding/config.py                              29     13    55%   37-43, 50-68, 80
rag_factory/services/embedding/providers/__init__.py                   5      0   100%
rag_factory/services/embedding/providers/cohere.py                    53     36    32%   10-20, 55-75, 90-117, 125, 133, 141, 152-153
rag_factory/services/embedding/providers/local.py                     43     27    37%   8-9, 46-67, 83-109, 117, 125, 133, 146
rag_factory/services/embedding/providers/onnx_local.py               114     93    18%   18-19, 87-177, 193-250, 261-308, 319, 327, 335, 348
rag_factory/services/embedding/providers/openai.py                    51     34    33%   10-20, 53-72, 87-108, 116, 124, 132, 143-144
rag_factory/services/embedding/rate_limiter.py                        20     14    30%   27-37, 45-53
rag_factory/services/embedding/service.py                            100     83    17%   50-62, 79-93, 117-198, 220-222, 233-239, 248-266, 273-275
rag_factory/services/interfaces.py                                    35      0   100%
rag_factory/services/llm/__init__.py                                   5      0   100%
rag_factory/services/llm/base.py                                      43      0   100%
rag_factory/services/llm/config.py                                    23     11    52%   42-57
rag_factory/services/llm/prompt_template.py                           43     24    44%   47-82, 97-100, 111-115
rag_factory/services/llm/providers/__init__.py                        12     12     0%   5-22
rag_factory/services/llm/providers/anthropic.py                       57     57     0%   3-205
rag_factory/services/llm/providers/ollama.py                          55     55     0%   3-196
rag_factory/services/llm/providers/openai.py                          57     57     0%   3-210
rag_factory/services/llm/service.py                                   66     51    23%   32-39, 56-70, 93-129, 154-175, 186, 194-198, 215-216
rag_factory/services/llm/token_counter.py                             27     27     0%   3-72
rag_factory/services/local/__init__.py                                 2      2     0%   7-9
rag_factory/services/local/reranker.py                                32     32     0%   7-116
rag_factory/services/onnx/__init__.py                                  2      2     0%   7-9
rag_factory/services/onnx/embedding.py                                29     29     0%   7-129
rag_factory/services/utils/__init__.py                                 2      0   100%
rag_factory/services/utils/model_converter.py                        104    104     0%   8-291
rag_factory/services/utils/onnx_utils.py                             133    114    14%   22-23, 36-37, 67-123, 142-146, 172-218, 240-274, 291-312, 332-347, 360-378, 392-404
rag_factory/services/utils/reranker_selector.py                       68     68     0%   8-249
rag_factory/strategies/__init__.py                                     2      0   100%
rag_factory/strategies/agentic/__init__.py                             7      0   100%
rag_factory/strategies/agentic/agent.py                              151    130    14%   31-36, 45, 57, 66-90, 109-111, 123-161, 190-214, 230-265, 276-293, 310-331, 339-346, 357-368, 381-420
rag_factory/strategies/agentic/config.py                              12      0   100%
rag_factory/strategies/agentic/frameworks/__init__.py                  1      1     0%   9
rag_factory/strategies/agentic/query_analyzer.py                      89     65    27%   50-55, 67, 79-90, 109-125, 137-147, 159-178, 196-214, 225-260, 278
rag_factory/strategies/agentic/strategy.py                            87     60    31%   50-63, 76, 84, 94-132, 144, 156, 169, 182-222, 234-258, 267, 276, 284
rag_factory/strategies/agentic/tool_implementations.py               135     91    33%   36-37, 41, 45, 52, 86-129, 148-149, 153, 157, 164, 182-247, 266-267, 271, 275, 282, 329-373, 392-393, 397, 401, 407, 446-511
rag_factory/strategies/agentic/tools.py                               40      9    78%   66, 79, 89, 101, 112, 139-142
rag_factory/strategies/auto_register.py                               66     20    70%   13-14, 18-19, 23-24, 28-29, 33-34, 39-40, 46-47, 52-53, 58-59, 79-80
rag_factory/strategies/base.py                                        55     13    76%   80-85, 169-178
rag_factory/strategies/chunking/__init__.py                           15     15     0%   28-67
rag_factory/strategies/chunking/base.py                               91     91     0%   3-256
rag_factory/strategies/chunking/docling_chunker.py                    45     45     0%   13-188
rag_factory/strategies/chunking/fixed_size_chunker.py                 74     74     0%   3-204
rag_factory/strategies/chunking/hybrid_chunker.py                     70     70     0%   3-192
rag_factory/strategies/chunking/semantic_chunker.py                  195    195     0%   3-534
rag_factory/strategies/chunking/structural_chunker.py                147    147     0%   3-425
rag_factory/strategies/chunking/utils.py                              89     89     0%   3-264
rag_factory/strategies/contextual/__init__.py                          7      0   100%
rag_factory/strategies/contextual/batch_processor.py                  91     76    16%   41-43, 60-72, 84-90, 108-128, 145-161, 178-201, 218-266
rag_factory/strategies/contextual/config.py                           46      0   100%
rag_factory/strategies/contextual/context_generator.py                84     70    17%   35-36, 59-99, 112-135, 152-194, 209, 224-234
rag_factory/strategies/contextual/cost_tracker.py                     32     21    34%   31-35, 48-51, 69-82, 94-99, 111-114, 126
rag_factory/strategies/contextual/prompts.py                          25     17    32%   85-106, 119
rag_factory/strategies/contextual/storage.py                          44     35    20%   32-33, 42-45, 54-81, 98-118
rag_factory/strategies/contextual/strategy.py                         78     49    37%   54-67, 75, 83, 107-156, 173, 186, 207-215, 231-262, 278, 284, 289, 298
rag_factory/strategies/fine_tuned/__init__.py                          4      0   100%
rag_factory/strategies/fine_tuned/ab_testing.py                       78     78     0%   1-134
rag_factory/strategies/fine_tuned/config.py                           11      0   100%
rag_factory/strategies/fine_tuned/custom_loader.py                    40     28    30%   17-19, 36-73, 77, 84-88
rag_factory/strategies/fine_tuned/model_registry.py                  126     96    24%   39-50, 80-112, 132-149, 166-178, 182-196, 200-223, 227-240, 249-270, 274-287, 291-303
rag_factory/strategies/hierarchical/__init__.py                        5      5     0%   8-21
rag_factory/strategies/hierarchical/hierarchy_builder.py              79     79     0%   8-335
rag_factory/strategies/hierarchical/models.py                         58     58     0%   8-137
rag_factory/strategies/hierarchical/parent_retriever.py               89     89     0%   8-278
rag_factory/strategies/hierarchical/strategy.py                       76     76     0%   9-301
rag_factory/strategies/indexing/__init__.py                            6      0   100%
rag_factory/strategies/indexing/context_aware.py                     108     88    19%   31, 43, 63-134, 155-156, 160-170, 182-188, 192-198, 208-237, 241-242
rag_factory/strategies/indexing/hierarchical.py                       90     73    19%   50, 63, 88-134, 156-185, 201-236, 253-278, 292-293
rag_factory/strategies/indexing/in_memory.py                          41     25    39%   54, 65, 93-121, 143, 160, 173, 194-200
rag_factory/strategies/indexing/keyword_indexing.py                   42     31    26%   42, 53, 77-157
rag_factory/strategies/indexing/knowledge_graph_indexing.py           46     33    28%   18, 27, 48-89, 108-129
rag_factory/strategies/indexing/vector_embedding.py                   98     85    13%   25, 35, 55-116, 137-221
rag_factory/strategies/knowledge_graph/__init__.py                     4      4     0%   8-19
rag_factory/strategies/knowledge_graph/config.py                      21     21     0%   8-129
rag_factory/strategies/knowledge_graph/entity_extractor.py            70     70     0%   7-205
rag_factory/strategies/knowledge_graph/graph_store.py                 31     31     0%   8-124
rag_factory/strategies/knowledge_graph/hybrid_retriever.py            56     56     0%   8-164
rag_factory/strategies/knowledge_graph/memory_graph_store.py          97     97     0%   8-196
rag_factory/strategies/knowledge_graph/models.py                      53     53     0%   8-122
rag_factory/strategies/knowledge_graph/relationship_extractor.py      62     62     0%   8-189
rag_factory/strategies/knowledge_graph/strategy.py                    80     80     0%   8-256
rag_factory/strategies/late_chunking/__init__.py                       6      0   100%
rag_factory/strategies/late_chunking/coherence_analyzer.py            27     17    37%   20-21, 36-45, 57-65, 82-96
rag_factory/strategies/late_chunking/document_embedder.py            104     89    14%   29-74, 94-184, 202-215, 227-235, 256-279, 296-303, 318
rag_factory/strategies/late_chunking/embedding_chunker.py            117    102    13%   26, 41-61, 68-98, 105-155, 162-182, 191-192, 199-254, 265-289, 293-300
rag_factory/strategies/late_chunking/models.py                        62      0   100%
rag_factory/strategies/late_chunking/strategy.py                      70     46    34%   48-69, 77, 88, 107-122, 140-177, 196-205, 210, 215
rag_factory/strategies/multi_query/__init__.py                         7      7     0%   8-19
rag_factory/strategies/multi_query/config.py                          36     36     0%   3-138
rag_factory/strategies/multi_query/deduplicator.py                    87     87     0%   3-197
rag_factory/strategies/multi_query/parallel_executor.py               52     52     0%   3-163
rag_factory/strategies/multi_query/prompts.py                         10     10     0%   3-84
rag_factory/strategies/multi_query/ranker.py                          80     80     0%   3-201
rag_factory/strategies/multi_query/strategy.py                        68     68     0%   3-184
rag_factory/strategies/multi_query/variant_generator.py               62     62     0%   3-187
rag_factory/strategies/query_expansion/__init__.py                     8      0   100%
rag_factory/strategies/query_expansion/base.py                        66     10    85%   90, 103, 114-118, 130-133
rag_factory/strategies/query_expansion/cache.py                       52     40    23%   20-22, 38-55, 64-66, 70-73, 81-97, 105-112
rag_factory/strategies/query_expansion/expander_service.py            92     71    23%   36-40, 55-58, 75-148, 159-180, 204-215, 233-234, 242-246, 254, 265-273, 283-284
rag_factory/strategies/query_expansion/hyde_expander.py               19     12    37%   25-27, 41-65
rag_factory/strategies/query_expansion/llm_expander.py                25     16    36%   23-25, 39-71, 99
rag_factory/strategies/query_expansion/metrics.py                     66     30    55%   44-45, 53-57, 76-109, 130, 134, 146-152, 160
rag_factory/strategies/query_expansion/prompts.py                     13      7    46%   16, 28-56, 68-107
rag_factory/strategies/reranking/__init__.py                           7      0   100%
rag_factory/strategies/reranking/base.py                              68     16    76%   81, 101, 106, 110-119, 123-130
rag_factory/strategies/reranking/bge_reranker.py                      51     37    27%   14, 53-81, 103-147, 151
rag_factory/strategies/reranking/cache.py                             48     34    29%   32-34, 51-66, 76-77, 81, 90-101, 110-113, 121, 136-138
rag_factory/strategies/reranking/cohere_reranker.py                   34     20    41%   15-16, 55-71, 94-115, 119
rag_factory/strategies/reranking/cosine_reranker.py                   62     47    24%   54-72, 97-139, 158-171, 188, 209-215, 227-230, 242-245, 249
rag_factory/strategies/reranking/cross_encoder_reranker.py            40     27    32%   13-14, 53-76, 98-120, 124
rag_factory/strategies/reranking/metrics.py                           67     67     0%   8-264
rag_factory/strategies/reranking/reranker_service.py                 115     88    23%   56-67, 71-96, 113-225, 235-255, 269, 282-283, 287-292, 296-300, 308-310
rag_factory/strategies/retrieval/__init__.py                           6      0   100%
rag_factory/strategies/retrieval/hybrid_retriever.py                  51     37    27%   32, 39, 51-102, 110-144
rag_factory/strategies/retrieval/keyword_retriever.py                 56     41    27%   41, 52, 71-113, 126-133, 153-172
rag_factory/strategies/retrieval/knowledge_graph_retriever.py         22      9    59%   19, 27, 48-70
rag_factory/strategies/retrieval/multi_query_retriever.py             22      9    59%   19, 26, 44-66
rag_factory/strategies/retrieval/query_expansion_retriever.py         24      9    62%   20, 27, 45-67
rag_factory/strategies/retrieval/semantic_retriever.py                23     12    48%   23, 32, 61-94
rag_factory/strategies/self_reflective/__init__.py                     6      0   100%
rag_factory/strategies/self_reflective/config.py                      20      8    60%   29-42
rag_factory/strategies/self_reflective/grader.py                      80     65    19%   29-35, 51-67, 83-109, 135-171, 187-258, 266
rag_factory/strategies/self_reflective/models.py                      48      0   100%
rag_factory/strategies/self_reflective/refiner.py                     69     56    19%   28-30, 53-96, 113-143, 161-193, 208-228
rag_factory/strategies/self_reflective/strategy.py                    92     74    20%   38-53, 71-181, 192-206, 229-259, 264, 269
rag_factory/utils/__init__.py                                          3      0   100%
rag_factory/utils/token_counter.py                                    45     30    33%   36-40, 52-62, 74-82, 86, 90, 105-106, 124-135, 153-158
rag_factory/utils/tokenization.py                                     95     73    23%   36-40, 53-64, 87-114, 126-129, 141-144, 156, 175-190, 209-228, 241-243, 251-252, 270-271, 292-293, 314-315
------------------------------------------------------------------------------------------------
TOTAL                                                              13429  10581    21%
=========================== short test summary info ============================
FAILED tests/unit/gui/test_utility_operations.py::TestClearAllData::test_clear_data_error_handling - AssertionError: Expected 'showerror' to have been called once. Called 0 times.
================== 1 failed, 16 passed, 23 warnings in 13.42s ==================

[117/206] PASSED: tests/unit/mocks/test_mock_builders.py
  Tests: 12 (P:12 F:0 S:0)
[118/206] PASSED: tests/unit/models/embedding/test_registry.py
  Tests: 22 (P:22 F:0 S:0)
[119/206] PASSED: tests/unit/models/evaluation/test_ab_testing.py
  Tests: 17 (P:17 F:0 S:0)
[120/206] PASSED: tests/unit/observability/test_cost_calculator.py
  Tests: 17 (P:17 F:0 S:0)
[121/206] PASSED: tests/unit/observability/test_filters.py
  Tests: 20 (P:20 F:0 S:0)
[122/206] PASSED: tests/unit/observability/test_logger.py
  Tests: 20 (P:20 F:0 S:0)
[123/206] PASSED: tests/unit/observability/test_metrics_collector.py
  Tests: 28 (P:28 F:0 S:0)
[124/206] PASSED: tests/unit/observability/test_performance_monitor.py
  Tests: 13 (P:13 F:0 S:0)
[125/206] PASSED: tests/unit/registry/test_exceptions.py
  Tests: 3 (P:3 F:0 S:0)
[126/206] FAILED: tests/unit/registry/test_service_factory.py
  Tests: 29 (P:23 F:6 S:0)
----------------------------------------
============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.1, pluggy-1.6.0 -- /mnt/MCPProyects/ragTools/venv/bin/python3
cachedir: .pytest_cache
rootdir: /mnt/MCPProyects/ragTools
configfile: pytest.ini (WARNING: ignoring pytest config in pyproject.toml!)
plugins: anyio-4.12.0, cov-7.0.0, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 26 items

tests/unit/registry/test_service_factory.py::TestServiceTypeDetection::test_is_llm_service PASSED [  3%]
tests/unit/registry/test_service_factory.py::TestServiceTypeDetection::test_is_llm_service_missing_url PASSED [  7%]
tests/unit/registry/test_service_factory.py::TestServiceTypeDetection::test_is_llm_service_missing_model PASSED [ 11%]
tests/unit/registry/test_service_factory.py::TestServiceTypeDetection::test_is_embedding_service PASSED [ 15%]
tests/unit/registry/test_service_factory.py::TestServiceTypeDetection::test_is_embedding_service_missing_provider PASSED [ 19%]
tests/unit/registry/test_service_factory.py::TestServiceTypeDetection::test_is_database_service_postgres PASSED [ 23%]
tests/unit/registry/test_service_factory.py::TestServiceTypeDetection::test_is_database_service_neo4j PASSED [ 26%]
tests/unit/registry/test_service_factory.py::TestServiceTypeDetection::test_is_database_service_unknown_type PASSED [ 30%]
tests/unit/registry/test_service_factory.py::TestLLMServiceCreation::test_create_llm_service_openai FAILED [ 34%]
tests/unit/registry/test_service_factory.py::TestLLMServiceCreation::test_create_llm_service_lm_studio FAILED [ 38%]
tests/unit/registry/test_service_factory.py::TestLLMServiceCreation::test_create_llm_service_with_defaults FAILED [ 42%]
tests/unit/registry/test_service_factory.py::TestEmbeddingServiceCreation::test_create_embedding_service_onnx PASSED [ 46%]
tests/unit/registry/test_service_factory.py::TestEmbeddingServiceCreation::test_create_embedding_service_onnx_with_defaults PASSED [ 50%]
tests/unit/registry/test_service_factory.py::TestEmbeddingServiceCreation::test_create_embedding_service_openai PASSED [ 53%]
tests/unit/registry/test_service_factory.py::TestEmbeddingServiceCreation::test_create_embedding_service_cohere_not_implemented PASSED [ 57%]
tests/unit/registry/test_service_factory.py::TestEmbeddingServiceCreation::test_create_embedding_service_unknown_provider PASSED [ 61%]
tests/unit/registry/test_service_factory.py::TestDatabaseServiceCreation::test_create_database_service_postgres_with_connection_string PASSED [ 65%]
tests/unit/registry/test_service_factory.py::TestDatabaseServiceCreation::test_create_database_service_postgres_with_components PASSED [ 69%]
tests/unit/registry/test_service_factory.py::TestDatabaseServiceCreation::test_create_database_service_postgres_with_defaults PASSED [ 73%]
tests/unit/registry/test_service_factory.py::TestDatabaseServiceCreation::test_create_database_service_neo4j PASSED [ 76%]
tests/unit/registry/test_service_factory.py::TestDatabaseServiceCreation::test_create_database_service_neo4j_with_defaults PASSED [ 80%]
tests/unit/registry/test_service_factory.py::TestDatabaseServiceCreation::test_create_database_service_unknown_type PASSED [ 84%]
tests/unit/registry/test_service_factory.py::TestServiceCreation::test_create_service_llm PASSED [ 88%]
tests/unit/registry/test_service_factory.py::TestServiceCreation::test_create_service_embedding PASSED [ 92%]
tests/unit/registry/test_service_factory.py::TestServiceCreation::test_create_service_database PASSED [ 96%]
tests/unit/registry/test_service_factory.py::TestServiceCreation::test_create_service_unknown_type PASSED [100%]

=================================== FAILURES ===================================
____________ TestLLMServiceCreation.test_create_llm_service_openai _____________
tests/unit/registry/test_service_factory.py:79: in test_create_llm_service_openai
    assert service is mock_instance
E   AssertionError: assert <rag_factory.services.llm.service.LLMService object at 0x7a6006ec3a10> is <Mock name='OpenAILLMService()' id='134552847700224'>
----------------------------- Captured stderr call -----------------------------
DEBUG:rag_factory.registry.service_factory:Creating LLM service: llm_openai
------------------------------ Captured log call -------------------------------
DEBUG    rag_factory.registry.service_factory:service_factory.py:98 Creating LLM service: llm_openai
___________ TestLLMServiceCreation.test_create_llm_service_lm_studio ___________
tests/unit/registry/test_service_factory.py:96: in test_create_llm_service_lm_studio
    with pytest.raises(ServiceInstantiationError) as exc_info:
E   Failed: DID NOT RAISE <class 'rag_factory.registry.exceptions.ServiceInstantiationError'>
----------------------------- Captured stderr call -----------------------------
DEBUG:rag_factory.registry.service_factory:Creating LLM service: llm1
INFO:rag_factory.registry.service_factory:Using OpenAI-compatible service at: http://localhost:1234/v1
------------------------------ Captured log call -------------------------------
DEBUG    rag_factory.registry.service_factory:service_factory.py:98 Creating LLM service: llm1
INFO     rag_factory.registry.service_factory:service_factory.py:117 Using OpenAI-compatible service at: http://localhost:1234/v1
_________ TestLLMServiceCreation.test_create_llm_service_with_defaults _________
tests/unit/registry/test_service_factory.py:109: in test_create_llm_service_with_defaults
    with pytest.raises(ServiceInstantiationError) as exc_info:
E   Failed: DID NOT RAISE <class 'rag_factory.registry.exceptions.ServiceInstantiationError'>
----------------------------- Captured stderr call -----------------------------
DEBUG:rag_factory.registry.service_factory:Creating LLM service: llm1
INFO:rag_factory.registry.service_factory:Using OpenAI-compatible service at: http://localhost:1234/v1
------------------------------ Captured log call -------------------------------
DEBUG    rag_factory.registry.service_factory:service_factory.py:98 Creating LLM service: llm1
INFO     rag_factory.registry.service_factory:service_factory.py:117 Using OpenAI-compatible service at: http://localhost:1234/v1
=============================== warnings summary ===============================
rag_factory/services/llm/config.py:8
  /mnt/MCPProyects/ragTools/rag_factory/services/llm/config.py:8: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class LLMServiceConfig(BaseModel):

rag_factory/database/config.py:12
  /mnt/MCPProyects/ragTools/rag_factory/database/config.py:12: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DatabaseConfig(BaseSettings):

rag_factory/strategies/agentic/config.py:9
  /mnt/MCPProyects/ragTools/rag_factory/strategies/agentic/config.py:9: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class AgenticStrategyConfig(BaseModel):

rag_factory/strategies/late_chunking/models.py:21
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:21: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class TokenEmbedding(BaseModel):

rag_factory/strategies/late_chunking/models.py:34
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:34: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DocumentEmbedding(BaseModel):

rag_factory/strategies/late_chunking/models.py:49
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:49: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class EmbeddingChunk(BaseModel):

rag_factory/strategies/contextual/config.py:31
  /mnt/MCPProyects/ragTools/rag_factory/strategies/contextual/config.py:31: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ContextualRetrievalConfig(BaseModel):

rag_factory/strategies/fine_tuned/config.py:6
  /mnt/MCPProyects/ragTools/rag_factory/strategies/fine_tuned/config.py:6: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class FineTunedConfig(BaseSettings):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.3-final-0 ________________

Name                                                               Stmts   Miss  Cover   Missing
------------------------------------------------------------------------------------------------
rag_factory/__init__.py                                                7      2    71%   18-19
rag_factory/__version__.py                                             1      0   100%
rag_factory/cli/__init__.py                                            2      0   100%
rag_factory/cli/commands/__init__.py                                   1      0   100%
rag_factory/cli/commands/benchmark.py                                 96     81    16%   40-53, 64-84, 148-263
rag_factory/cli/commands/check_consistency.py                         43     33    23%   64-120
rag_factory/cli/commands/config.py                                    78     68    13%   26-64, 102-188
rag_factory/cli/commands/gui.py                                       25     17    32%   61-91
rag_factory/cli/commands/index.py                                     65     52    20%   29-39, 93-185
rag_factory/cli/commands/query.py                                     47     36    23%   73-149
rag_factory/cli/commands/repl.py                                     152    130    14%   29-56, 63-108, 112-120, 124-133, 137-155, 159-172, 176-186, 190-207, 211-220, 253-260
rag_factory/cli/commands/strategies.py                                45     36    20%   48-120
rag_factory/cli/commands/validate_e2e.py                              91     69    24%   37-38, 42-142, 145-156
rag_factory/cli/commands/validate_pipeline.py                         70     57    19%   57-156
rag_factory/cli/formatters/__init__.py                                 4      0   100%
rag_factory/cli/formatters/consistency.py                             61     55    10%   21-69, 79-103, 108-138
rag_factory/cli/formatters/output.py                                  20      9    55%   23-24, 43-44, 63-64, 74, 79, 84
rag_factory/cli/formatters/results.py                                 71     62    13%   28-55, 72-99, 116-144, 157-181
rag_factory/cli/formatters/validation.py                              63     53    16%   25-43, 48-56, 65-77, 86-98, 103-129, 134-137
rag_factory/cli/main.py                                               32     10    69%   25-28, 48-49, 79-81, 85
rag_factory/cli/utils/__init__.py                                      3      0   100%
rag_factory/cli/utils/progress.py                                     14      8    43%   34-47, 73-76
rag_factory/cli/utils/validation.py                                   53     42    21%   30-41, 57-77, 93-118, 135
rag_factory/config/__init__.py                                         4      0   100%
rag_factory/config/env_resolver.py                                    52     37    29%   47-54, 70-90, 110, 129-147
rag_factory/config/schemas/__init__.py                                 2      0   100%
rag_factory/config/schemas/version.py                                 10      6    40%   29-38
rag_factory/config/strategy_loader.py                                 54     36    33%   32-41, 45-60, 75-89, 101-104
rag_factory/config/strategy_pair_manager.py                          105     83    21%   40-72, 92-132, 148-198, 210-215, 229, 259-282
rag_factory/config/validator.py                                       93     76    18%   27-30, 34-39, 53-58, 62-74, 111-132, 177-198, 215-235, 247-249, 271-295, 333-354
rag_factory/core/__init__.py                                           4      4     0%   7-23
rag_factory/core/capabilities.py                                      61     16    74%   129, 155, 173-174, 239-253
rag_factory/core/indexing_interface.py                                54     35    35%   55-57, 118-123, 144, 164, 208, 260, 272, 292-313, 341-364
rag_factory/core/pipeline.py                                          49     35    29%   22-24, 33-40, 55-77, 95-96, 105-108, 117-120, 137-146
rag_factory/core/retrieval_interface.py                               38     20    47%   56-58, 112-117, 138, 158, 196, 247, 259, 285-309
rag_factory/database/__init__.py                                       4      0   100%
rag_factory/database/config.py                                        17      0   100%
rag_factory/database/connection.py                                    80     54    32%   40-48, 61-86, 96, 107, 126-137, 150-157, 165-170, 178-183, 196-197, 209-214, 218, 222
rag_factory/database/env_validator.py                                 38     38     0%   7-139
rag_factory/database/models.py                                        85     32    62%   31-34, 37-45, 48-54, 66-69, 72-77, 80-85, 181, 323-325
rag_factory/database/vector_indexing.py                               38     38     0%   7-114
rag_factory/evaluation/__init__.py                                     4      4     0%   29-41
rag_factory/evaluation/analysis/__init__.py                            3      3     0%   8-11
rag_factory/evaluation/analysis/comparison.py                        135    135     0%   8-323
rag_factory/evaluation/analysis/statistics.py                         81     81     0%   8-320
rag_factory/evaluation/benchmarks/__init__.py                          3      3     0%   8-14
rag_factory/evaluation/benchmarks/config.py                           25     25     0%   7-64
rag_factory/evaluation/benchmarks/runner.py                          155    155     0%   8-423
rag_factory/evaluation/datasets/__init__.py                            3      3     0%   8-14
rag_factory/evaluation/datasets/loader.py                             88     88     0%   8-281
rag_factory/evaluation/datasets/schema.py                             52     52     0%   8-160
rag_factory/evaluation/datasets/statistics.py                         65     65     0%   8-226
rag_factory/evaluation/exporters/__init__.py                           4      4     0%   8-12
rag_factory/evaluation/exporters/csv_exporter.py                      52     52     0%   3-124
rag_factory/evaluation/exporters/html_exporter.py                     47     47     0%   3-293
rag_factory/evaluation/exporters/json_exporter.py                     19     19     0%   3-68
rag_factory/evaluation/metrics/__init__.py                             3      3     0%   12-25
rag_factory/evaluation/metrics/base.py                                31     31     0%   8-115
rag_factory/evaluation/metrics/cost.py                                65     65     0%   8-313
rag_factory/evaluation/metrics/performance.py                         42     42     0%   8-202
rag_factory/evaluation/metrics/quality.py                             84     84     0%   8-377
rag_factory/evaluation/metrics/retrieval.py                           77     77     0%   9-401
rag_factory/exceptions.py                                             13      0   100%
rag_factory/factory.py                                               187    137    27%   109-116, 144, 165-170, 202-230, 256-270, 300-324, 347-348, 365, 384, 401, 418, 435, 451-460, 480-502, 528-545, 568-611, 644-699, 703-715
rag_factory/gui/__init__.py                                            2      0   100%
rag_factory/gui/components/__init__.py                                 3      0   100%
rag_factory/gui/components/scrolled_text.py                           64     52    19%   53-62, 80-114, 122, 131-142, 151-164, 168, 176, 184-199
rag_factory/gui/components/status_bar.py                              62     49    21%   40-59, 64-113, 122-137, 146-152, 161, 168, 172-184, 192-196
rag_factory/gui/main_window.py                                       701    640     9%   64-109, 113-128, 137-164, 168-194, 205-263, 268-293, 297-321, 330-390, 398-422, 435-469, 482-500, 513-551, 564-602, 615-673, 686-690, 694-732, 736-738, 746-789, 806-817, 826-858, 862-879, 885-895, 899-970, 974-1062, 1072-1074, 1082-1084, 1088-1164, 1177-1234, 1244-1246, 1254-1258, 1262-1319, 1324-1371, 1375-1394, 1398, 1411-1487, 1491-1549, 1554-1571, 1575-1582, 1587-1600, 1605-1614, 1618
rag_factory/gui/utils/__init__.py                                      3      0   100%
rag_factory/gui/utils/formatters.py                                   57     49    14%   27-30, 50-90, 110-118, 134-137, 155-165
rag_factory/gui/utils/threading.py                                    32     25    22%   44-73, 96-99, 124-129
rag_factory/legacy_config.py                                         155    155     0%   22-542
rag_factory/models/__init__.py                                         6      6     0%   3-14
rag_factory/models/embedding/__init__.py                               4      4     0%   3-12
rag_factory/models/embedding/loader.py                               179    179     0%   3-367
rag_factory/models/embedding/models.py                                47     47     0%   3-106
rag_factory/models/embedding/registry.py                             128    128     0%   3-282
rag_factory/models/evaluation/__init__.py                              3      3     0%   3-6
rag_factory/models/evaluation/ab_testing.py                           98     98     0%   3-281
rag_factory/models/evaluation/models.py                               29     29     0%   3-74
rag_factory/observability/__init__.py                                  3      3     0%   3-10
rag_factory/observability/integrations/__init__.py                     1      1     0%   3
rag_factory/observability/integrations/prometheus.py                  47     47     0%   3-229
rag_factory/observability/logging/__init__.py                          2      2     0%   3-5
rag_factory/observability/logging/config.py                           16     16     0%   3-37
rag_factory/observability/logging/filters.py                          41     41     0%   3-103
rag_factory/observability/logging/logger.py                           86     86     0%   3-396
rag_factory/observability/metrics/__init__.py                          2      2     0%   3-9
rag_factory/observability/metrics/collector.py                       143    143     0%   3-459
rag_factory/observability/metrics/cost.py                             39     39     0%   3-221
rag_factory/observability/metrics/performance.py                      64     64     0%   3-196
rag_factory/observability/monitoring/__init__.py                       1      1     0%   3
rag_factory/observability/monitoring/api.py                          101    101     0%   3-328
rag_factory/pipeline.py                                              156    156     0%   34-507
rag_factory/registry/__init__.py                                       4      0   100%
rag_factory/registry/exceptions.py                                     6      0   100%
rag_factory/registry/service_factory.py                               84     11    87%   52, 85, 229-255
rag_factory/registry/service_registry.py                              91     71    22%   43-51, 55-85, 103-156, 164, 178-203, 210-223, 227, 231-232
rag_factory/repositories/__init__.py                                   5      0   100%
rag_factory/repositories/base.py                                      42     21    50%   38, 53, 70, 87, 103, 114-118, 125, 136-139, 159-164
rag_factory/repositories/chunk.py                                    206    180    13%   40-45, 68-76, 90-95, 120-133, 155-171, 187-202, 221-231, 250-261, 287-328, 355-396, 422-474, 489-499, 513-521, 537-543, 557-563, 577-587, 604-626, 639-670
rag_factory/repositories/document.py                                  93     74    20%   41-46, 63-68, 98-118, 140-156, 172-187, 206, 223-233, 247-255, 272-279, 290-293, 307-312
rag_factory/repositories/exceptions.py                                18      7    61%   34-36, 56-59
rag_factory/services/__init__.py                                       4      0   100%
rag_factory/services/api/__init__.py                                   4      0   100%
rag_factory/services/api/anthropic.py                                 27     18    33%   46-52, 76-94, 118-141
rag_factory/services/api/cohere.py                                    30     19    37%   14-15, 49-59, 82-113
rag_factory/services/api/openai.py                                    46     31    33%   45-51, 75-93, 117-140, 168-174, 189-199, 216-227, 235
rag_factory/services/consistency.py                                   32     24    25%   80-113, 144-170
rag_factory/services/database/__init__.py                              5      0   100%
rag_factory/services/database/database_context.py                    181    159    12%   58-64, 88-106, 123, 140-150, 179-200, 223-240, 256-266, 305-330, 338-339, 343-406, 414-415, 430-510, 516-517, 521-546
rag_factory/services/database/migration_validator.py                  96     74    23%   29-30, 61-69, 81-88, 109-131, 148-152, 163-192, 204-219, 230-237, 249, 261-271, 283-286
rag_factory/services/database/neo4j.py                                54     38    30%   15-17, 60-71, 79-84, 103-114, 134-150, 172-181, 188-191, 195, 199
rag_factory/services/database/postgres.py                            195    163    16%   17-18, 26-27, 84-121, 131-145, 149-201, 214-269, 292-346, 360-375, 390-414, 425-440, 472-490, 504-527, 532, 543, 580-598, 607-619, 623, 627
rag_factory/services/dependencies.py                                  41     21    49%   96-109, 134-140, 176-180
rag_factory/services/embedding/__init__.py                             4      0   100%
rag_factory/services/embedding/base.py                                31      6    81%   44, 59, 68, 77, 86, 98
rag_factory/services/embedding/cache.py                               43     33    23%   26-32, 43-58, 67-76, 80-82, 90-94
rag_factory/services/embedding/config.py                              29     13    55%   37-43, 50-68, 80
rag_factory/services/embedding/providers/__init__.py                   5      0   100%
rag_factory/services/embedding/providers/cohere.py                    53     36    32%   10-20, 55-75, 90-117, 125, 133, 141, 152-153
rag_factory/services/embedding/providers/local.py                     43     27    37%   8-9, 46-67, 83-109, 117, 125, 133, 146
rag_factory/services/embedding/providers/onnx_local.py               114     93    18%   18-19, 87-177, 193-250, 261-308, 319, 327, 335, 348
rag_factory/services/embedding/providers/openai.py                    51     34    33%   10-20, 53-72, 87-108, 116, 124, 132, 143-144
rag_factory/services/embedding/rate_limiter.py                        20     14    30%   27-37, 45-53
rag_factory/services/embedding/service.py                            100     83    17%   50-62, 79-93, 117-198, 220-222, 233-239, 248-266, 273-275
rag_factory/services/interfaces.py                                    35      0   100%
rag_factory/services/llm/__init__.py                                   5      0   100%
rag_factory/services/llm/base.py                                      43      0   100%
rag_factory/services/llm/config.py                                    23      7    70%   46-48, 51-53, 57
rag_factory/services/llm/prompt_template.py                           43     24    44%   47-82, 97-100, 111-115
rag_factory/services/llm/providers/__init__.py                        12     10    17%   10-22
rag_factory/services/llm/providers/anthropic.py                       57     42    26%   44-50, 64-97, 120-147, 171-172, 184-189, 197, 205
rag_factory/services/llm/providers/ollama.py                          55     42    24%   22-24, 37-67, 93-122, 142-143, 157, 165, 174, 185-196
rag_factory/services/llm/providers/openai.py                          57     34    40%   56, 76-110, 133-158, 173, 186-194, 202, 210
rag_factory/services/llm/service.py                                   66     40    39%   68, 93-129, 154-175, 186, 194-198, 215-216
rag_factory/services/llm/token_counter.py                             27     17    37%   22-41, 56-57, 71-72
rag_factory/services/local/__init__.py                                 2      2     0%   7-9
rag_factory/services/local/reranker.py                                32     32     0%   7-116
rag_factory/services/onnx/__init__.py                                  2      0   100%
rag_factory/services/onnx/embedding.py                                29     19    34%   54-68, 83-93, 110-121, 129
rag_factory/services/utils/__init__.py                                 2      0   100%
rag_factory/services/utils/model_converter.py                        104    104     0%   8-291
rag_factory/services/utils/onnx_utils.py                             133    114    14%   22-23, 36-37, 67-123, 142-146, 172-218, 240-274, 291-312, 332-347, 360-378, 392-404
rag_factory/services/utils/reranker_selector.py                       68     68     0%   8-249
rag_factory/strategies/__init__.py                                     2      0   100%
rag_factory/strategies/agentic/__init__.py                             7      0   100%
rag_factory/strategies/agentic/agent.py                              151    130    14%   31-36, 45, 57, 66-90, 109-111, 123-161, 190-214, 230-265, 276-293, 310-331, 339-346, 357-368, 381-420
rag_factory/strategies/agentic/config.py                              12      0   100%
rag_factory/strategies/agentic/frameworks/__init__.py                  1      1     0%   9
rag_factory/strategies/agentic/query_analyzer.py                      89     65    27%   50-55, 67, 79-90, 109-125, 137-147, 159-178, 196-214, 225-260, 278
rag_factory/strategies/agentic/strategy.py                            87     60    31%   50-63, 76, 84, 94-132, 144, 156, 169, 182-222, 234-258, 267, 276, 284
rag_factory/strategies/agentic/tool_implementations.py               135     91    33%   36-37, 41, 45, 52, 86-129, 148-149, 153, 157, 164, 182-247, 266-267, 271, 275, 282, 329-373, 392-393, 397, 401, 407, 446-511
rag_factory/strategies/agentic/tools.py                               40      9    78%   66, 79, 89, 101, 112, 139-142
rag_factory/strategies/auto_register.py                               66     20    70%   13-14, 18-19, 23-24, 28-29, 33-34, 39-40, 46-47, 52-53, 58-59, 79-80
rag_factory/strategies/base.py                                        55     13    76%   80-85, 169-178
rag_factory/strategies/chunking/__init__.py                           15     15     0%   28-67
rag_factory/strategies/chunking/base.py                               91     91     0%   3-256
rag_factory/strategies/chunking/docling_chunker.py                    45     45     0%   13-188
rag_factory/strategies/chunking/fixed_size_chunker.py                 74     74     0%   3-204
rag_factory/strategies/chunking/hybrid_chunker.py                     70     70     0%   3-192
rag_factory/strategies/chunking/semantic_chunker.py                  195    195     0%   3-534
rag_factory/strategies/chunking/structural_chunker.py                147    147     0%   3-425
rag_factory/strategies/chunking/utils.py                              89     89     0%   3-264
rag_factory/strategies/contextual/__init__.py                          7      0   100%
rag_factory/strategies/contextual/batch_processor.py                  91     76    16%   41-43, 60-72, 84-90, 108-128, 145-161, 178-201, 218-266
rag_factory/strategies/contextual/config.py                           46      0   100%
rag_factory/strategies/contextual/context_generator.py                84     70    17%   35-36, 59-99, 112-135, 152-194, 209, 224-234
rag_factory/strategies/contextual/cost_tracker.py                     32     21    34%   31-35, 48-51, 69-82, 94-99, 111-114, 126
rag_factory/strategies/contextual/prompts.py                          25     17    32%   85-106, 119
rag_factory/strategies/contextual/storage.py                          44     35    20%   32-33, 42-45, 54-81, 98-118
rag_factory/strategies/contextual/strategy.py                         78     49    37%   54-67, 75, 83, 107-156, 173, 186, 207-215, 231-262, 278, 284, 289, 298
rag_factory/strategies/fine_tuned/__init__.py                          4      0   100%
rag_factory/strategies/fine_tuned/ab_testing.py                       78     78     0%   1-134
rag_factory/strategies/fine_tuned/config.py                           11      0   100%
rag_factory/strategies/fine_tuned/custom_loader.py                    40     28    30%   17-19, 36-73, 77, 84-88
rag_factory/strategies/fine_tuned/model_registry.py                  126     96    24%   39-50, 80-112, 132-149, 166-178, 182-196, 200-223, 227-240, 249-270, 274-287, 291-303
rag_factory/strategies/hierarchical/__init__.py                        5      5     0%   8-21
rag_factory/strategies/hierarchical/hierarchy_builder.py              79     79     0%   8-335
rag_factory/strategies/hierarchical/models.py                         58     58     0%   8-137
rag_factory/strategies/hierarchical/parent_retriever.py               89     89     0%   8-278
rag_factory/strategies/hierarchical/strategy.py                       76     76     0%   9-301
rag_factory/strategies/indexing/__init__.py                            6      0   100%
rag_factory/strategies/indexing/context_aware.py                     108     88    19%   31, 43, 63-134, 155-156, 160-170, 182-188, 192-198, 208-237, 241-242
rag_factory/strategies/indexing/hierarchical.py                       90     73    19%   50, 63, 88-134, 156-185, 201-236, 253-278, 292-293
rag_factory/strategies/indexing/in_memory.py                          41     25    39%   54, 65, 93-121, 143, 160, 173, 194-200
rag_factory/strategies/indexing/keyword_indexing.py                   42     31    26%   42, 53, 77-157
rag_factory/strategies/indexing/knowledge_graph_indexing.py           46     33    28%   18, 27, 48-89, 108-129
rag_factory/strategies/indexing/vector_embedding.py                   98     85    13%   25, 35, 55-116, 137-221
rag_factory/strategies/knowledge_graph/__init__.py                     4      4     0%   8-19
rag_factory/strategies/knowledge_graph/config.py                      21     21     0%   8-129
rag_factory/strategies/knowledge_graph/entity_extractor.py            70     70     0%   7-205
rag_factory/strategies/knowledge_graph/graph_store.py                 31     31     0%   8-124
rag_factory/strategies/knowledge_graph/hybrid_retriever.py            56     56     0%   8-164
rag_factory/strategies/knowledge_graph/memory_graph_store.py          97     97     0%   8-196
rag_factory/strategies/knowledge_graph/models.py                      53     53     0%   8-122
rag_factory/strategies/knowledge_graph/relationship_extractor.py      62     62     0%   8-189
rag_factory/strategies/knowledge_graph/strategy.py                    80     80     0%   8-256
rag_factory/strategies/late_chunking/__init__.py                       6      0   100%
rag_factory/strategies/late_chunking/coherence_analyzer.py            27     17    37%   20-21, 36-45, 57-65, 82-96
rag_factory/strategies/late_chunking/document_embedder.py            104     89    14%   29-74, 94-184, 202-215, 227-235, 256-279, 296-303, 318
rag_factory/strategies/late_chunking/embedding_chunker.py            117    102    13%   26, 41-61, 68-98, 105-155, 162-182, 191-192, 199-254, 265-289, 293-300
rag_factory/strategies/late_chunking/models.py                        62      0   100%
rag_factory/strategies/late_chunking/strategy.py                      70     46    34%   48-69, 77, 88, 107-122, 140-177, 196-205, 210, 215
rag_factory/strategies/multi_query/__init__.py                         7      7     0%   8-19
rag_factory/strategies/multi_query/config.py                          36     36     0%   3-138
rag_factory/strategies/multi_query/deduplicator.py                    87     87     0%   3-197
rag_factory/strategies/multi_query/parallel_executor.py               52     52     0%   3-163
rag_factory/strategies/multi_query/prompts.py                         10     10     0%   3-84
rag_factory/strategies/multi_query/ranker.py                          80     80     0%   3-201
rag_factory/strategies/multi_query/strategy.py                        68     68     0%   3-184
rag_factory/strategies/multi_query/variant_generator.py               62     62     0%   3-187
rag_factory/strategies/query_expansion/__init__.py                     8      0   100%
rag_factory/strategies/query_expansion/base.py                        66     10    85%   90, 103, 114-118, 130-133
rag_factory/strategies/query_expansion/cache.py                       52     40    23%   20-22, 38-55, 64-66, 70-73, 81-97, 105-112
rag_factory/strategies/query_expansion/expander_service.py            92     71    23%   36-40, 55-58, 75-148, 159-180, 204-215, 233-234, 242-246, 254, 265-273, 283-284
rag_factory/strategies/query_expansion/hyde_expander.py               19     12    37%   25-27, 41-65
rag_factory/strategies/query_expansion/llm_expander.py                25     16    36%   23-25, 39-71, 99
rag_factory/strategies/query_expansion/metrics.py                     66     30    55%   44-45, 53-57, 76-109, 130, 134, 146-152, 160
rag_factory/strategies/query_expansion/prompts.py                     13      7    46%   16, 28-56, 68-107
rag_factory/strategies/reranking/__init__.py                           7      0   100%
rag_factory/strategies/reranking/base.py                              68     16    76%   81, 101, 106, 110-119, 123-130
rag_factory/strategies/reranking/bge_reranker.py                      51     37    27%   14, 53-81, 103-147, 151
rag_factory/strategies/reranking/cache.py                             48     34    29%   32-34, 51-66, 76-77, 81, 90-101, 110-113, 121, 136-138
rag_factory/strategies/reranking/cohere_reranker.py                   34     20    41%   15-16, 55-71, 94-115, 119
rag_factory/strategies/reranking/cosine_reranker.py                   62     47    24%   54-72, 97-139, 158-171, 188, 209-215, 227-230, 242-245, 249
rag_factory/strategies/reranking/cross_encoder_reranker.py            40     27    32%   13-14, 53-76, 98-120, 124
rag_factory/strategies/reranking/metrics.py                           67     67     0%   8-264
rag_factory/strategies/reranking/reranker_service.py                 115     88    23%   56-67, 71-96, 113-225, 235-255, 269, 282-283, 287-292, 296-300, 308-310
rag_factory/strategies/retrieval/__init__.py                           6      0   100%
rag_factory/strategies/retrieval/hybrid_retriever.py                  51     37    27%   32, 39, 51-102, 110-144
rag_factory/strategies/retrieval/keyword_retriever.py                 56     41    27%   41, 52, 71-113, 126-133, 153-172
rag_factory/strategies/retrieval/knowledge_graph_retriever.py         22      9    59%   19, 27, 48-70
rag_factory/strategies/retrieval/multi_query_retriever.py             22      9    59%   19, 26, 44-66
rag_factory/strategies/retrieval/query_expansion_retriever.py         24      9    62%   20, 27, 45-67
rag_factory/strategies/retrieval/semantic_retriever.py                23     12    48%   23, 32, 61-94
rag_factory/strategies/self_reflective/__init__.py                     6      0   100%
rag_factory/strategies/self_reflective/config.py                      20      8    60%   29-42
rag_factory/strategies/self_reflective/grader.py                      80     65    19%   29-35, 51-67, 83-109, 135-171, 187-258, 266
rag_factory/strategies/self_reflective/models.py                      48      0   100%
rag_factory/strategies/self_reflective/refiner.py                     69     56    19%   28-30, 53-96, 113-143, 161-193, 208-228
rag_factory/strategies/self_reflective/strategy.py                    92     74    20%   38-53, 71-181, 192-206, 229-259, 264, 269
rag_factory/utils/__init__.py                                          3      0   100%
rag_factory/utils/token_counter.py                                    45     30    33%   36-40, 52-62, 74-82, 86, 90, 105-106, 124-135, 153-158
rag_factory/utils/tokenization.py                                     95     73    23%   36-40, 53-64, 87-114, 126-129, 141-144, 156, 175-190, 209-228, 241-243, 251-252, 270-271, 292-293, 314-315
------------------------------------------------------------------------------------------------
TOTAL                                                              13429  10778    20%
=========================== short test summary info ============================
FAILED tests/unit/registry/test_service_factory.py::TestLLMServiceCreation::test_create_llm_service_openai - AssertionError: assert <rag_factory.services.llm.service.LLMService object at 0x7a6006ec3a10> is <Mock name='OpenAILLMService()' id='134552847700224'>
FAILED tests/unit/registry/test_service_factory.py::TestLLMServiceCreation::test_create_llm_service_lm_studio - Failed: DID NOT RAISE <class 'rag_factory.registry.exceptions.ServiceInstantiationError'>
FAILED tests/unit/registry/test_service_factory.py::TestLLMServiceCreation::test_create_llm_service_with_defaults - Failed: DID NOT RAISE <class 'rag_factory.registry.exceptions.ServiceInstantiationError'>
=================== 3 failed, 23 passed, 8 warnings in 7.67s ===================

[127/206] PASSED: tests/unit/registry/test_service_registry.py
  Tests: 26 (P:26 F:0 S:0)
[128/206] PASSED: tests/unit/registry/test_threading.py
  Tests: 9 (P:9 F:0 S:0)
[129/206] PASSED: tests/unit/repositories/test_chunk_repository.py
  Tests: 32 (P:32 F:0 S:0)
[130/206] PASSED: tests/unit/repositories/test_document_repository.py
  Tests: 25 (P:25 F:0 S:0)
[131/206] PASSED: tests/unit/repositories/test_exceptions.py
  Tests: 12 (P:12 F:0 S:0)
[132/206] PASSED: tests/unit/services/database/test_database_context_crud.py
  Tests: 15 (P:15 F:0 S:0)
[133/206] PASSED: tests/unit/services/database/test_database_context.py
  Tests: 11 (P:11 F:0 S:0)
[134/206] PASSED: tests/unit/services/database/test_database_context_vector.py
  Tests: 8 (P:2 F:0 S:6)
[135/206] FAILED: tests/unit/services/database/test_migration_validator.py
  Tests: 29 (P:17 F:12 S:0)
----------------------------------------
============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.1, pluggy-1.6.0 -- /mnt/MCPProyects/ragTools/venv/bin/python3
cachedir: .pytest_cache
rootdir: /mnt/MCPProyects/ragTools
configfile: pytest.ini (WARNING: ignoring pytest config in pyproject.toml!)
plugins: anyio-4.12.0, cov-7.0.0, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 23 items

tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_init_with_config_path PASSED [  4%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_init_without_config_path PASSED [  8%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_find_alembic_config_success PASSED [ 13%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_find_alembic_config_not_found PASSED [ 17%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_validate_all_migrations_applied FAILED [ 21%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_validate_missing_migrations FAILED [ 26%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_validate_no_migrations_applied PASSED [ 30%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_validate_or_raise_success FAILED [ 34%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_validate_or_raise_failure FAILED [ 39%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_build_error_message PASSED [ 43%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_build_error_message_empty PASSED [ 47%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_get_current_revision_success FAILED [ 52%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_get_current_revision_no_table PASSED [ 56%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_get_current_revision_programming_error PASSED [ 60%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_get_applied_revisions PASSED [ 65%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_get_current_revision_public_method PASSED [ 69%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_get_all_revisions PASSED [ 73%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_get_all_revisions_no_head PASSED [ 78%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_is_at_head_true PASSED [ 82%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_is_at_head_false PASSED [ 86%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_is_at_head_no_migrations PASSED [ 91%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_migration_validation_error_attributes PASSED [ 95%]
tests/unit/services/database/test_migration_validator.py::TestMigrationValidatorIntegration::test_full_validation_workflow FAILED [100%]

=================================== FAILURES ===================================
_________ TestMigrationValidator.test_validate_all_migrations_applied __________
tests/unit/services/database/test_migration_validator.py:150: in test_validate_all_migrations_applied
    assert is_valid is True
E   assert False is True
___________ TestMigrationValidator.test_validate_missing_migrations ____________
tests/unit/services/database/test_migration_validator.py:161: in test_validate_missing_migrations
    assert missing == ["002"]
E   AssertionError: assert ['001', '002'] == ['002']
E     
E     At index 0 diff: '001' != '002'
E     Left contains one more item: '002'
E     
E     Full diff:
E       [
E     +     '001',
E           '002',
E       ]
____________ TestMigrationValidator.test_validate_or_raise_success _____________
tests/unit/services/database/test_migration_validator.py:176: in test_validate_or_raise_success
    validator.validate_or_raise(["001", "002"])
rag_factory/services/database/migration_validator.py:152: in validate_or_raise
    raise MigrationValidationError(error_msg, missing)
E   rag_factory.services.database.migration_validator.MigrationValidationError: Required database migrations are not applied:
E   
E   Missing revisions:
E     - 001: Initial schema
E     - 002: Add hierarchy support
E   
E   To apply missing migrations, run:
E     alembic upgrade 002
E   
E   Or to apply all migrations:
E     alembic upgrade head
____________ TestMigrationValidator.test_validate_or_raise_failure _____________
tests/unit/services/database/test_migration_validator.py:185: in test_validate_or_raise_failure
    assert exc_info.value.missing_revisions == ["002"]
E   AssertionError: assert ['001', '002'] == ['002']
E     
E     At index 0 diff: '001' != '002'
E     Left contains one more item: '002'
E     
E     Full diff:
E       [
E     +     '001',
E           '002',
E       ]
___________ TestMigrationValidator.test_get_current_revision_success ___________
tests/unit/services/database/test_migration_validator.py:219: in test_get_current_revision_success
    revision = validator._get_current_revision()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
rag_factory/services/database/migration_validator.py:216: in _get_current_revision
    return heads[0] if heads else None
           ^^^^^^^^
E   TypeError: 'Mock' object is not subscriptable
_______ TestMigrationValidatorIntegration.test_full_validation_workflow ________
tests/unit/services/database/test_migration_validator.py:358: in test_full_validation_workflow
    is_valid, missing = validator.validate(["001", "002"])
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
rag_factory/services/database/migration_validator.py:125: in validate
    for head in current_heads:
E   TypeError: 'Mock' object is not iterable
=============================== warnings summary ===============================
rag_factory/services/llm/config.py:8
  /mnt/MCPProyects/ragTools/rag_factory/services/llm/config.py:8: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class LLMServiceConfig(BaseModel):

rag_factory/database/config.py:12
  /mnt/MCPProyects/ragTools/rag_factory/database/config.py:12: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DatabaseConfig(BaseSettings):

rag_factory/strategies/agentic/config.py:9
  /mnt/MCPProyects/ragTools/rag_factory/strategies/agentic/config.py:9: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class AgenticStrategyConfig(BaseModel):

rag_factory/strategies/late_chunking/models.py:21
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:21: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class TokenEmbedding(BaseModel):

rag_factory/strategies/late_chunking/models.py:34
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:34: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DocumentEmbedding(BaseModel):

rag_factory/strategies/late_chunking/models.py:49
  /mnt/MCPProyects/ragTools/rag_factory/strategies/late_chunking/models.py:49: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class EmbeddingChunk(BaseModel):

rag_factory/strategies/contextual/config.py:31
  /mnt/MCPProyects/ragTools/rag_factory/strategies/contextual/config.py:31: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ContextualRetrievalConfig(BaseModel):

rag_factory/strategies/fine_tuned/config.py:6
  /mnt/MCPProyects/ragTools/rag_factory/strategies/fine_tuned/config.py:6: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class FineTunedConfig(BaseSettings):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.3-final-0 ________________

Name                                                               Stmts   Miss  Cover   Missing
------------------------------------------------------------------------------------------------
rag_factory/__init__.py                                                7      2    71%   18-19
rag_factory/__version__.py                                             1      0   100%
rag_factory/cli/__init__.py                                            2      0   100%
rag_factory/cli/commands/__init__.py                                   1      0   100%
rag_factory/cli/commands/benchmark.py                                 96     81    16%   40-53, 64-84, 148-263
rag_factory/cli/commands/check_consistency.py                         43     33    23%   64-120
rag_factory/cli/commands/config.py                                    78     68    13%   26-64, 102-188
rag_factory/cli/commands/gui.py                                       25     17    32%   61-91
rag_factory/cli/commands/index.py                                     65     52    20%   29-39, 93-185
rag_factory/cli/commands/query.py                                     47     36    23%   73-149
rag_factory/cli/commands/repl.py                                     152    130    14%   29-56, 63-108, 112-120, 124-133, 137-155, 159-172, 176-186, 190-207, 211-220, 253-260
rag_factory/cli/commands/strategies.py                                45     36    20%   48-120
rag_factory/cli/commands/validate_e2e.py                              91     69    24%   37-38, 42-142, 145-156
rag_factory/cli/commands/validate_pipeline.py                         70     57    19%   57-156
rag_factory/cli/formatters/__init__.py                                 4      0   100%
rag_factory/cli/formatters/consistency.py                             61     55    10%   21-69, 79-103, 108-138
rag_factory/cli/formatters/output.py                                  20      9    55%   23-24, 43-44, 63-64, 74, 79, 84
rag_factory/cli/formatters/results.py                                 71     62    13%   28-55, 72-99, 116-144, 157-181
rag_factory/cli/formatters/validation.py                              63     53    16%   25-43, 48-56, 65-77, 86-98, 103-129, 134-137
rag_factory/cli/main.py                                               32     10    69%   25-28, 48-49, 79-81, 85
rag_factory/cli/utils/__init__.py                                      3      0   100%
rag_factory/cli/utils/progress.py                                     14      8    43%   34-47, 73-76
rag_factory/cli/utils/validation.py                                   53     42    21%   30-41, 57-77, 93-118, 135
rag_factory/config/__init__.py                                         4      0   100%
rag_factory/config/env_resolver.py                                    52     37    29%   47-54, 70-90, 110, 129-147
rag_factory/config/schemas/__init__.py                                 2      0   100%
rag_factory/config/schemas/version.py                                 10      6    40%   29-38
rag_factory/config/strategy_loader.py                                 54     36    33%   32-41, 45-60, 75-89, 101-104
rag_factory/config/strategy_pair_manager.py                          105     83    21%   40-72, 92-132, 148-198, 210-215, 229, 259-282
rag_factory/config/validator.py                                       93     76    18%   27-30, 34-39, 53-58, 62-74, 111-132, 177-198, 215-235, 247-249, 271-295, 333-354
rag_factory/core/__init__.py                                           4      4     0%   7-23
rag_factory/core/capabilities.py                                      61     16    74%   129, 155, 173-174, 239-253
rag_factory/core/indexing_interface.py                                54     35    35%   55-57, 118-123, 144, 164, 208, 260, 272, 292-313, 341-364
rag_factory/core/pipeline.py                                          49     35    29%   22-24, 33-40, 55-77, 95-96, 105-108, 117-120, 137-146
rag_factory/core/retrieval_interface.py                               38     20    47%   56-58, 112-117, 138, 158, 196, 247, 259, 285-309
rag_factory/database/__init__.py                                       4      0   100%
rag_factory/database/config.py                                        17      0   100%
rag_factory/database/connection.py                                    80     54    32%   40-48, 61-86, 96, 107, 126-137, 150-157, 165-170, 178-183, 196-197, 209-214, 218, 222
rag_factory/database/env_validator.py                                 38     38     0%   7-139
rag_factory/database/models.py                                        85     32    62%   31-34, 37-45, 48-54, 66-69, 72-77, 80-85, 181, 323-325
rag_factory/database/vector_indexing.py                               38     38     0%   7-114
rag_factory/evaluation/__init__.py                                     4      4     0%   29-41
rag_factory/evaluation/analysis/__init__.py                            3      3     0%   8-11
rag_factory/evaluation/analysis/comparison.py                        135    135     0%   8-323
rag_factory/evaluation/analysis/statistics.py                         81     81     0%   8-320
rag_factory/evaluation/benchmarks/__init__.py                          3      3     0%   8-14
rag_factory/evaluation/benchmarks/config.py                           25     25     0%   7-64
rag_factory/evaluation/benchmarks/runner.py                          155    155     0%   8-423
rag_factory/evaluation/datasets/__init__.py                            3      3     0%   8-14
rag_factory/evaluation/datasets/loader.py                             88     88     0%   8-281
rag_factory/evaluation/datasets/schema.py                             52     52     0%   8-160
rag_factory/evaluation/datasets/statistics.py                         65     65     0%   8-226
rag_factory/evaluation/exporters/__init__.py                           4      4     0%   8-12
rag_factory/evaluation/exporters/csv_exporter.py                      52     52     0%   3-124
rag_factory/evaluation/exporters/html_exporter.py                     47     47     0%   3-293
rag_factory/evaluation/exporters/json_exporter.py                     19     19     0%   3-68
rag_factory/evaluation/metrics/__init__.py                             3      3     0%   12-25
rag_factory/evaluation/metrics/base.py                                31     31     0%   8-115
rag_factory/evaluation/metrics/cost.py                                65     65     0%   8-313
rag_factory/evaluation/metrics/performance.py                         42     42     0%   8-202
rag_factory/evaluation/metrics/quality.py                             84     84     0%   8-377
rag_factory/evaluation/metrics/retrieval.py                           77     77     0%   9-401
rag_factory/exceptions.py                                             13      0   100%
rag_factory/factory.py                                               187    137    27%   109-116, 144, 165-170, 202-230, 256-270, 300-324, 347-348, 365, 384, 401, 418, 435, 451-460, 480-502, 528-545, 568-611, 644-699, 703-715
rag_factory/gui/__init__.py                                            2      0   100%
rag_factory/gui/components/__init__.py                                 3      0   100%
rag_factory/gui/components/scrolled_text.py                           64     52    19%   53-62, 80-114, 122, 131-142, 151-164, 168, 176, 184-199
rag_factory/gui/components/status_bar.py                              62     49    21%   40-59, 64-113, 122-137, 146-152, 161, 168, 172-184, 192-196
rag_factory/gui/main_window.py                                       701    640     9%   64-109, 113-128, 137-164, 168-194, 205-263, 268-293, 297-321, 330-390, 398-422, 435-469, 482-500, 513-551, 564-602, 615-673, 686-690, 694-732, 736-738, 746-789, 806-817, 826-858, 862-879, 885-895, 899-970, 974-1062, 1072-1074, 1082-1084, 1088-1164, 1177-1234, 1244-1246, 1254-1258, 1262-1319, 1324-1371, 1375-1394, 1398, 1411-1487, 1491-1549, 1554-1571, 1575-1582, 1587-1600, 1605-1614, 1618
rag_factory/gui/utils/__init__.py                                      3      0   100%
rag_factory/gui/utils/formatters.py                                   57     49    14%   27-30, 50-90, 110-118, 134-137, 155-165
rag_factory/gui/utils/threading.py                                    32     25    22%   44-73, 96-99, 124-129
rag_factory/legacy_config.py                                         155    155     0%   22-542
rag_factory/models/__init__.py                                         6      6     0%   3-14
rag_factory/models/embedding/__init__.py                               4      4     0%   3-12
rag_factory/models/embedding/loader.py                               179    179     0%   3-367
rag_factory/models/embedding/models.py                                47     47     0%   3-106
rag_factory/models/embedding/registry.py                             128    128     0%   3-282
rag_factory/models/evaluation/__init__.py                              3      3     0%   3-6
rag_factory/models/evaluation/ab_testing.py                           98     98     0%   3-281
rag_factory/models/evaluation/models.py                               29     29     0%   3-74
rag_factory/observability/__init__.py                                  3      3     0%   3-10
rag_factory/observability/integrations/__init__.py                     1      1     0%   3
rag_factory/observability/integrations/prometheus.py                  47     47     0%   3-229
rag_factory/observability/logging/__init__.py                          2      2     0%   3-5
rag_factory/observability/logging/config.py                           16     16     0%   3-37
rag_factory/observability/logging/filters.py                          41     41     0%   3-103
rag_factory/observability/logging/logger.py                           86     86     0%   3-396
rag_factory/observability/metrics/__init__.py                          2      2     0%   3-9
rag_factory/observability/metrics/collector.py                       143    143     0%   3-459
rag_factory/observability/metrics/cost.py                             39     39     0%   3-221
rag_factory/observability/metrics/performance.py                      64     64     0%   3-196
rag_factory/observability/monitoring/__init__.py                       1      1     0%   3
rag_factory/observability/monitoring/api.py                          101    101     0%   3-328
rag_factory/pipeline.py                                              156    156     0%   34-507
rag_factory/registry/__init__.py                                       4      0   100%
rag_factory/registry/exceptions.py                                     6      0   100%
rag_factory/registry/service_factory.py                               84     69    18%   45-54, 62-65, 70-73, 78-80, 84-86, 95-127, 136-165, 176-215, 229-255
rag_factory/registry/service_registry.py                              91     71    22%   43-51, 55-85, 103-156, 164, 178-203, 210-223, 227, 231-232
rag_factory/repositories/__init__.py                                   5      0   100%
rag_factory/repositories/base.py                                      42     21    50%   38, 53, 70, 87, 103, 114-118, 125, 136-139, 159-164
rag_factory/repositories/chunk.py                                    206    180    13%   40-45, 68-76, 90-95, 120-133, 155-171, 187-202, 221-231, 250-261, 287-328, 355-396, 422-474, 489-499, 513-521, 537-543, 557-563, 577-587, 604-626, 639-670
rag_factory/repositories/document.py                                  93     74    20%   41-46, 63-68, 98-118, 140-156, 172-187, 206, 223-233, 247-255, 272-279, 290-293, 307-312
rag_factory/repositories/exceptions.py                                18      7    61%   34-36, 56-59
rag_factory/services/__init__.py                                       4      0   100%
rag_factory/services/api/__init__.py                                   4      4     0%   7-11
rag_factory/services/api/anthropic.py                                 27     27     0%   7-141
rag_factory/services/api/cohere.py                                    30     30     0%   7-113
rag_factory/services/api/openai.py                                    46     46     0%   7-235
rag_factory/services/consistency.py                                   32     24    25%   80-113, 144-170
rag_factory/services/database/__init__.py                              5      0   100%
rag_factory/services/database/database_context.py                    181    159    12%   58-64, 88-106, 123, 140-150, 179-200, 223-240, 256-266, 305-330, 338-339, 343-406, 414-415, 430-510, 516-517, 521-546
rag_factory/services/database/migration_validator.py                  96      9    91%   85, 113, 119, 126-131, 179-181
rag_factory/services/database/neo4j.py                                54     38    30%   15-17, 60-71, 79-84, 103-114, 134-150, 172-181, 188-191, 195, 199
rag_factory/services/database/postgres.py                            195    163    16%   17-18, 26-27, 84-121, 131-145, 149-201, 214-269, 292-346, 360-375, 390-414, 425-440, 472-490, 504-527, 532, 543, 580-598, 607-619, 623, 627
rag_factory/services/dependencies.py                                  41     21    49%   96-109, 134-140, 176-180
rag_factory/services/embedding/__init__.py                             4      0   100%
rag_factory/services/embedding/base.py                                31      6    81%   44, 59, 68, 77, 86, 98
rag_factory/services/embedding/cache.py                               43     33    23%   26-32, 43-58, 67-76, 80-82, 90-94
rag_factory/services/embedding/config.py                              29     13    55%   37-43, 50-68, 80
rag_factory/services/embedding/providers/__init__.py                   5      0   100%
rag_factory/services/embedding/providers/cohere.py                    53     36    32%   10-20, 55-75, 90-117, 125, 133, 141, 152-153
rag_factory/services/embedding/providers/local.py                     43     27    37%   8-9, 46-67, 83-109, 117, 125, 133, 146
rag_factory/services/embedding/providers/onnx_local.py               114     93    18%   18-19, 87-177, 193-250, 261-308, 319, 327, 335, 348
rag_factory/services/embedding/providers/openai.py                    51     34    33%   10-20, 53-72, 87-108, 116, 124, 132, 143-144
rag_factory/services/embedding/rate_limiter.py                        20     14    30%   27-37, 45-53
rag_factory/services/embedding/service.py                            100     83    17%   50-62, 79-93, 117-198, 220-222, 233-239, 248-266, 273-275
rag_factory/services/interfaces.py                                    35      0   100%
rag_factory/services/llm/__init__.py                                   5      0   100%
rag_factory/services/llm/base.py                                      43      0   100%
rag_factory/services/llm/config.py                                    23     11    52%   42-57
rag_factory/services/llm/prompt_template.py                           43     24    44%   47-82, 97-100, 111-115
rag_factory/services/llm/providers/__init__.py                        12     12     0%   5-22
rag_factory/services/llm/providers/anthropic.py                       57     57     0%   3-205
rag_factory/services/llm/providers/ollama.py                          55     55     0%   3-196
rag_factory/services/llm/providers/openai.py                          57     57     0%   3-210
rag_factory/services/llm/service.py                                   66     51    23%   32-39, 56-70, 93-129, 154-175, 186, 194-198, 215-216
rag_factory/services/llm/token_counter.py                             27     27     0%   3-72
rag_factory/services/local/__init__.py                                 2      2     0%   7-9
rag_factory/services/local/reranker.py                                32     32     0%   7-116
rag_factory/services/onnx/__init__.py                                  2      2     0%   7-9
rag_factory/services/onnx/embedding.py                                29     29     0%   7-129
rag_factory/services/utils/__init__.py                                 2      0   100%
rag_factory/services/utils/model_converter.py                        104    104     0%   8-291
rag_factory/services/utils/onnx_utils.py                             133    114    14%   22-23, 36-37, 67-123, 142-146, 172-218, 240-274, 291-312, 332-347, 360-378, 392-404
rag_factory/services/utils/reranker_selector.py                       68     68     0%   8-249
rag_factory/strategies/__init__.py                                     2      0   100%
rag_factory/strategies/agentic/__init__.py                             7      0   100%
rag_factory/strategies/agentic/agent.py                              151    130    14%   31-36, 45, 57, 66-90, 109-111, 123-161, 190-214, 230-265, 276-293, 310-331, 339-346, 357-368, 381-420
rag_factory/strategies/agentic/config.py                              12      0   100%
rag_factory/strategies/agentic/frameworks/__init__.py                  1      1     0%   9
rag_factory/strategies/agentic/query_analyzer.py                      89     65    27%   50-55, 67, 79-90, 109-125, 137-147, 159-178, 196-214, 225-260, 278
rag_factory/strategies/agentic/strategy.py                            87     60    31%   50-63, 76, 84, 94-132, 144, 156, 169, 182-222, 234-258, 267, 276, 284
rag_factory/strategies/agentic/tool_implementations.py               135     91    33%   36-37, 41, 45, 52, 86-129, 148-149, 153, 157, 164, 182-247, 266-267, 271, 275, 282, 329-373, 392-393, 397, 401, 407, 446-511
rag_factory/strategies/agentic/tools.py                               40      9    78%   66, 79, 89, 101, 112, 139-142
rag_factory/strategies/auto_register.py                               66     20    70%   13-14, 18-19, 23-24, 28-29, 33-34, 39-40, 46-47, 52-53, 58-59, 79-80
rag_factory/strategies/base.py                                        55     13    76%   80-85, 169-178
rag_factory/strategies/chunking/__init__.py                           15     15     0%   28-67
rag_factory/strategies/chunking/base.py                               91     91     0%   3-256
rag_factory/strategies/chunking/docling_chunker.py                    45     45     0%   13-188
rag_factory/strategies/chunking/fixed_size_chunker.py                 74     74     0%   3-204
rag_factory/strategies/chunking/hybrid_chunker.py                     70     70     0%   3-192
rag_factory/strategies/chunking/semantic_chunker.py                  195    195     0%   3-534
rag_factory/strategies/chunking/structural_chunker.py                147    147     0%   3-425
rag_factory/strategies/chunking/utils.py                              89     89     0%   3-264
rag_factory/strategies/contextual/__init__.py                          7      0   100%
rag_factory/strategies/contextual/batch_processor.py                  91     76    16%   41-43, 60-72, 84-90, 108-128, 145-161, 178-201, 218-266
rag_factory/strategies/contextual/config.py                           46      0   100%
rag_factory/strategies/contextual/context_generator.py                84     70    17%   35-36, 59-99, 112-135, 152-194, 209, 224-234
rag_factory/strategies/contextual/cost_tracker.py                     32     21    34%   31-35, 48-51, 69-82, 94-99, 111-114, 126
rag_factory/strategies/contextual/prompts.py                          25     17    32%   85-106, 119
rag_factory/strategies/contextual/storage.py                          44     35    20%   32-33, 42-45, 54-81, 98-118
rag_factory/strategies/contextual/strategy.py                         78     49    37%   54-67, 75, 83, 107-156, 173, 186, 207-215, 231-262, 278, 284, 289, 298
rag_factory/strategies/fine_tuned/__init__.py                          4      0   100%
rag_factory/strategies/fine_tuned/ab_testing.py                       78     78     0%   1-134
rag_factory/strategies/fine_tuned/config.py                           11      0   100%
rag_factory/strategies/fine_tuned/custom_loader.py                    40     28    30%   17-19, 36-73, 77, 84-88
rag_factory/strategies/fine_tuned/model_registry.py                  126     96    24%   39-50, 80-112, 132-149, 166-178, 182-196, 200-223, 227-240, 249-270, 274-287, 291-303
rag_factory/strategies/hierarchical/__init__.py                        5      5     0%   8-21
rag_factory/strategies/hierarchical/hierarchy_builder.py              79     79     0%   8-335
rag_factory/strategies/hierarchical/models.py                         58     58     0%   8-137
rag_factory/strategies/hierarchical/parent_retriever.py               89     89     0%   8-278
rag_factory/strategies/hierarchical/strategy.py                       76     76     0%   9-301
rag_factory/strategies/indexing/__init__.py                            6      0   100%
rag_factory/strategies/indexing/context_aware.py                     108     88    19%   31, 43, 63-134, 155-156, 160-170, 182-188, 192-198, 208-237, 241-242
rag_factory/strategies/indexing/hierarchical.py                       90     73    19%   50, 63, 88-134, 156-185, 201-236, 253-278, 292-293
rag_factory/strategies/indexing/in_memory.py                          41     25    39%   54, 65, 93-121, 143, 160, 173, 194-200
rag_factory/strategies/indexing/keyword_indexing.py                   42     31    26%   42, 53, 77-157
rag_factory/strategies/indexing/knowledge_graph_indexing.py           46     33    28%   18, 27, 48-89, 108-129
rag_factory/strategies/indexing/vector_embedding.py                   98     85    13%   25, 35, 55-116, 137-221
rag_factory/strategies/knowledge_graph/__init__.py                     4      4     0%   8-19
rag_factory/strategies/knowledge_graph/config.py                      21     21     0%   8-129
rag_factory/strategies/knowledge_graph/entity_extractor.py            70     70     0%   7-205
rag_factory/strategies/knowledge_graph/graph_store.py                 31     31     0%   8-124
rag_factory/strategies/knowledge_graph/hybrid_retriever.py            56     56     0%   8-164
rag_factory/strategies/knowledge_graph/memory_graph_store.py          97     97     0%   8-196
rag_factory/strategies/knowledge_graph/models.py                      53     53     0%   8-122
rag_factory/strategies/knowledge_graph/relationship_extractor.py      62     62     0%   8-189
rag_factory/strategies/knowledge_graph/strategy.py                    80     80     0%   8-256
rag_factory/strategies/late_chunking/__init__.py                       6      0   100%
rag_factory/strategies/late_chunking/coherence_analyzer.py            27     17    37%   20-21, 36-45, 57-65, 82-96
rag_factory/strategies/late_chunking/document_embedder.py            104     89    14%   29-74, 94-184, 202-215, 227-235, 256-279, 296-303, 318
rag_factory/strategies/late_chunking/embedding_chunker.py            117    102    13%   26, 41-61, 68-98, 105-155, 162-182, 191-192, 199-254, 265-289, 293-300
rag_factory/strategies/late_chunking/models.py                        62      0   100%
rag_factory/strategies/late_chunking/strategy.py                      70     46    34%   48-69, 77, 88, 107-122, 140-177, 196-205, 210, 215
rag_factory/strategies/multi_query/__init__.py                         7      7     0%   8-19
rag_factory/strategies/multi_query/config.py                          36     36     0%   3-138
rag_factory/strategies/multi_query/deduplicator.py                    87     87     0%   3-197
rag_factory/strategies/multi_query/parallel_executor.py               52     52     0%   3-163
rag_factory/strategies/multi_query/prompts.py                         10     10     0%   3-84
rag_factory/strategies/multi_query/ranker.py                          80     80     0%   3-201
rag_factory/strategies/multi_query/strategy.py                        68     68     0%   3-184
rag_factory/strategies/multi_query/variant_generator.py               62     62     0%   3-187
rag_factory/strategies/query_expansion/__init__.py                     8      0   100%
rag_factory/strategies/query_expansion/base.py                        66     10    85%   90, 103, 114-118, 130-133
rag_factory/strategies/query_expansion/cache.py                       52     40    23%   20-22, 38-55, 64-66, 70-73, 81-97, 105-112
rag_factory/strategies/query_expansion/expander_service.py            92     71    23%   36-40, 55-58, 75-148, 159-180, 204-215, 233-234, 242-246, 254, 265-273, 283-284
rag_factory/strategies/query_expansion/hyde_expander.py               19     12    37%   25-27, 41-65
rag_factory/strategies/query_expansion/llm_expander.py                25     16    36%   23-25, 39-71, 99
rag_factory/strategies/query_expansion/metrics.py                     66     30    55%   44-45, 53-57, 76-109, 130, 134, 146-152, 160
rag_factory/strategies/query_expansion/prompts.py                     13      7    46%   16, 28-56, 68-107
rag_factory/strategies/reranking/__init__.py                           7      0   100%
rag_factory/strategies/reranking/base.py                              68     16    76%   81, 101, 106, 110-119, 123-130
rag_factory/strategies/reranking/bge_reranker.py                      51     37    27%   14, 53-81, 103-147, 151
rag_factory/strategies/reranking/cache.py                             48     34    29%   32-34, 51-66, 76-77, 81, 90-101, 110-113, 121, 136-138
rag_factory/strategies/reranking/cohere_reranker.py                   34     20    41%   15-16, 55-71, 94-115, 119
rag_factory/strategies/reranking/cosine_reranker.py                   62     47    24%   54-72, 97-139, 158-171, 188, 209-215, 227-230, 242-245, 249
rag_factory/strategies/reranking/cross_encoder_reranker.py            40     27    32%   13-14, 53-76, 98-120, 124
rag_factory/strategies/reranking/metrics.py                           67     67     0%   8-264
rag_factory/strategies/reranking/reranker_service.py                 115     88    23%   56-67, 71-96, 113-225, 235-255, 269, 282-283, 287-292, 296-300, 308-310
rag_factory/strategies/retrieval/__init__.py                           6      0   100%
rag_factory/strategies/retrieval/hybrid_retriever.py                  51     37    27%   32, 39, 51-102, 110-144
rag_factory/strategies/retrieval/keyword_retriever.py                 56     41    27%   41, 52, 71-113, 126-133, 153-172
rag_factory/strategies/retrieval/knowledge_graph_retriever.py         22      9    59%   19, 27, 48-70
rag_factory/strategies/retrieval/multi_query_retriever.py             22      9    59%   19, 26, 44-66
rag_factory/strategies/retrieval/query_expansion_retriever.py         24      9    62%   20, 27, 45-67
rag_factory/strategies/retrieval/semantic_retriever.py                23     12    48%   23, 32, 61-94
rag_factory/strategies/self_reflective/__init__.py                     6      0   100%
rag_factory/strategies/self_reflective/config.py                      20      8    60%   29-42
rag_factory/strategies/self_reflective/grader.py                      80     65    19%   29-35, 51-67, 83-109, 135-171, 187-258, 266
rag_factory/strategies/self_reflective/models.py                      48      0   100%
rag_factory/strategies/self_reflective/refiner.py                     69     56    19%   28-30, 53-96, 113-143, 161-193, 208-228
rag_factory/strategies/self_reflective/strategy.py                    92     74    20%   38-53, 71-181, 192-206, 229-259, 264, 269
rag_factory/utils/__init__.py                                          3      0   100%
rag_factory/utils/token_counter.py                                    45     30    33%   36-40, 52-62, 74-82, 86, 90, 105-106, 124-135, 153-158
rag_factory/utils/tokenization.py                                     95     73    23%   36-40, 53-64, 87-114, 126-129, 141-144, 156, 175-190, 209-228, 241-243, 251-252, 270-271, 292-293, 314-315
------------------------------------------------------------------------------------------------
TOTAL                                                              13429  10900    19%
=========================== short test summary info ============================
FAILED tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_validate_all_migrations_applied - assert False is True
FAILED tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_validate_missing_migrations - AssertionError: assert ['001', '002'] == ['002']
  
  At index 0 diff: '001' != '002'
  Left contains one more item: '002'
  
  Full diff:
    [
  +     '001',
        '002',
    ]
FAILED tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_validate_or_raise_success - rag_factory.services.database.migration_validator.MigrationValidationError: Required database migrations are not applied:

Missing revisions:
  - 001: Initial schema
  - 002: Add hierarchy support

To apply missing migrations, run:
  alembic upgrade 002

Or to apply all migrations:
  alembic upgrade head
FAILED tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_validate_or_raise_failure - AssertionError: assert ['001', '002'] == ['002']
  
  At index 0 diff: '001' != '002'
  Left contains one more item: '002'
  
  Full diff:
    [
  +     '001',
        '002',
    ]
FAILED tests/unit/services/database/test_migration_validator.py::TestMigrationValidator::test_get_current_revision_success - TypeError: 'Mock' object is not subscriptable
FAILED tests/unit/services/database/test_migration_validator.py::TestMigrationValidatorIntegration::test_full_validation_workflow - TypeError: 'Mock' object is not iterable
=================== 6 failed, 17 passed, 8 warnings in 5.37s ===================

[136/206] PASSED: tests/unit/services/database/test_postgres_service_context.py
  Tests: 17 (P:17 F:0 S:0)
[137/206] PASSED: tests/unit/services/embeddings/test_onnx_local.py
  Tests: 14 (P:14 F:0 S:0)
[138/206] PASSED: tests/unit/services/embedding/test_cache.py
  Tests: 10 (P:10 F:0 S:0)
[139/206] PASSED: tests/unit/services/embedding/test_onnx_local_provider.py
  Tests: 10 (P:10 F:0 S:0)
[140/206] PASSED: tests/unit/services/embedding/test_openai_provider.py
  Tests: 9 (P:9 F:0 S:0)
[141/206] PASSED: tests/unit/services/embedding/test_rate_limiter.py
  Tests: 7 (P:7 F:0 S:0)
[142/206] PASSED: tests/unit/services/embedding/test_service.py
  Tests: 14 (P:14 F:0 S:0)
[143/206] PASSED: tests/unit/services/llm/test_anthropic_provider.py
  Tests: 10 (P:10 F:0 S:0)
[144/206] PASSED: tests/unit/services/llm/test_ollama_provider.py
  Tests: 10 (P:10 F:0 S:0)
[145/206] PASSED: tests/unit/services/llm/test_openai_provider.py
  Tests: 10 (P:10 F:0 S:0)
[146/206] PASSED: tests/unit/services/llm/test_prompt_template.py
  Tests: 13 (P:13 F:0 S:0)
[147/206] PASSED: tests/unit/services/llm/test_service.py
  Tests: 14 (P:14 F:0 S:0)
[148/206] PASSED: tests/unit/services/test_consistency.py
  Tests: 16 (P:16 F:0 S:0)
[149/206] PASSED: tests/unit/services/test_database_service.py
  Tests: 10 (P:10 F:0 S:0)
[150/206] PASSED: tests/unit/services/test_dependencies.py
  Tests: 17 (P:17 F:0 S:0)
[151/206] PASSED: tests/unit/services/test_graph_interface.py
  Tests: 6 (P:6 F:0 S:0)
[152/206] PASSED: tests/unit/services/test_interfaces.py
  Tests: 21 (P:21 F:0 S:0)
[153/206] PASSED: tests/unit/services/test_reranking_interface.py
  Tests: 4 (P:4 F:0 S:0)
[154/206] PASSED: tests/unit/services/utils/test_onnx_utils.py
  Tests: 17 (P:17 F:0 S:0)
[155/206] PASSED: tests/unit/strategies/agentic/test_agent.py
  Tests: 16 (P:16 F:0 S:0)
[156/206] PASSED: tests/unit/strategies/agentic/test_query_analyzer.py
  Tests: 16 (P:16 F:0 S:0)
[157/206] PASSED: tests/unit/strategies/agentic/test_strategy.py
  Tests: 11 (P:11 F:0 S:0)
[158/206] PASSED: tests/unit/strategies/agentic/test_tools.py
  Tests: 11 (P:11 F:0 S:0)
[159/206] PASSED: tests/unit/strategies/chunking/test_docling_chunker.py
  Tests: 6 (P:4 F:0 S:2)
[160/206] PASSED: tests/unit/strategies/chunking/test_fixed_size_chunker.py
  Tests: 13 (P:13 F:0 S:0)
[161/206] PASSED: tests/unit/strategies/chunking/test_hybrid_chunker.py
  Tests: 12 (P:12 F:0 S:0)
[162/206] PASSED: tests/unit/strategies/chunking/test_semantic_chunker.py
  Tests: 14 (P:14 F:0 S:0)
[163/206] PASSED: tests/unit/strategies/chunking/test_structural_chunker.py
  Tests: 15 (P:15 F:0 S:0)
[164/206] PASSED: tests/unit/strategies/contextual/test_batch_processor.py
  Tests: 7 (P:7 F:0 S:0)
[165/206] PASSED: tests/unit/strategies/contextual/test_context_generator.py
  Tests: 9 (P:9 F:0 S:0)
[166/206] PASSED: tests/unit/strategies/contextual/test_cost_tracker.py
  Tests: 9 (P:9 F:0 S:0)
[167/206] PASSED: tests/unit/strategies/contextual/test_storage.py
  Tests: 8 (P:8 F:0 S:0)
[168/206] PASSED: tests/unit/strategies/fine_tuned/test_ab_testing.py
  Tests: 3 (P:3 F:0 S:0)
[169/206] PASSED: tests/unit/strategies/fine_tuned/test_custom_loader.py
  Tests: 3 (P:3 F:0 S:0)
[170/206] PASSED: tests/unit/strategies/fine_tuned/test_model_registry.py
  Tests: 5 (P:5 F:0 S:0)
[171/206] PASSED: tests/unit/strategies/hierarchical/test_hierarchy_builder.py
  Tests: 14 (P:14 F:0 S:0)
[172/206] PASSED: tests/unit/strategies/hierarchical/test_parent_retriever.py
  Tests: 8 (P:8 F:0 S:0)
[173/206] PASSED: tests/unit/strategies/indexing/test_context_aware.py
  Tests: 9 (P:9 F:0 S:0)
[174/206] PASSED: tests/unit/strategies/knowledge_graph/test_entity_extractor.py
  Tests: 6 (P:6 F:0 S:0)
[175/206] PASSED: tests/unit/strategies/knowledge_graph/test_hybrid_retriever.py
  Tests: 7 (P:7 F:0 S:0)
[176/206] PASSED: tests/unit/strategies/knowledge_graph/test_memory_graph_store.py
  Tests: 8 (P:8 F:0 S:0)
[177/206] PASSED: tests/unit/strategies/late_chunking/test_coherence_analyzer.py
  Tests: 7 (P:7 F:0 S:0)
[178/206] PASSED: tests/unit/strategies/late_chunking/test_document_embedder.py
  Tests: 13 (P:13 F:0 S:0)
[179/206] PASSED: tests/unit/strategies/late_chunking/test_embedding_chunker.py
  Tests: 12 (P:12 F:0 S:0)
[180/206] PASSED: tests/unit/strategies/multi_query/test_deduplicator.py
  Tests: 7 (P:7 F:0 S:0)
[181/206] PASSED: tests/unit/strategies/multi_query/test_parallel_executor.py
  Tests: 6 (P:6 F:0 S:0)
[182/206] PASSED: tests/unit/strategies/multi_query/test_ranker.py
  Tests: 7 (P:7 F:0 S:0)
[183/206] PASSED: tests/unit/strategies/multi_query/test_variant_generator.py
  Tests: 7 (P:7 F:0 S:0)
[184/206] PASSED: tests/unit/strategies/query_expansion/test_base.py
  Tests: 13 (P:13 F:0 S:0)
[185/206] PASSED: tests/unit/strategies/query_expansion/test_expander_service.py
  Tests: 15 (P:15 F:0 S:0)
[186/206] PASSED: tests/unit/strategies/query_expansion/test_llm_expander.py
  Tests: 11 (P:11 F:0 S:0)
[187/206] PASSED: tests/unit/strategies/query_expansion/test_prompts.py
  Tests: 12 (P:12 F:0 S:0)
[188/206] PASSED: tests/unit/strategies/reranking/test_base.py
  Tests: 14 (P:14 F:0 S:0)
[189/206] PASSED: tests/unit/strategies/reranking/test_cache.py
  Tests: 13 (P:13 F:0 S:0)
[190/206] PASSED: tests/unit/strategies/reranking/test_cosine_reranker.py
  Tests: 17 (P:17 F:0 S:0)
[191/206] PASSED: tests/unit/strategies/reranking/test_cross_encoder_reranker.py
  Tests: 10 (P:1 F:0 S:9)
[192/206] PASSED: tests/unit/strategies/reranking/test_metrics.py
  Tests: 36 (P:36 F:0 S:0)
[193/206] PASSED: tests/unit/strategies/reranking/test_reranker_selector.py
  Tests: 21 (P:21 F:0 S:0)
[194/206] PASSED: tests/unit/strategies/reranking/test_reranker_service.py
  Tests: 16 (P:16 F:0 S:0)
[195/206] PASSED: tests/unit/strategies/self_reflective/test_grader.py
  Tests: 8 (P:8 F:0 S:0)
[196/206] PASSED: tests/unit/strategies/self_reflective/test_refiner.py
  Tests: 8 (P:8 F:0 S:0)
[197/206] PASSED: tests/unit/strategies/self_reflective/test_strategy.py
  Tests: 8 (P:8 F:0 S:0)
[198/206] PASSED: tests/unit/strategies/test_base.py
  Tests: 16 (P:16 F:0 S:0)
[199/206] PASSED: tests/unit/strategies/test_base_strategy_di.py
  Tests: 10 (P:10 F:0 S:0)
[200/206] PASSED: tests/unit/test_config.py
  Tests: 38 (P:38 F:0 S:0)
[201/206] PASSED: tests/unit/test_factory_di.py
  Tests: 22 (P:22 F:0 S:0)
[202/206] PASSED: tests/unit/test_factory.py
  Tests: 29 (P:29 F:0 S:0)
[203/206] PASSED: tests/unit/test_package.py
  Tests: 12 (P:12 F:0 S:0)
[204/206] PASSED: tests/unit/test_pipeline.py
  Tests: 24 (P:24 F:0 S:0)
[205/206] PASSED: tests/unit/utils/test_token_counter.py
  Tests: 21 (P:21 F:0 S:0)
[206/206] PASSED: tests/unit/utils/test_tokenization.py
  Tests: 25 (P:25 F:0 S:0)
